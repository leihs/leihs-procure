# java_leihs-procure-server env check via asdf v0.13.1
# java_leihs-procure-server env skipped update; touch .tool-versions or remove /var/folders/jl/49spzkdd2v3cdz37fgmp0ddr6cj76v/T/asdf_cache_java_leihs-procure-server to force update
# clojure_leihs-procure-server env check via asdf v0.13.1
# clojure_leihs-procure-server env skipped update; touch .tool-versions or remove /var/folders/jl/49spzkdd2v3cdz37fgmp0ddr6cj76v/T/asdf_cache_clojure_leihs-procure-server to force update
Warning: environ value /Users/mradl/.asdf/installs/java/zulu-11.60.19 for key :java-home has been overwritten with /Users/mradl/.asdf/installs/java/zulu-11.60.19/zulu-11.jdk/Contents/Home
>o> conc concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))
2023-12-04T16:58:46.873Z NX-41294 WARN [leihs.core.release:13] - Failed to read releases.yml, returning bogus value 
2023-12-04T16:58:47.395Z NX-41294 INFO [leihs.core.logging:37] - initializing logging  {:min-level [[#{"leihs.procurement" "leihs.procurement.resources.*" "leihs.procurement.permissions.*" "leihs.procurement.authorization" "leihs.procurement.*"} :debug] [#{"com.zaxxer.hikari.*" "leihs.*"} :info] [#{"*"} :warn]], :log-level nil}
2023-12-04T16:58:47.404Z NX-41294 INFO [leihs.core.logging:39] - initialized logging  {:min-level [[#{"leihs.procurement" "leihs.procurement.resources.*" "leihs.procurement.permissions.*" "leihs.procurement.authorization" "leihs.procurement.*"} :debug] [#{"com.zaxxer.hikari.*" "leihs.*"} :info] [#{"*"} :warn]], :ns-filter #{"*"}, :middleware [], :timestamp-opts {:pattern :iso8601, :locale :jvm-default, :timezone :utc}, :output-fn #object[taoensso.timbre$default_output_fn 0x3634bbfe "taoensso.timbre$default_output_fn@3634bbfe"], :appenders {:println {:enabled? true, :fn #object[taoensso.timbre.appenders.core$println_appender$fn__3459 0x3118fcd5 "taoensso.timbre.appenders.core$println_appender$fn__3459@3118fcd5"]}}, :_init-config {:loaded-from-source :default, :compile-time-config {:min-level nil, :ns-pattern "*"}}, :log-level nil}
2023-12-04T16:58:47.406Z NX-41294 INFO [leihs.procurement.main:50] - main ("--dev-mode" "true" "--repl" "true" "run")
2023-12-04T16:58:47.420Z NX-41294 INFO [leihs.core.repl:62] - init {:dev-mode true, :repl true, :repl-bind "localhost", :repl-port 36007, :repl-port-file ".nrepl-port"}
2023-12-04T16:58:47.424Z NX-41294 INFO [leihs.core.repl:70] - starting nREPL server  36007 localhost
2023-12-04T16:58:47.443Z NX-41294 INFO [leihs.core.repl:75] - started nREPL server 
2023-12-04T16:58:47.447Z NX-41294 INFO [leihs.procurement.run:326] - Invoking run with options:  {:db-host localhost, :db-max-pool-size 16, :db-min-pool-size 2, :db-name leihs_test, :db-password leihs, :db-port 5415, :db-user leihs, :dev-mode true, :http-host localhost, :http-max-threads 8, :http-min-threads 1, :http-port 3230, :http-queue-capacity 640, :http-thread-keep-alive-seconds 10, :http-worker-prefix leihs-service-http-worker-, :pid-file nil, :repl true, :repl-bind localhost, :repl-port 36007, :repl-port-file .nrepl-port}
2023-12-04T16:58:47.448Z NX-41294 INFO [leihs.core.shutdown:20] - PID 76633
2023-12-04T16:58:47.469Z NX-41294 INFO [leihs.core.shutdown:29] - Registering SIGTERM handler for shutdown.
2023-12-04T16:58:47.534Z NX-41294 INFO [leihs.core.graphql:17] - Initialized graphQL schema.
2023-12-04T16:58:47.536Z NX-41294 INFO [leihs.core.db:220] - Initializing db  {:db-name "leihs_test", :db-port 5415, :db-host "localhost", :db-user "leihs", :db-password "leihs", :db-min-pool-size 2, :db-max-pool-size 16}
2023-12-04T16:58:47.543Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:80] - db-pool - Starting...
2023-12-04T16:58:47.617Z NX-41294 INFO [com.zaxxer.hikari.pool.HikariPool:565] - db-pool - Added connection org.postgresql.jdbc.PgConnection@43901d12
2023-12-04T16:58:47.622Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:82] - db-pool - Start completed.
2023-12-04T16:58:47.623Z NX-41294 INFO [leihs.core.db:222] - Initialized db  {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x65f0ec0d "HikariDataSource (db-pool)"]}
2023-12-04T16:58:47.624Z NX-41294 INFO [leihs.core.db:223] - Initializing ds-next  {:db-name "leihs_test", :db-port 5415, :db-host "localhost", :db-user "leihs", :db-password "leihs", :db-min-pool-size 2, :db-max-pool-size 16}
2023-12-04T16:58:47.638Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:110] - HikariPool-1 - Starting...
2023-12-04T16:58:47.648Z NX-41294 INFO [com.zaxxer.hikari.pool.HikariPool:565] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6dd2ed3b
2023-12-04T16:58:47.648Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:123] - HikariPool-1 - Start completed.
2023-12-04T16:58:47.653Z NX-41294 INFO [leihs.core.db:225] - Initialized ds-next  #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde "HikariDataSource (HikariPool-1)"], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff "next.jdbc.result_set$as_unqualified_lower_maps@575723ff"]}}
2023-12-04T16:58:47.661Z NX-41294 INFO [leihs.core.http-server:101] - starting http-server  {:port 3230, :ip "localhost", :pool {:queue #object[java.util.concurrent.ArrayBlockingQueue 0x1ea6495c "[]"], :pool #object[java.util.concurrent.ThreadPoolExecutor 0x5e223df9 "java.util.concurrent.ThreadPoolExecutor@5e223df9[Running, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]"]}}
2023-12-04T16:58:47.672Z NX-41294 INFO [leihs.core.http-server:104] - started http-server 
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44348 0x5d9d63f leihs.core.locale$wrap$fn__44348@5d9d63f]

>> authorize::request > {:authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 38995981-69c6-43d1-9609-a0b3a0cbf3bb}, leihs-user-session {:value efc41baf-3b71-4743-97f7-cdac6c1e7896}}, :remote-addr 127.0.0.1, :start-time 33033183255916, :params {:return-to /procure}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}, :query-params-raw {:return-to /procure}, :route-params nil, :headers {sec-fetch-site none, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, cookie leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896, sec-fetch-user ?1, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x47386192 /127.0.0.1:3230<->/127.0.0.1:57736], :server-port 3230, :params-raw {:return-to /procure}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x65f0ec0d HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /procure}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Fprocure, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x6c0f25c1 compojure.core$routes$fn__27950@6c0f25c1], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in
>myprint>  authEnt? {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}
>myprint>  txn #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.858Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>myprint>  admin false
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.862Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
>myprint>  inspector false
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.866Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
>myprint>  viewer true
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.869Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}
>myprint>  requester false

> 1 anti-csrf-token >  38995981-69c6-43d1-9609-a0b3a0cbf3bb

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
>>> authenticate::skip= nil  handler-key= :procurement
>>> authenticate::authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44348 0x5d9d63f leihs.core.locale$wrap$fn__44348@5d9d63f]

>> authorize::request > {:authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 38995981-69c6-43d1-9609-a0b3a0cbf3bb}, leihs-user-session {:value efc41baf-3b71-4743-97f7-cdac6c1e7896}}, :remote-addr 127.0.0.1, :start-time 33033334537791, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site none, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, cookie leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896, sec-fetch-user ?1, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x2cb73b11 /127.0.0.1:3230<->/127.0.0.1:57736], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x65f0ec0d HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure, :server-name localhost, :handler-key :procurement, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x2270c0f7 leihs.procurement.backend.html$not_found_handler@2270c0f7], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :procurement
>myprint>  authEnt? {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}
>myprint>  txn #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.901Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>myprint>  admin false
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.902Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
>myprint>  inspector false
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.903Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
>myprint>  viewer true
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.903Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}
>myprint>  requester false
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.904Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.905Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.906Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:51.907Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}

> 1 anti-csrf-token >  38995981-69c6-43d1-9609-a0b3a0cbf3bb

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44348 0x5d9d63f leihs.core.locale$wrap$fn__44348@5d9d63f]

>> authorize::request > {:authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 38995981-69c6-43d1-9609-a0b3a0cbf3bb}, leihs-user-session {:value efc41baf-3b71-4743-97f7-cdac6c1e7896}}, :remote-addr 127.0.0.1, :start-time 33033443261833, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896, content-length 502, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure, connection keep-alive, x-csrf-token 38995981-69c6-43d1-9609-a0b3a0cbf3bb, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4559691f /127.0.0.1:3230<->/127.0.0.1:57736], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x65f0ec0d HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x33f8ac3c leihs.procurement.graphql$handler@33f8ac3c], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
>myprint>  authEnt? {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}
>myprint>  txn #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.045Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>myprint>  admin false
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.046Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
>myprint>  inspector false
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.047Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
>myprint>  viewer true
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.047Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}
>myprint>  requester false
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.048Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.049Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.050Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.051Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}

> 1 anti-csrf-token >  38995981-69c6-43d1-9609-a0b3a0cbf3bb

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
pure-handler >> 2
2023-12-04T16:58:52.055Z NX-41294 DEBUG [leihs.procurement.graphql:46] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
>>>1 #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"
2023-12-04T16:58:52.065Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"
>>>2 {:id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :firstname Beat, :lastname Rohrer}
>>oida>> #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"
2023-12-04T16:58:52.069Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>>>3 nil
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.099Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.100Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}

>request-grapql _> request {:leihs-user-language {:name Deutsch, :locale de-CH, :default true, :active true}, :authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 38995981-69c6-43d1-9609-a0b3a0cbf3bb}, leihs-user-session {:value efc41baf-3b71-4743-97f7-cdac6c1e7896}}, :remote-addr 127.0.0.1, :start-time 33033443261833, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896, content-length 502, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure, connection keep-alive, x-csrf-token 38995981-69c6-43d1-9609-a0b3a0cbf3bb, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4559691f /127.0.0.1:3230<->/127.0.0.1:57736], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x65f0ec0d HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x33f8ac3c leihs.procurement.graphql$handler@33f8ac3c], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>request-c-grapql _> request (json) {"leihs-user-language":{"name":"Deutsch","locale":"de-CH","default":true,"active":true},"authenticated-entity":{"email":"beat.rohrer@zhdk.ch","contracts_count":23,"lastname":"Rohrer","org_id":"186835","scope_read":true,"is_admin":false,"authentication-method":"session","login":"brohrer","scope_system_admin_write":false,"scope_write":true,"firstname":"Beat","scope_admin_write":false,"user_session_created_at":"2023-12-04T12:58:08.698616Z","id":"b363936a-fd9c-567a-82a4-f0b523dbb26b","user_session_id":"986ecf8a-0abd-449c-a011-61148bae3225","scope_system_admin_read":false,"access-rights":[{"role":"inventory_manager","inventory_pool_id":"3977012c-ce0e-501f-889b-8715fdb5d83b"},{"role":"customer","inventory_pool_id":"4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"},{"role":"customer","inventory_pool_id":"5863967f-9804-4909-a9b7-92254616d6b2"},{"role":"inventory_manager","inventory_pool_id":"5dd25b58-fa56-5095-bd97-2696d92c2fb1"},{"role":"customer","inventory_pool_id":"77e88ec8-9ff6-5435-818e-dc902fc631a6"},{"role":"customer","inventory_pool_id":"8bd16d45-056d-5590-bc7f-12849f034351"},{"role":"customer","inventory_pool_id":"a02b8163-9a16-5066-b48e-9eb74cf8b791"},{"role":"customer","inventory_pool_id":"fc5a841e-36c6-5dc3-8207-1306c1fb89bf"},{"role":"customer","inventory_pool_id":"ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}],"user_id":"b363936a-fd9c-567a-82a4-f0b523dbb26b","is_system_admin":false,"external_sign_out_url":null,"language_locale":"de-CH","inventory_pool_roles_count":9,"scope_admin_read":false},"cookies":{"leihs-anti-csrf-token":{"value":"38995981-69c6-43d1-9609-a0b3a0cbf3bb"},"leihs-user-session":{"value":"efc41baf-3b71-4743-97f7-cdac6c1e7896"}},"remote-addr":"127.0.0.1","start-time":33033443261833,"params":{},"settings":{"email_sending_enabled":false,"sessions_max_lifetime_secs":432000,"smtp_default_from_address":"noreply@zhdk.ch","public_image_caching_enabled":true,"sessions_force_secure":false,"deliver_received_order_notifications":false,"external_base_url":"http:\/\/localhost:3200","sessions_force_uniqueness":false,"email_signature":"Das ZHdK-Ausleihe-Team"},"query-params-raw":{},"route-params":null,"headers":{"origin":"http:\/\/localhost:3230","sec-fetch-site":"same-origin","sec-ch-ua-mobile":"?0","host":"localhost:3230","user-agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/119.0.0.0 Safari\/537.36","content-type":"application\/json","cookie":"leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896","content-length":"502","sec-ch-ua":"\"Google Chrome\";v=\"119\", \"Chromium\";v=\"119\", \"Not?A_Brand\";v=\"24\"","sec-ch-ua-platform":"\"macOS\"","referer":"http:\/\/localhost:3230\/procure","connection":"keep-alive","x-csrf-token":"38995981-69c6-43d1-9609-a0b3a0cbf3bb","accept":"application\/json","accept-language":"de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7","sec-fetch-dest":"empty","accept-encoding":"gzip, deflate, br","sec-fetch-mode":"cors"},"server-port":3230,"params-raw":{},"content-length":502,"form-params":{},"websocket?":false,"query-params":{},"content-type":"application\/json","form-params-raw":{},"character-encoding":"utf8","uri":"\/procure\/graphql","server-name":"localhost","handler-key":"graphql","query-string":null,"body":{"operationName":"me","variables":{},"query":"query me {\n  current_user {\n    navbarProps\n    user {\n      id\n      firstname\n      lastname\n      permissions {\n        isAdmin\n        isRequester\n        isInspectorForCategories {\n          id\n          __typename\n        }\n        isViewerForCategories {\n          id\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  settings {\n    contact_url\n    __typename\n  }\n}\n"},"multipart-params":{},"scheme":"http","request-method":"post","accept":{"mime":"json","charset":null,"encoding":null,"language":null}}

>request-c-grapql _> query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}


>request-grapql _> result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"38995981-69c6-43d1-9609-a0b3a0cbf3bb","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"b363936a-fd9c-567a-82a4-f0b523dbb26b","firstname":"Beat","lastname":"Rohrer","login":"brohrer","email":"beat.rohrer@zhdk.ch"}},"subApps":{"borrow":true,"admin":false,"procure":false,"manage":[{"name":"IT-Zentrum","href":"/manage/5dd25b58-fa56-5095-bd97-2696d92c2fb1/daily"},{"name":"ITZ-Software","href":"/manage/3977012c-ce0e-501f-889b-8715fdb5d83b/daily"}]},"locales":[{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":true,"isSelected":true},{"name":"English","locale":"en-GB","active":true,"isDefault":false,"isSelected":false},{"name":"Castellano","locale":"es","active":true,"isDefault":false,"isSelected":false},{"name":"Zrittsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id b363936a-fd9c-567a-82a4-f0b523dbb26b] [:firstname Beat] [:lastname Rohrer] [:permissions #ordered/map ([:isAdmin false] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories [#ordered/map ([:id f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1] [:__typename :Category]) #ordered/map ([:id ccab158d-79c7-5c28-a8a2-47cb4925f101] [:__typename :Category]) #ordered/map ([:id 1af3a7f2-b16a-4203-b6ac-f2c7be612d74] [:__typename :Category]) #ordered/map ([:id 4ecc9e97-2d12-5173-bd8c-781482c842e8] [:__typename :Category]) #ordered/map ([:id 80226a51-c17a-5fd8-93db-40aef5b03491] [:__typename :Category]) #ordered/map ([:id fe602c35-1097-52d0-acd0-40579d295f00] [:__typename :Category]) #ordered/map ([:id 56065d53-cd2f-5a39-9b66-532fd83ad2e6] [:__typename :Category]) #ordered/map ([:id fc7bc38c-62f3-5576-802f-c874e06ee776] [:__typename :Category]) #ordered/map ([:id 76fdca98-4a2a-5640-bc98-f33059d6ffa0] [:__typename :Category]) #ordered/map ([:id 77857566-03d9-58f4-8b0d-290227434aff] [:__typename :Category]) #ordered/map ([:id 5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b] [:__typename :Category])]] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url https://intern.zhdk.ch/index.php?id=leihs_bedarfsermittlung] [:__typename :ProcurementSettings])])}
2023-12-04T16:58:52.119Z NX-41294 DEBUG [leihs.procurement.graphql:86] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"38995981-69c6-43d1-9609-a0b3a0cbf3bb\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"b363936a-fd9c-567a-82a4-f0b523dbb26b\",\"firstname\":\"Beat\",\"lastname\":\"Rohrer\",\"login\":\"brohrer\",\"email\":\"beat.rohrer@zhdk.ch\"}},\"subApps\":{\"borrow\":true,\"admin\":false,\"procure\":false,\"manage\":[{\"name\":\"IT-Zentrum\",\"href\":\"/manage/5dd25b58-fa56-5095-bd97-2696d92c2fb1/daily\"},{\"name\":\"ITZ-Software\",\"href\":\"/manage/3977012c-ce0e-501f-889b-8715fdb5d83b/daily\"}]},\"locales\":[{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Castellano\",\"locale\":\"es\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Zrittsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "b363936a-fd9c-567a-82a4-f0b523dbb26b"] [:firstname "Beat"] [:lastname "Rohrer"] [:permissions #ordered/map ([:isAdmin false] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories [#ordered/map ([:id "f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1"] [:__typename :Category]) #ordered/map ([:id "ccab158d-79c7-5c28-a8a2-47cb4925f101"] [:__typename :Category]) #ordered/map ([:id "1af3a7f2-b16a-4203-b6ac-f2c7be612d74"] [:__typename :Category]) #ordered/map ([:id "4ecc9e97-2d12-5173-bd8c-781482c842e8"] [:__typename :Category]) #ordered/map ([:id "80226a51-c17a-5fd8-93db-40aef5b03491"] [:__typename :Category]) #ordered/map ([:id "fe602c35-1097-52d0-acd0-40579d295f00"] [:__typename :Category]) #ordered/map ([:id "56065d53-cd2f-5a39-9b66-532fd83ad2e6"] [:__typename :Category]) #ordered/map ([:id "fc7bc38c-62f3-5576-802f-c874e06ee776"] [:__typename :Category]) #ordered/map ([:id "76fdca98-4a2a-5640-bc98-f33059d6ffa0"] [:__typename :Category]) #ordered/map ([:id "77857566-03d9-58f4-8b0d-290227434aff"] [:__typename :Category]) #ordered/map ([:id "5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b"] [:__typename :Category])]] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url "https://intern.zhdk.ch/index.php?id=leihs_bedarfsermittlung"] [:__typename :ProcurementSettings])])}
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44348 0x5d9d63f leihs.core.locale$wrap$fn__44348@5d9d63f]

>> authorize::request > {:authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 38995981-69c6-43d1-9609-a0b3a0cbf3bb}, leihs-user-session {:value efc41baf-3b71-4743-97f7-cdac6c1e7896}}, :remote-addr 127.0.0.1, :start-time 33033596596791, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896, content-length 502, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 38995981-69c6-43d1-9609-a0b3a0cbf3bb, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x6fab02b3 /127.0.0.1:3230<->/127.0.0.1:57743], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x65f0ec0d HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x33f8ac3c leihs.procurement.graphql$handler@33f8ac3c], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
>myprint>  authEnt? {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}
>myprint>  txn #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.175Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>myprint>  admin false
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.176Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
>myprint>  inspector false
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.177Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
>myprint>  viewer true
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.178Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}
>myprint>  requester false
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.179Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.180Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.181Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.186Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}

> 1 anti-csrf-token >  38995981-69c6-43d1-9609-a0b3a0cbf3bb

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44348 0x5d9d63f leihs.core.locale$wrap$fn__44348@5d9d63f]

>> authorize::request > {:authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 38995981-69c6-43d1-9609-a0b3a0cbf3bb}, leihs-user-session {:value efc41baf-3b71-4743-97f7-cdac6c1e7896}}, :remote-addr 127.0.0.1, :start-time 33033595828250, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896, content-length 4400, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 38995981-69c6-43d1-9609-a0b3a0cbf3bb, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5a2a004f /127.0.0.1:3230<->/127.0.0.1:57736], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x65f0ec0d HikariDataSource (db-pool)]}, :content-length 4400, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestsIndexFiltered, :variables {:inspector_priority [LOW MANDATORY MEDIUM], :onlyOwnRequests false, :state [NEW APPROVED PARTIALLY_APPROVED DENIED], :order_status [NOT_PROCESSED IN_PROGRESS PROCURED ALTERNATIVE_PROCURED NOT_PROCURED], :search , :organizations [5656e676-663c-5402-9809-91f3f72ff4ad], :categories [f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1 1af3a7f2-b16a-4203-b6ac-f2c7be612d74 ccab158d-79c7-5c28-a8a2-47cb4925f101 4ecc9e97-2d12-5173-bd8c-781482c842e8 80226a51-c17a-5fd8-93db-40aef5b03491 fe602c35-1097-52d0-acd0-40579d295f00 56065d53-cd2f-5a39-9b66-532fd83ad2e6 fc7bc38c-62f3-5576-802f-c874e06ee776 76fdca98-4a2a-5640-bc98-f33059d6ffa0 77857566-03d9-58f4-8b0d-290227434aff 5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b], :priority [NORMAL HIGH], :budgetPeriods [1173b482-b9e6-46b4-a5e3-0b021c860e9b]}, :query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x33f8ac3c leihs.procurement.graphql$handler@33f8ac3c], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
>myprint>  authEnt? {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}
>myprint>  txn #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.193Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>myprint>  admin false
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result pure-handler >> 2
#uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.194Z NX-41294 DEBUG [leihs.procurement.graphql:46] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
2023-12-04T16:58:52.194Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
>myprint>  inspector false
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.195Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
>myprint>  viewer true
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>>>1 #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"
2023-12-04T16:58:52.196Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.196Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"
>o> requester?? {:exists false}
>myprint>  requester false
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at 2023-12-04T16:58:52.198Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
#time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44348 0x5d9d63f leihs.core.locale$wrap$fn__44348@5d9d63f]

>> authorize::request > {:authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 38995981-69c6-43d1-9609-a0b3a0cbf3bb}, leihs-user-session {:value efc41baf-3b71-4743-97f7-cdac6c1e7896}}, :remote-addr 127.0.0.1, :start-time 33033596364875, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable >>>2 #object[com.zaxxer.hikari.HikariDataSource >o> admin? {0x1e78acde :exists HikariDataSource (HikariPool-1)]false, }
:options{:id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :firstname Beat, :lastname Rohrer}
>>oida>> #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"
 {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896, content-length 534, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 38995981-69c6-43d1-9609-a0b3a0cbf3bb, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5fb549a9 /127.0.0.1:3230<->/127.0.0.1:57737], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x65f0ec0d HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, >o> inspector?:content-type  application/json, :form-params-raw [{SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result} , :character-encoding utf8, #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b":uri] 
/procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x33f8ac3c leihs.procurement.graphql$handler@33f8ac3c], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
>myprint>  authEnt? {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} 2023-12-04T16:58:52.200Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
{:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"}2023-12-04T16:58:52.200Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
 {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}
>myprint>  txn #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
2023-12-04T16:58:52.201Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>>>3 nil
2023-12-04T16:58:52.201Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>myprint>  admin false
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
2023-12-04T16:58:52.201Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.202Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}
>o> inspector? {:result false}
>myprint>  inspector false
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.203Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]

> 1 anti-csrf-token >  38995981-69c6-43d1-9609-a0b3a0cbf3bb

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
>o> viewer? {:result true}
>myprint>  viewer true
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.204Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}
>myprint>  requester false
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.206Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.208Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.209Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.210Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}

> 1 anti-csrf-token >  38995981-69c6-43d1-9609-a0b3a0cbf3bb

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
pure-handler >> 2
2023-12-04T16:58:52.214Z NX-41294 DEBUG [leihs.procurement.graphql:46] - graphql query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.219Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
pure-handler >> 2
>o> requester?? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.220Z NX-41294 DEBUG [leihs.procurement.graphql:46] - graphql query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
 with variables {:inspector_priority ["LOW" "MANDATORY" "MEDIUM"], :onlyOwnRequests false, :state ["NEW" "APPROVED" "PARTIALLY_APPROVED" "DENIED"], :order_status ["NOT_PROCESSED" "IN_PROGRESS" "PROCURED" "ALTERNATIVE_PROCURED" "NOT_PROCURED"], :search "", :organizations ["5656e676-663c-5402-9809-91f3f72ff4ad"], :categories ["f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1" "1af3a7f2-b16a-4203-b6ac-f2c7be612d74" "ccab158d-79c7-5c28-a8a2-47cb4925f101" "4ecc9e97-2d12-5173-bd8c-781482c842e8" "80226a51-c17a-5fd8-93db-40aef5b03491" "fe602c35-1097-52d0-acd0-40579d295f00" "56065d53-cd2f-5a39-9b66-532fd83ad2e6" "fc7bc38c-62f3-5576-802f-c874e06ee776" "76fdca98-4a2a-5640-bc98-f33059d6ffa0" "77857566-03d9-58f4-8b0d-290227434aff" "5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b"], :priority ["NORMAL" "HIGH"], :budgetPeriods ["1173b482-b9e6-46b4-a5e3-0b021c860e9b"]}
>oo> vars from graphQL-Requst [NOT_PROCESSED IN_PROGRESS PROCURED ALTERNATIVE_PROCURED NOT_PROCURED] [NORMAL HIGH] [LOW MANDATORY MEDIUM] {:inspector_priority [LOW MANDATORY MEDIUM], :onlyOwnRequests false, :state [NEW APPROVED PARTIALLY_APPROVED DENIED], :order_status [NOT_PROCESSED IN_PROGRESS PROCURED ALTERNATIVE_PROCURED NOT_PROCURED], :search , :organizations [5656e676-663c-5402-9809-91f3f72ff4ad], :categories [f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1 1af3a7f2-b16a-4203-b6ac-f2c7be612d74 ccab158d-79c7-5c28-a8a2-47cb4925f101 4ecc9e97-2d12-5173-bd8c-781482c842e8 80226a51-c17a-5fd8-93db-40aef5b03491 fe602c35-1097-52d0-acd0-40579d295f00 56065d53-cd2f-5a39-9b66-532fd83ad2e6 fc7bc38c-62f3-5576-802f-c874e06ee776 76fdca98-4a2a-5640-bc98-f33059d6ffa0 77857566-03d9-58f4-8b0d-290227434aff 5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b], :priority [NORMAL HIGH], :budgetPeriods [1173b482-b9e6-46b4-a5e3-0b021c860e9b]}
2023-12-04T16:58:52.221Z NX-41294 DEBUG [leihs.procurement.permissions.user:163] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> requester?? {:exists false}

>request-grapql _> request {:leihs-user-language {:name Deutsch, :locale de-CH, :default true, :active true}, :authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 38995981-69c6-43d1-9609-a0b3a0cbf3bb}, leihs-user-session {:value efc41baf-3b71-4743-97f7-cdac6c1e7896}}, :remote-addr 127.0.0.1, :start-time 33033596596791, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896, content-length 502, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 38995981-69c6-43d1-9609-a0b3a0cbf3bb, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x6fab02b3 /127.0.0.1:3230<->/127.0.0.1:57743], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x65f0ec0d HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x33f8ac3c leihs.procurement.graphql$handler@33f8ac3c], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
>>>get-dashboard
>>args {:inspector_priority [:LOW :MANDATORY :MEDIUM], :organization_id [5656e676-663c-5402-9809-91f3f72ff4ad], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search , :priority [:NORMAL :HIGH], :budget_period_id [1173b482-b9e6-46b4-a5e3-0b021c860e9b], :category_id [f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1 1af3a7f2-b16a-4203-b6ac-f2c7be612d74 ccab158d-79c7-5c28-a8a2-47cb4925f101 4ecc9e97-2d12-5173-bd8c-781482c842e8 80226a51-c17a-5fd8-93db-40aef5b03491 fe602c35-1097-52d0-acd0-40579d295f00 56065d53-cd2f-5a39-9b66-532fd83ad2e6 fc7bc38c-62f3-5576-802f-c874e06ee776 76fdca98-4a2a-5640-bc98-f33059d6ffa0 77857566-03d9-58f4-8b0d-290227434aff 5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b]}
>>value nil
>>mainCatsSql [SELECT procurement_main_categories.* FROM procurement_main_categories ORDER BY procurement_main_categories.name ASC]
>>ToCheck mainCats [{:id #uuid "519f7a95-9ca7-5256-bf63-142cfc23dc62", :name Audio- und Videotechnik} {:id #uuid "1a047acd-dc98-52c2-99d3-dc6332adc1e0", :name Bauliche Anpassungen und Mobiliar} {:id #uuid "dda588f4-660c-573c-a2ff-944ae93ad42e", :name Beleuchtungstechnik} {:id #uuid "2b07eb8a-4174-5257-83eb-920d536cc44a", :name Betriebseinrichtungen und Fahrzeuge} {:id #uuid "f6827594-33a6-5760-ac41-f94ceefacfab", :name Bhnentechnik} {:id #uuid "517b82ae-2b7e-4822-9aeb-0d4753dec821", :name Darlehen} {:id #uuid "ca1d97ac-0ac4-597a-8edb-f9c466b1c7da", :name Fotografie} {:id #uuid "2ea39047-e663-50d5-9080-838b75883704", :name IT & Elektronik} {:id #uuid "f6885671-3bf3-56f2-8e92-b5112d0f703f", :name Musikinstrumente} {:id #uuid "6c8a0d77-6711-5156-a59a-12425ba01cff", :name Werkstatt-Technik}]
>>queryA1 [SELECT * FROM procurement_budget_periods WHERE procurement_budget_periods.id IN (?) ORDER BY end_date DESC #uuid "1173b482-b9e6-46b4-a5e3-0b021c860e9b"]
>>ToCheck dashboard:::procurement_budget_periods.id [{:id #uuid "1173b482-b9e6-46b4-a5e3-0b021c860e9b", :name 2025, :inspection_start_date #inst "2024-11-04T00:00:00.000000000-00:00", :end_date #inst "2024-12-31T00:00:00.000000000-00:00", :created_at #inst "2018-09-18T04:45:19.530961000-00:00", :updated_at #inst "2018-09-18T04:45:19.530961000-00:00"}]
>>resultA1-2 [{:id #uuid "1173b482-b9e6-46b4-a5e3-0b021c860e9b", :name 2025, :inspection_start_date #inst "2024-11-04T00:00:00.000000000-00:00", :end_date #inst "2024-12-31T00:00:00.000000000-00:00", :created_at #inst "2018-09-18T04:45:19.530961000-00:00", :updated_at #inst "2018-09-18T04:45:19.530961000-00:00"}]
>>requestsB2-triggerError {:inspector_priority [:LOW :MANDATORY :MEDIUM], :organization_id [5656e676-663c-5402-9809-91f3f72ff4ad], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search , :priority [:NORMAL :HIGH], :budget_period_id [1173b482-b9e6-46b4-a5e3-0b021c860e9b], :category_id [f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1 1af3a7f2-b16a-4203-b6ac-f2c7be612d74 ccab158d-79c7-5c28-a8a2-47cb4925f101 4ecc9e97-2d12-5173-bd8c-781482c842e8 80226a51-c17a-5fd8-93db-40aef5b03491 fe602c35-1097-52d0-acd0-40579d295f00 56065d53-cd2f-5a39-9b66-532fd83ad2e6 fc7bc38c-62f3-5576-802f-c874e06ee776 76fdca98-4a2a-5640-bc98-f33059d6ffa0 77857566-03d9-58f4-8b0d-290227434aff 5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b]} nil
>o> helper1

>request-c-grapql _> request (json) {"leihs-user-language":{"name":"Deutsch","locale":"de-CH","default":true,"active":true},"authenticated-entity":{"email":"beat.rohrer@zhdk.ch","contracts_count":23,"lastname":"Rohrer","org_id":"186835","scope_read":true,"is_admin":false,"authentication-method":"session","login":"brohrer","scope_system_admin_write":false,"scope_write":true,"firstname":"Beat","scope_admin_write":false,"user_session_created_at":"2023-12-04T12:58:08.698616Z","id":"b363936a-fd9c-567a-82a4-f0b523dbb26b","user_session_id":"986ecf8a-0abd-449c-a011-61148bae3225","scope_system_admin_read":false,"access-rights":[{"role":"inventory_manager","inventory_pool_id":"3977012c-ce0e-501f-889b-8715fdb5d83b"},{"role":"customer","inventory_pool_id":"4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"},{"role":"customer","inventory_pool_id":"5863967f-9804-4909-a9b7-92254616d6b2"},{"role":"inventory_manager","inventory_pool_id":"5dd25b58-fa56-5095-bd97-2696d92c2fb1"},{"role":"customer","inventory_pool_id":"77e88ec8-9ff6-5435-818e-dc902fc631a6"},{"role":"customer","inventory_pool_id":"8bd16d45-056d-5590-bc7f-12849f034351"},{"role":"customer","inventory_pool_id":"a02b8163-9a16-5066-b48e-9eb74cf8b791"},{"role":"customer","inventory_pool_id":"fc5a841e-36c6-5dc3-8207-1306c1fb89bf"},{"role":"customer","inventory_pool_id":"ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}],"user_id":"b363936a-fd9c-567a-82a4-f0b523dbb26b","is_system_admin":false,"external_sign_out_url":null,"language_locale":"de-CH","inventory_pool_roles_count":9,"scope_admin_read":false},"cookies":{"leihs-anti-csrf-token":{"value":"38995981-69c6-43d1-9609-a0b3a0cbf3bb"},"leihs-user-session":{"value":"efc41baf-3b71-4743-97f7-cdac6c1e7896"}},"remote-addr":"127.0.0.1","start-time":33033596596791,"params":{},"settings":{"email_sending_enabled":false,"sessions_max_lifetime_secs":432000,"smtp_default_from_address":"noreply@zhdk.ch","public_image_caching_enabled":true,"sessions_force_secure":false,"deliver_received_order_notifications":false,"external_base_url":"http:\/\/localhost:3200","sessions_force_uniqueness":false,"email_signature":"Das ZHdK-Ausleihe-Team"},"query-params-raw":{},"route-params":null,"headers":{"origin":"http:\/\/localhost:3230","sec-fetch-site":"same-origin","sec-ch-ua-mobile":"?0","host":"localhost:3230","user-agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/119.0.0.0 Safari\/537.36","content-type":"application\/json","cookie":"leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896","content-length":"502","sec-ch-ua":"\"Google Chrome\";v=\"119\", \"Chromium\";v=\"119\", \"Not?A_Brand\";v=\"24\"","sec-ch-ua-platform":"\"macOS\"","referer":"http:\/\/localhost:3230\/procure\/requests","connection":"keep-alive","x-csrf-token":"38995981-69c6-43d1-9609-a0b3a0cbf3bb","accept":"application\/json","accept-language":"de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7","sec-fetch-dest":"empty","accept-encoding":"gzip, deflate, br","sec-fetch-mode":"cors"},"server-port":3230,"params-raw":{},"content-length":502,"form-params":{},"websocket?":false,"query-params":{},"content-type":"application\/json","form-params-raw":{},"character-encoding":"utf8","uri":"\/procure\/graphql","server-name":"localhost","handler-key":"graphql","query-string":null,"body":{"operationName":"me","variables":{},"query":"query me {\n  current_user {\n    navbarProps\n    user {\n      id\n      firstname\n      lastname\n      permissions {\n        isAdmin\n        isRequester\n        isInspectorForCategories {\n          id\n          __typename\n        }\n        isViewerForCategories {\n          id\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  settings {\n    contact_url\n    __typename\n  }\n}\n"},"multipart-params":{},"scheme":"http","request-method":"post","accept":{"mime":"json","charset":null,"encoding":null,"language":null}}

>request-c-grapql _> query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}


>request-grapql _> result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"38995981-69c6-43d1-9609-a0b3a0cbf3bb","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"b363936a-fd9c-567a-82a4-f0b523dbb26b","firstname":"Beat","lastname":"Rohrer","login":"brohrer","email":"beat.rohrer@zhdk.ch"}},"subApps":{"borrow":true,"admin":false,"procure":false,"manage":[{"name":"IT-Zentrum","href":"/manage/5dd25b58-fa56-5095-bd97-2696d92c2fb1/daily"},{"name":"ITZ-Software","href":"/manage/3977012c-ce0e-501f-889b-8715fdb5d83b/daily"}]},"locales":[{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":true,"isSelected":true},{"name":"English","locale":"en-GB","active":true,"isDefault":false,"isSelected":false},{"name":"Castellano","locale":"es","active":true,"isDefault":false,"isSelected":false},{"name":"Zrittsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id b363936a-fd9c-567a-82a4-f0b523dbb26b] [:firstname Beat] [:lastname Rohrer] [:permissions #ordered/map ([:isAdmin false] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories [#ordered/map ([:id f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1] [:__typename :Category]) #ordered/map ([:id ccab158d-79c7-5c28-a8a2-47cb4925f101] [:__typename :Category]) #ordered/map ([:id 1af3a7f2-b16a-4203-b6ac-f2c7be612d74] [:__typename :Category]) #ordered/map ([:id 4ecc9e97-2d12-5173-bd8c-781482c842e8] [:__typename :Category]) #ordered/map ([:id 80226a51-c17a-5fd8-93db-40aef5b03491] [:__typename :Category]) #ordered/map ([:id fe602c35-1097-52d0-acd0-40579d295f00] [:__typename :Category]) #ordered/map ([:id 56065d53-cd2f-5a39-9b66-532fd83ad2e6] [:__typename :Category]) #ordered/map ([:id fc7bc38c-62f3-5576-802f-c874e06ee776] [:__typename :Category]) #ordered/map ([:id 76fdca98-4a2a-5640-bc98-f33059d6ffa0] [:__typename :Category]) #ordered/map ([:id 77857566-03d9-58f4-8b0d-290227434aff] [:__typename :Category]) #ordered/map ([:id 5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b] [:__typename :Category])]] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map (>o> helper2[:contact_url  https://intern.zhdk.ch/index.php?id=leihs_bedarfsermittlung] [[f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1:__typename  1af3a7f2-b16a-4203-b6ac-f2c7be612d74 :ProcurementSettings]ccab158d-79c7-5c28-a8a2-47cb4925f101) ]4ecc9e97-2d12-5173-bd8c-781482c842e8) }80226a51-c17a-5fd8-93db-40aef5b03491
 fe602c35-1097-52d0-acd0-40579d295f00 56065d53-cd2f-5a39-9b66-532fd83ad2e6 fc7bc38c-62f3-5576-802f-c874e06ee776 76fdca98-4a2a-5640-bc98-f33059d6ffa0 77857566-03d9-58f4-8b0d-290227434aff 5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b] [1173b482-b9e6-46b4-a5e3-0b021c860e9b] [5656e676-663c-5402-9809-91f3f72ff4ad]
>oo> helper3a priority [:NORMAL :HIGH]
>oo> helper3b priority (>oo> >>1 :NORMAL
>oo> >>1 :HIGH
normal high)
>oo> helper4a inspector-priority nil
>oo> helper4b inspector-priority (>oo> >>1 :LOW
>oo> >>1 :MANDATORY
>oo> >>1 :MEDIUM
low mandatory medium)
>o> helper5
>oo> helper5a :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED]
>oo> helper5b :order_status (>oo> >>1 :NOT_PROCESSED
>oo> >>1 :IN_PROGRESS
>oo> >>1 :PROCURED
>oo> >>1 :ALTERNATIVE_PROCURED
>oo> >>1 :NOT_PROCURED
not_processed in_progress procured alternative_procured not_procured)
>oo> order-status (not_processed in_progress procured alternative_procured not_procured)
>o> helper6
2023-12-04T16:58:52.240Z NX-41294 DEBUG [leihs.procurement.graphql:86] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"38995981-69c6-43d1-9609-a0b3a0cbf3bb\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"b363936a-fd9c-567a-82a4-f0b523dbb26b\",\"firstname\":\"Beat\",\"lastname\":\"Rohrer\",\"login\":\"brohrer\",\"email\":\"beat.rohrer@zhdk.ch\"}},\"subApps\":{\"borrow\":true,\"admin\":false,\"procure\":false,\"manage\":[{\"name\":\"IT-Zentrum\",\"href\":\"/manage/5dd25b58-fa56-5095-bd97-2696d92c2fb1/daily\"},{\"name\":\"ITZ-Software\",\"href\":\"/manage/3977012c-ce0e-501f-889b-8715fdb5d83b/daily\"}]},\"locales\":[{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Castellano\",\"locale\":\"es\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Zrittsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "b363936a-fd9c-567a-82a4-f0b523dbb26b"] [:firstname "Beat"] [:lastname "Rohrer"] [:permissions #ordered/map ([:isAdmin false] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories [#ordered/map ([:id "f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1"] [:__typename :Category]) #ordered/map ([:id "ccab158d-79c7-5c28-a8a2-47cb4925f101"] [:__typename :Category]) #ordered/map ([:id "1af3a7f2-b16a-4203-b6ac-f2c7be612d74"] [:__typename :Category]) #ordered/map ([:id "4ecc9e97-2d12-5173-bd8c-781482c842e8"] [:__typename :Category]) #ordered/map ([:id "80226a51-c17a-5fd8-93db-40aef5b03491"] [:__typename :Category]) #ordered/map ([:id "fe602c35-1097-52d0-acd0-40579d295f00"] [:__typename :Category]) #ordered/map ([:id "56065d53-cd2f-5a39-9b66-532fd83ad2e6"] [:__typename :Category]) #ordered/map ([:id "fc7bc38c-62f3-5576-802f-c874e06ee776"] [:__typename :Category]) #ordered/map ([:id "76fdca98-4a2a-5640-bc98-f33059d6ffa0"] [:__typename :Category]) #ordered/map ([:id "77857566-03d9-58f4-8b0d-290227434aff"] [:__typename :Category]) #ordered/map ([:id "5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b"] [:__typename :Category])]] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url "https://intern.zhdk.ch/index.php?id=leihs_bedarfsermittlung"] [:__typename :ProcurementSettings])])}
>o> viewer? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.241Z NX-41294 DEBUG [leihs.procurement.permissions.user:79] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> viewer? {:result true}
>o> inspector? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.242Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = CAST(? AS UUID)) AS result" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> inspector? {:result false}
>o> admin? [SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID)) #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
2023-12-04T16:58:52.243Z NX-41294 DEBUG [leihs.procurement.permissions.user:32] - query => ["SELECT EXISTS (SELECT TRUE AS exists FROM procurement_admins WHERE procurement_admins.user_id = CAST(? AS UUID))" #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b"]
>o> admin? {:exists false}
2023-12-04T16:58:52.243Z NX-41294 DEBUG [leihs.procurement.permissions.user:172] - (->> [viewer? inspector? admin?] (map (fn* [p1__39296#] (p1__39296# tx auth-entity))) (some true?)) => true
>o> helper7 true
>o> requests-base-query-with-state
>o> state-sql true
>o> s-map  {:NEW [:= :procurement_requests.approved_quantity nil], :APPROVED [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity], :PARTIALLY_APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]], :DENIED [:= :procurement_requests.approved_quantity 0]}
>o>map-4 (>o> map NEW
>o> map [:= :procurement_requests.approved_quantity nil]
:case >o> map NEW
[:= :procurement_requests.approved_quantity nil] >o> map APPROVED
>o> map [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]
NEW >o> map APPROVED
[:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] >o> map PARTIALLY_APPROVED
>o> map [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]
APPROVED >o> map PARTIALLY_APPROVED
[:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] >o> map DENIED
>o> map [:= :procurement_requests.approved_quantity 0]
PARTIALLY_APPROVED >o> map DENIED
[:= :procurement_requests.approved_quantity 0] DENIED)
>o>map-5 (:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)
2023-12-04T16:58:52.246Z NX-41294 DEBUG [leihs.procurement.resources.request:173] - result => [[(:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED")]]
>o> join-and-nest-budget-periods
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id]]}
>o> tbl :procurement_budget_periods_2
>o> nest-key :budget_period
>o> join-and-nest-categories
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id]]}
>o> tbl :models
>o> nest-key :model
>o> join-and-nest-templates
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id]]}
>o> tbl :procurement_templates
>o> nest-key :template
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :suppliers
>o> nest-key :supplier
>o> join-and-nest-users
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]] [[[:row_to_json :suppliers]] :supplier]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :users
>o> nest-key :user
>o> helper8
>oo> helper8 (not_processed in_progress procured alternative_procured not_procured) (low mandatory medium) (normal high)
>o> searchTerm::before    >  <
>o> searchTerm::before    > java.lang.String <
>o> searchTerm::before    > 0 <
>o> requests::search-query %%
>o> searchTerm::test-query    > [SELECT * FROM buildings, procurement_requests, rooms, models, users WHERE (buildings.name ILIKE ?) OR (procurement_requests.short_id ILIKE ?) OR (procurement_requests.article_name ILIKE ?) OR (procurement_requests.article_number ILIKE ?) OR (procurement_requests.inspection_comment ILIKE ?) OR (procurement_requests.order_comment ILIKE ?) OR (procurement_requests.motivation ILIKE ?) OR (procurement_requests.receiver ILIKE ?) OR (procurement_requests.supplier_name ILIKE ?) OR (rooms.name ILIKE ?) OR (models.product ILIKE ?) OR (models.version ILIKE ?) OR (users.firstname ILIKE ?) OR (users.lastname ILIKE ?) %% %% %% %% %% %% %% %% %% %% %% %% %% %%] <

>request-grapql _> request {:leihs-user-language {:name Deutsch, :locale de-CH, :default true, :active true}, :authenticated-entity {:email beat.rohrer@zhdk.ch, :contracts_count 23, :lastname Rohrer, :org_id 186835, :scope_read true, :is_admin false, :authentication-method :session, :login brohrer, :scope_system_admin_write false, :scope_write true, :firstname Beat, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-04T12:58:08.698616Z", :id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :user_session_id #uuid "986ecf8a-0abd-449c-a011-61148bae3225", :scope_system_admin_read false, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role customer, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "b363936a-fd9c-567a-82a4-f0b523dbb26b", :is_system_admin false, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 9, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 38995981-69c6-43d1-9609-a0b3a0cbf3bb}, leihs-user-session {:value efc41baf-3b71-4743-97f7-cdac6c1e7896}}, :remote-addr 127.0.0.1, :start-time 33033596364875, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x1e78acde HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x575723ff next.jdbc.result_set$as_unqualified_lower_maps@575723ff]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896, content-length 534, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 38995981-69c6-43d1-9609-a0b3a0cbf3bb, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5fb549a9 /127.0.0.1:3230<->/127.0.0.1:57737], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x65f0ec0d HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x33f8ac3c leihs.procurement.graphql$handler@33f8ac3c], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>request-c-grapql _> request (json) {"leihs-user-language":{"name":"Deutsch","locale":"de-CH","default":true,"active":true},"authenticated-entity":{"email":"beat.rohrer@zhdk.ch","contracts_count":23,"lastname":"Rohrer","org_id":"186835","scope_read":true,"is_admin":false,"authentication-method":"session","login":"brohrer","scope_system_admin_write":false,"scope_write":true,"firstname":"Beat","scope_admin_write":false,"user_session_created_at":"2023-12-04T12:58:08.698616Z","id":"b363936a-fd9c-567a-82a4-f0b523dbb26b","user_session_id":"986ecf8a-0abd-449c-a011-61148bae3225","scope_system_admin_read":false,"access-rights":[{"role":"inventory_manager","inventory_pool_id":"3977012c-ce0e-501f-889b-8715fdb5d83b"},{"role":"customer","inventory_pool_id":"4a1ba40c-467e-5efe-8cf1-e8d3dbb59f04"},{"role":"customer","inventory_pool_id":"5863967f-9804-4909-a9b7-92254616d6b2"},{"role":"inventory_manager","inventory_pool_id":"5dd25b58-fa56-5095-bd97-2696d92c2fb1"},{"role":"customer","inventory_pool_id":"77e88ec8-9ff6-5435-818e-dc902fc631a6"},{"role":"customer","inventory_pool_id":"8bd16d45-056d-5590-bc7f-12849f034351"},{"role":"customer","inventory_pool_id":"a02b8163-9a16-5066-b48e-9eb74cf8b791"},{"role":"customer","inventory_pool_id":"fc5a841e-36c6-5dc3-8207-1306c1fb89bf"},{"role":"customer","inventory_pool_id":"ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}],"user_id":"b363936a-fd9c-567a-82a4-f0b523dbb26b","is_system_admin":false,"external_sign_out_url":null,"language_locale":"de-CH","inventory_pool_roles_count":9,"scope_admin_read":false},"cookies":{"leihs-anti-csrf-token":{"value":"38995981-69c6-43d1-9609-a0b3a0cbf3bb"},"leihs-user-session":{"value":"efc41baf-3b71-4743-97f7-cdac6c1e7896"}},"remote-addr":"127.0.0.1","start-time":33033596364875,"params":{},"settings":{"email_sending_enabled":false,"sessions_max_lifetime_secs":432000,"smtp_default_from_address":"noreply@zhdk.ch","public_image_caching_enabled":true,"sessions_force_secure":false,"deliver_received_order_notifications":false,"external_base_url":"http:\/\/localhost:3200","sessions_force_uniqueness":false,"email_signature":"Das ZHdK-Ausleihe-Team"},"query-params-raw":{},"route-params":null,"headers":{"origin":"http:\/\/localhost:3230","sec-fetch-site":"same-origin","sec-ch-ua-mobile":"?0","host":"localhost:3230","user-agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/119.0.0.0 Safari\/537.36","content-type":"application\/json","cookie":"leihs-anti-csrf-token=38995981-69c6-43d1-9609-a0b3a0cbf3bb; leihs-user-session=efc41baf-3b71-4743-97f7-cdac6c1e7896","content-length":"534","sec-ch-ua":"\"Google Chrome\";v=\"119\", \"Chromium\";v=\"119\", \"Not?A_Brand\";v=\"24\"","sec-ch-ua-platform":"\"macOS\"","referer":"http:\/\/localhost:3230\/procure\/requests","connection":"keep-alive","x-csrf-token":"38995981-69c6-43d1-9609-a0b3a0cbf3bb","accept":"application\/json","accept-language":"de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7","sec-fetch-dest":"empty","accept-encoding":"gzip, deflate, br","sec-fetch-mode":"cors"},"server-port":3230,"params-raw":{},"content-length":534,"form-params":{},"websocket?":false,"query-params":{},"content-type":"application\/json","form-params-raw":{},"character-encoding":"utf8","uri":"\/procure\/graphql","server-name":"localhost","handler-key":"graphql","query-string":null,"body":{"operationName":"RequestFilters","variables":{},"query":"query RequestFilters {\n  budget_periods {\n    id\n    name\n    inspection_start_date\n    end_date\n    __typename\n  }\n  main_categories {\n    id\n    name\n    categories {\n      id\n      name\n      __typename\n    }\n    __typename\n  }\n  organizations(root_only: true) {\n    ...OrgProps\n    organizations {\n      ...OrgProps\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment OrgProps on Organization {\n  id\n  name\n  shortname\n  __typename\n}\n"},"multipart-params":{},"scheme":"http","request-method":"post","accept":{"mime":"json","charset":null,"encoding":null,"language":null}}

>request-c-grapql _> query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}


>request-grapql _> result => {:data #ordered/map ([:budget_periods [#ordered/map ([:id 1a1dab20-c661-4204-a913-28065d570f7c] [:name 2028] [:inspection_start_date 2027-11-01 01:00:00.0] [:end_date 2027-12-31 01:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id dfdd0798-6462-46fc-995f-a7d7233f30fd] [:name 2027] [:inspection_start_date 2026-11-02 01:00:00.0] [:end_date 2026-12-31 01:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id 6b689ed8-8148-485a-b1ca-86c1c739503e] [:name 2026] [:inspection_start_date 2025-11-03 01:00:00.0] [:end_date 2025-12-31 01:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id 1173b482-b9e6-46b4-a5e3-0b021c860e9b] [:name 2025] [:inspection_start_date 2024-11-04 01:00:00.0] [:end_date 2024-12-31 01:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id e5d2ae4b-566f-4d6d-aed9-d6a8353eda7f] [:name 2024] [:inspection_start_date 2023-10-01 12:00:00.0] [:end_date 2023-12-31 01:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id 951ac476-4f92-4ff9-9f64-26fc8f8b61c5] [:name 2023] [:inspection_start_date 2022-11-01 01:00:00.0] [:end_date 2022-12-31 12:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id 76b66d78-bfe0-4c54-8c92-edbf467af784] [:name 2022] [:inspection_start_date 2021-10-29 12:00:00.0] [:end_date 2021-12-31 12:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id 24171a61-aec6-428e-b7ed-7461b3795454] [:name 2021] [:inspection_start_date 2020-10-26 12:00:00.0] [:end_date 2020-12-31 12:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id 3b7eab1e-c8b5-512b-9146-91cc295be955] [:name 2020] [:inspection_start_date 2019-11-09 12:00:00.0] [:end_date 2019-12-31 01:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id 9fb023db-725d-5881-8838-bae3e970ffd0] [:name 2019] [:inspection_start_date 2018-11-10 01:00:00.0] [:end_date 2018-12-31 01:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id c2c5f618-7e05-5e43-a2b1-ec7f9172335d] [:name 2018] [:inspection_start_date 2017-11-04 01:00:00.0] [:end_date 2017-12-31 01:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id 4f367b79-76cf-5f12-ab7b-535a7430e6da] [:name 2016] [:inspection_start_date 2016-11-01 01:00:00.0] [:end_date 2017-01-30 01:00:00.0] [:__typename :BudgetPeriod]) #ordered/map ([:id aba0576e-d65f-5fe0-aa80-89ce226ec9b1] [:name 2017] [:inspection_start_date 2016-11-04 01:00:00.0] [:end_date 2017-01-22 01:00:00.0] [:__typename :BudgetPeriod])]] [:main_categories [#ordered/map ([:id 519f7a95-9ca7-5256-bf63-142cfc23dc62] [:name Audio- und Videotechnik] [:categories [#ordered/map ([:id 4e48b48c-e1bf-50d7-ab2d-9aa438c638de] [:name Beamer] [:__typename :Category]) #ordered/map ([:id a1727606-c7c8-54a2-aaa1-ceff7a7d4b40] [:name Funk-Strecken] [:__typename :Category]) #ordered/map ([:id 00382e27-a87a-5313-b31b-a369dad6c5f8] [:name Lautsprecher] [:__typename :Category]) #ordered/map ([:id ce5424cc-ce77-5e67-8201-333ec20963eb] [:name Lautsprecherstative] [:__typename :Category]) #ordered/map ([:id ce0812d7-080b-5f49-8530-dd4a821c57b6] [:name Mikrofone] [:__typename :Category]) #ordered/map ([:id 67e5fc60-6fe3-53bb-9495-3669b917038a] [:name Mikrofonstative] [:__typename :Category]) #ordered/map ([:id f94f72e8-ff65-5bad-b1f9-81ddd8fa7c0c] [:name Monitore / Screens] [:__typename :Category]) #ordered/map ([:id 89e4a22f-7d6c-5006-b26a-3ef6f8f19630] [:name Schnittplatz / Mischpult / Regie] [:__typename :Category]) #ordered/map ([:id 1fb59e17-a703-5abc-8a80-fc7a9c20ee1d] [:name Video/Film-Kameras] [:__typename :Category]) #ordered/map ([:id c17698c1-5d5d-51ea-927f-b6ca96431a50] [:name Video/Film-Stative] [:__typename :Category]) #ordered/map ([:id fabe3b8c-58b5-5009-8873-cc3e945a7c0d] [:name Video/Filmobjektive] [:__typename :Category]) #ordered/map ([:id ebb12585-ce23-5cbe-8f4f-41a42d60a656] [:name Zuteilung unbekannt - Audio- und Videotechnik] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id 1a047acd-dc98-52c2-99d3-dc6332adc1e0] [:name Bauliche Anpassungen und Mobiliar] [:categories [#ordered/map ([:id 0a082661-cc1c-5b49-baab-f4db926faa7e] [:name Bauprojekte] [:__typename :Category]) #ordered/map ([:id 42cc2d9a-cc45-5d77-85d3-0f21270d7a35] [:name Einrichtungsprojekte] [:__typename :Category]) #ordered/map ([:id 56aaec64-8d65-50b3-bd81-f788d477b927] [:name Mobiliarergnzungen] [:__typename :Category]) #ordered/map ([:id 483ac871-b632-5dcd-9d37-789d65f4c424] [:name Schliessanlagen und Tren] [:__typename :Category]) #ordered/map ([:id 2b3749a2-6a59-5a25-9b9f-32f5e485e635] [:name Signaletik] [:__typename :Category]) #ordered/map ([:id fad911e4-8c69-535c-a138-f3e2544519ba] [:name Vorhnge] [:__typename :Category]) #ordered/map ([:id c3f14f79-931c-52c8-a847-ed77449ce9a6] [:name Zuteilung unbekannt - Bauliche Anpassungen und Mobiliar] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id dda588f4-660c-573c-a2ff-944ae93ad42e] [:name Beleuchtungstechnik] [:categories [#ordered/map ([:id b9e4f492-55e3-57e4-9467-91c81bfe2325] [:name Bhnenlicht] [:__typename :Category]) #ordered/map ([:id a7cca5a4-e265-5f36-b794-1024c8aacc3e] [:name Film-Beleuchtung] [:__typename :Category]) #ordered/map ([:id 79822b89-0edb-588c-b9e5-65b7722ac50b] [:name Kameralicht] [:__typename :Category]) #ordered/map ([:id ab911807-6431-5ca7-890a-3573737bb4d3] [:name Mobiles Raumlicht fr Ausstellungen] [:__typename :Category]) #ordered/map ([:id 64c6f8ad-a1b7-530b-946a-ebb1644ac897] [:name Studio-Licht] [:__typename :Category]) #ordered/map ([:id f2bb3f23-bb5b-5855-b03f-0166bd19fc0c] [:name Zuteilung unbekannt - Beleuchtungstechnik] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id 2b07eb8a-4174-5257-83eb-920d536cc44a] [:name Betriebseinrichtungen und Fahrzeuge] [:categories [#ordered/map ([:id 5d8639a3-4569-5009-af28-f63f2af5209d] [:name Betriebseinrichtungen] [:__typename :Category]) #ordered/map ([:id b34f1cbb-4ac7-59a0-81f2-3ca7ecc94e71] [:name Fahrzeuge] [:__typename :Category]) #ordered/map ([:id 73e97867-43ea-5bee-b46b-d7c74fbf873b] [:name Hub- und Hebegerte] [:__typename :Category]) #ordered/map ([:id b6601a86-b5d3-5682-88b6-cff956b00d7b] [:name Zuteilung unbekannt - Betriebseinrichtungen und Fahrzeuge] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id f6827594-33a6-5760-ac41-f94ceefacfab] [:name Bhnentechnik] [:categories [#ordered/map ([:id 455bc6dc-afbd-579d-a621-6d75e0fca9ea] [:name Bhnentechnik] [:__typename :Category]) #ordered/map ([:id 747b6b21-9fad-4a01-acd9-cd8983aed286] [:name Fundus] [:__typename :Category]) #ordered/map ([:id 07a6af37-e127-5f4b-94ec-698a5698d98c] [:name Zuteilung unbekannt - Bhnentechnik] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id 517b82ae-2b7e-4822-9aeb-0d4753dec821] [:name Darlehen] [:categories [#ordered/map ([:id 671ab85c-b8c1-4659-9c6e-9ebe2f122a59] [:name Darlehen] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id ca1d97ac-0ac4-597a-8edb-f9c466b1c7da] [:name Fotografie] [:categories [#ordered/map ([:id e1b4cad8-0416-5cf7-9e4a-dde208d0abad] [:name Blitzanlagen] [:__typename :Category]) #ordered/map ([:id 011ff3f3-09fa-59e1-9713-52466786adf8] [:name Fotokameras] [:__typename :Category]) #ordered/map ([:id 54b87eb0-061c-5a97-96ad-e9b6da605184] [:name Fotostative] [:__typename :Category]) #ordered/map ([:id 5858ec5d-5f01-50fb-bc96-4b4766bd7799] [:name Kompakt-Blitze] [:__typename :Category]) #ordered/map ([:id ba5b41a7-4317-5160-9b82-b0931a48aec0] [:name Objektive] [:__typename :Category]) #ordered/map ([:id 9df68a66-4523-5072-aa31-1df9abeaa1c7] [:name Zuteilung unbekannt - Fotografie] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id 2ea39047-e663-50d5-9080-838b75883704] [:name IT & Elektronik] [:categories [#ordered/map ([:id f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1] [:name Desktop] [:__typename :Category]) #ordered/map ([:id 1af3a7f2-b16a-4203-b6ac-f2c7be612d74] [:name IT_Projekte] [:__typename :Category]) #ordered/map ([:id ccab158d-79c7-5c28-a8a2-47cb4925f101] [:name IT-Basisinfrastruktur] [:__typename :Category]) #ordered/map ([:id eb1e7bef-80c6-4958-b16e-35555735ce61] [:name IT-Security] [:__typename :Category]) #ordered/map ([:id 4ecc9e97-2d12-5173-bd8c-781482c842e8] [:name Laptops] [:__typename :Category]) #ordered/map ([:id 80226a51-c17a-5fd8-93db-40aef5b03491] [:name Monitore] [:__typename :Category]) #ordered/map ([:id fe602c35-1097-52d0-acd0-40579d295f00] [:name Scanner] [:__typename :Category]) #ordered/map ([:id 56065d53-cd2f-5a39-9b66-532fd83ad2e6] [:name Schnittstellengerte] [:__typename :Category]) #ordered/map ([:id fc7bc38c-62f3-5576-802f-c874e06ee776] [:name Software] [:__typename :Category]) #ordered/map ([:id 76fdca98-4a2a-5640-bc98-f33059d6ffa0] [:name Tablets] [:__typename :Category]) #ordered/map ([:id 77857566-03d9-58f4-8b0d-290227434aff] [:name Telefon] [:__typename :Category]) #ordered/map ([:id 5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b] [:name Zuteilung unbekannt - IT & Elektronik] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id f6885671-3bf3-56f2-8e92-b5112d0f703f] [:name Musikinstrumente] [:categories [#ordered/map ([:id af3372a1-63a8-52dc-850e-c2ae91c1c078] [:name Musikinstrumente] [:__typename :Category]) #ordered/map ([:id 17a52112-1986-5074-b1d9-0faff29a785b] [:name Zuteilung unbekannt - Musikinstrumente] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id 6c8a0d77-6711-5156-a59a-12425ba01cff] [:name Werkstatt-Technik] [:categories [#ordered/map ([:id 6870a16c-9a71-5e60-b94a-f0b784398fec] [:name Handwerkzeug] [:__typename :Category]) #ordered/map ([:id 771fddcf-b19a-5e6b-8b6f-7266b6922c4f] [:name Maschinen] [:__typename :Category]) #ordered/map ([:id c7ece4a6-2b5c-409f-96ea-e4fd6e8f9792] [:name Sicherheit] [:__typename :Category]) #ordered/map ([:id 3eaad5d5-516a-5610-8caf-342cfdcaac62] [:name Zuteilung unbekannt - Werkstatt-Technik] [:__typename :Category])]] [:__typename :MainCategory])]] [:organizations [#ordered/map ([:id 6e16eaec-ff6f-5850-bcf9-a67038b019e0] [:name DDE] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id 7259bd26-7af4-52d0-83e6-9d0be46e3c9d] [:name Design] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id fe7d2ef9-1d86-50b1-be23-4197ee5002f0] [:name Direktion] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id a80d7883-9e83-5d93-b7b7-11af0eee9142] [:name DDK] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id 0fcff067-33c3-5ddf-8c95-2be79425fb58] [:name BA Theater] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id f6d6714c-c7fa-513a-8863-0f8db9899fd2] [:name DDK] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id f57d9be4-e051-4278-89e2-93509b722f1f] [:name DDK Produktion] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 30f4f288-ec31-53e7-beda-57a5fcdbfaac] [:name Direktion] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 4846f9d8-d504-44cf-95d9-23612bb30739] [:name Disziplin Film] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 4b51b317-e746-4db4-b9e6-dfc427a7ba26] [:name Disziplin Tanz] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id f9d45317-e9e3-489e-8f4b-0b7fa944931d] [:name Disziplin Theater] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id e9dc753a-0584-55e4-bb9e-e4b86d841ed5] [:name Institute Performing Arts + Film] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 464c31eb-0ba9-4c52-a7e7-f11b25d7c8d0] [:name Leitung] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id e7f865cd-c426-5d4e-b8be-f63fa395a5fa] [:name MA Film] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id f6a2c53d-2b9f-5ae8-a2f3-54e3f70e68ce] [:name NFH Tanz Akademie] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id dee5706d-5163-4259-bf3d-fe72e0c4a338] [:name DFA] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id 529a71c7-b268-4661-9ecc-be0ccba3f00f] [:name BA Fine Arts] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 7b2faf21-d842-45b5-a5b0-1c8d590b8418] [:name Direktion] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 9c033410-cf0c-423e-ba8a-b07d68375cb9] [:name IFCAR] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id a305c3ae-bca3-429b-8395-b1a727d22a30] [:name MA DFA] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id 23939ae1-2288-53cf-9d5b-54aaaa5e52c6] [:name DKM] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id da83d766-f73d-58e7-9299-ac75140812e0] [:name Direktion] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id d13b189b-319f-53d9-a33d-93450e7da352] [:name Institut fr Gegenwartsknste] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id 53266f06-6625-5967-9c39-d8e1941d8ae2] [:name DKV] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id 2857586f-1ff0-4bc1-93f3-1050852cfe2a] [:name BA Art Education] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 06007991-b592-5d94-9b1e-a9156b393b84] [:name BA Vermittlung] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id a80f1fbb-5071-54c1-8757-a4cfd9b39a70] [:name Direktion] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 5656e676-663c-5402-9809-91f3f72ff4ad] [:name DKV] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 564e258b-ffda-4e57-aa89-f5e1f3aaef8d] [:name Forschung Art Eduacation] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 9161d8e2-9431-4bf7-8fea-279a6148c941] [:name Forschung Cultural Critique] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 7839f290-43e7-4957-84de-d075837e33d6] [:name FSP sthetik] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 314adc35-57a8-4119-bf8b-8fa9bcbeff9c] [:name FSP Kulturanalyse] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 4f5a58c5-c78e-53d7-a677-52072047952f] [:name FSP Transdisziplinaritt] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id f67c24b6-3518-5b1c-8eef-54857ed7fc5f] [:name MA Art Education] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id bfee2323-2d85-4edb-a946-da54036a9244] [:name MA Cultural Critique] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id cf8c1737-60b6-58c5-9a66-02f10cb69194] [:name MA Transdisziplinaritt] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 1486124f-b72f-4316-8b29-80b0e07d9bda] [:name Museum fr Gestaltung] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 2c17d2e1-8df8-59f6-bfca-ba49aa6b921b] [:name Museum fr Gestaltung Zrich] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id e84519d5-f877-58b5-9509-de82845342b8] [:name Propdeutikum] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id 15876417-a25e-5cee-9f83-1a382ce6209a] [:name DMU] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id 01f1470d-d97f-5f11-82eb-4ed40069d762] [:name Direktion] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 973fe7c5-2122-5965-9b22-1779f319ec06] [:name DMU] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 188ff0f7-9957-50f0-bfab-1a6303734a8b] [:name Forschung] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 51f80cb7-631c-5761-a4c7-ebaee6d0b818] [:name Inst. Computer Music + Sound Technology] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 12e8d4d4-f810-428b-9f46-c35333353593] [:name Institut for Music Research] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 66687f8e-6d83-4962-badb-efcd57700d9e] [:name Jazz & Pop] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 49679535-5619-54b5-bc48-d0692b08c59c] [:name Jazz + Pop] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 28f82510-4a16-5e6a-afd5-7c3ef44c2d8e] [:name Kirchenmusik] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id b3fc46c4-ae41-5905-9715-db6221171368] [:name Klassik I] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 7244df72-7e91-5a66-aeb6-07f52163bc6c] [:name Klassik II] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id af830cd6-8c3c-53db-b1d1-72258a6f33e0] [:name Klassik III] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id e6ff2869-4920-4307-93d1-20906c3e199b] [:name Komposition und Theorie] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 87dc9f2d-ef6d-5c65-bcd4-7d88a3e05743] [:name Musik + Bewegungspdagogik] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 4b3a3192-5d3c-51ae-989b-9dd8b8e8e306] [:name Pre College] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 88e7b28a-5e1a-5aae-8a02-336ab4d8710d] [:name Theorie] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id ab0bbd84-88e0-4355-be74-75d9b1926eb5] [:name Dossiers] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id 74880d9f-4066-46c2-b118-cadb04703e42] [:name Dossier Lehre] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id d3fac247-5472-472e-a0f7-80fce2b19593] [:name Dossier Weiterbildung] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 8b0809c7-7f96-45e4-b821-0801bf4a41ba] [:name Dossiers] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id a5ecbe25-95e5-43d1-ab61-2a1abcad4ba6] [:name Forschung] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id e64b75d6-af09-5749-aac3-e4e0b9625842] [:name Rektorat] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id 0a8c0f92-6e14-5b32-8a26-59c8633de2c3] [:name Rektorat] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id dc6b0705-5d02-563d-9194-db2ad8f85fef] [:name Services] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id 72039dea-7ec1-5616-afa3-3772b84bed77] [:name Finanzen] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id f4e2fef4-1c52-57d0-b179-1767267c12cb] [:name FM] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 954e3858-15b5-5fc8-9dea-23d4b6af9ad8] [:name Hochschuladministration] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 81b6dd89-f7d8-48ac-8552-f9565ede8141] [:name HR] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 37bbe3df-7553-5d5f-82fa-7e9a2d94951a] [:name ITZ] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 552a8a15-7a48-5205-9aeb-a4b73ef8ca89] [:name TES] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id 1a52b1ea-71ff-4e70-af9e-d3d6480c88d6] [:name Verwaltungsdirektion] [:shortname nil] [:__typename :Organization])]])]])}
2023-12-04T16:58:52.279Z NX-41294 DEBUG [leihs.procurement.graphql:86] - result => {:data #ordered/map ([:budget_periods [#ordered/map ([:id "1a1dab20-c661-4204-a913-28065d570f7c"] [:name "2028"] [:inspection_start_date "2027-11-01 01:00:00.0"] [:end_date "2027-12-31 01:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "dfdd0798-6462-46fc-995f-a7d7233f30fd"] [:name "2027"] [:inspection_start_date "2026-11-02 01:00:00.0"] [:end_date "2026-12-31 01:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "6b689ed8-8148-485a-b1ca-86c1c739503e"] [:name "2026"] [:inspection_start_date "2025-11-03 01:00:00.0"] [:end_date "2025-12-31 01:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "1173b482-b9e6-46b4-a5e3-0b021c860e9b"] [:name "2025"] [:inspection_start_date "2024-11-04 01:00:00.0"] [:end_date "2024-12-31 01:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "e5d2ae4b-566f-4d6d-aed9-d6a8353eda7f"] [:name "2024"] [:inspection_start_date "2023-10-01 12:00:00.0"] [:end_date "2023-12-31 01:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "951ac476-4f92-4ff9-9f64-26fc8f8b61c5"] [:name "2023"] [:inspection_start_date "2022-11-01 01:00:00.0"] [:end_date "2022-12-31 12:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "76b66d78-bfe0-4c54-8c92-edbf467af784"] [:name "2022"] [:inspection_start_date "2021-10-29 12:00:00.0"] [:end_date "2021-12-31 12:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "24171a61-aec6-428e-b7ed-7461b3795454"] [:name "2021"] [:inspection_start_date "2020-10-26 12:00:00.0"] [:end_date "2020-12-31 12:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "3b7eab1e-c8b5-512b-9146-91cc295be955"] [:name "2020"] [:inspection_start_date "2019-11-09 12:00:00.0"] [:end_date "2019-12-31 01:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "9fb023db-725d-5881-8838-bae3e970ffd0"] [:name "2019"] [:inspection_start_date "2018-11-10 01:00:00.0"] [:end_date "2018-12-31 01:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "c2c5f618-7e05-5e43-a2b1-ec7f9172335d"] [:name "2018"] [:inspection_start_date "2017-11-04 01:00:00.0"] [:end_date "2017-12-31 01:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "4f367b79-76cf-5f12-ab7b-535a7430e6da"] [:name "2016"] [:inspection_start_date "2016-11-01 01:00:00.0"] [:end_date "2017-01-30 01:00:00.0"] [:__typename :BudgetPeriod]) #ordered/map ([:id "aba0576e-d65f-5fe0-aa80-89ce226ec9b1"] [:name "2017"] [:inspection_start_date "2016-11-04 01:00:00.0"] [:end_date "2017-01-22 01:00:00.0"] [:__typename :BudgetPeriod])]] [:main_categories [#ordered/map ([:id "519f7a95-9ca7-5256-bf63-142cfc23dc62"] [:name "Audio- und Videotechnik"] [:categories [#ordered/map ([:id "4e48b48c-e1bf-50d7-ab2d-9aa438c638de"] [:name "Beamer"] [:__typename :Category]) #ordered/map ([:id "a1727606-c7c8-54a2-aaa1-ceff7a7d4b40"] [:name "Funk-Strecken"] [:__typename :Category]) #ordered/map ([:id "00382e27-a87a-5313-b31b-a369dad6c5f8"] [:name "Lautsprecher"] [:__typename :Category]) #ordered/map ([:id "ce5424cc-ce77-5e67-8201-333ec20963eb"] [:name "Lautsprecherstative"] [:__typename :Category]) #ordered/map ([:id "ce0812d7-080b-5f49-8530-dd4a821c57b6"] [:name "Mikrofone"] [:__typename :Category]) #ordered/map ([:id "67e5fc60-6fe3-53bb-9495-3669b917038a"] [:name "Mikrofonstative"] [:__typename :Category]) #ordered/map ([:id "f94f72e8-ff65-5bad-b1f9-81ddd8fa7c0c"] [:name "Monitore / Screens"] [:__typename :Category]) #ordered/map ([:id "89e4a22f-7d6c-5006-b26a-3ef6f8f19630"] [:name "Schnittplatz / Mischpult / Regie"] [:__typename :Category]) #ordered/map ([:id "1fb59e17-a703-5abc-8a80-fc7a9c20ee1d"] [:name "Video/Film-Kameras"] [:__typename :Category]) #ordered/map ([:id "c17698c1-5d5d-51ea-927f-b6ca96431a50"] [:name "Video/Film-Stative"] [:__typename :Category]) #ordered/map ([:id "fabe3b8c-58b5-5009-8873-cc3e945a7c0d"] [:name "Video/Filmobjektive"] [:__typename :Category]) #ordered/map ([:id "ebb12585-ce23-5cbe-8f4f-41a42d60a656"] [:name "Zuteilung unbekannt - Audio- und Videotechnik"] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id "1a047acd-dc98-52c2-99d3-dc6332adc1e0"] [:name "Bauliche Anpassungen und Mobiliar"] [:categories [#ordered/map ([:id "0a082661-cc1c-5b49-baab-f4db926faa7e"] [:name "Bauprojekte"] [:__typename :Category]) #ordered/map ([:id "42cc2d9a-cc45-5d77-85d3-0f21270d7a35"] [:name "Einrichtungsprojekte"] [:__typename :Category]) #ordered/map ([:id "56aaec64-8d65-50b3-bd81-f788d477b927"] [:name "Mobiliarergnzungen"] [:__typename :Category]) #ordered/map ([:id "483ac871-b632-5dcd-9d37-789d65f4c424"] [:name "Schliessanlagen und Tren"] [:__typename :Category]) #ordered/map ([:id "2b3749a2-6a59-5a25-9b9f-32f5e485e635"] [:name "Signaletik"] [:__typename :Category]) #ordered/map ([:id "fad911e4-8c69-535c-a138-f3e2544519ba"] [:name "Vorhnge"] [:__typename :Category]) #ordered/map ([:id "c3f14f79-931c-52c8-a847-ed77449ce9a6"] [:name "Zuteilung unbekannt - Bauliche Anpassungen und Mobiliar"] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id "dda588f4-660c-573c-a2ff-944ae93ad42e"] [:name "Beleuchtungstechnik"] [:categories [#ordered/map ([:id "b9e4f492-55e3-57e4-9467-91c81bfe2325"] [:name "Bhnenlicht"] [:__typename :Category]) #ordered/map ([:id "a7cca5a4-e265-5f36-b794-1024c8aacc3e"] [:name "Film-Beleuchtung"] [:__typename :Category]) #ordered/map ([:id "79822b89-0edb-588c-b9e5-65b7722ac50b"] [:name "Kameralicht"] [:__typename :Category]) #ordered/map ([:id "ab911807-6431-5ca7-890a-3573737bb4d3"] [:name "Mobiles Raumlicht fr Ausstellungen"] [:__typename :Category]) #ordered/map ([:id "64c6f8ad-a1b7-530b-946a-ebb1644ac897"] [:name "Studio-Licht"] [:__typename :Category]) #ordered/map ([:id "f2bb3f23-bb5b-5855-b03f-0166bd19fc0c"] [:name "Zuteilung unbekannt - Beleuchtungstechnik"] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id "2b07eb8a-4174-5257-83eb-920d536cc44a"] [:name "Betriebseinrichtungen und Fahrzeuge"] [:categories [#ordered/map ([:id "5d8639a3-4569-5009-af28-f63f2af5209d"] [:name "Betriebseinrichtungen"] [:__typename :Category]) #ordered/map ([:id "b34f1cbb-4ac7-59a0-81f2-3ca7ecc94e71"] [:name "Fahrzeuge"] [:__typename :Category]) #ordered/map ([:id "73e97867-43ea-5bee-b46b-d7c74fbf873b"] [:name "Hub- und Hebegerte"] [:__typename :Category]) #ordered/map ([:id "b6601a86-b5d3-5682-88b6-cff956b00d7b"] [:name "Zuteilung unbekannt - Betriebseinrichtungen und Fahrzeuge"] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id "f6827594-33a6-5760-ac41-f94ceefacfab"] [:name "Bhnentechnik"] [:categories [#ordered/map ([:id "455bc6dc-afbd-579d-a621-6d75e0fca9ea"] [:name "Bhnentechnik"] [:__typename :Category]) #ordered/map ([:id "747b6b21-9fad-4a01-acd9-cd8983aed286"] [:name "Fundus"] [:__typename :Category]) #ordered/map ([:id "07a6af37-e127-5f4b-94ec-698a5698d98c"] [:name "Zuteilung unbekannt - Bhnentechnik"] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id "517b82ae-2b7e-4822-9aeb-0d4753dec821"] [:name "Darlehen"] [:categories [#ordered/map ([:id "671ab85c-b8c1-4659-9c6e-9ebe2f122a59"] [:name "Darlehen"] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id "ca1d97ac-0ac4-597a-8edb-f9c466b1c7da"] [:name "Fotografie"] [:categories [#ordered/map ([:id "e1b4cad8-0416-5cf7-9e4a-dde208d0abad"] [:name "Blitzanlagen"] [:__typename :Category]) #ordered/map ([:id "011ff3f3-09fa-59e1-9713-52466786adf8"] [:name "Fotokameras"] [:__typename :Category]) #ordered/map ([:id "54b87eb0-061c-5a97-96ad-e9b6da605184"] [:name "Fotostative"] [:__typename :Category]) #ordered/map ([:id "5858ec5d-5f01-50fb-bc96-4b4766bd7799"] [:name "Kompakt-Blitze"] [:__typename :Category]) #ordered/map ([:id "ba5b41a7-4317-5160-9b82-b0931a48aec0"] [:name "Objektive"] [:__typename :Category]) #ordered/map ([:id "9df68a66-4523-5072-aa31-1df9abeaa1c7"] [:name "Zuteilung unbekannt - Fotografie"] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id "2ea39047-e663-50d5-9080-838b75883704"] [:name "IT & Elektronik"] [:categories [#ordered/map ([:id "f2531d7e-d9ff-5c3e-9e88-6d3a16a89aa1"] [:name "Desktop"] [:__typename :Category]) #ordered/map ([:id "1af3a7f2-b16a-4203-b6ac-f2c7be612d74"] [:name "IT_Projekte"] [:__typename :Category]) #ordered/map ([:id "ccab158d-79c7-5c28-a8a2-47cb4925f101"] [:name "IT-Basisinfrastruktur"] [:__typename :Category]) #ordered/map ([:id "eb1e7bef-80c6-4958-b16e-35555735ce61"] [:name "IT-Security"] [:__typename :Category]) #ordered/map ([:id "4ecc9e97-2d12-5173-bd8c-781482c842e8"] [:name "Laptops"] [:__typename :Category]) #ordered/map ([:id "80226a51-c17a-5fd8-93db-40aef5b03491"] [:name "Monitore"] [:__typename :Category]) #ordered/map ([:id "fe602c35-1097-52d0-acd0-40579d295f00"] [:name "Scanner"] [:__typename :Category]) #ordered/map ([:id "56065d53-cd2f-5a39-9b66-532fd83ad2e6"] [:name "Schnittstellengerte"] [:__typename :Category]) #ordered/map ([:id "fc7bc38c-62f3-5576-802f-c874e06ee776"] [:name "Software"] [:__typename :Category]) #ordered/map ([:id "76fdca98-4a2a-5640-bc98-f33059d6ffa0"] [:name "Tablets"] [:__typename :Category]) #ordered/map ([:id "77857566-03d9-58f4-8b0d-290227434aff"] [:name "Telefon"] [:__typename :Category]) #ordered/map ([:id "5059c4fc-d34c-5c9a-9efe-257c7ec6fb6b"] [:name "Zuteilung unbekannt - IT & Elektronik"] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id "f6885671-3bf3-56f2-8e92-b5112d0f703f"] [:name "Musikinstrumente"] [:categories [#ordered/map ([:id "af3372a1-63a8-52dc-850e-c2ae91c1c078"] [:name "Musikinstrumente"] [:__typename :Category]) #ordered/map ([:id "17a52112-1986-5074-b1d9-0faff29a785b"] [:name "Zuteilung unbekannt - Musikinstrumente"] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id "6c8a0d77-6711-5156-a59a-12425ba01cff"] [:name "Werkstatt-Technik"] [:categories [#ordered/map ([:id "6870a16c-9a71-5e60-b94a-f0b784398fec"] [:name "Handwerkzeug"] [:__typename :Category]) #ordered/map ([:id "771fddcf-b19a-5e6b-8b6f-7266b6922c4f"] [:name "Maschinen"] [:__typename :Category]) #ordered/map ([:id "c7ece4a6-2b5c-409f-96ea-e4fd6e8f9792"] [:name "Sicherheit"] [:__typename :Category]) #ordered/map ([:id "3eaad5d5-516a-5610-8caf-342cfdcaac62"] [:name "Zuteilung unbekannt - Werkstatt-Technik"] [:__typename :Category])]] [:__typename :MainCategory])]] [:organizations [#ordered/map ([:id "6e16eaec-ff6f-5850-bcf9-a67038b019e0"] [:name "DDE"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "7259bd26-7af4-52d0-83e6-9d0be46e3c9d"] [:name "Design"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "fe7d2ef9-1d86-50b1-be23-4197ee5002f0"] [:name "Direktion"] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id "a80d7883-9e83-5d93-b7b7-11af0eee9142"] [:name "DDK"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "0fcff067-33c3-5ddf-8c95-2be79425fb58"] [:name "BA Theater"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "f6d6714c-c7fa-513a-8863-0f8db9899fd2"] [:name "DDK"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "f57d9be4-e051-4278-89e2-93509b722f1f"] [:name "DDK Produktion"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "30f4f288-ec31-53e7-beda-57a5fcdbfaac"] [:name "Direktion"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "4846f9d8-d504-44cf-95d9-23612bb30739"] [:name "Disziplin Film"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "4b51b317-e746-4db4-b9e6-dfc427a7ba26"] [:name "Disziplin Tanz"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "f9d45317-e9e3-489e-8f4b-0b7fa944931d"] [:name "Disziplin Theater"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "e9dc753a-0584-55e4-bb9e-e4b86d841ed5"] [:name "Institute Performing Arts + Film"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "464c31eb-0ba9-4c52-a7e7-f11b25d7c8d0"] [:name "Leitung"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "e7f865cd-c426-5d4e-b8be-f63fa395a5fa"] [:name "MA Film"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "f6a2c53d-2b9f-5ae8-a2f3-54e3f70e68ce"] [:name "NFH Tanz Akademie"] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id "dee5706d-5163-4259-bf3d-fe72e0c4a338"] [:name "DFA"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "529a71c7-b268-4661-9ecc-be0ccba3f00f"] [:name "BA Fine Arts"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "7b2faf21-d842-45b5-a5b0-1c8d590b8418"] [:name "Direktion"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "9c033410-cf0c-423e-ba8a-b07d68375cb9"] [:name "IFCAR"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "a305c3ae-bca3-429b-8395-b1a727d22a30"] [:name "MA DFA"] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id "23939ae1-2288-53cf-9d5b-54aaaa5e52c6"] [:name "DKM"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "da83d766-f73d-58e7-9299-ac75140812e0"] [:name "Direktion"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "d13b189b-319f-53d9-a33d-93450e7da352"] [:name "Institut fr Gegenwartsknste"] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id "53266f06-6625-5967-9c39-d8e1941d8ae2"] [:name "DKV"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "2857586f-1ff0-4bc1-93f3-1050852cfe2a"] [:name "BA Art Education"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "06007991-b592-5d94-9b1e-a9156b393b84"] [:name "BA Vermittlung"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "a80f1fbb-5071-54c1-8757-a4cfd9b39a70"] [:name "Direktion"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "5656e676-663c-5402-9809-91f3f72ff4ad"] [:name "DKV"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "564e258b-ffda-4e57-aa89-f5e1f3aaef8d"] [:name "Forschung Art Eduacation"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "9161d8e2-9431-4bf7-8fea-279a6148c941"] [:name "Forschung Cultural Critique"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "7839f290-43e7-4957-84de-d075837e33d6"] [:name "FSP sthetik"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "314adc35-57a8-4119-bf8b-8fa9bcbeff9c"] [:name "FSP Kulturanalyse"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "4f5a58c5-c78e-53d7-a677-52072047952f"] [:name "FSP Transdisziplinaritt"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "f67c24b6-3518-5b1c-8eef-54857ed7fc5f"] [:name "MA Art Education"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "bfee2323-2d85-4edb-a946-da54036a9244"] [:name "MA Cultural Critique"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "cf8c1737-60b6-58c5-9a66-02f10cb69194"] [:name "MA Transdisziplinaritt"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "1486124f-b72f-4316-8b29-80b0e07d9bda"] [:name "Museum fr Gestaltung"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "2c17d2e1-8df8-59f6-bfca-ba49aa6b921b"] [:name "Museum fr Gestaltung Zrich"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "e84519d5-f877-58b5-9509-de82845342b8"] [:name "Propdeutikum"] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id "15876417-a25e-5cee-9f83-1a382ce6209a"] [:name "DMU"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "01f1470d-d97f-5f11-82eb-4ed40069d762"] [:name "Direktion"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "973fe7c5-2122-5965-9b22-1779f319ec06"] [:name "DMU"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "188ff0f7-9957-50f0-bfab-1a6303734a8b"] [:name "Forschung"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "51f80cb7-631c-5761-a4c7-ebaee6d0b818"] [:name "Inst. Computer Music + Sound Technology"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "12e8d4d4-f810-428b-9f46-c35333353593"] [:name "Institut for Music Research"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "66687f8e-6d83-4962-badb-efcd57700d9e"] [:name "Jazz & Pop"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "49679535-5619-54b5-bc48-d0692b08c59c"] [:name "Jazz + Pop"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "28f82510-4a16-5e6a-afd5-7c3ef44c2d8e"] [:name "Kirchenmusik"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "b3fc46c4-ae41-5905-9715-db6221171368"] [:name "Klassik I"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "7244df72-7e91-5a66-aeb6-07f52163bc6c"] [:name "Klassik II"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "af830cd6-8c3c-53db-b1d1-72258a6f33e0"] [:name "Klassik III"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "e6ff2869-4920-4307-93d1-20906c3e199b"] [:name "Komposition und Theorie"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "87dc9f2d-ef6d-5c65-bcd4-7d88a3e05743"] [:name "Musik + Bewegungspdagogik"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "4b3a3192-5d3c-51ae-989b-9dd8b8e8e306"] [:name "Pre College"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "88e7b28a-5e1a-5aae-8a02-336ab4d8710d"] [:name "Theorie"] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id "ab0bbd84-88e0-4355-be74-75d9b1926eb5"] [:name "Dossiers"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "74880d9f-4066-46c2-b118-cadb04703e42"] [:name "Dossier Lehre"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "d3fac247-5472-472e-a0f7-80fce2b19593"] [:name "Dossier Weiterbildung"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "8b0809c7-7f96-45e4-b821-0801bf4a41ba"] [:name "Dossiers"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "a5ecbe25-95e5-43d1-ab61-2a1abcad4ba6"] [:name "Forschung"] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id "e64b75d6-af09-5749-aac3-e4e0b9625842"] [:name "Rektorat"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "0a8c0f92-6e14-5b32-8a26-59c8633de2c3"] [:name "Rektorat"] [:shortname nil] [:__typename :Organization])]]) #ordered/map ([:id "dc6b0705-5d02-563d-9194-db2ad8f85fef"] [:name "Services"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "72039dea-7ec1-5616-afa3-3772b84bed77"] [:name "Finanzen"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "f4e2fef4-1c52-57d0-b179-1767267c12cb"] [:name "FM"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "954e3858-15b5-5fc8-9dea-23d4b6af9ad8"] [:name "Hochschuladministration"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "81b6dd89-f7d8-48ac-8552-f9565ede8141"] [:name "HR"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "37bbe3df-7553-5d5f-82fa-7e9a2d94951a"] [:name "ITZ"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "552a8a15-7a48-5205-9aeb-a4b73ef8ca89"] [:name "TES"] [:shortname nil] [:__typename :Organization]) #ordered/map ([:id "1a52b1ea-71ff-4e70-af9e-d3d6480c88d6"] [:name "Verwaltungsdirektion"] [:shortname nil] [:__typename :Organization])]])]])}
