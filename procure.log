# java_leihs-procure-server env check via asdf v0.13.1
# java_leihs-procure-server env skipped update; touch .tool-versions or remove /var/folders/jl/49spzkdd2v3cdz37fgmp0ddr6cj76v/T/asdf_cache_java_leihs-procure-server to force update
# clojure_leihs-procure-server env check via asdf v0.13.1
# clojure_leihs-procure-server env skipped update; touch .tool-versions or remove /var/folders/jl/49spzkdd2v3cdz37fgmp0ddr6cj76v/T/asdf_cache_clojure_leihs-procure-server to force update
Warning: environ value /Users/mradl/.asdf/installs/java/zulu-11.60.19 for key :java-home has been overwritten with /Users/mradl/.asdf/installs/java/zulu-11.60.19/zulu-11.jdk/Contents/Home
2023-11-30T12:07:32.239Z NX-41294 WARN [leihs.core.release:13] - Failed to read releases.yml, returning bogus value 
2023-11-30T12:07:32.826Z NX-41294 INFO [leihs.core.logging:37] - initializing logging  {:min-level [[#{"leihs.procurement.resources.*" "leihs.procurement.permissions.*" "leihs.procurement.authorization" "leihs.procurement.*"} :debug] [#{"com.zaxxer.hikari.*" "leihs.*"} :debug] [#{"*"} :debug]], :log-level :debug}
2023-11-30T12:07:32.833Z NX-41294 INFO [leihs.core.logging:39] - initialized logging  {:min-level [[#{"leihs.procurement.resources.*" "leihs.procurement.permissions.*" "leihs.procurement.authorization" "leihs.procurement.*"} :debug] [#{"com.zaxxer.hikari.*" "leihs.*"} :debug] [#{"*"} :debug]], :ns-filter #{"*"}, :middleware [], :timestamp-opts {:pattern :iso8601, :locale :jvm-default, :timezone :utc}, :output-fn #object[taoensso.timbre$default_output_fn 0x1b083435 "taoensso.timbre$default_output_fn@1b083435"], :appenders {:println {:enabled? true, :fn #object[taoensso.timbre.appenders.core$println_appender$fn__3459 0x22aecb24 "taoensso.timbre.appenders.core$println_appender$fn__3459@22aecb24"]}}, :_init-config {:loaded-from-source :default, :compile-time-config {:min-level nil, :ns-pattern "*"}}, :log-level :debug}
2023-11-30T12:07:32.836Z NX-41294 INFO [leihs.procurement.main:50] - main ("--dev-mode" "true" "--repl" "true" "run" "--db-port" "5415" "--db-name" "leihs_test")
2023-11-30T12:07:32.847Z NX-41294 INFO [leihs.core.repl:62] - init {:dev-mode true, :repl true, :repl-bind "localhost", :repl-port 56614, :repl-port-file ".nrepl-port"}
2023-11-30T12:07:32.849Z NX-41294 INFO [leihs.core.repl:70] - starting nREPL server  56614 localhost
2023-11-30T12:07:32.870Z NX-41294 INFO [leihs.core.repl:75] - started nREPL server 
2023-11-30T12:07:32.873Z NX-41294 INFO [leihs.procurement.run:326] - Invoking run with options:  {:db-host localhost, :db-max-pool-size 16, :db-min-pool-size 2, :db-name leihs_test, :db-password leihs, :db-port 5415, :db-user leihs, :dev-mode true, :http-host localhost, :http-max-threads 8, :http-min-threads 1, :http-port 3230, :http-queue-capacity 640, :http-thread-keep-alive-seconds 10, :http-worker-prefix leihs-service-http-worker-, :pid-file nil, :repl true, :repl-bind localhost, :repl-port 56614, :repl-port-file .nrepl-port}
2023-11-30T12:07:32.874Z NX-41294 INFO [leihs.core.shutdown:20] - PID 23452
2023-11-30T12:07:32.889Z NX-41294 INFO [leihs.core.shutdown:29] - Registering SIGTERM handler for shutdown.
2023-11-30T12:07:32.947Z NX-41294 INFO [leihs.core.graphql:17] - Initialized graphQL schema.
2023-11-30T12:07:32.949Z NX-41294 INFO [leihs.core.db:220] - Initializing db  {:db-name "leihs_test", :db-port 5415, :db-host "localhost", :db-user "leihs", :db-password "leihs", :db-min-pool-size 2, :db-max-pool-size 16}
2023-11-30T12:07:32.953Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1100] - db-pool - configuration:
2023-11-30T12:07:32.961Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - allowPoolSuspension.............false
2023-11-30T12:07:32.962Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - autoCommit......................true
2023-11-30T12:07:32.962Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - catalog.........................none
2023-11-30T12:07:32.962Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionInitSql...............none
2023-11-30T12:07:32.962Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTestQuery.............none
2023-11-30T12:07:32.963Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTimeout...............30000
2023-11-30T12:07:32.963Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSource......................none
2023-11-30T12:07:32.965Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceClassName............."org.postgresql.ds.PGSimpleDataSource"
2023-11-30T12:07:32.965Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceJNDI..................none
2023-11-30T12:07:32.967Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceProperties............{password=<masked>, databaseName=leihs_test, serverName=localhost, portNumber=5415}
2023-11-30T12:07:32.967Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - driverClassName.................none
2023-11-30T12:07:32.967Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - exceptionOverrideClassName......none
2023-11-30T12:07:32.967Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckProperties...........{}
2023-11-30T12:07:32.967Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckRegistry.............com.codahale.metrics.health.HealthCheckRegistry@6fb99e0f
2023-11-30T12:07:32.967Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - idleTimeout.....................60000
2023-11-30T12:07:32.968Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - initializationFailTimeout.......1
2023-11-30T12:07:32.968Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - isolateInternalQueries..........false
2023-11-30T12:07:32.968Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - jdbcUrl.........................none
2023-11-30T12:07:32.968Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - keepaliveTime...................0
2023-11-30T12:07:32.968Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - leakDetectionThreshold..........0
2023-11-30T12:07:32.968Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maxLifetime.....................3600000
2023-11-30T12:07:32.969Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maximumPoolSize.................16
2023-11-30T12:07:32.969Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricRegistry..................com.codahale.metrics.MetricRegistry@383ceacb
2023-11-30T12:07:32.969Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricsTrackerFactory...........none
2023-11-30T12:07:32.969Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - minimumIdle.....................2
2023-11-30T12:07:32.969Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - password........................<masked>
2023-11-30T12:07:32.969Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - poolName........................"db-pool"
2023-11-30T12:07:32.970Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - readOnly........................false
2023-11-30T12:07:32.970Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - registerMbeans..................false
2023-11-30T12:07:32.970Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - scheduledExecutor...............none
2023-11-30T12:07:32.970Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - schema..........................none
2023-11-30T12:07:32.971Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - threadFactory...................internal
2023-11-30T12:07:32.971Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - transactionIsolation............default
2023-11-30T12:07:32.971Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - username........................"leihs"
2023-11-30T12:07:32.971Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - validationTimeout...............5000
2023-11-30T12:07:32.973Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:80] - db-pool - Starting...
2023-11-30T12:07:33.035Z NX-41294 INFO [com.zaxxer.hikari.pool.HikariPool:565] - db-pool - Added connection org.postgresql.jdbc.PgConnection@4c858a34
2023-11-30T12:07:33.040Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:82] - db-pool - Start completed.
2023-11-30T12:07:33.041Z NX-41294 INFO [leihs.core.db:222] - Initialized db  {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 "HikariDataSource (db-pool)"]}
2023-11-30T12:07:33.041Z NX-41294 INFO [leihs.core.db:223] - Initializing ds-next  {:db-name "leihs_test", :db-port 5415, :db-host "localhost", :db-user "leihs", :db-password "leihs", :db-min-pool-size 2, :db-max-pool-size 16}
2023-11-30T12:07:33.054Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1100] - HikariPool-1 - configuration:
2023-11-30T12:07:33.055Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - allowPoolSuspension.............false
2023-11-30T12:07:33.055Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - autoCommit......................true
2023-11-30T12:07:33.055Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - catalog.........................none
2023-11-30T12:07:33.055Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionInitSql...............none
2023-11-30T12:07:33.055Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTestQuery.............none
2023-11-30T12:07:33.055Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTimeout...............30000
2023-11-30T12:07:33.056Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSource......................none
2023-11-30T12:07:33.056Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceClassName.............none
2023-11-30T12:07:33.056Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceJNDI..................none
2023-11-30T12:07:33.056Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceProperties............{password=<masked>}
2023-11-30T12:07:33.056Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - driverClassName.................none
2023-11-30T12:07:33.057Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - exceptionOverrideClassName......none
2023-11-30T12:07:33.057Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckProperties...........{}
2023-11-30T12:07:33.057Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckRegistry.............none
2023-11-30T12:07:33.057Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - idleTimeout.....................60000
2023-11-30T12:07:33.057Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - initializationFailTimeout.......1
2023-11-30T12:07:33.057Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - isolateInternalQueries..........false
2023-11-30T12:07:33.058Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - jdbcUrl.........................jdbc:postgresql://localhost:5415/leihs_test
2023-11-30T12:07:33.058Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - keepaliveTime...................0
2023-11-30T12:07:33.058Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - leakDetectionThreshold..........0
2023-11-30T12:07:33.058Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maxLifetime.....................3600000
2023-11-30T12:07:33.058Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maximumPoolSize.................16
2023-11-30T12:07:33.058Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricRegistry..................none
2023-11-30T12:07:33.059Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricsTrackerFactory...........none
2023-11-30T12:07:33.059Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - minimumIdle.....................2
2023-11-30T12:07:33.059Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - password........................<masked>
2023-11-30T12:07:33.059Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - poolName........................"HikariPool-1"
2023-11-30T12:07:33.059Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - readOnly........................false
2023-11-30T12:07:33.059Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - registerMbeans..................false
2023-11-30T12:07:33.059Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - scheduledExecutor...............none
2023-11-30T12:07:33.060Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - schema..........................none
2023-11-30T12:07:33.060Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - threadFactory...................internal
2023-11-30T12:07:33.060Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - transactionIsolation............default
2023-11-30T12:07:33.060Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - username........................"leihs"
2023-11-30T12:07:33.060Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - validationTimeout...............5000
2023-11-30T12:07:33.060Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:110] - HikariPool-1 - Starting...
2023-11-30T12:07:33.061Z NX-41294 DEBUG [com.zaxxer.hikari.util.DriverDataSource:107] - Loaded driver with class name org.postgresql.Driver for jdbcUrl=jdbc:postgresql://localhost:5415/leihs_test
2023-11-30T12:07:33.070Z NX-41294 INFO [com.zaxxer.hikari.pool.HikariPool:565] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@73d015bd
2023-11-30T12:07:33.070Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:123] - HikariPool-1 - Start completed.
2023-11-30T12:07:33.076Z NX-41294 INFO [leihs.core.db:225] - Initialized ds-next  #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a "HikariDataSource (HikariPool-1)"], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e "next.jdbc.result_set$as_unqualified_lower_maps@6e00588e"]}}
2023-11-30T12:07:33.083Z NX-41294 INFO [leihs.core.http-server:101] - starting http-server  {:port 3230, :ip "localhost", :pool {:queue #object[java.util.concurrent.ArrayBlockingQueue 0x7e3495fd "[]"], :pool #object[java.util.concurrent.ThreadPoolExecutor 0x5fafe841 "java.util.concurrent.ThreadPoolExecutor@5fafe841[Running, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]"]}}
2023-11-30T12:07:33.093Z NX-41294 INFO [leihs.core.http-server:104] - started http-server 
2023-11-30T12:07:33.145Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2023-11-30T12:07:33.146Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2023-11-30T12:07:33.154Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - db-pool - Added connection org.postgresql.jdbc.PgConnection@58241e42
2023-11-30T12:07:33.167Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After adding stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T12:07:33.175Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2023-11-30T12:07:33.175Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2023-11-30T12:07:33.182Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1e6ce516
2023-11-30T12:07:33.195Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After adding stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T12:07:36.966Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x441354cc HikariProxyPreparedStatement@1142117580 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T12:07:36.966Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:36.968Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dc419039-1baf-4c59-ad11-dc5f2fd109a2 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x441354cc HikariProxyPreparedStatement@1142117580 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T12:07:36.968Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dc419039-1baf-4c59-ad11-dc5f2fd109a2
2023-11-30T12:07:36.969Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x441354cc HikariProxyPreparedStatement@1142117580 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('dc419039-1baf-4c59-ad11-dc5f2fd109a2', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T12:07:36.969Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T12:07:36.971Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x441354cc HikariProxyPreparedStatement@1142117580 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('dc419039-1baf-4c59-ad11-dc5f2fd109a2', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T12:07:36.971Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value dc419039-1baf-4c59-ad11-dc5f2fd109a2}}, :remote-addr 127.0.0.1, :start-time 109629694219916, :params {:return-to /}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {:return-to /}, :route-params nil, :headers {sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=dc419039-1baf-4c59-ad11-dc5f2fd109a2, sec-fetch-user ?1, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, upgrade-insecure-requests 1, pragma no-cache, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x590dec42 /127.0.0.1:3230<->/127.0.0.1:55746], :server-port 3230, :params-raw {:return-to /}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2F, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x650db58b compojure.core$routes$fn__27950@650db58b], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in
2023-11-30T12:07:36.991Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => true
2023-11-30T12:07:36.995Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x72fc031d org.postgresql.jdbc.PgResultSetMetaData@72fc031d] 1]
2023-11-30T12:07:37.002Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.003Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.003Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x72fc031d org.postgresql.jdbc.PgResultSetMetaData@72fc031d] 2]
2023-11-30T12:07:37.003Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.004Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.004Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x72fc031d org.postgresql.jdbc.PgResultSetMetaData@72fc031d] 1]
2023-11-30T12:07:37.004Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.004Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.005Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x72fc031d org.postgresql.jdbc.PgResultSetMetaData@72fc031d] 2]
2023-11-30T12:07:37.005Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.005Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.005Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x72fc031d org.postgresql.jdbc.PgResultSetMetaData@72fc031d] 1]
2023-11-30T12:07:37.006Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.006Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.006Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x72fc031d org.postgresql.jdbc.PgResultSetMetaData@72fc031d] 2]
2023-11-30T12:07:37.006Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.007Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.007Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x72fc031d org.postgresql.jdbc.PgResultSetMetaData@72fc031d] 1]
2023-11-30T12:07:37.007Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.007Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.007Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x72fc031d org.postgresql.jdbc.PgResultSetMetaData@72fc031d] 2]
2023-11-30T12:07:37.007Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.008Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.009Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x515f50e2 org.postgresql.jdbc.PgResultSetMetaData@515f50e2] 1]
2023-11-30T12:07:37.009Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.009Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.010Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x515f50e2 org.postgresql.jdbc.PgResultSetMetaData@515f50e2] 2]
2023-11-30T12:07:37.010Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.010Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.010Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x515f50e2 org.postgresql.jdbc.PgResultSetMetaData@515f50e2] 1]
2023-11-30T12:07:37.010Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.010Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.011Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x515f50e2 org.postgresql.jdbc.PgResultSetMetaData@515f50e2] 2]
2023-11-30T12:07:37.011Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.011Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.011Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x515f50e2 org.postgresql.jdbc.PgResultSetMetaData@515f50e2] 1]
2023-11-30T12:07:37.012Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.012Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.012Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x515f50e2 org.postgresql.jdbc.PgResultSetMetaData@515f50e2] 2]
2023-11-30T12:07:37.012Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.012Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.012Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x515f50e2 org.postgresql.jdbc.PgResultSetMetaData@515f50e2] 1]
2023-11-30T12:07:37.013Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.013Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.013Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x515f50e2 org.postgresql.jdbc.PgResultSetMetaData@515f50e2] 2]
2023-11-30T12:07:37.013Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.013Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.020Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2711592d HikariProxyPreparedStatement@655448365 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-11-30T12:07:37.020Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-11-30T12:07:37.022Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 1]
2023-11-30T12:07:37.031Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"]
2023-11-30T12:07:37.031Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:37.032Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 3]
2023-11-30T12:07:37.032Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-11-30T12:07:37.032Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-11-30T12:07:37.032Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 4]
2023-11-30T12:07:37.032Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-11-30T12:07:37.032Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-11-30T12:07:37.033Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 7]
2023-11-30T12:07:37.033Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-11-30T12:07:37.033Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-11-30T12:07:37.034Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 15]
2023-11-30T12:07:37.034Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:37.035Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:37.035Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 16]
2023-11-30T12:07:37.036Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:37.036Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:37.036Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 25]
2023-11-30T12:07:37.036Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-11-30T12:07:37.036Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-11-30T12:07:37.037Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 32]
2023-11-30T12:07:37.037Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.037Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.037Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2187a76b-557a-4775-9a1e-778142161819" #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 1]
2023-11-30T12:07:37.037Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2187a76b-557a-4775-9a1e-778142161819"]
2023-11-30T12:07:37.038Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2187a76b-557a-4775-9a1e-778142161819"
2023-11-30T12:07:37.038Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 3]
2023-11-30T12:07:37.038Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-11-30T12:07:37.038Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-11-30T12:07:37.038Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 4]
2023-11-30T12:07:37.039Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-11-30T12:07:37.039Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-11-30T12:07:37.039Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 7]
2023-11-30T12:07:37.039Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-11-30T12:07:37.039Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-11-30T12:07:37.039Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 15]
2023-11-30T12:07:37.039Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:37.039Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:37.040Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 16]
2023-11-30T12:07:37.040Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:37.040Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:37.040Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 25]
2023-11-30T12:07:37.040Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-11-30T12:07:37.040Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-11-30T12:07:37.040Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 32]
2023-11-30T12:07:37.041Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.041Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.041Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 1]
2023-11-30T12:07:37.041Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:37.041Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:37.041Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 3]
2023-11-30T12:07:37.041Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:37.041Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:37.042Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 4]
2023-11-30T12:07:37.042Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:37.042Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:37.042Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 7]
2023-11-30T12:07:37.042Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:37.042Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:37.042Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.590176000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 15]
2023-11-30T12:07:37.043Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.590176000-00:00"]
2023-11-30T12:07:37.043Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.590176Z"
2023-11-30T12:07:37.043Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:06:27.014481000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 16]
2023-11-30T12:07:37.043Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:06:27.014481000-00:00"]
2023-11-30T12:07:37.043Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:06:27.014481Z"
2023-11-30T12:07:37.044Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 25]
2023-11-30T12:07:37.044Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-11-30T12:07:37.044Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-11-30T12:07:37.044Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 32]
2023-11-30T12:07:37.044Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.045Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.045Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:06:27.014481000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x276c99b6 org.postgresql.jdbc.PgResultSetMetaData@276c99b6] 34]
2023-11-30T12:07:37.045Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:06:27.014481000-00:00"]
2023-11-30T12:07:37.045Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:06:27.014481Z"
2023-11-30T12:07:37.049Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3ffc60fd HikariProxyPreparedStatement@1073504509 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-11-30T12:07:37.049Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-11-30T12:07:37.050Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3ffc60fd HikariProxyPreparedStatement@1073504509 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-11-30T12:07:37.050Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:37.053Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1de5d015 org.postgresql.jdbc.PgResultSetMetaData@1de5d015] 1]
2023-11-30T12:07:37.056Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:37.056Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:37.056Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1de5d015 org.postgresql.jdbc.PgResultSetMetaData@1de5d015] 2]
2023-11-30T12:07:37.056Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:37.056Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:37.056Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1de5d015 org.postgresql.jdbc.PgResultSetMetaData@1de5d015] 3]
2023-11-30T12:07:37.057Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-11-30T12:07:37.057Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-11-30T12:07:37.059Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-11-24T19:25:51.509587Z", :firstname "Dawna", :zip nil, :id #uuid "4f89923d-8dc6-42f8-999e-1459875d960b", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-11-24T19:25:51.509587Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-11-30T12:07:37.062Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x34f7c5e6 org.postgresql.jdbc.PgResultSetMetaData@34f7c5e6] 1]
2023-11-30T12:07:37.062Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.062Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.062Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x34f7c5e6 org.postgresql.jdbc.PgResultSetMetaData@34f7c5e6] 2]
2023-11-30T12:07:37.063Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.063Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.063Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x34f7c5e6 org.postgresql.jdbc.PgResultSetMetaData@34f7c5e6] 1]
2023-11-30T12:07:37.064Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.064Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.064Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x34f7c5e6 org.postgresql.jdbc.PgResultSetMetaData@34f7c5e6] 2]
2023-11-30T12:07:37.064Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.064Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.064Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x34f7c5e6 org.postgresql.jdbc.PgResultSetMetaData@34f7c5e6] 1]
2023-11-30T12:07:37.064Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.065Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.065Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x34f7c5e6 org.postgresql.jdbc.PgResultSetMetaData@34f7c5e6] 2]
2023-11-30T12:07:37.065Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.065Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.065Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x34f7c5e6 org.postgresql.jdbc.PgResultSetMetaData@34f7c5e6] 1]
2023-11-30T12:07:37.065Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.065Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.065Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x34f7c5e6 org.postgresql.jdbc.PgResultSetMetaData@34f7c5e6] 2]
2023-11-30T12:07:37.066Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.066Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.066Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x3cd1c627 org.postgresql.jdbc.PgResultSetMetaData@3cd1c627] 1]
2023-11-30T12:07:37.066Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.067Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.067Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x3cd1c627 org.postgresql.jdbc.PgResultSetMetaData@3cd1c627] 2]
2023-11-30T12:07:37.067Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.067Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.067Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x3cd1c627 org.postgresql.jdbc.PgResultSetMetaData@3cd1c627] 1]
2023-11-30T12:07:37.067Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.067Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.068Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x3cd1c627 org.postgresql.jdbc.PgResultSetMetaData@3cd1c627] 2]
2023-11-30T12:07:37.068Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.068Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.068Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x3cd1c627 org.postgresql.jdbc.PgResultSetMetaData@3cd1c627] 1]
2023-11-30T12:07:37.068Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.068Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.068Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x3cd1c627 org.postgresql.jdbc.PgResultSetMetaData@3cd1c627] 2]
2023-11-30T12:07:37.068Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.069Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.069Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x3cd1c627 org.postgresql.jdbc.PgResultSetMetaData@3cd1c627] 1]
2023-11-30T12:07:37.069Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.069Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.069Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x3cd1c627 org.postgresql.jdbc.PgResultSetMetaData@3cd1c627] 2]
2023-11-30T12:07:37.069Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.069Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.072Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "65184e75-5146-4915-8494-09445d034d15", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/"}, :csrfToken {:value "65184e75-5146-4915-8494-09445d034d15", :name "csrf-token"}}
2023-11-30T12:07:37.073Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:status 200, :headers {"Content-Type" "text/html; charset=utf-8"}, :body "<!DOCTYPE html>\n<html><head><style>body { font-family: sans-serif; width: 400px; margin: 2rem auto; text-align: center; }\n             * { margin: 0.5rem; }\n             input { width: 15rem; }\n             .message { background-color: pink; padding: 1rem; }</style></head><body><h1>Leihs Simple Login</h1><p>For testing only</p><form action=\"/sign-in\" class=\"ui-form-signin\" method=\"POST\"><div><label>Username<input name=\"user\" type=\"text\"></label></div><div><label>Password<input name=\"password\" type=\"password\" value=\"\"></label></div><input name=\"csrf-token\" type=\"hidden\" value=\"65184e75-5146-4915-8494-09445d034d15\"><input name=\"return-to\" type=\"hidden\" value=\"/\"><div><button type=\"submit\">Continue</button></div></form></body></html>"}
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 109629914485208, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site cross-site, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", connection keep-alive, accept image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x2cb73b11 /127.0.0.1:3230<->/127.0.0.1:55749], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x650db58b compojure.core$routes$fn__27950@650db58b], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :apng, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in
2023-11-30T12:07:37.134Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => true
2023-11-30T12:07:37.136Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0xef4953b org.postgresql.jdbc.PgResultSetMetaData@ef4953b] 1]
2023-11-30T12:07:37.137Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.137Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.137Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0xef4953b org.postgresql.jdbc.PgResultSetMetaData@ef4953b] 2]
2023-11-30T12:07:37.138Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.138Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.138Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0xef4953b org.postgresql.jdbc.PgResultSetMetaData@ef4953b] 1]
2023-11-30T12:07:37.138Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.138Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.138Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0xef4953b org.postgresql.jdbc.PgResultSetMetaData@ef4953b] 2]
2023-11-30T12:07:37.138Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.139Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.139Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0xef4953b org.postgresql.jdbc.PgResultSetMetaData@ef4953b] 1]
2023-11-30T12:07:37.139Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.139Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.140Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0xef4953b org.postgresql.jdbc.PgResultSetMetaData@ef4953b] 2]
2023-11-30T12:07:37.140Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.140Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.140Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0xef4953b org.postgresql.jdbc.PgResultSetMetaData@ef4953b] 1]
2023-11-30T12:07:37.140Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.140Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.141Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0xef4953b org.postgresql.jdbc.PgResultSetMetaData@ef4953b] 2]
2023-11-30T12:07:37.141Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.141Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.142Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x7c0eddd9 org.postgresql.jdbc.PgResultSetMetaData@7c0eddd9] 1]
2023-11-30T12:07:37.143Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.143Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.143Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x7c0eddd9 org.postgresql.jdbc.PgResultSetMetaData@7c0eddd9] 2]
2023-11-30T12:07:37.143Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.143Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.143Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x7c0eddd9 org.postgresql.jdbc.PgResultSetMetaData@7c0eddd9] 1]
2023-11-30T12:07:37.143Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.144Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.144Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x7c0eddd9 org.postgresql.jdbc.PgResultSetMetaData@7c0eddd9] 2]
2023-11-30T12:07:37.144Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.144Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.144Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x7c0eddd9 org.postgresql.jdbc.PgResultSetMetaData@7c0eddd9] 1]
2023-11-30T12:07:37.144Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.144Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.145Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x7c0eddd9 org.postgresql.jdbc.PgResultSetMetaData@7c0eddd9] 2]
2023-11-30T12:07:37.145Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.145Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.145Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x7c0eddd9 org.postgresql.jdbc.PgResultSetMetaData@7c0eddd9] 1]
2023-11-30T12:07:37.145Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.145Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.145Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x7c0eddd9 org.postgresql.jdbc.PgResultSetMetaData@7c0eddd9] 2]
2023-11-30T12:07:37.146Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.146Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.148Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x47e1217 HikariProxyPreparedStatement@75371031 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-11-30T12:07:37.148Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-11-30T12:07:37.149Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 1]
2023-11-30T12:07:37.149Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"]
2023-11-30T12:07:37.149Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:37.150Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 3]
2023-11-30T12:07:37.150Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-11-30T12:07:37.150Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-11-30T12:07:37.150Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 4]
2023-11-30T12:07:37.151Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-11-30T12:07:37.151Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-11-30T12:07:37.151Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 7]
2023-11-30T12:07:37.151Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-11-30T12:07:37.151Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-11-30T12:07:37.151Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 15]
2023-11-30T12:07:37.152Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:37.152Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:37.152Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 16]
2023-11-30T12:07:37.152Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:37.153Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:37.153Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 25]
2023-11-30T12:07:37.153Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-11-30T12:07:37.153Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-11-30T12:07:37.153Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 32]
2023-11-30T12:07:37.154Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.154Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.154Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2187a76b-557a-4775-9a1e-778142161819" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 1]
2023-11-30T12:07:37.154Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2187a76b-557a-4775-9a1e-778142161819"]
2023-11-30T12:07:37.154Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2187a76b-557a-4775-9a1e-778142161819"
2023-11-30T12:07:37.154Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 3]
2023-11-30T12:07:37.155Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-11-30T12:07:37.155Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-11-30T12:07:37.155Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 4]
2023-11-30T12:07:37.155Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-11-30T12:07:37.155Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-11-30T12:07:37.155Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 7]
2023-11-30T12:07:37.155Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-11-30T12:07:37.155Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-11-30T12:07:37.156Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 15]
2023-11-30T12:07:37.156Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:37.156Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:37.156Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 16]
2023-11-30T12:07:37.157Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:37.157Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:37.157Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 25]
2023-11-30T12:07:37.157Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-11-30T12:07:37.158Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-11-30T12:07:37.158Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 32]
2023-11-30T12:07:37.158Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.158Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.158Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 1]
2023-11-30T12:07:37.158Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:37.158Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:37.159Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 3]
2023-11-30T12:07:37.159Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:37.159Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:37.159Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 4]
2023-11-30T12:07:37.159Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:37.159Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:37.159Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 7]
2023-11-30T12:07:37.159Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:37.159Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:37.160Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.590176000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 15]
2023-11-30T12:07:37.160Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.590176000-00:00"]
2023-11-30T12:07:37.160Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.590176Z"
2023-11-30T12:07:37.161Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:06:27.014481000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 16]
2023-11-30T12:07:37.161Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:06:27.014481000-00:00"]
2023-11-30T12:07:37.161Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:06:27.014481Z"
2023-11-30T12:07:37.161Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 25]
2023-11-30T12:07:37.161Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-11-30T12:07:37.161Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-11-30T12:07:37.162Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 32]
2023-11-30T12:07:37.162Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.162Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.162Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:06:27.014481000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5d6f0825 org.postgresql.jdbc.PgResultSetMetaData@5d6f0825] 34]
2023-11-30T12:07:37.162Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:06:27.014481000-00:00"]
2023-11-30T12:07:37.162Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:06:27.014481Z"
2023-11-30T12:07:37.164Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4f2dc2a8 HikariProxyPreparedStatement@1328399016 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-11-30T12:07:37.164Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-11-30T12:07:37.165Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4f2dc2a8 HikariProxyPreparedStatement@1328399016 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-11-30T12:07:37.165Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x6ed90da1 org.postgresql.jdbc.PgResultSetMetaData@6ed90da1] 1]
2023-11-30T12:07:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:37.167Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x6ed90da1 org.postgresql.jdbc.PgResultSetMetaData@6ed90da1] 2]
2023-11-30T12:07:37.167Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:37.167Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:37.167Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x6ed90da1 org.postgresql.jdbc.PgResultSetMetaData@6ed90da1] 3]
2023-11-30T12:07:37.167Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-11-30T12:07:37.167Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-11-30T12:07:37.168Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-11-24T19:25:51.509587Z", :firstname "Dawna", :zip nil, :id #uuid "4f89923d-8dc6-42f8-999e-1459875d960b", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-11-24T19:25:51.509587Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-11-30T12:07:37.170Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x7a8b2376 org.postgresql.jdbc.PgResultSetMetaData@7a8b2376] 1]
2023-11-30T12:07:37.170Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.170Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.170Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x7a8b2376 org.postgresql.jdbc.PgResultSetMetaData@7a8b2376] 2]
2023-11-30T12:07:37.170Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.170Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.171Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x7a8b2376 org.postgresql.jdbc.PgResultSetMetaData@7a8b2376] 1]
2023-11-30T12:07:37.171Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.171Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.171Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x7a8b2376 org.postgresql.jdbc.PgResultSetMetaData@7a8b2376] 2]
2023-11-30T12:07:37.171Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.171Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.171Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x7a8b2376 org.postgresql.jdbc.PgResultSetMetaData@7a8b2376] 1]
2023-11-30T12:07:37.172Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.172Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.173Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x7a8b2376 org.postgresql.jdbc.PgResultSetMetaData@7a8b2376] 2]
2023-11-30T12:07:37.173Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.173Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.173Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x7a8b2376 org.postgresql.jdbc.PgResultSetMetaData@7a8b2376] 1]
2023-11-30T12:07:37.173Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.173Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.174Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x7a8b2376 org.postgresql.jdbc.PgResultSetMetaData@7a8b2376] 2]
2023-11-30T12:07:37.174Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.174Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.175Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x4745f5be org.postgresql.jdbc.PgResultSetMetaData@4745f5be] 1]
2023-11-30T12:07:37.175Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.175Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.176Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x4745f5be org.postgresql.jdbc.PgResultSetMetaData@4745f5be] 2]
2023-11-30T12:07:37.176Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.176Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.176Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x4745f5be org.postgresql.jdbc.PgResultSetMetaData@4745f5be] 1]
2023-11-30T12:07:37.176Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.177Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.177Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x4745f5be org.postgresql.jdbc.PgResultSetMetaData@4745f5be] 2]
2023-11-30T12:07:37.177Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.177Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.177Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x4745f5be org.postgresql.jdbc.PgResultSetMetaData@4745f5be] 1]
2023-11-30T12:07:37.178Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.178Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.178Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x4745f5be org.postgresql.jdbc.PgResultSetMetaData@4745f5be] 2]
2023-11-30T12:07:37.178Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.178Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.178Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x4745f5be org.postgresql.jdbc.PgResultSetMetaData@4745f5be] 1]
2023-11-30T12:07:37.178Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.178Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.178Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x4745f5be org.postgresql.jdbc.PgResultSetMetaData@4745f5be] 2]
2023-11-30T12:07:37.179Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.179Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.181Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "a6bacb0c-adc8-4aac-983e-1b42e8513c10", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "a6bacb0c-adc8-4aac-983e-1b42e8513c10", :name "csrf-token"}}
2023-11-30T12:07:37.181Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:status 200, :headers {"Content-Type" "text/html; charset=utf-8"}, :body "<!DOCTYPE html>\n<html><head><style>body { font-family: sans-serif; width: 400px; margin: 2rem auto; text-align: center; }\n             * { margin: 0.5rem; }\n             input { width: 15rem; }\n             .message { background-color: pink; padding: 1rem; }</style></head><body><h1>Leihs Simple Login</h1><p>For testing only</p><form action=\"/sign-in\" class=\"ui-form-signin\" method=\"POST\"><div><label>Username<input name=\"user\" type=\"text\"></label></div><div><label>Password<input name=\"password\" type=\"password\" value=\"\"></label></div><input name=\"csrf-token\" type=\"hidden\" value=\"a6bacb0c-adc8-4aac-983e-1b42e8513c10\"><input name=\"return-to\" type=\"hidden\" value=\"/favicon.ico\"><div><button type=\"submit\">Continue</button></div></form></body></html>", :cookies {"leihs-anti-csrf-token" {:value "a6bacb0c-adc8-4aac-983e-1b42e8513c10", :http-only false, :path "/", :secure false}}}
2023-11-30T12:07:37.208Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2f289917 HikariProxyPreparedStatement@791189783 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T12:07:37.208Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:37.210Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dc419039-1baf-4c59-ad11-dc5f2fd109a2 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2f289917 HikariProxyPreparedStatement@791189783 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T12:07:37.210Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dc419039-1baf-4c59-ad11-dc5f2fd109a2
2023-11-30T12:07:37.211Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2f289917 HikariProxyPreparedStatement@791189783 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('dc419039-1baf-4c59-ad11-dc5f2fd109a2', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T12:07:37.211Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T12:07:37.212Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2f289917 HikariProxyPreparedStatement@791189783 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('dc419039-1baf-4c59-ad11-dc5f2fd109a2', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T12:07:37.212Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
2023-11-30T12:07:37.227Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x749ce7c1 HikariProxyPreparedStatement@1956440001 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T12:07:37.227Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:37.229Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dc419039-1baf-4c59-ad11-dc5f2fd109a2 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x749ce7c1 HikariProxyPreparedStatement@1956440001 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T12:07:37.229Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dc419039-1baf-4c59-ad11-dc5f2fd109a2
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
2023-11-30T12:07:37.230Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x749ce7c1 HikariProxyPreparedStatement@1956440001 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('dc419039-1baf-4c59-ad11-dc5f2fd109a2', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T12:07:37.231Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T12:07:37.231Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x749ce7c1 HikariProxyPreparedStatement@1956440001 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('dc419039-1baf-4c59-ad11-dc5f2fd109a2', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T12:07:37.232Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 109630016260666, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site cross-site, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", connection keep-alive, accept image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x15ab4bb4 /127.0.0.1:3230<->/127.0.0.1:55751], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x650db58b compojure.core$routes$fn__27950@650db58b], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :apng, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in
2023-11-30T12:07:37.234Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => true
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value dc419039-1baf-4c59-ad11-dc5f2fd109a2}}, :remote-addr 127.0.0.1, :start-time 109630003941125, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=dc419039-1baf-4c59-ad11-dc5f2fd109a2, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/sign-in?return-to=%2F, connection keep-alive, pragma no-cache, accept image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x210fd2b2 /127.0.0.1:3230<->/127.0.0.1:55746], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x650db58b compojure.core$routes$fn__27950@650db58b], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :apng, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in
2023-11-30T12:07:37.235Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => true
2023-11-30T12:07:37.235Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ebc132 org.postgresql.jdbc.PgResultSetMetaData@54ebc132] 1]
2023-11-30T12:07:37.235Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.236Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.236Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ebc132 org.postgresql.jdbc.PgResultSetMetaData@54ebc132] 2]
2023-11-30T12:07:37.236Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.236Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.236Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ebc132 org.postgresql.jdbc.PgResultSetMetaData@54ebc132] 1]
2023-11-30T12:07:37.237Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.237Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.237Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ebc132 org.postgresql.jdbc.PgResultSetMetaData@54ebc132] 2]
2023-11-30T12:07:37.238Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.238Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.239Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ebc132 org.postgresql.jdbc.PgResultSetMetaData@54ebc132] 1]
2023-11-30T12:07:37.239Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x89f6727 org.postgresql.jdbc.PgResultSetMetaData@89f6727] 1]
2023-11-30T12:07:37.239Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.240Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.240Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ebc132 org.postgresql.jdbc.PgResultSetMetaData@54ebc132] 2]
2023-11-30T12:07:37.240Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.240Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.240Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ebc132 org.postgresql.jdbc.PgResultSetMetaData@54ebc132] 1]
2023-11-30T12:07:37.241Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.241Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.241Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ebc132 org.postgresql.jdbc.PgResultSetMetaData@54ebc132] 2]
2023-11-30T12:07:37.241Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.241Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.242Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x6788f5ba org.postgresql.jdbc.PgResultSetMetaData@6788f5ba] 1]
2023-11-30T12:07:37.242Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.242Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.242Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x6788f5ba org.postgresql.jdbc.PgResultSetMetaData@6788f5ba] 2]
2023-11-30T12:07:37.242Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.242Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.243Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x6788f5ba org.postgresql.jdbc.PgResultSetMetaData@6788f5ba] 1]
2023-11-30T12:07:37.243Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.243Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.243Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x6788f5ba org.postgresql.jdbc.PgResultSetMetaData@6788f5ba] 2]
2023-11-30T12:07:37.243Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.243Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.243Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x6788f5ba org.postgresql.jdbc.PgResultSetMetaData@6788f5ba] 1]
2023-11-30T12:07:37.244Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.244Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.244Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x6788f5ba org.postgresql.jdbc.PgResultSetMetaData@6788f5ba] 2]
2023-11-30T12:07:37.244Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.244Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.244Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x6788f5ba org.postgresql.jdbc.PgResultSetMetaData@6788f5ba] 1]
2023-11-30T12:07:37.244Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.245Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.245Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x6788f5ba org.postgresql.jdbc.PgResultSetMetaData@6788f5ba] 2]
2023-11-30T12:07:37.245Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.245Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.245Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.245Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.246Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x89f6727 org.postgresql.jdbc.PgResultSetMetaData@89f6727] 2]
2023-11-30T12:07:37.246Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.246Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.246Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x89f6727 org.postgresql.jdbc.PgResultSetMetaData@89f6727] 1]
2023-11-30T12:07:37.246Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.246Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.246Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1fd15012 HikariProxyPreparedStatement@533811218 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-11-30T12:07:37.246Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x89f6727 org.postgresql.jdbc.PgResultSetMetaData@89f6727] 2]
2023-11-30T12:07:37.246Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-11-30T12:07:37.246Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x89f6727 org.postgresql.jdbc.PgResultSetMetaData@89f6727] 1]
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x89f6727 org.postgresql.jdbc.PgResultSetMetaData@89f6727] 2]
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 1]
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x89f6727 org.postgresql.jdbc.PgResultSetMetaData@89f6727] 1]
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"]
2023-11-30T12:07:37.247Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.248Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.248Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:37.248Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 3]
2023-11-30T12:07:37.248Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x89f6727 org.postgresql.jdbc.PgResultSetMetaData@89f6727] 2]
2023-11-30T12:07:37.248Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-11-30T12:07:37.248Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.248Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-11-30T12:07:37.248Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 4]
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x445f4c52 org.postgresql.jdbc.PgResultSetMetaData@445f4c52] 1]
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 7]
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x445f4c52 org.postgresql.jdbc.PgResultSetMetaData@445f4c52] 2]
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.249Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 15]
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x445f4c52 org.postgresql.jdbc.PgResultSetMetaData@445f4c52] 1]
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 16]
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x445f4c52 org.postgresql.jdbc.PgResultSetMetaData@445f4c52] 2]
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.250Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x445f4c52 org.postgresql.jdbc.PgResultSetMetaData@445f4c52] 1]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 25]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x445f4c52 org.postgresql.jdbc.PgResultSetMetaData@445f4c52] 2]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 32]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x445f4c52 org.postgresql.jdbc.PgResultSetMetaData@445f4c52] 1]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2187a76b-557a-4775-9a1e-778142161819" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 1]
2023-11-30T12:07:37.251Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2187a76b-557a-4775-9a1e-778142161819"]
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x445f4c52 org.postgresql.jdbc.PgResultSetMetaData@445f4c52] 2]
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2187a76b-557a-4775-9a1e-778142161819"
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 3]
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 4]
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 7]
2023-11-30T12:07:37.252Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-11-30T12:07:37.253Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-11-30T12:07:37.253Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 15]
2023-11-30T12:07:37.253Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:37.253Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:37.253Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 16]
2023-11-30T12:07:37.253Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:37.253Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:37.253Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 25]
2023-11-30T12:07:37.253Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1d912654 HikariProxyPreparedStatement@496051796 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-11-30T12:07:37.254Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-11-30T12:07:37.254Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-11-30T12:07:37.254Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-11-30T12:07:37.254Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 32]
2023-11-30T12:07:37.254Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.254Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.254Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 1]
2023-11-30T12:07:37.254Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:37.254Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:37.255Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 3]
2023-11-30T12:07:37.255Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:37.255Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:37.255Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 4]
2023-11-30T12:07:37.255Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:37.255Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:37.255Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 7]
2023-11-30T12:07:37.255Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:37.255Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:37.255Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.590176000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 15]
2023-11-30T12:07:37.256Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.590176000-00:00"]
2023-11-30T12:07:37.256Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 1]
2023-11-30T12:07:37.256Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.590176Z"
2023-11-30T12:07:37.256Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:06:27.014481000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 16]
2023-11-30T12:07:37.256Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:06:27.014481000-00:00"]
2023-11-30T12:07:37.256Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:06:27.014481Z"
2023-11-30T12:07:37.256Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 25]
2023-11-30T12:07:37.257Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-11-30T12:07:37.257Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-11-30T12:07:37.257Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 32]
2023-11-30T12:07:37.257Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.257Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.257Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:06:27.014481000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77482a4c org.postgresql.jdbc.PgResultSetMetaData@77482a4c] 34]
2023-11-30T12:07:37.257Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:06:27.014481000-00:00"]
2023-11-30T12:07:37.258Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:06:27.014481Z"
2023-11-30T12:07:37.260Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x21c106da HikariProxyPreparedStatement@566298330 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-11-30T12:07:37.260Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-11-30T12:07:37.260Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x21c106da HikariProxyPreparedStatement@566298330 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-11-30T12:07:37.261Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:37.262Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x33e26c55 org.postgresql.jdbc.PgResultSetMetaData@33e26c55] 1]
2023-11-30T12:07:37.262Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"]
2023-11-30T12:07:37.262Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:37.262Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:37.262Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 3]
2023-11-30T12:07:37.262Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x33e26c55 org.postgresql.jdbc.PgResultSetMetaData@33e26c55] 2]
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 4]
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x33e26c55 org.postgresql.jdbc.PgResultSetMetaData@33e26c55] 3]
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 7]
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-11-30T12:07:37.263Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 15]
2023-11-30T12:07:37.264Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:37.264Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:37.264Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 16]
2023-11-30T12:07:37.264Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:37.264Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:37.264Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 25]
2023-11-30T12:07:37.264Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-11-24T19:25:51.509587Z", :firstname "Dawna", :zip nil, :id #uuid "4f89923d-8dc6-42f8-999e-1459875d960b", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-11-24T19:25:51.509587Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-11-30T12:07:37.264Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-11-30T12:07:37.264Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-11-30T12:07:37.264Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 32]
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e66af9f org.postgresql.jdbc.PgResultSetMetaData@1e66af9f] 1]
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2187a76b-557a-4775-9a1e-778142161819" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 1]
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2187a76b-557a-4775-9a1e-778142161819"]
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2187a76b-557a-4775-9a1e-778142161819"
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e66af9f org.postgresql.jdbc.PgResultSetMetaData@1e66af9f] 2]
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 3]
2023-11-30T12:07:37.265Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e66af9f org.postgresql.jdbc.PgResultSetMetaData@1e66af9f] 1]
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 4]
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e66af9f org.postgresql.jdbc.PgResultSetMetaData@1e66af9f] 2]
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 7]
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.266Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e66af9f org.postgresql.jdbc.PgResultSetMetaData@1e66af9f] 1]
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 15]
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e66af9f org.postgresql.jdbc.PgResultSetMetaData@1e66af9f] 2]
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 16]
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e66af9f org.postgresql.jdbc.PgResultSetMetaData@1e66af9f] 1]
2023-11-30T12:07:37.267Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 25]
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 32]
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e66af9f org.postgresql.jdbc.PgResultSetMetaData@1e66af9f] 2]
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 1]
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 3]
2023-11-30T12:07:37.268Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x736df627 org.postgresql.jdbc.PgResultSetMetaData@736df627] 1]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 4]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x736df627 org.postgresql.jdbc.PgResultSetMetaData@736df627] 2]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 7]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x736df627 org.postgresql.jdbc.PgResultSetMetaData@736df627] 1]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.590176000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 15]
2023-11-30T12:07:37.269Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.270Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x736df627 org.postgresql.jdbc.PgResultSetMetaData@736df627] 2]
2023-11-30T12:07:37.270Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.590176000-00:00"]
2023-11-30T12:07:37.270Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.270Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.590176Z"
2023-11-30T12:07:37.270Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.270Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x736df627 org.postgresql.jdbc.PgResultSetMetaData@736df627] 1]
2023-11-30T12:07:37.270Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:06:27.014481000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 16]
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:06:27.014481000-00:00"]
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:06:27.014481Z"
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 25]
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x736df627 org.postgresql.jdbc.PgResultSetMetaData@736df627] 2]
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 32]
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x736df627 org.postgresql.jdbc.PgResultSetMetaData@736df627] 1]
2023-11-30T12:07:37.271Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:37.272Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:37.272Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:06:27.014481000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2354d31f org.postgresql.jdbc.PgResultSetMetaData@2354d31f] 34]
2023-11-30T12:07:37.272Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.272Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:06:27.014481000-00:00"]
2023-11-30T12:07:37.272Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.272Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:06:27.014481Z"
2023-11-30T12:07:37.272Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x736df627 org.postgresql.jdbc.PgResultSetMetaData@736df627] 2]
2023-11-30T12:07:37.272Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.272Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.274Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2d3a0c18 HikariProxyPreparedStatement@758778904 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-11-30T12:07:37.275Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-11-30T12:07:37.275Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "76239a3f-3456-4b54-9089-90b63a64f848", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "76239a3f-3456-4b54-9089-90b63a64f848", :name "csrf-token"}}
2023-11-30T12:07:37.276Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:status 200, :headers {"Content-Type" "text/html; charset=utf-8"}, :body "<!DOCTYPE html>\n<html><head><style>body { font-family: sans-serif; width: 400px; margin: 2rem auto; text-align: center; }\n             * { margin: 0.5rem; }\n             input { width: 15rem; }\n             .message { background-color: pink; padding: 1rem; }</style></head><body><h1>Leihs Simple Login</h1><p>For testing only</p><form action=\"/sign-in\" class=\"ui-form-signin\" method=\"POST\"><div><label>Username<input name=\"user\" type=\"text\"></label></div><div><label>Password<input name=\"password\" type=\"password\" value=\"\"></label></div><input name=\"csrf-token\" type=\"hidden\" value=\"76239a3f-3456-4b54-9089-90b63a64f848\"><input name=\"return-to\" type=\"hidden\" value=\"/favicon.ico\"><div><button type=\"submit\">Continue</button></div></form></body></html>", :cookies {"leihs-anti-csrf-token" {:value "76239a3f-3456-4b54-9089-90b63a64f848", :http-only false, :path "/", :secure false}}}
2023-11-30T12:07:37.276Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2d3a0c18 HikariProxyPreparedStatement@758778904 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-11-30T12:07:37.276Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:37.279Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ea65d97 org.postgresql.jdbc.PgResultSetMetaData@4ea65d97] 1]
2023-11-30T12:07:37.282Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:37.282Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:37.283Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ea65d97 org.postgresql.jdbc.PgResultSetMetaData@4ea65d97] 2]
2023-11-30T12:07:37.283Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:37.283Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:37.283Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ea65d97 org.postgresql.jdbc.PgResultSetMetaData@4ea65d97] 3]
2023-11-30T12:07:37.283Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-11-30T12:07:37.283Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-11-30T12:07:37.284Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-11-24T19:25:51.509587Z", :firstname "Dawna", :zip nil, :id #uuid "4f89923d-8dc6-42f8-999e-1459875d960b", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-11-24T19:25:51.509587Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-11-30T12:07:37.285Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x369e5d36 org.postgresql.jdbc.PgResultSetMetaData@369e5d36] 1]
2023-11-30T12:07:37.285Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.285Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.285Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x369e5d36 org.postgresql.jdbc.PgResultSetMetaData@369e5d36] 2]
2023-11-30T12:07:37.285Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.285Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x369e5d36 org.postgresql.jdbc.PgResultSetMetaData@369e5d36] 1]
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x369e5d36 org.postgresql.jdbc.PgResultSetMetaData@369e5d36] 2]
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x369e5d36 org.postgresql.jdbc.PgResultSetMetaData@369e5d36] 1]
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x369e5d36 org.postgresql.jdbc.PgResultSetMetaData@369e5d36] 2]
2023-11-30T12:07:37.286Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.287Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.287Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x369e5d36 org.postgresql.jdbc.PgResultSetMetaData@369e5d36] 1]
2023-11-30T12:07:37.287Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.287Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.287Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x369e5d36 org.postgresql.jdbc.PgResultSetMetaData@369e5d36] 2]
2023-11-30T12:07:37.287Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.287Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.288Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x59bc4539 org.postgresql.jdbc.PgResultSetMetaData@59bc4539] 1]
2023-11-30T12:07:37.288Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:37.289Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:37.289Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x59bc4539 org.postgresql.jdbc.PgResultSetMetaData@59bc4539] 2]
2023-11-30T12:07:37.289Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:37.289Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:37.289Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x59bc4539 org.postgresql.jdbc.PgResultSetMetaData@59bc4539] 1]
2023-11-30T12:07:37.289Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x59bc4539 org.postgresql.jdbc.PgResultSetMetaData@59bc4539] 2]
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x59bc4539 org.postgresql.jdbc.PgResultSetMetaData@59bc4539] 1]
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x59bc4539 org.postgresql.jdbc.PgResultSetMetaData@59bc4539] 2]
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:37.290Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x59bc4539 org.postgresql.jdbc.PgResultSetMetaData@59bc4539] 1]
2023-11-30T12:07:37.291Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:37.291Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:37.291Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x59bc4539 org.postgresql.jdbc.PgResultSetMetaData@59bc4539] 2]
2023-11-30T12:07:37.291Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:37.291Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:37.293Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "65184e75-5146-4915-8494-09445d034d15", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "65184e75-5146-4915-8494-09445d034d15", :name "csrf-token"}}
2023-11-30T12:07:37.293Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:status 200, :headers {"Content-Type" "text/html; charset=utf-8"}, :body "<!DOCTYPE html>\n<html><head><style>body { font-family: sans-serif; width: 400px; margin: 2rem auto; text-align: center; }\n             * { margin: 0.5rem; }\n             input { width: 15rem; }\n             .message { background-color: pink; padding: 1rem; }</style></head><body><h1>Leihs Simple Login</h1><p>For testing only</p><form action=\"/sign-in\" class=\"ui-form-signin\" method=\"POST\"><div><label>Username<input name=\"user\" type=\"text\"></label></div><div><label>Password<input name=\"password\" type=\"password\" value=\"\"></label></div><input name=\"csrf-token\" type=\"hidden\" value=\"65184e75-5146-4915-8494-09445d034d15\"><input name=\"return-to\" type=\"hidden\" value=\"/favicon.ico\"><div><button type=\"submit\">Continue</button></div></form></body></html>"}
2023-11-30T12:07:47.251Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5dbb68a1 HikariProxyPreparedStatement@1572563105 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T12:07:47.251Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:47.252Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dc419039-1baf-4c59-ad11-dc5f2fd109a2 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5dbb68a1 HikariProxyPreparedStatement@1572563105 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T12:07:47.253Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dc419039-1baf-4c59-ad11-dc5f2fd109a2
2023-11-30T12:07:47.254Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5dbb68a1 HikariProxyPreparedStatement@1572563105 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('dc419039-1baf-4c59-ad11-dc5f2fd109a2', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T12:07:47.254Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T12:07:47.255Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5dbb68a1 HikariProxyPreparedStatement@1572563105 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('dc419039-1baf-4c59-ad11-dc5f2fd109a2', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T12:07:47.255Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value dc419039-1baf-4c59-ad11-dc5f2fd109a2}}, :remote-addr 127.0.0.1, :start-time 109640013606166, :params {:user jimmie@goyette.com, :password password, :csrf-token 65184e75-5146-4915-8494-09445d034d15, :return-to /}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x5866626 HikariProxyConnection@92694054 wrapping org.postgresql.jdbc.PgConnection@73d015bd], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/x-www-form-urlencoded, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=dc419039-1baf-4c59-ad11-dc5f2fd109a2, content-length 105, sec-fetch-user ?1, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/sign-in?return-to=%2F, connection keep-alive, upgrade-insecure-requests 1, pragma no-cache, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5660fb62 /127.0.0.1:3230<->/127.0.0.1:55746], :server-port 3230, :params-raw {:user jimmie@goyette.com, :password password, :csrf-token 65184e75-5146-4915-8494-09445d034d15, :return-to /}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x65d9ca5c HikariProxyConnection@1708771932 wrapping org.postgresql.jdbc.PgConnection@4c858a34], :level 1, :rollback #object[clojure.lang.Atom 0x34faaa34 {:status :ready, :val false}]}, :content-length 105, :form-params {:user jimmie@goyette.com, :password password, :csrf-token 65184e75-5146-4915-8494-09445d034d15, :return-to /}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user jimmie@goyette.com, :password password, :csrf-token 65184e75-5146-4915-8494-09445d034d15, :return-to /}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x41c2de94 BytesInputStream[len=105]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x650db58b compojure.core$routes$fn__27950@650db58b], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in
2023-11-30T12:07:47.262Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => true
2023-11-30T12:07:47.266Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x713b99fb org.postgresql.jdbc.PgResultSetMetaData@713b99fb] 1]
2023-11-30T12:07:47.267Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.268Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.268Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x713b99fb org.postgresql.jdbc.PgResultSetMetaData@713b99fb] 2]
2023-11-30T12:07:47.268Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.268Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.268Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x713b99fb org.postgresql.jdbc.PgResultSetMetaData@713b99fb] 1]
2023-11-30T12:07:47.268Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.269Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.269Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x713b99fb org.postgresql.jdbc.PgResultSetMetaData@713b99fb] 2]
2023-11-30T12:07:47.269Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.270Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.271Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x713b99fb org.postgresql.jdbc.PgResultSetMetaData@713b99fb] 1]
2023-11-30T12:07:47.271Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.271Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.271Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x713b99fb org.postgresql.jdbc.PgResultSetMetaData@713b99fb] 2]
2023-11-30T12:07:47.271Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.272Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.272Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x713b99fb org.postgresql.jdbc.PgResultSetMetaData@713b99fb] 1]
2023-11-30T12:07:47.272Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.272Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.272Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x713b99fb org.postgresql.jdbc.PgResultSetMetaData@713b99fb] 2]
2023-11-30T12:07:47.272Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.272Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.273Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x6e0f7666 org.postgresql.jdbc.PgResultSetMetaData@6e0f7666] 1]
2023-11-30T12:07:47.273Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.273Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.274Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x6e0f7666 org.postgresql.jdbc.PgResultSetMetaData@6e0f7666] 2]
2023-11-30T12:07:47.274Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.274Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.274Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x6e0f7666 org.postgresql.jdbc.PgResultSetMetaData@6e0f7666] 1]
2023-11-30T12:07:47.274Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.274Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.274Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x6e0f7666 org.postgresql.jdbc.PgResultSetMetaData@6e0f7666] 2]
2023-11-30T12:07:47.275Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.275Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.275Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x6e0f7666 org.postgresql.jdbc.PgResultSetMetaData@6e0f7666] 1]
2023-11-30T12:07:47.275Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.275Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.275Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x6e0f7666 org.postgresql.jdbc.PgResultSetMetaData@6e0f7666] 2]
2023-11-30T12:07:47.275Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.277Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.277Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x6e0f7666 org.postgresql.jdbc.PgResultSetMetaData@6e0f7666] 1]
2023-11-30T12:07:47.277Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.277Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.277Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x6e0f7666 org.postgresql.jdbc.PgResultSetMetaData@6e0f7666] 2]
2023-11-30T12:07:47.278Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.278Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.307Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x76234944 HikariProxyPreparedStatement@1982024004 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( ?, ?, ?, ? )
RETURNING *] 1]  type:  java.util.UUID
2023-11-30T12:07:47.308Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.309Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text f979ff72bb2565bc881d504497928653287ee6d7357a24b65df443ffaa6bdc25 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x76234944 HikariProxyPreparedStatement@1982024004 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( 'e68ca036-dced-4666-b9e9-a6b55119f013'::uuid, ?, ?, ? )
RETURNING *] 2]  type:  java.lang.String
2023-11-30T12:07:47.310Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  f979ff72bb2565bc881d504497928653287ee6d7357a24b65df443ffaa6bdc25
2023-11-30T12:07:47.310Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x76234944 HikariProxyPreparedStatement@1982024004 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( 'e68ca036-dced-4666-b9e9-a6b55119f013'::uuid, 'f979ff72bb2565bc881d504497928653287ee6d7357a24b65df443ffaa6bdc25', ?, ? )
RETURNING *] 3]  type:  java.lang.String
2023-11-30T12:07:47.310Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-11-30T12:07:47.312Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:jsonb {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, :remote_addr 127.0.0.1} #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x76234944 HikariProxyPreparedStatement@1982024004 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( 'e68ca036-dced-4666-b9e9-a6b55119f013'::uuid, 'f979ff72bb2565bc881d504497928653287ee6d7357a24b65df443ffaa6bdc25', 'password', ? )
RETURNING *] 4]  type:  clojure.lang.PersistentArrayMap
2023-11-30T12:07:47.314Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #object[org.postgresql.util.PGobject 0x79f47ca4 {"user_agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/119.0.0.0 Safari\/537.36","remote_addr":"127.0.0.1"}]
2023-11-30T12:07:47.338Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1ef4dda org.postgresql.jdbc.PgResultSetMetaData@1ef4dda] 1]
2023-11-30T12:07:47.342Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"]
2023-11-30T12:07:47.342Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"
2023-11-30T12:07:47.342Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [f979ff72bb2565bc881d504497928653287ee6d7357a24b65df443ffaa6bdc25 #object[org.postgresql.jdbc.PgResultSetMetaData 0x1ef4dda org.postgresql.jdbc.PgResultSetMetaData@1ef4dda] 2]
2023-11-30T12:07:47.342Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text f979ff72bb2565bc881d504497928653287ee6d7357a24b65df443ffaa6bdc25]
2023-11-30T12:07:47.342Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  f979ff72bb2565bc881d504497928653287ee6d7357a24b65df443ffaa6bdc25
2023-11-30T12:07:47.342Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1ef4dda org.postgresql.jdbc.PgResultSetMetaData@1ef4dda] 3]
2023-11-30T12:07:47.342Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.342Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.343Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1ef4dda org.postgresql.jdbc.PgResultSetMetaData@1ef4dda] 5]
2023-11-30T12:07:47.343Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.343Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.345Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x7e96b3de {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36", "remote_addr": "127.0.0.1"}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x1ef4dda org.postgresql.jdbc.PgResultSetMetaData@1ef4dda] 6]
2023-11-30T12:07:47.345Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0x7e96b3de {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36", "remote_addr": "127.0.0.1"}]]
2023-11-30T12:07:47.345Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, :remote_addr 127.0.0.1}
2023-11-30T12:07:47.346Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1ef4dda org.postgresql.jdbc.PgResultSetMetaData@1ef4dda] 7]
2023-11-30T12:07:47.346Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text password]
2023-11-30T12:07:47.346Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:47.347Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:status 302, :headers {"Location" "/"}, :body "", :cookies {"leihs-user-session" {:value "950f7e4a-d6c3-4a7b-8c13-67863bfd49ac", :http-only true, :max-age 307584000, :path "/", :secure false}, "leihs-user-locale" {:value nil, :path "/", :max-age 0}}}
2023-11-30T12:07:47.368Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2c01513f HikariProxyPreparedStatement@738283839 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T12:07:47.369Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:47.369Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2c01513f HikariProxyPreparedStatement@738283839 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T12:07:47.370Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  950f7e4a-d6c3-4a7b-8c13-67863bfd49ac
2023-11-30T12:07:47.370Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2c01513f HikariProxyPreparedStatement@738283839 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T12:07:47.370Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T12:07:47.371Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2c01513f HikariProxyPreparedStatement@738283839 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T12:07:47.371Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T12:07:47.374Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x26c9617f org.postgresql.jdbc.PgResultSetMetaData@26c9617f] 1]
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x26c9617f org.postgresql.jdbc.PgResultSetMetaData@26c9617f] 2]
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x26c9617f org.postgresql.jdbc.PgResultSetMetaData@26c9617f] 3]
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x26c9617f org.postgresql.jdbc.PgResultSetMetaData@26c9617f] 6]
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:47.376Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:47.377Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x26c9617f org.postgresql.jdbc.PgResultSetMetaData@26c9617f] 10]
2023-11-30T12:07:47.377Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.377Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.377Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x26c9617f org.postgresql.jdbc.PgResultSetMetaData@26c9617f] 11]
2023-11-30T12:07:47.377Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.377Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.377Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x26c9617f org.postgresql.jdbc.PgResultSetMetaData@26c9617f] 12]
2023-11-30T12:07:47.377Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.377Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.378Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2" #object[org.postgresql.jdbc.PgResultSetMetaData 0x26c9617f org.postgresql.jdbc.PgResultSetMetaData@26c9617f] 13]
2023-11-30T12:07:47.378Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"]
2023-11-30T12:07:47.378Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"
2023-11-30T12:07:47.378Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x26c9617f org.postgresql.jdbc.PgResultSetMetaData@26c9617f] 14]
2023-11-30T12:07:47.378Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.378Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.380Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xc481380 HikariProxyPreparedStatement@206050176 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.380Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= nil  handler-key= :home
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac}}, :remote-addr 127.0.0.1, :start-time 109640148410250, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=950f7e4a-d6c3-4a7b-8c13-67863bfd49ac, sec-fetch-user ?1, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/sign-in?return-to=%2F, connection keep-alive, upgrade-insecure-requests 1, pragma no-cache, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x506242ce /127.0.0.1:3230<->/127.0.0.1:55746], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /, :server-name localhost, :handler-key :home, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x4e5081b4 leihs.procurement.backend.html$not_found_handler@4e5081b4], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :home
2023-11-30T12:07:47.382Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => nil
2023-11-30T12:07:47.383Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.384Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x33495e5c HikariProxyPreparedStatement@860446300 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.384Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.386Z NX-41294 DEBUG [leihs.procurement.permissions.user:31] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_inspectors) (sql/merge-where [:= :procurement_category_inspectors.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_inspectors.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.388Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5959def8 HikariProxyPreparedStatement@1499062008 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.388Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.391Z NX-41294 DEBUG [leihs.procurement.permissions.user:52] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_viewers) (sql/merge-where [:= :procurement_category_viewers.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_viewers.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.392Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x262d04a0 HikariProxyPreparedStatement@640484512 wrapping SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.392Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.394Z NX-41294 DEBUG [leihs.procurement.permissions.user:72] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_requesters_organizations) (sql/where [:= :procurement_requesters_organizations.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.395Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1702811e HikariProxyPreparedStatement@386040094 wrapping SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.395Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.397Z NX-41294 DEBUG [leihs.procurement.authorization:136] - (->> [user-perms/admin? user-perms/inspector? user-perms/viewer? user-perms/requester?] (map (fn* [p1__39360#] (p1__39360# (:tx request) (:authenticated-entity request)))) (some true?)) => true
2023-11-30T12:07:47.398Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a03a8a org.postgresql.jdbc.PgResultSetMetaData@51a03a8a] 1]
2023-11-30T12:07:47.398Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.398Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.398Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a03a8a org.postgresql.jdbc.PgResultSetMetaData@51a03a8a] 2]
2023-11-30T12:07:47.398Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.398Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.398Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a03a8a org.postgresql.jdbc.PgResultSetMetaData@51a03a8a] 1]
2023-11-30T12:07:47.399Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.399Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.399Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a03a8a org.postgresql.jdbc.PgResultSetMetaData@51a03a8a] 2]
2023-11-30T12:07:47.399Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.399Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.399Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a03a8a org.postgresql.jdbc.PgResultSetMetaData@51a03a8a] 1]
2023-11-30T12:07:47.399Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.399Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.399Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a03a8a org.postgresql.jdbc.PgResultSetMetaData@51a03a8a] 2]
2023-11-30T12:07:47.400Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.400Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.400Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a03a8a org.postgresql.jdbc.PgResultSetMetaData@51a03a8a] 1]
2023-11-30T12:07:47.400Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.400Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.400Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a03a8a org.postgresql.jdbc.PgResultSetMetaData@51a03a8a] 2]
2023-11-30T12:07:47.400Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.401Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.401Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x3a913fbc org.postgresql.jdbc.PgResultSetMetaData@3a913fbc] 1]
2023-11-30T12:07:47.401Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.401Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x3a913fbc org.postgresql.jdbc.PgResultSetMetaData@3a913fbc] 2]
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x3a913fbc org.postgresql.jdbc.PgResultSetMetaData@3a913fbc] 1]
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x3a913fbc org.postgresql.jdbc.PgResultSetMetaData@3a913fbc] 2]
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x3a913fbc org.postgresql.jdbc.PgResultSetMetaData@3a913fbc] 1]
2023-11-30T12:07:47.402Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.403Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.403Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x3a913fbc org.postgresql.jdbc.PgResultSetMetaData@3a913fbc] 2]
2023-11-30T12:07:47.403Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.403Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.403Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x3a913fbc org.postgresql.jdbc.PgResultSetMetaData@3a913fbc] 1]
2023-11-30T12:07:47.403Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.403Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.404Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x3a913fbc org.postgresql.jdbc.PgResultSetMetaData@3a913fbc] 2]
2023-11-30T12:07:47.404Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.404Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.406Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:status 404, :headers {"Content-Length" "2299", "Last-Modified" "Wed, 29 Nov 2023 08:52:54 GMT", "Content-Type" "text/html"}, :body #object[java.io.File 0x35afbb2b "/Users/mradl/repos/leihs/procure/server/resources/public/procure/client/index.html"]}
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 109640224205166, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site cross-site, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", connection keep-alive, accept image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x6834d326 /127.0.0.1:3230<->/127.0.0.1:55799], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x650db58b compojure.core$routes$fn__27950@650db58b], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :apng, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in
2023-11-30T12:07:47.443Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => true
2023-11-30T12:07:47.445Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b3e3a0c org.postgresql.jdbc.PgResultSetMetaData@5b3e3a0c] 1]
2023-11-30T12:07:47.446Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.446Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.446Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b3e3a0c org.postgresql.jdbc.PgResultSetMetaData@5b3e3a0c] 2]
2023-11-30T12:07:47.446Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.446Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.446Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b3e3a0c org.postgresql.jdbc.PgResultSetMetaData@5b3e3a0c] 1]
2023-11-30T12:07:47.446Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.446Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.447Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b3e3a0c org.postgresql.jdbc.PgResultSetMetaData@5b3e3a0c] 2]
2023-11-30T12:07:47.447Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.447Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.447Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b3e3a0c org.postgresql.jdbc.PgResultSetMetaData@5b3e3a0c] 1]
2023-11-30T12:07:47.447Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.447Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.447Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b3e3a0c org.postgresql.jdbc.PgResultSetMetaData@5b3e3a0c] 2]
2023-11-30T12:07:47.448Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.448Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.448Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b3e3a0c org.postgresql.jdbc.PgResultSetMetaData@5b3e3a0c] 1]
2023-11-30T12:07:47.448Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.448Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.448Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b3e3a0c org.postgresql.jdbc.PgResultSetMetaData@5b3e3a0c] 2]
2023-11-30T12:07:47.448Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.448Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.449Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x12b2386c org.postgresql.jdbc.PgResultSetMetaData@12b2386c] 1]
2023-11-30T12:07:47.450Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.450Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.450Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x12b2386c org.postgresql.jdbc.PgResultSetMetaData@12b2386c] 2]
2023-11-30T12:07:47.450Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.450Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.450Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x12b2386c org.postgresql.jdbc.PgResultSetMetaData@12b2386c] 1]
2023-11-30T12:07:47.450Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.450Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.451Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x12b2386c org.postgresql.jdbc.PgResultSetMetaData@12b2386c] 2]
2023-11-30T12:07:47.451Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.451Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.451Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x12b2386c org.postgresql.jdbc.PgResultSetMetaData@12b2386c] 1]
2023-11-30T12:07:47.451Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.451Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.451Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x12b2386c org.postgresql.jdbc.PgResultSetMetaData@12b2386c] 2]
2023-11-30T12:07:47.452Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.452Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.452Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x12b2386c org.postgresql.jdbc.PgResultSetMetaData@12b2386c] 1]
2023-11-30T12:07:47.452Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.452Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.452Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x12b2386c org.postgresql.jdbc.PgResultSetMetaData@12b2386c] 2]
2023-11-30T12:07:47.452Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.452Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.454Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xf34306e HikariProxyPreparedStatement@255078510 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-11-30T12:07:47.454Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-11-30T12:07:47.455Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 1]
2023-11-30T12:07:47.455Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"]
2023-11-30T12:07:47.455Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:47.455Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 3]
2023-11-30T12:07:47.455Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-11-30T12:07:47.455Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-11-30T12:07:47.456Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 4]
2023-11-30T12:07:47.456Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-11-30T12:07:47.456Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-11-30T12:07:47.456Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 7]
2023-11-30T12:07:47.456Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-11-30T12:07:47.456Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-11-30T12:07:47.456Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 15]
2023-11-30T12:07:47.457Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:47.457Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:47.457Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 16]
2023-11-30T12:07:47.457Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:47.457Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:47.457Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 25]
2023-11-30T12:07:47.457Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-11-30T12:07:47.457Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 32]
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2187a76b-557a-4775-9a1e-778142161819" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 1]
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2187a76b-557a-4775-9a1e-778142161819"]
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2187a76b-557a-4775-9a1e-778142161819"
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 3]
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 4]
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-11-30T12:07:47.458Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-11-30T12:07:47.459Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 7]
2023-11-30T12:07:47.459Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-11-30T12:07:47.459Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-11-30T12:07:47.459Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 15]
2023-11-30T12:07:47.459Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:47.459Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:47.459Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 16]
2023-11-30T12:07:47.459Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:47.459Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 25]
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 32]
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 1]
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 3]
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:47.460Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 4]
2023-11-30T12:07:47.461Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:47.461Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:47.461Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 7]
2023-11-30T12:07:47.461Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:47.461Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:47.461Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.590176000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 15]
2023-11-30T12:07:47.461Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.590176000-00:00"]
2023-11-30T12:07:47.461Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.590176Z"
2023-11-30T12:07:47.462Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 16]
2023-11-30T12:07:47.463Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.463Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.464Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 25]
2023-11-30T12:07:47.464Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-11-30T12:07:47.464Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-11-30T12:07:47.465Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 32]
2023-11-30T12:07:47.465Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:47.465Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:47.465Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7e712502 org.postgresql.jdbc.PgResultSetMetaData@7e712502] 34]
2023-11-30T12:07:47.465Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.465Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.467Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5f22f5d9 HikariProxyPreparedStatement@1596126681 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-11-30T12:07:47.467Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-11-30T12:07:47.474Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5f22f5d9 HikariProxyPreparedStatement@1596126681 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-11-30T12:07:47.476Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:47.480Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ba5dae5 org.postgresql.jdbc.PgResultSetMetaData@7ba5dae5] 1]
2023-11-30T12:07:47.480Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:47.480Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:47.480Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ba5dae5 org.postgresql.jdbc.PgResultSetMetaData@7ba5dae5] 2]
2023-11-30T12:07:47.480Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:47.480Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:47.480Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ba5dae5 org.postgresql.jdbc.PgResultSetMetaData@7ba5dae5] 3]
2023-11-30T12:07:47.480Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-11-30T12:07:47.480Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-11-30T12:07:47.482Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-11-24T19:25:51.509587Z", :firstname "Dawna", :zip nil, :id #uuid "4f89923d-8dc6-42f8-999e-1459875d960b", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-11-24T19:25:51.509587Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-11-30T12:07:47.484Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x12171d73 org.postgresql.jdbc.PgResultSetMetaData@12171d73] 1]
2023-11-30T12:07:47.484Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.484Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x12171d73 org.postgresql.jdbc.PgResultSetMetaData@12171d73] 2]
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x12171d73 org.postgresql.jdbc.PgResultSetMetaData@12171d73] 1]
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x12171d73 org.postgresql.jdbc.PgResultSetMetaData@12171d73] 2]
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x12171d73 org.postgresql.jdbc.PgResultSetMetaData@12171d73] 1]
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.485Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x12171d73 org.postgresql.jdbc.PgResultSetMetaData@12171d73] 2]
2023-11-30T12:07:47.486Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.486Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.486Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x12171d73 org.postgresql.jdbc.PgResultSetMetaData@12171d73] 1]
2023-11-30T12:07:47.486Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.486Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.486Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x12171d73 org.postgresql.jdbc.PgResultSetMetaData@12171d73] 2]
2023-11-30T12:07:47.486Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.486Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.488Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x255fd93c org.postgresql.jdbc.PgResultSetMetaData@255fd93c] 1]
2023-11-30T12:07:47.489Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.489Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.490Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x255fd93c org.postgresql.jdbc.PgResultSetMetaData@255fd93c] 2]
2023-11-30T12:07:47.490Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.490Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.490Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x255fd93c org.postgresql.jdbc.PgResultSetMetaData@255fd93c] 1]
2023-11-30T12:07:47.490Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.490Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.490Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x255fd93c org.postgresql.jdbc.PgResultSetMetaData@255fd93c] 2]
2023-11-30T12:07:47.490Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.491Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.491Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x255fd93c org.postgresql.jdbc.PgResultSetMetaData@255fd93c] 1]
2023-11-30T12:07:47.491Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.491Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.491Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x255fd93c org.postgresql.jdbc.PgResultSetMetaData@255fd93c] 2]
2023-11-30T12:07:47.491Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.491Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.491Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x255fd93c org.postgresql.jdbc.PgResultSetMetaData@255fd93c] 1]
2023-11-30T12:07:47.491Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.491Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.492Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x255fd93c org.postgresql.jdbc.PgResultSetMetaData@255fd93c] 2]
2023-11-30T12:07:47.492Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.492Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.497Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "c529351a-e8fb-4dfc-b821-8cb9a7d55ef0", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "c529351a-e8fb-4dfc-b821-8cb9a7d55ef0", :name "csrf-token"}}
2023-11-30T12:07:47.498Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:status 200, :headers {"Content-Type" "text/html; charset=utf-8"}, :body "<!DOCTYPE html>\n<html><head><style>body { font-family: sans-serif; width: 400px; margin: 2rem auto; text-align: center; }\n             * { margin: 0.5rem; }\n             input { width: 15rem; }\n             .message { background-color: pink; padding: 1rem; }</style></head><body><h1>Leihs Simple Login</h1><p>For testing only</p><form action=\"/sign-in\" class=\"ui-form-signin\" method=\"POST\"><div><label>Username<input name=\"user\" type=\"text\"></label></div><div><label>Password<input name=\"password\" type=\"password\" value=\"\"></label></div><input name=\"csrf-token\" type=\"hidden\" value=\"c529351a-e8fb-4dfc-b821-8cb9a7d55ef0\"><input name=\"return-to\" type=\"hidden\" value=\"/favicon.ico\"><div><button type=\"submit\">Continue</button></div></form></body></html>", :cookies {"leihs-anti-csrf-token" {:value "c529351a-e8fb-4dfc-b821-8cb9a7d55ef0", :http-only false, :path "/", :secure false}}}
2023-11-30T12:07:47.499Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5928952b HikariProxyPreparedStatement@1495831851 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T12:07:47.499Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:47.500Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5928952b HikariProxyPreparedStatement@1495831851 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T12:07:47.500Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  950f7e4a-d6c3-4a7b-8c13-67863bfd49ac
2023-11-30T12:07:47.501Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5928952b HikariProxyPreparedStatement@1495831851 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T12:07:47.501Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T12:07:47.502Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5928952b HikariProxyPreparedStatement@1495831851 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T12:07:47.502Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T12:07:47.510Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x4e02622f org.postgresql.jdbc.PgResultSetMetaData@4e02622f] 1]
2023-11-30T12:07:47.515Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:47.515Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:47.515Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x4e02622f org.postgresql.jdbc.PgResultSetMetaData@4e02622f] 2]
2023-11-30T12:07:47.516Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:47.516Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:47.516Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4e02622f org.postgresql.jdbc.PgResultSetMetaData@4e02622f] 3]
2023-11-30T12:07:47.516Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.516Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.516Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x4e02622f org.postgresql.jdbc.PgResultSetMetaData@4e02622f] 6]
2023-11-30T12:07:47.516Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:47.516Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:47.516Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4e02622f org.postgresql.jdbc.PgResultSetMetaData@4e02622f] 10]
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4e02622f org.postgresql.jdbc.PgResultSetMetaData@4e02622f] 11]
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4e02622f org.postgresql.jdbc.PgResultSetMetaData@4e02622f] 12]
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4e02622f org.postgresql.jdbc.PgResultSetMetaData@4e02622f] 13]
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"]
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4e02622f org.postgresql.jdbc.PgResultSetMetaData@4e02622f] 14]
2023-11-30T12:07:47.517Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.518Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.519Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x551e0667 HikariProxyPreparedStatement@1428031079 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.519Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac}}, :remote-addr 127.0.0.1, :start-time 109640276172833, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=950f7e4a-d6c3-4a7b-8c13-67863bfd49ac, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/, connection keep-alive, upgrade-insecure-requests 1, pragma no-cache, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x64fbd42a /127.0.0.1:3230<->/127.0.0.1:55746], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure/, :server-name localhost, :handler-key :not-found, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x4e5081b4 leihs.procurement.backend.html$not_found_handler@4e5081b4], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :not-found
2023-11-30T12:07:47.522Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => nil
2023-11-30T12:07:47.523Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.524Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xe317eb4 HikariProxyPreparedStatement@238124724 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.525Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.527Z NX-41294 DEBUG [leihs.procurement.permissions.user:31] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_inspectors) (sql/merge-where [:= :procurement_category_inspectors.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_inspectors.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.528Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x466f7ae0 HikariProxyPreparedStatement@1181711072 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.529Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.531Z NX-41294 DEBUG [leihs.procurement.permissions.user:52] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_viewers) (sql/merge-where [:= :procurement_category_viewers.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_viewers.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.532Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5201cbe9 HikariProxyPreparedStatement@1375849449 wrapping SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.532Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.533Z NX-41294 DEBUG [leihs.procurement.permissions.user:72] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_requesters_organizations) (sql/where [:= :procurement_requesters_organizations.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.534Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1e5ef43b HikariProxyPreparedStatement@509539387 wrapping SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.534Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.535Z NX-41294 DEBUG [leihs.procurement.authorization:136] - (->> [user-perms/admin? user-perms/inspector? user-perms/viewer? user-perms/requester?] (map (fn* [p1__39360#] (p1__39360# (:tx request) (:authenticated-entity request)))) (some true?)) => true
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f051f99 org.postgresql.jdbc.PgResultSetMetaData@6f051f99] 1]
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f051f99 org.postgresql.jdbc.PgResultSetMetaData@6f051f99] 2]
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f051f99 org.postgresql.jdbc.PgResultSetMetaData@6f051f99] 1]
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f051f99 org.postgresql.jdbc.PgResultSetMetaData@6f051f99] 2]
2023-11-30T12:07:47.536Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.537Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.537Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f051f99 org.postgresql.jdbc.PgResultSetMetaData@6f051f99] 1]
2023-11-30T12:07:47.537Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.537Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.537Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f051f99 org.postgresql.jdbc.PgResultSetMetaData@6f051f99] 2]
2023-11-30T12:07:47.537Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.538Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.538Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f051f99 org.postgresql.jdbc.PgResultSetMetaData@6f051f99] 1]
2023-11-30T12:07:47.538Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.538Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.538Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f051f99 org.postgresql.jdbc.PgResultSetMetaData@6f051f99] 2]
2023-11-30T12:07:47.538Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.538Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.538Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x7cfa4a66 org.postgresql.jdbc.PgResultSetMetaData@7cfa4a66] 1]
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x7cfa4a66 org.postgresql.jdbc.PgResultSetMetaData@7cfa4a66] 2]
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x7cfa4a66 org.postgresql.jdbc.PgResultSetMetaData@7cfa4a66] 1]
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x7cfa4a66 org.postgresql.jdbc.PgResultSetMetaData@7cfa4a66] 2]
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.539Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x7cfa4a66 org.postgresql.jdbc.PgResultSetMetaData@7cfa4a66] 1]
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x7cfa4a66 org.postgresql.jdbc.PgResultSetMetaData@7cfa4a66] 2]
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x7cfa4a66 org.postgresql.jdbc.PgResultSetMetaData@7cfa4a66] 1]
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x7cfa4a66 org.postgresql.jdbc.PgResultSetMetaData@7cfa4a66] 2]
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.540Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.541Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:status 404, :headers {"Content-Length" "2299", "Last-Modified" "Wed, 29 Nov 2023 08:52:54 GMT", "Content-Type" "text/html"}, :body #object[java.io.File 0x7b2fed5d "/Users/mradl/repos/leihs/procure/server/resources/public/procure/client/index.html"]}
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 109640379674750, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site cross-site, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", connection keep-alive, accept image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x660a85ce /127.0.0.1:3230<->/127.0.0.1:55803], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x650db58b compojure.core$routes$fn__27950@650db58b], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :apng, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in
2023-11-30T12:07:47.598Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => true
2023-11-30T12:07:47.599Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0xb72b084 org.postgresql.jdbc.PgResultSetMetaData@b72b084] 1]
2023-11-30T12:07:47.599Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.599Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.599Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0xb72b084 org.postgresql.jdbc.PgResultSetMetaData@b72b084] 2]
2023-11-30T12:07:47.599Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.599Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.599Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0xb72b084 org.postgresql.jdbc.PgResultSetMetaData@b72b084] 1]
2023-11-30T12:07:47.600Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.600Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.600Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0xb72b084 org.postgresql.jdbc.PgResultSetMetaData@b72b084] 2]
2023-11-30T12:07:47.600Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.600Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.600Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0xb72b084 org.postgresql.jdbc.PgResultSetMetaData@b72b084] 1]
2023-11-30T12:07:47.600Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.600Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.600Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0xb72b084 org.postgresql.jdbc.PgResultSetMetaData@b72b084] 2]
2023-11-30T12:07:47.600Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.601Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.601Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0xb72b084 org.postgresql.jdbc.PgResultSetMetaData@b72b084] 1]
2023-11-30T12:07:47.601Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.601Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.601Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0xb72b084 org.postgresql.jdbc.PgResultSetMetaData@b72b084] 2]
2023-11-30T12:07:47.601Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.601Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.602Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x48c9522f org.postgresql.jdbc.PgResultSetMetaData@48c9522f] 1]
2023-11-30T12:07:47.602Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.602Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.602Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x48c9522f org.postgresql.jdbc.PgResultSetMetaData@48c9522f] 2]
2023-11-30T12:07:47.602Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.602Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x48c9522f org.postgresql.jdbc.PgResultSetMetaData@48c9522f] 1]
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x48c9522f org.postgresql.jdbc.PgResultSetMetaData@48c9522f] 2]
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x48c9522f org.postgresql.jdbc.PgResultSetMetaData@48c9522f] 1]
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x48c9522f org.postgresql.jdbc.PgResultSetMetaData@48c9522f] 2]
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x48c9522f org.postgresql.jdbc.PgResultSetMetaData@48c9522f] 1]
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x48c9522f org.postgresql.jdbc.PgResultSetMetaData@48c9522f] 2]
2023-11-30T12:07:47.604Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.604Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.606Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x16038ede HikariProxyPreparedStatement@369331934 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-11-30T12:07:47.606Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-11-30T12:07:47.608Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 1]
2023-11-30T12:07:47.608Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"]
2023-11-30T12:07:47.608Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:47.608Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 3]
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 4]
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 7]
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 15]
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:47.609Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.509587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 16]
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.509587000-00:00"]
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.509587Z"
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 25]
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 32]
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2187a76b-557a-4775-9a1e-778142161819" #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 1]
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2187a76b-557a-4775-9a1e-778142161819"]
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2187a76b-557a-4775-9a1e-778142161819"
2023-11-30T12:07:47.610Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 3]
2023-11-30T12:07:47.611Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-11-30T12:07:47.612Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-11-30T12:07:47.612Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 4]
2023-11-30T12:07:47.613Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-11-30T12:07:47.613Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-11-30T12:07:47.613Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 7]
2023-11-30T12:07:47.613Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-11-30T12:07:47.613Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-11-30T12:07:47.613Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 15]
2023-11-30T12:07:47.613Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:47.613Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:47.613Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.614964000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 16]
2023-11-30T12:07:47.614Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.614964000-00:00"]
2023-11-30T12:07:47.614Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.614964Z"
2023-11-30T12:07:47.614Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 25]
2023-11-30T12:07:47.614Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-11-30T12:07:47.614Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-11-30T12:07:47.614Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 32]
2023-11-30T12:07:47.614Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:47.615Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:47.615Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 1]
2023-11-30T12:07:47.615Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.615Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.615Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 3]
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 4]
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 7]
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.590176000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 15]
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-24T19:25:51.590176000-00:00"]
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.590176Z"
2023-11-30T12:07:47.616Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 16]
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 25]
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 32]
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x114aa1a org.postgresql.jdbc.PgResultSetMetaData@114aa1a] 34]
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.617Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.619Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x25539ecb HikariProxyPreparedStatement@626237131 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-11-30T12:07:47.619Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-11-30T12:07:47.620Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "4f89923d-8dc6-42f8-999e-1459875d960b" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x25539ecb HikariProxyPreparedStatement@626237131 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-11-30T12:07:47.620Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "4f89923d-8dc6-42f8-999e-1459875d960b"
2023-11-30T12:07:47.622Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1066a24d org.postgresql.jdbc.PgResultSetMetaData@1066a24d] 1]
2023-11-30T12:07:47.622Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:47.622Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:47.622Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1066a24d org.postgresql.jdbc.PgResultSetMetaData@1066a24d] 2]
2023-11-30T12:07:47.622Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-11-30T12:07:47.622Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-11-30T12:07:47.622Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1066a24d org.postgresql.jdbc.PgResultSetMetaData@1066a24d] 3]
2023-11-30T12:07:47.622Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-11-30T12:07:47.622Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-11-30T12:07:47.623Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-11-24T19:25:51.509587Z", :firstname "Dawna", :zip nil, :id #uuid "4f89923d-8dc6-42f8-999e-1459875d960b", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-11-24T19:25:51.509587Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-11-30T12:07:47.625Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x45c4a66c org.postgresql.jdbc.PgResultSetMetaData@45c4a66c] 1]
2023-11-30T12:07:47.625Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.625Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x45c4a66c org.postgresql.jdbc.PgResultSetMetaData@45c4a66c] 2]
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x45c4a66c org.postgresql.jdbc.PgResultSetMetaData@45c4a66c] 1]
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x45c4a66c org.postgresql.jdbc.PgResultSetMetaData@45c4a66c] 2]
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x45c4a66c org.postgresql.jdbc.PgResultSetMetaData@45c4a66c] 1]
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x45c4a66c org.postgresql.jdbc.PgResultSetMetaData@45c4a66c] 2]
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.626Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.627Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x45c4a66c org.postgresql.jdbc.PgResultSetMetaData@45c4a66c] 1]
2023-11-30T12:07:47.627Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.627Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.627Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x45c4a66c org.postgresql.jdbc.PgResultSetMetaData@45c4a66c] 2]
2023-11-30T12:07:47.627Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.627Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b578bf7 org.postgresql.jdbc.PgResultSetMetaData@5b578bf7] 1]
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b578bf7 org.postgresql.jdbc.PgResultSetMetaData@5b578bf7] 2]
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b578bf7 org.postgresql.jdbc.PgResultSetMetaData@5b578bf7] 1]
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b578bf7 org.postgresql.jdbc.PgResultSetMetaData@5b578bf7] 2]
2023-11-30T12:07:47.628Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b578bf7 org.postgresql.jdbc.PgResultSetMetaData@5b578bf7] 1]
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b578bf7 org.postgresql.jdbc.PgResultSetMetaData@5b578bf7] 2]
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b578bf7 org.postgresql.jdbc.PgResultSetMetaData@5b578bf7] 1]
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.629Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x5b578bf7 org.postgresql.jdbc.PgResultSetMetaData@5b578bf7] 2]
2023-11-30T12:07:47.630Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.630Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.631Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "eb71cce5-5562-4b98-8b85-23f6cd03c9e7", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "eb71cce5-5562-4b98-8b85-23f6cd03c9e7", :name "csrf-token"}}
2023-11-30T12:07:47.632Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:status 200, :headers {"Content-Type" "text/html; charset=utf-8"}, :body "<!DOCTYPE html>\n<html><head><style>body { font-family: sans-serif; width: 400px; margin: 2rem auto; text-align: center; }\n             * { margin: 0.5rem; }\n             input { width: 15rem; }\n             .message { background-color: pink; padding: 1rem; }</style></head><body><h1>Leihs Simple Login</h1><p>For testing only</p><form action=\"/sign-in\" class=\"ui-form-signin\" method=\"POST\"><div><label>Username<input name=\"user\" type=\"text\"></label></div><div><label>Password<input name=\"password\" type=\"password\" value=\"\"></label></div><input name=\"csrf-token\" type=\"hidden\" value=\"eb71cce5-5562-4b98-8b85-23f6cd03c9e7\"><input name=\"return-to\" type=\"hidden\" value=\"/favicon.ico\"><div><button type=\"submit\">Continue</button></div></form></body></html>", :cookies {"leihs-anti-csrf-token" {:value "eb71cce5-5562-4b98-8b85-23f6cd03c9e7", :http-only false, :path "/", :secure false}}}
2023-11-30T12:07:47.787Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x728bf140 HikariProxyPreparedStatement@1921773888 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T12:07:47.787Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:47.788Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x728bf140 HikariProxyPreparedStatement@1921773888 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T12:07:47.788Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  950f7e4a-d6c3-4a7b-8c13-67863bfd49ac
2023-11-30T12:07:47.788Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x728bf140 HikariProxyPreparedStatement@1921773888 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T12:07:47.789Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T12:07:47.789Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x728bf140 HikariProxyPreparedStatement@1921773888 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T12:07:47.789Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T12:07:47.792Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x264f7f95 org.postgresql.jdbc.PgResultSetMetaData@264f7f95] 1]
2023-11-30T12:07:47.792Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:47.792Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:47.792Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x264f7f95 org.postgresql.jdbc.PgResultSetMetaData@264f7f95] 2]
2023-11-30T12:07:47.792Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:47.792Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:47.792Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x264f7f95 org.postgresql.jdbc.PgResultSetMetaData@264f7f95] 3]
2023-11-30T12:07:47.792Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x264f7f95 org.postgresql.jdbc.PgResultSetMetaData@264f7f95] 6]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x264f7f95 org.postgresql.jdbc.PgResultSetMetaData@264f7f95] 10]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x264f7f95 org.postgresql.jdbc.PgResultSetMetaData@264f7f95] 11]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x264f7f95 org.postgresql.jdbc.PgResultSetMetaData@264f7f95] 12]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2" #object[org.postgresql.jdbc.PgResultSetMetaData 0x264f7f95 org.postgresql.jdbc.PgResultSetMetaData@264f7f95] 13]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"]
2023-11-30T12:07:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"
2023-11-30T12:07:47.794Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x264f7f95 org.postgresql.jdbc.PgResultSetMetaData@264f7f95] 14]
2023-11-30T12:07:47.794Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.794Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.795Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x37c0f02f HikariProxyPreparedStatement@935391279 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.795Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac}}, :remote-addr 127.0.0.1, :start-time 109640528500791, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=950f7e4a-d6c3-4a7b-8c13-67863bfd49ac, content-length 502, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/, connection keep-alive, pragma no-cache, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x2d8f70a5 /127.0.0.1:3230<->/127.0.0.1:55746], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x569eb5e4 leihs.procurement.graphql$handler@569eb5e4], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T12:07:47.797Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => nil
2023-11-30T12:07:47.797Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.798Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x455d8928 HikariProxyPreparedStatement@1163757864 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.798Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.799Z NX-41294 DEBUG [leihs.procurement.permissions.user:31] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_inspectors) (sql/merge-where [:= :procurement_category_inspectors.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_inspectors.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.799Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4d0e884d HikariProxyPreparedStatement@1292798029 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.799Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.800Z NX-41294 DEBUG [leihs.procurement.permissions.user:52] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_viewers) (sql/merge-where [:= :procurement_category_viewers.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_viewers.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.801Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4a72b896 HikariProxyPreparedStatement@1249032342 wrapping SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.801Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.801Z NX-41294 DEBUG [leihs.procurement.permissions.user:72] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_requesters_organizations) (sql/where [:= :procurement_requesters_organizations.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.802Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x137b61c7 HikariProxyPreparedStatement@326853063 wrapping SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.802Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.802Z NX-41294 DEBUG [leihs.procurement.authorization:136] - (->> [user-perms/admin? user-perms/inspector? user-perms/viewer? user-perms/requester?] (map (fn* [p1__39360#] (p1__39360# (:tx request) (:authenticated-entity request)))) (some true?)) => true
2023-11-30T12:07:47.802Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x1a860849 org.postgresql.jdbc.PgResultSetMetaData@1a860849] 1]
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x1a860849 org.postgresql.jdbc.PgResultSetMetaData@1a860849] 2]
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x1a860849 org.postgresql.jdbc.PgResultSetMetaData@1a860849] 1]
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x1a860849 org.postgresql.jdbc.PgResultSetMetaData@1a860849] 2]
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x1a860849 org.postgresql.jdbc.PgResultSetMetaData@1a860849] 1]
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x1a860849 org.postgresql.jdbc.PgResultSetMetaData@1a860849] 2]
2023-11-30T12:07:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x1a860849 org.postgresql.jdbc.PgResultSetMetaData@1a860849] 1]
2023-11-30T12:07:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x1a860849 org.postgresql.jdbc.PgResultSetMetaData@1a860849] 2]
2023-11-30T12:07:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ab4390c org.postgresql.jdbc.PgResultSetMetaData@3ab4390c] 1]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ab4390c org.postgresql.jdbc.PgResultSetMetaData@3ab4390c] 2]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ab4390c org.postgresql.jdbc.PgResultSetMetaData@3ab4390c] 1]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ab4390c org.postgresql.jdbc.PgResultSetMetaData@3ab4390c] 2]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ab4390c org.postgresql.jdbc.PgResultSetMetaData@3ab4390c] 1]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ab4390c org.postgresql.jdbc.PgResultSetMetaData@3ab4390c] 2]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.806Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ab4390c org.postgresql.jdbc.PgResultSetMetaData@3ab4390c] 1]
2023-11-30T12:07:47.806Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.806Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.806Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ab4390c org.postgresql.jdbc.PgResultSetMetaData@3ab4390c] 2]
2023-11-30T12:07:47.806Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.806Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH

>>>exec-query::variables {}
2023-11-30T12:07:47.810Z NX-41294 DEBUG [leihs.procurement.graphql:48] - query-string => query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}

2023-11-30T12:07:47.811Z NX-41294 DEBUG [leihs.procurement.graphql:49] - (-> request :body :variables) => {}
2023-11-30T12:07:47.811Z NX-41294 DEBUG [leihs.procurement.graphql:52] - {:request request} => {:request {:leihs-user-language {:name "English (UK)", :locale "en-GB", :default true, :active true}, :authenticated-entity {:email "jimmie@goyette.com", :contracts_count 0, :lastname "Admin", :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname "Procurement", :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {"Idea-d8c89f6f" {:value "5d06a449-7aaa-4285-b65a-53c2ae3cb299"}, "leihs-anti-csrf-token" {:value "65184e75-5146-4915-8494-09445d034d15"}, "leihs-user-session" {:value "950f7e4a-d6c3-4a7b-8c13-67863bfd49ac"}}, :remote-addr "127.0.0.1", :start-time 109640528500791, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address "your.lending.desk@example.com", :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature "Cheers,"}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a "HikariDataSource (HikariPool-1)"], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e "next.jdbc.result_set$as_unqualified_lower_maps@6e00588e"]}}, :query-params-raw {}, :route-params nil, :headers {"origin" "http://localhost:3230", "sec-fetch-site" "same-origin", "sec-ch-ua-mobile" "?0", "host" "localhost:3230", "user-agent" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36", "content-type" "application/json", "cookie" "Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=950f7e4a-d6c3-4a7b-8c13-67863bfd49ac", "content-length" "502", "sec-ch-ua" "\"Google Chrome\";v=\"119\", \"Chromium\";v=\"119\", \"Not?A_Brand\";v=\"24\"", "sec-ch-ua-platform" "\"macOS\"", "referer" "http://localhost:3230/procure/", "connection" "keep-alive", "pragma" "no-cache", "x-csrf-token" "65184e75-5146-4915-8494-09445d034d15", "accept" "application/json", "accept-language" "de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7", "sec-fetch-dest" "empty", "accept-encoding" "gzip, deflate, br", "sec-fetch-mode" "cors", "cache-control" "no-cache"}, :async-channel #object[org.httpkit.server.AsyncChannel 0x2d8f70a5 "/127.0.0.1:3230<->/127.0.0.1:55746"], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 "HikariDataSource (db-pool)"]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type "application/json", :form-params-raw {}, :character-encoding "utf8", :uri "/procure/graphql", :server-name "localhost", :handler-key :graphql, :query-string nil, :body {:operationName "me", :variables {}, :query "query me {\n  current_user {\n    navbarProps\n    user {\n      id\n      firstname\n      lastname\n      permissions {\n        isAdmin\n        isRequester\n        isInspectorForCategories {\n          id\n          __typename\n        }\n        isViewerForCategories {\n          id\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  settings {\n    contact_url\n    __typename\n  }\n}\n"}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x569eb5e4 "leihs.procurement.graphql$handler@569eb5e4"], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}}
2023-11-30T12:07:47.824Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1a6b2290 HikariProxyPreparedStatement@443228816 wrapping SELECT users.id, users.firstname, users.lastname FROM users  WHERE users.id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.824Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.826Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1772d365 org.postgresql.jdbc.PgResultSetMetaData@1772d365] 1]
2023-11-30T12:07:47.826Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.826Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.826Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x1772d365 org.postgresql.jdbc.PgResultSetMetaData@1772d365] 2]
2023-11-30T12:07:47.826Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:47.826Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:47.826Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x1772d365 org.postgresql.jdbc.PgResultSetMetaData@1772d365] 3]
2023-11-30T12:07:47.826Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:47.826Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:47.827Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4f1425ad HikariProxyPreparedStatement@1326720429 wrapping SELECT procurement_users_filters.* FROM procurement_users_filters  WHERE procurement_users_filters.user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.827Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x230bdf16 org.postgresql.jdbc.PgResultSetMetaData@230bdf16] 1]
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x230bdf16 org.postgresql.jdbc.PgResultSetMetaData@230bdf16] 2]
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x230bdf16 org.postgresql.jdbc.PgResultSetMetaData@230bdf16] 1]
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x230bdf16 org.postgresql.jdbc.PgResultSetMetaData@230bdf16] 2]
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.828Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x230bdf16 org.postgresql.jdbc.PgResultSetMetaData@230bdf16] 1]
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x230bdf16 org.postgresql.jdbc.PgResultSetMetaData@230bdf16] 2]
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x230bdf16 org.postgresql.jdbc.PgResultSetMetaData@230bdf16] 1]
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x230bdf16 org.postgresql.jdbc.PgResultSetMetaData@230bdf16] 2]
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.829Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x34db4511 org.postgresql.jdbc.PgResultSetMetaData@34db4511] 1]
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x34db4511 org.postgresql.jdbc.PgResultSetMetaData@34db4511] 2]
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x34db4511 org.postgresql.jdbc.PgResultSetMetaData@34db4511] 1]
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x34db4511 org.postgresql.jdbc.PgResultSetMetaData@34db4511] 2]
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.830Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x34db4511 org.postgresql.jdbc.PgResultSetMetaData@34db4511] 1]
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x34db4511 org.postgresql.jdbc.PgResultSetMetaData@34db4511] 2]
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x34db4511 org.postgresql.jdbc.PgResultSetMetaData@34db4511] 1]
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x34db4511 org.postgresql.jdbc.PgResultSetMetaData@34db4511] 2]
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.831Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.858Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.859Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x406ad85d HikariProxyPreparedStatement@1080744029 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.859Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.859Z NX-41294 DEBUG [leihs.procurement.permissions.user:72] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_requesters_organizations) (sql/where [:= :procurement_requesters_organizations.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.860Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6c931377 HikariProxyPreparedStatement@1821578103 wrapping SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.860Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.861Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2b3727b4 HikariProxyPreparedStatement@725034932 wrapping SELECT procurement_categories.* FROM procurement_categories INNER JOIN procurement_category_inspectors ON procurement_categories.id = procurement_category_inspectors.category_id WHERE procurement_category_inspectors.user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.861Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.862Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x46794a40 HikariProxyPreparedStatement@1182353984 wrapping SELECT procurement_categories.* FROM procurement_categories INNER JOIN procurement_category_viewers ON procurement_categories.id = procurement_category_viewers.category_id WHERE procurement_category_viewers.user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.862Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.866Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f386122 org.postgresql.jdbc.PgResultSetMetaData@6f386122] 1]
2023-11-30T12:07:47.871Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int4 0]
2023-11-30T12:07:47.871Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.871Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.587049000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f386122 org.postgresql.jdbc.PgResultSetMetaData@6f386122] 2]
2023-11-30T12:07:47.871Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.587049000-00:00"]
2023-11-30T12:07:47.871Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.587049Z"
2023-11-30T12:07:47.871Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.587049000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f386122 org.postgresql.jdbc.PgResultSetMetaData@6f386122] 3]
2023-11-30T12:07:47.871Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.587049000-00:00"]
2023-11-30T12:07:47.871Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.587049Z"
2023-11-30T12:07:47.872Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [http://hartmann.io/rolf #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f386122 org.postgresql.jdbc.PgResultSetMetaData@6f386122] 4]
2023-11-30T12:07:47.872Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar http://hartmann.io/rolf]
2023-11-30T12:07:47.872Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  http://hartmann.io/rolf
2023-11-30T12:07:47.872Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x32b5e430 ["Eum architecto minus magnam."]] #object[org.postgresql.jdbc.PgResultSetMetaData 0x6f386122 org.postgresql.jdbc.PgResultSetMetaData@6f386122] 5]
2023-11-30T12:07:47.872Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0x32b5e430 ["Eum architecto minus magnam."]]]
2023-11-30T12:07:47.872Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  [Eum architecto minus magnam.]

>>>pure-handler {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"65184e75-5146-4915-8494-09445d034d15","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"e68ca036-dced-4666-b9e9-a6b55119f013","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Züritüütsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id e68ca036-dced-4666-b9e9-a6b55119f013] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url http://hartmann.io/rolf] [:__typename :ProcurementSettings])])}
2023-11-30T12:07:47.874Z NX-41294 DEBUG [leihs.procurement.graphql:72] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"65184e75-5146-4915-8494-09445d034d15\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"e68ca036-dced-4666-b9e9-a6b55119f013\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "e68ca036-dced-4666-b9e9-a6b55119f013"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url "http://hartmann.io/rolf"] [:__typename :ProcurementSettings])])}
2023-11-30T12:07:47.875Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:body {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"65184e75-5146-4915-8494-09445d034d15\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"e68ca036-dced-4666-b9e9-a6b55119f013\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "e68ca036-dced-4666-b9e9-a6b55119f013"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url "http://hartmann.io/rolf"] [:__typename :ProcurementSettings])])}}
2023-11-30T12:07:47.913Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6c19fe3c HikariProxyPreparedStatement@1813642812 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T12:07:47.915Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:47.917Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6c19fe3c HikariProxyPreparedStatement@1813642812 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T12:07:47.917Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  950f7e4a-d6c3-4a7b-8c13-67863bfd49ac
2023-11-30T12:07:47.919Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6c19fe3c HikariProxyPreparedStatement@1813642812 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T12:07:47.919Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T12:07:47.921Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6c19fe3c HikariProxyPreparedStatement@1813642812 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T12:07:47.922Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x10b90969 HikariProxyPreparedStatement@280562025 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T12:07:47.922Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T12:07:47.922Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:47.923Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x10b90969 HikariProxyPreparedStatement@280562025 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T12:07:47.923Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  950f7e4a-d6c3-4a7b-8c13-67863bfd49ac
2023-11-30T12:07:47.924Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x10b90969 HikariProxyPreparedStatement@280562025 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T12:07:47.924Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T12:07:47.924Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0xd421130 org.postgresql.jdbc.PgResultSetMetaData@d421130] 1]
2023-11-30T12:07:47.924Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:47.924Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0xd421130 org.postgresql.jdbc.PgResultSetMetaData@d421130] 2]
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0xd421130 org.postgresql.jdbc.PgResultSetMetaData@d421130] 3]
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0xd421130 org.postgresql.jdbc.PgResultSetMetaData@d421130] 6]
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x10b90969 HikariProxyPreparedStatement@280562025 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0xd421130 org.postgresql.jdbc.PgResultSetMetaData@d421130] 10]
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0xd421130 org.postgresql.jdbc.PgResultSetMetaData@d421130] 11]
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.925Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0xd421130 org.postgresql.jdbc.PgResultSetMetaData@d421130] 12]
2023-11-30T12:07:47.926Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.926Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.926Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2" #object[org.postgresql.jdbc.PgResultSetMetaData 0xd421130 org.postgresql.jdbc.PgResultSetMetaData@d421130] 13]
2023-11-30T12:07:47.926Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"]
2023-11-30T12:07:47.926Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"
2023-11-30T12:07:47.926Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xd421130 org.postgresql.jdbc.PgResultSetMetaData@d421130] 14]
2023-11-30T12:07:47.926Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.926Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.927Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4888742a HikariProxyPreparedStatement@1216902186 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.927Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.928Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x392d2468 org.postgresql.jdbc.PgResultSetMetaData@392d2468] 1]
2023-11-30T12:07:47.928Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:47.928Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:47.928Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x392d2468 org.postgresql.jdbc.PgResultSetMetaData@392d2468] 2]
2023-11-30T12:07:47.928Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at 2023-11-30T12:07:47.928Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
#time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f 2023-11-30T12:07:47.928Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x392d2468 org.postgresql.jdbc.PgResultSetMetaData@392d2468] 3]
{:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac}}, :remote-addr 127.0.0.1, :start-time 109640687700791, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=950f7e4a-d6c3-4a7b-8c13-67863bfd49ac, content-length 502, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, pragma no-cache, 2023-11-30T12:07:47.928Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 2023-11-30T12:07:47.928Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
0x4546c6d3 /127.0.0.1:3230<->/127.0.0.1:55805], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 2023-11-30T12:07:47.928Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x392d2468 org.postgresql.jdbc.PgResultSetMetaData@392d2468] 6]
0x569eb5e4 leihs.procurement.graphql$handler@569eb5e4], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x392d2468 org.postgresql.jdbc.PgResultSetMetaData@392d2468] 10]
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x392d2468 org.postgresql.jdbc.PgResultSetMetaData@392d2468] 11]
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.929Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => nil
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x392d2468 org.postgresql.jdbc.PgResultSetMetaData@392d2468] 12]
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.929Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.929Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2" #object[org.postgresql.jdbc.PgResultSetMetaData 0x392d2468 org.postgresql.jdbc.PgResultSetMetaData@392d2468] 13]
2023-11-30T12:07:47.930Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"]
2023-11-30T12:07:47.930Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"
2023-11-30T12:07:47.930Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x392d2468 org.postgresql.jdbc.PgResultSetMetaData@392d2468] 14]
2023-11-30T12:07:47.930Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.930Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.930Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7ff7c719 HikariProxyPreparedStatement@2146944793 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.930Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.930Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x68c677f3 HikariProxyPreparedStatement@1757837299 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.930Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.931Z NX-41294 DEBUG [leihs.procurement.permissions.user:31] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_inspectors) (sql/merge-where [:= :procurement_category_inspectors.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_inspectors.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.932Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2951f943 HikariProxyPreparedStatement@693238083 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.932Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac}}, :remote-addr 127.0.0.1, :start-time 109640687568250, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=950f7e4a-d6c3-4a7b-8c13-67863bfd49ac, content-length 534, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, pragma no-cache, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x389fc9c /127.0.0.1:3230<->/127.0.0.1:55747], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x569eb5e4 leihs.procurement.graphql$handler@569eb5e4], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T12:07:47.932Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => nil
2023-11-30T12:07:47.933Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.933Z NX-41294 DEBUG [leihs.procurement.permissions.user:52] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_viewers) (sql/merge-where [:= :procurement_category_viewers.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_viewers.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.933Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1879a38f HikariProxyPreparedStatement@410624911 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.933Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.933Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x52371cb9 HikariProxyPreparedStatement@1379343545 wrapping SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.934Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.934Z NX-41294 DEBUG [leihs.procurement.permissions.user:31] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_inspectors) (sql/merge-where [:= :procurement_category_inspectors.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_inspectors.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.935Z NX-41294 DEBUG [leihs.procurement.permissions.user:72] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_requesters_organizations) (sql/where [:= :procurement_requesters_organizations.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.935Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x40f42dcf HikariProxyPreparedStatement@1089744335 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.936Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.936Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4d238b84 HikariProxyPreparedStatement@1294175108 wrapping SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.936Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.937Z NX-41294 DEBUG [leihs.procurement.permissions.user:52] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_viewers) (sql/merge-where [:= :procurement_category_viewers.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_viewers.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.937Z NX-41294 DEBUG [leihs.procurement.authorization:136] - (->> [user-perms/admin? user-perms/inspector? user-perms/viewer? user-perms/requester?] (map (fn* [p1__39360#] (p1__39360# (:tx request) (:authenticated-entity request)))) (some true?)) => true
2023-11-30T12:07:47.938Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0xd4b1457 org.postgresql.jdbc.PgResultSetMetaData@d4b1457] 1]
2023-11-30T12:07:47.938Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4eb65ae4 HikariProxyPreparedStatement@1320573668 wrapping SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.938Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.938Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.939Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.939Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0xd4b1457 org.postgresql.jdbc.PgResultSetMetaData@d4b1457] 2]
2023-11-30T12:07:47.939Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.939Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.939Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0xd4b1457 org.postgresql.jdbc.PgResultSetMetaData@d4b1457] 1]
2023-11-30T12:07:47.939Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.939Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.939Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0xd4b1457 org.postgresql.jdbc.PgResultSetMetaData@d4b1457] 2]
2023-11-30T12:07:47.939Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.940Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0xd4b1457 org.postgresql.jdbc.PgResultSetMetaData@d4b1457] 1]
2023-11-30T12:07:47.941Z NX-41294 DEBUG [leihs.procurement.permissions.user:72] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_requesters_organizations) (sql/where [:= :procurement_requesters_organizations.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0xd4b1457 org.postgresql.jdbc.PgResultSetMetaData@d4b1457] 2]
2023-11-30T12:07:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0xd4b1457 org.postgresql.jdbc.PgResultSetMetaData@d4b1457] 1]
2023-11-30T12:07:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0xd4b1457 org.postgresql.jdbc.PgResultSetMetaData@d4b1457] 2]
2023-11-30T12:07:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.943Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:335] - db-pool - Add connection elided, waiting=1, adders pending/running=2
2023-11-30T12:07:47.943Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6372d384 HikariProxyPreparedStatement@1668469636 wrapping SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.943Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.943Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7b05fb7 HikariProxyPreparedStatement@128999351 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T12:07:47.943Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:47.943Z NX-41294 DEBUG [leihs.procurement.authorization:136] - (->> [user-perms/admin? user-perms/inspector? user-perms/viewer? user-perms/requester?] (map (fn* [p1__39360#] (p1__39360# (:tx request) (:authenticated-entity request)))) (some true?)) => true
2023-11-30T12:07:47.944Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:335] - db-pool - Add connection elided, waiting=1, adders pending/running=2
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7b05fb7 HikariProxyPreparedStatement@128999351 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  950f7e4a-d6c3-4a7b-8c13-67863bfd49ac
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x17b3e30d org.postgresql.jdbc.PgResultSetMetaData@17b3e30d] 1]
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x17b3e30d org.postgresql.jdbc.PgResultSetMetaData@17b3e30d] 2]
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x17b3e30d org.postgresql.jdbc.PgResultSetMetaData@17b3e30d] 1]
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7b05fb7 HikariProxyPreparedStatement@128999351 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T12:07:47.944Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x17b3e30d org.postgresql.jdbc.PgResultSetMetaData@17b3e30d] 2]
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x17b3e30d org.postgresql.jdbc.PgResultSetMetaData@17b3e30d] 1]
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x17b3e30d org.postgresql.jdbc.PgResultSetMetaData@17b3e30d] 2]
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7b05fb7 HikariProxyPreparedStatement@128999351 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('950f7e4a-d6c3-4a7b-8c13-67863bfd49ac', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x17b3e30d org.postgresql.jdbc.PgResultSetMetaData@17b3e30d] 1]
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x17b3e30d org.postgresql.jdbc.PgResultSetMetaData@17b3e30d] 2]
2023-11-30T12:07:47.945Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.946Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.946Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - db-pool - Added connection org.postgresql.jdbc.PgConnection@910adc2
2023-11-30T12:07:47.947Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x3e79f2f3 org.postgresql.jdbc.PgResultSetMetaData@3e79f2f3] 1]
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x3e79f2f3 org.postgresql.jdbc.PgResultSetMetaData@3e79f2f3] 2]
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3e79f2f3 org.postgresql.jdbc.PgResultSetMetaData@3e79f2f3] 3]
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x3e79f2f3 org.postgresql.jdbc.PgResultSetMetaData@3e79f2f3] 6]
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3e79f2f3 org.postgresql.jdbc.PgResultSetMetaData@3e79f2f3] 10]
2023-11-30T12:07:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b884137 org.postgresql.jdbc.PgResultSetMetaData@2b884137] 1]
2023-11-30T12:07:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x3e79f2f3 org.postgresql.jdbc.PgResultSetMetaData@3e79f2f3] 11]
2023-11-30T12:07:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x3e79f2f3 org.postgresql.jdbc.PgResultSetMetaData@3e79f2f3] 12]
2023-11-30T12:07:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3e79f2f3 org.postgresql.jdbc.PgResultSetMetaData@3e79f2f3] 13]
2023-11-30T12:07:47.950Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"]
2023-11-30T12:07:47.950Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2"
2023-11-30T12:07:47.950Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T12:07:47.256362000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3e79f2f3 org.postgresql.jdbc.PgResultSetMetaData@3e79f2f3] 14]
2023-11-30T12:07:47.950Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T12:07:47.256362000-00:00"]
2023-11-30T12:07:47.950Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T12:07:47.256362Z"
2023-11-30T12:07:47.951Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x472f035 HikariProxyPreparedStatement@74641461 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID

>>>exec-query::variables {}
2023-11-30T12:07:47.951Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.951Z NX-41294 DEBUG [leihs.procurement.graphql:48] - query-string => query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}

2023-11-30T12:07:47.951Z NX-41294 DEBUG [leihs.procurement.graphql:49] - (-> request :body :variables) => {}
2023-11-30T12:07:47.951Z NX-41294 DEBUG [leihs.procurement.graphql:52] - {:request request} => {:request {:leihs-user-language {:name "English (UK)", :locale "en-GB", :default true, :active true}, :authenticated-entity {:email "jimmie@goyette.com", :contracts_count 0, :lastname "Admin", :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname "Procurement", :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {"Idea-d8c89f6f" {:value "5d06a449-7aaa-4285-b65a-53c2ae3cb299"}, "leihs-anti-csrf-token" {:value "65184e75-5146-4915-8494-09445d034d15"}, "leihs-user-session" {:value "950f7e4a-d6c3-4a7b-8c13-67863bfd49ac"}}, :remote-addr "127.0.0.1", :start-time 109640687700791, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address "your.lending.desk@example.com", :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature "Cheers,"}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a "HikariDataSource (HikariPool-1)"], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e "next.jdbc.result_set$as_unqualified_lower_maps@6e00588e"]}}, :query-params-raw {}, :route-params nil, :headers {"origin" "http://localhost:3230", "sec-fetch-site" "same-origin", "sec-ch-ua-mobile" "?0", "host" "localhost:3230", "user-agent" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36", "content-type" "application/json", "cookie" "Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=950f7e4a-d6c3-4a7b-8c13-67863bfd49ac", "content-length" "502", "sec-ch-ua" "\"Google Chrome\";v=\"119\", \"Chromium\";v=\"119\", \"Not?A_Brand\";v=\"24\"", "sec-ch-ua-platform" "\"macOS\"", "referer" "http://localhost:3230/procure/requests", "connection" "keep-alive", "pragma" "no-cache", "x-csrf-token" "65184e75-5146-4915-8494-09445d034d15", "accept" "application/json", "accept-language" "de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7", "sec-fetch-dest" "empty", "accept-encoding" "gzip, deflate, br", "sec-fetch-mode" "cors", "cache-control" "no-cache"}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4546c6d3 "/127.0.0.1:3230<->/127.0.0.1:55805"], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 "HikariDataSource (db-pool)"]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type "application/json", :form-params-raw {}, :character-encoding "utf8", :uri "/procure/graphql", :server-name "localhost", :handler-key :graphql, :query-string nil, :body {:operationName "me", :variables {}, :query "query me {\n  current_user {\n    navbarProps\n    user {\n      id\n      firstname\n      lastname\n      permissions {\n        isAdmin\n        isRequester\n        isInspectorForCategories {\n          id\n          __typename\n        }\n        isViewerForCategories {\n          id\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  settings {\n    contact_url\n    __typename\n  }\n}\n"}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x569eb5e4 "leihs.procurement.graphql$handler@569eb5e4"], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}}
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44347 0x4b9c2b71 leihs.core.locale$wrap$fn__44347@4b9c2b71]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 950f7e4a-d6c3-4a7b-8c13-67863bfd49ac}}, :remote-addr 127.0.0.1, :start-time 109640687430166, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e next.jdbc.result_set$as_unqualified_lower_maps@6e00588e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=950f7e4a-d6c3-4a7b-8c13-67863bfd49ac, content-length 4019, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, pragma no-cache, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5741ec3d /127.0.0.1:3230<->/127.0.0.1:55746], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 HikariDataSource (db-pool)]}, :content-length 4019, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestsIndexFiltered, :variables {:inspector_priority [LOW MEDIUM HIGH MANDATORY], :onlyOwnRequests false, :state [NEW APPROVED PARTIALLY_APPROVED DENIED], :order_status [NOT_PROCESSED IN_PROGRESS PROCURED ALTERNATIVE_PROCURED NOT_PROCURED], :search nil, :organizations [fb664326-a8ef-4556-af02-07d3127cd9ec], :categories [7d5ba731-edd9-41ba-8773-7337d24c2327], :priority [NORMAL HIGH], :budgetPeriods [8b8fe440-cae5-4bf9-8048-d0ec2399faa1]}, :query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x569eb5e4 leihs.procurement.graphql$handler@569eb5e4], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T12:07:47.952Z NX-41294 DEBUG [leihs.procurement.authorization:135] - (skip? (:handler-key request)) => nil
2023-11-30T12:07:47.954Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.954Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x16cf366f HikariProxyPreparedStatement@382678639 wrapping SELECT users.id, users.firstname, users.lastname FROM users  WHERE users.id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.954Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.954Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.954Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.954Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b884137 org.postgresql.jdbc.PgResultSetMetaData@2b884137] 2]
2023-11-30T12:07:47.954Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3dd5484e HikariProxyPreparedStatement@1037387854 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.954Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.954Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b884137 org.postgresql.jdbc.PgResultSetMetaData@2b884137] 1]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b884137 org.postgresql.jdbc.PgResultSetMetaData@2b884137] 2]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x20a397ba org.postgresql.jdbc.PgResultSetMetaData@20a397ba] 1]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b884137 org.postgresql.jdbc.PgResultSetMetaData@2b884137] 1]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x20a397ba org.postgresql.jdbc.PgResultSetMetaData@20a397ba] 2]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b884137 org.postgresql.jdbc.PgResultSetMetaData@2b884137] 2]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x20a397ba org.postgresql.jdbc.PgResultSetMetaData@20a397ba] 3]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b884137 org.postgresql.jdbc.PgResultSetMetaData@2b884137] 1]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.955Z NX-41294 DEBUG [leihs.procurement.permissions.user:31] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_inspectors) (sql/merge-where [:= :procurement_category_inspectors.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_inspectors.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.955Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b884137 org.postgresql.jdbc.PgResultSetMetaData@2b884137] 2]
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x369114b HikariProxyPreparedStatement@57217355 wrapping SELECT procurement_users_filters.* FROM procurement_users_filters  WHERE procurement_users_filters.user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x25ffefd0 HikariProxyPreparedStatement@637530064 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x24a30f6f org.postgresql.jdbc.PgResultSetMetaData@24a30f6f] 1]
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x24a30f6f org.postgresql.jdbc.PgResultSetMetaData@24a30f6f] 2]
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x24a30f6f org.postgresql.jdbc.PgResultSetMetaData@24a30f6f] 1]
2023-11-30T12:07:47.956Z NX-41294 DEBUG [leihs.procurement.permissions.user:52] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_viewers) (sql/merge-where [:= :procurement_category_viewers.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_viewers.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x24a30f6f org.postgresql.jdbc.PgResultSetMetaData@24a30f6f] 2]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4de01801 HikariProxyPreparedStatement@1306531841 wrapping SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x24a30f6f org.postgresql.jdbc.PgResultSetMetaData@24a30f6f] 1]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x6aaf9fdd org.postgresql.jdbc.PgResultSetMetaData@6aaf9fdd] 1]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x24a30f6f org.postgresql.jdbc.PgResultSetMetaData@24a30f6f] 2]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x6aaf9fdd org.postgresql.jdbc.PgResultSetMetaData@6aaf9fdd] 2]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x24a30f6f org.postgresql.jdbc.PgResultSetMetaData@24a30f6f] 1]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [leihs.procurement.permissions.user:72] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_requesters_organizations) (sql/where [:= :procurement_requesters_organizations.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x6aaf9fdd org.postgresql.jdbc.PgResultSetMetaData@6aaf9fdd] 1]
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x24a30f6f org.postgresql.jdbc.PgResultSetMetaData@24a30f6f] 2]
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x6aaf9fdd org.postgresql.jdbc.PgResultSetMetaData@6aaf9fdd] 2]
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x31fc4b48 HikariProxyPreparedStatement@838617928 wrapping SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x6aaf9fdd org.postgresql.jdbc.PgResultSetMetaData@6aaf9fdd] 1]
2023-11-30T12:07:47.958Z NX-41294 DEBUG [leihs.procurement.authorization:136] - (->> [user-perms/admin? user-perms/inspector? user-perms/viewer? user-perms/requester?] (map (fn* [p1__39360#] (p1__39360# (:tx request) (:authenticated-entity request)))) (some true?)) => true
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x6aaf9fdd org.postgresql.jdbc.PgResultSetMetaData@6aaf9fdd] 2]
2023-11-30T12:07:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x6aaf9fdd org.postgresql.jdbc.PgResultSetMetaData@6aaf9fdd] 1]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x2fb07b7a org.postgresql.jdbc.PgResultSetMetaData@2fb07b7a] 1]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x2fb07b7a org.postgresql.jdbc.PgResultSetMetaData@2fb07b7a] 2]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x6aaf9fdd org.postgresql.jdbc.PgResultSetMetaData@6aaf9fdd] 2]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x2fb07b7a org.postgresql.jdbc.PgResultSetMetaData@2fb07b7a] 1]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x2fb07b7a org.postgresql.jdbc.PgResultSetMetaData@2fb07b7a] 2]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x2fb07b7a org.postgresql.jdbc.PgResultSetMetaData@2fb07b7a] 1]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x2fb07b7a org.postgresql.jdbc.PgResultSetMetaData@2fb07b7a] 2]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x2fb07b7a org.postgresql.jdbc.PgResultSetMetaData@2fb07b7a] 1]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x16460d88 org.postgresql.jdbc.PgResultSetMetaData@16460d88] 1]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x2fb07b7a org.postgresql.jdbc.PgResultSetMetaData@2fb07b7a] 2]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x16460d88 org.postgresql.jdbc.PgResultSetMetaData@16460d88] 2]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x16460d88 org.postgresql.jdbc.PgResultSetMetaData@16460d88] 1]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.960Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x16460d88 org.postgresql.jdbc.PgResultSetMetaData@16460d88] 2]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (UK) #object[org.postgresql.jdbc.PgResultSetMetaData 0x43048251 org.postgresql.jdbc.PgResultSetMetaData@43048251] 1]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x16460d88 org.postgresql.jdbc.PgResultSetMetaData@16460d88] 1]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (UK)]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (UK)
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-GB #object[org.postgresql.jdbc.PgResultSetMetaData 0x43048251 org.postgresql.jdbc.PgResultSetMetaData@43048251] 2]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x16460d88 org.postgresql.jdbc.PgResultSetMetaData@16460d88] 2]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-GB]

>>>exec-query::variables {}
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-GB
2023-11-30T12:07:47.961Z NX-41294 DEBUG [leihs.procurement.graphql:48] - query-string => query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}

2023-11-30T12:07:47.961Z NX-41294 DEBUG [leihs.procurement.graphql:49] - (-> request :body :variables) => {}
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [English (US) #object[org.postgresql.jdbc.PgResultSetMetaData 0x43048251 org.postgresql.jdbc.PgResultSetMetaData@43048251] 1]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar English (US)]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  English (US)
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x16460d88 org.postgresql.jdbc.PgResultSetMetaData@16460d88] 1]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [en-US #object[org.postgresql.jdbc.PgResultSetMetaData 0x43048251 org.postgresql.jdbc.PgResultSetMetaData@43048251] 2]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar en-US]
2023-11-30T12:07:47.961Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.961Z NX-41294 DEBUG [leihs.procurement.graphql:52] - {:request request} => {:request {:leihs-user-language {:name "English (UK)", :locale "en-GB", :default true, :active true}, :authenticated-entity {:email "jimmie@goyette.com", :contracts_count 0, :lastname "Admin", :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname "Procurement", :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {"Idea-d8c89f6f" {:value "5d06a449-7aaa-4285-b65a-53c2ae3cb299"}, "leihs-anti-csrf-token" {:value "65184e75-5146-4915-8494-09445d034d15"}, "leihs-user-session" {:value "950f7e4a-d6c3-4a7b-8c13-67863bfd49ac"}}, :remote-addr "127.0.0.1", :start-time 109640687568250, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address "your.lending.desk@example.com", :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature "Cheers,"}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a "HikariDataSource (HikariPool-1)"], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e "next.jdbc.result_set$as_unqualified_lower_maps@6e00588e"]}}, :query-params-raw {}, :route-params nil, :headers {"origin" "http://localhost:3230", "sec-fetch-site" "same-origin", "sec-ch-ua-mobile" "?0", "host" "localhost:3230", "user-agent" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36", "content-type" "application/json", "cookie" "Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=950f7e4a-d6c3-4a7b-8c13-67863bfd49ac", "content-length" "534", "sec-ch-ua" "\"Google Chrome\";v=\"119\", \"Chromium\";v=\"119\", \"Not?A_Brand\";v=\"24\"", "sec-ch-ua-platform" "\"macOS\"", "referer" "http://localhost:3230/procure/requests", "connection" "keep-alive", "pragma" "no-cache", "x-csrf-token" "65184e75-5146-4915-8494-09445d034d15", "accept" "application/json", "accept-language" "de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7", "sec-fetch-dest" "empty", "accept-encoding" "gzip, deflate, br", "sec-fetch-mode" "cors", "cache-control" "no-cache"}, :async-channel #object[org.httpkit.server.AsyncChannel 0x389fc9c "/127.0.0.1:3230<->/127.0.0.1:55747"], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 "HikariDataSource (db-pool)"]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type "application/json", :form-params-raw {}, :character-encoding "utf8", :uri "/procure/graphql", :server-name "localhost", :handler-key :graphql, :query-string nil, :body {:operationName "RequestFilters", :variables {}, :query "query RequestFilters {\n  budget_periods {\n    id\n    name\n    inspection_start_date\n    end_date\n    __typename\n  }\n  main_categories {\n    id\n    name\n    categories {\n      id\n      name\n      __typename\n    }\n    __typename\n  }\n  organizations(root_only: true) {\n    ...OrgProps\n    organizations {\n      ...OrgProps\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment OrgProps on Organization {\n  id\n  name\n  shortname\n  __typename\n}\n"}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x569eb5e4 "leihs.procurement.graphql$handler@569eb5e4"], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}}
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  en-US
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x16460d88 org.postgresql.jdbc.PgResultSetMetaData@16460d88] 2]
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Deutsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x43048251 org.postgresql.jdbc.PgResultSetMetaData@43048251] 1]
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Deutsch]
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Deutsch
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [de-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x43048251 org.postgresql.jdbc.PgResultSetMetaData@43048251] 2]
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar de-CH]
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  de-CH
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Züritüütsch #object[org.postgresql.jdbc.PgResultSetMetaData 0x43048251 org.postgresql.jdbc.PgResultSetMetaData@43048251] 1]
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Züritüütsch]
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Züritüütsch
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [gsw-CH #object[org.postgresql.jdbc.PgResultSetMetaData 0x43048251 org.postgresql.jdbc.PgResultSetMetaData@43048251] 2]
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar gsw-CH]
2023-11-30T12:07:47.962Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  gsw-CH
2023-11-30T12:07:47.967Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - db-pool - Added connection org.postgresql.jdbc.PgConnection@77661b08
2023-11-30T12:07:47.967Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe63c013 org.postgresql.jdbc.PgResultSetMetaData@e63c013] 1]
2023-11-30T12:07:47.970Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]
2023-11-30T12:07:47.970Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"
2023-11-30T12:07:47.970Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Budget-Period-Past #object[org.postgresql.jdbc.PgResultSetMetaData 0xe63c013 org.postgresql.jdbc.PgResultSetMetaData@e63c013] 2]
2023-11-30T12:07:47.971Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Budget-Period-Past]
2023-11-30T12:07:47.971Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Budget-Period-Past
2023-11-30T12:07:47.971Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-08-23T22:00:00.000000000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe63c013 org.postgresql.jdbc.PgResultSetMetaData@e63c013] 3]
2023-11-30T12:07:47.971Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-08-23T22:00:00.000000000-00:00"]
2023-11-30T12:07:47.971Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-08-23T22:00:00Z"
2023-11-30T12:07:47.971Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-22T23:00:00.000000000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe63c013 org.postgresql.jdbc.PgResultSetMetaData@e63c013] 4]
2023-11-30T12:07:47.971Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-22T23:00:00.000000000-00:00"]
2023-11-30T12:07:47.971Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-22T23:00:00Z"
2023-11-30T12:07:47.971Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.605131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe63c013 org.postgresql.jdbc.PgResultSetMetaData@e63c013] 5]
2023-11-30T12:07:47.971Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.605131000-00:00"]
2023-11-30T12:07:47.972Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.605131Z"
2023-11-30T12:07:47.972Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.605131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe63c013 org.postgresql.jdbc.PgResultSetMetaData@e63c013] 6]
2023-11-30T12:07:47.972Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.605131000-00:00"]
2023-11-30T12:07:47.972Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.605131Z"
2023-11-30T12:07:47.974Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.975Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xfbdbd40 HikariProxyPreparedStatement@264092992 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.975Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"

>>>exec-query::variables {:inspector_priority [LOW MEDIUM HIGH MANDATORY], :onlyOwnRequests false, :state [NEW APPROVED PARTIALLY_APPROVED DENIED], :order_status [NOT_PROCESSED IN_PROGRESS PROCURED ALTERNATIVE_PROCURED NOT_PROCURED], :search nil, :organizations [fb664326-a8ef-4556-af02-07d3127cd9ec], :categories [7d5ba731-edd9-41ba-8773-7337d24c2327], :priority [NORMAL HIGH], :budgetPeriods [8b8fe440-cae5-4bf9-8048-d0ec2399faa1]}
2023-11-30T12:07:47.975Z NX-41294 DEBUG [leihs.procurement.graphql:48] - query-string => query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}

2023-11-30T12:07:47.975Z NX-41294 DEBUG [leihs.procurement.graphql:49] - (-> request :body :variables) => {:inspector_priority ["LOW" "MEDIUM" "HIGH" "MANDATORY"], :onlyOwnRequests false, :state ["NEW" "APPROVED" "PARTIALLY_APPROVED" "DENIED"], :order_status ["NOT_PROCESSED" "IN_PROGRESS" "PROCURED" "ALTERNATIVE_PROCURED" "NOT_PROCURED"], :search nil, :organizations ["fb664326-a8ef-4556-af02-07d3127cd9ec"], :categories ["7d5ba731-edd9-41ba-8773-7337d24c2327"], :priority ["NORMAL" "HIGH"], :budgetPeriods ["8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]}
2023-11-30T12:07:47.975Z NX-41294 DEBUG [leihs.procurement.permissions.user:72] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_requesters_organizations) (sql/where [:= :procurement_requesters_organizations.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:47.976Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3587f32a org.postgresql.jdbc.PgResultSetMetaData@3587f32a] 1]
2023-11-30T12:07:47.975Z NX-41294 DEBUG [leihs.procurement.graphql:52] - {:request request} => {:request {:leihs-user-language {:name "English (UK)", :locale "en-GB", :default true, :active true}, :authenticated-entity {:email "jimmie@goyette.com", :contracts_count 0, :lastname "Admin", :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname "Procurement", :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T12:07:47.256362Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "38bf6e9a-623d-44f4-aab5-005cfa03d6b2", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {"Idea-d8c89f6f" {:value "5d06a449-7aaa-4285-b65a-53c2ae3cb299"}, "leihs-anti-csrf-token" {:value "65184e75-5146-4915-8494-09445d034d15"}, "leihs-user-session" {:value "950f7e4a-d6c3-4a7b-8c13-67863bfd49ac"}}, :remote-addr "127.0.0.1", :start-time 109640687430166, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address "your.lending.desk@example.com", :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature "Cheers,"}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x2c2de43a "HikariDataSource (HikariPool-1)"], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x6e00588e "next.jdbc.result_set$as_unqualified_lower_maps@6e00588e"]}}, :query-params-raw {}, :route-params nil, :headers {"origin" "http://localhost:3230", "sec-fetch-site" "same-origin", "sec-ch-ua-mobile" "?0", "host" "localhost:3230", "user-agent" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36", "content-type" "application/json", "cookie" "Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=950f7e4a-d6c3-4a7b-8c13-67863bfd49ac", "content-length" "4019", "sec-ch-ua" "\"Google Chrome\";v=\"119\", \"Chromium\";v=\"119\", \"Not?A_Brand\";v=\"24\"", "sec-ch-ua-platform" "\"macOS\"", "referer" "http://localhost:3230/procure/requests", "connection" "keep-alive", "pragma" "no-cache", "x-csrf-token" "65184e75-5146-4915-8494-09445d034d15", "accept" "application/json", "accept-language" "de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7", "sec-fetch-dest" "empty", "accept-encoding" "gzip, deflate, br", "sec-fetch-mode" "cors", "cache-control" "no-cache"}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5741ec3d "/127.0.0.1:3230<->/127.0.0.1:55746"], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x1ce313d7 "HikariDataSource (db-pool)"]}, :content-length 4019, :form-params {}, :websocket? false, :query-params {}, :content-type "application/json", :form-params-raw {}, :character-encoding "utf8", :uri "/procure/graphql", :server-name "localhost", :handler-key :graphql, :query-string nil, :body {:operationName "RequestsIndexFiltered", :variables {:inspector_priority ["LOW" "MEDIUM" "HIGH" "MANDATORY"], :onlyOwnRequests false, :state ["NEW" "APPROVED" "PARTIALLY_APPROVED" "DENIED"], :order_status ["NOT_PROCESSED" "IN_PROGRESS" "PROCURED" "ALTERNATIVE_PROCURED" "NOT_PROCURED"], :search nil, :organizations ["fb664326-a8ef-4556-af02-07d3127cd9ec"], :categories ["7d5ba731-edd9-41ba-8773-7337d24c2327"], :priority ["NORMAL" "HIGH"], :budgetPeriods ["8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]}, :query "query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {\n  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {\n    cacheKey\n    total_count\n    budget_periods {\n      id\n      cacheKey\n      name\n      inspection_start_date\n      end_date\n      total_price_cents\n      main_categories {\n        id\n        cacheKey\n        name\n        image_url\n        total_price_cents\n        categories {\n          id\n          cacheKey\n          name\n          total_price_cents\n          requests {\n            ...RequestFieldsForIndex\n            total_price_cents\n            actionPermissions {\n              edit\n              __typename\n            }\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment RequestFieldsForIndex on Request {\n  id\n  short_id\n  user {\n    value {\n      id\n      firstname\n      lastname\n      __typename\n    }\n    __typename\n  }\n  category {\n    read\n    write\n    required\n    value {\n      id\n      name\n      main_category {\n        id\n        name\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  budget_period {\n    read\n    write\n    required\n    value {\n      name\n      id\n      __typename\n    }\n    __typename\n  }\n  article_name {\n    value\n    __typename\n  }\n  model {\n    value {\n      id\n      product\n      version\n      __typename\n    }\n    __typename\n  }\n  receiver {\n    value\n    __typename\n  }\n  organization {\n    value {\n      id\n      name\n      shortname\n      department {\n        id\n        name\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  price_cents {\n    value\n    __typename\n  }\n  price_currency {\n    value\n    __typename\n  }\n  requested_quantity {\n    read\n    value\n    __typename\n  }\n  approved_quantity {\n    read\n    value\n    __typename\n  }\n  order_quantity {\n    read\n    value\n    __typename\n  }\n  replacement {\n    value\n    __typename\n  }\n  priority {\n    value\n    __typename\n  }\n  state\n  article_number {\n    value\n    __typename\n  }\n  supplier {\n    value {\n      name\n      __typename\n    }\n    __typename\n  }\n  supplier_name {\n    value\n    __typename\n  }\n  receiver {\n    value\n    __typename\n  }\n  room {\n    value {\n      id\n      name\n      building {\n        id\n        name\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  motivation {\n    value\n    __typename\n  }\n  inspection_comment {\n    value\n    __typename\n  }\n  inspector_priority {\n    value\n    __typename\n  }\n  accounting_type {\n    value\n    __typename\n  }\n  cost_center {\n    value\n    __typename\n  }\n  general_ledger_account {\n    value\n    __typename\n  }\n  procurement_account {\n    value\n    __typename\n  }\n  internal_order_number {\n    value\n    __typename\n  }\n  order_status {\n    value\n    __typename\n  }\n  order_comment {\n    value\n    __typename\n  }\n  __typename\n}\n"}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x569eb5e4 "leihs.procurement.graphql$handler@569eb5e4"], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}}
2023-11-30T12:07:47.976Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x36de4e69 HikariProxyPreparedStatement@920538729 wrapping SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:47.976Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.977Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x19958d HikariProxyPreparedStatement@1676685 wrapping SELECT procurement_categories.* FROM procurement_categories INNER JOIN procurement_category_inspectors ON procurement_categories.id = procurement_category_inspectors.category_id WHERE procurement_category_inspectors.user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.977Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.978Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"]
2023-11-30T12:07:47.978Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"
2023-11-30T12:07:47.978Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Main Category MC1 #object[org.postgresql.jdbc.PgResultSetMetaData 0x3587f32a org.postgresql.jdbc.PgResultSetMetaData@3587f32a] 2]
2023-11-30T12:07:47.978Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Main Category MC1]
2023-11-30T12:07:47.978Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x50085ada HikariProxyPreparedStatement@1342724826 wrapping SELECT procurement_categories.* FROM procurement_categories INNER JOIN procurement_category_viewers ON procurement_categories.id = procurement_category_viewers.category_id WHERE procurement_category_viewers.user_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.978Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:47.978Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Main Category MC1
2023-11-30T12:07:47.980Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x619cf9f3 org.postgresql.jdbc.PgResultSetMetaData@619cf9f3] 1]
2023-11-30T12:07:47.980Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7ebf8329 HikariProxyPreparedStatement@2126480169 wrapping SELECT procurement_images.* FROM procurement_images  WHERE procurement_images.main_category_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:47.980Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int4 0]
2023-11-30T12:07:47.980Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"
2023-11-30T12:07:47.980Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.587049000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x619cf9f3 org.postgresql.jdbc.PgResultSetMetaData@619cf9f3] 2]
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.587049000-00:00"]
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.587049Z"
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.587049000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x619cf9f3 org.postgresql.jdbc.PgResultSetMetaData@619cf9f3] 3]
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.587049000-00:00"]
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.587049Z"
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [http://hartmann.io/rolf #object[org.postgresql.jdbc.PgResultSetMetaData 0x619cf9f3 org.postgresql.jdbc.PgResultSetMetaData@619cf9f3] 4]
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar http://hartmann.io/rolf]
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  http://hartmann.io/rolf
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x42572191 ["Eum architecto minus magnam."]] #object[org.postgresql.jdbc.PgResultSetMetaData 0x619cf9f3 org.postgresql.jdbc.PgResultSetMetaData@619cf9f3] 5]
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0x42572191 ["Eum architecto minus magnam."]]]
2023-11-30T12:07:47.981Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  [Eum architecto minus magnam.]

>>>pure-handler {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"65184e75-5146-4915-8494-09445d034d15","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"e68ca036-dced-4666-b9e9-a6b55119f013","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Züritüütsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id e68ca036-dced-4666-b9e9-a6b55119f013] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url http://hartmann.io/rolf] [:__typename :ProcurementSettings])])}
2023-11-30T12:07:47.982Z NX-41294 DEBUG [leihs.procurement.graphql:72] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"65184e75-5146-4915-8494-09445d034d15\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"e68ca036-dced-4666-b9e9-a6b55119f013\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "e68ca036-dced-4666-b9e9-a6b55119f013"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url "http://hartmann.io/rolf"] [:__typename :ProcurementSettings])])}
2023-11-30T12:07:47.982Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:body {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"65184e75-5146-4915-8494-09445d034d15\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"e68ca036-dced-4666-b9e9-a6b55119f013\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "e68ca036-dced-4666-b9e9-a6b55119f013"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url "http://hartmann.io/rolf"] [:__typename :ProcurementSettings])])}}
2023-11-30T12:07:47.983Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x207ee696 HikariProxyPreparedStatement@545187478 wrapping SELECT procurement_categories.* FROM procurement_categories  WHERE procurement_categories.main_category_id = ? ORDER BY procurement_categories.name ASC] 1]  type:  java.util.UUID
2023-11-30T12:07:47.983Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"
2023-11-30T12:07:47.984Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "7d5ba731-edd9-41ba-8773-7337d24c2327" #object[org.postgresql.jdbc.PgResultSetMetaData 0x593923f2 org.postgresql.jdbc.PgResultSetMetaData@593923f2] 1]
2023-11-30T12:07:47.987Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"]
2023-11-30T12:07:47.987Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"
2023-11-30T12:07:47.988Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Category C1 #object[org.postgresql.jdbc.PgResultSetMetaData 0x593923f2 org.postgresql.jdbc.PgResultSetMetaData@593923f2] 2]
2023-11-30T12:07:47.988Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Category C1]
2023-11-30T12:07:47.988Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Category C1
2023-11-30T12:07:47.988Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x593923f2 org.postgresql.jdbc.PgResultSetMetaData@593923f2] 3]
2023-11-30T12:07:47.988Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"]
2023-11-30T12:07:47.988Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"
>>>get-dashboard
>>args {:inspector_priority [:LOW :MEDIUM :HIGH :MANDATORY], :organization_id [fb664326-a8ef-4556-af02-07d3127cd9ec], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search nil, :priority [:NORMAL :HIGH], :budget_period_id [8b8fe440-cae5-4bf9-8048-d0ec2399faa1], :category_id [7d5ba731-edd9-41ba-8773-7337d24c2327]}
>>value nil
>>mainCatsSql [SELECT procurement_main_categories.* FROM procurement_main_categories  ORDER BY procurement_main_categories.name ASC]
2023-11-30T12:07:47.990Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9" #object[org.postgresql.jdbc.PgResultSetMetaData 0x661709d3 org.postgresql.jdbc.PgResultSetMetaData@661709d3] 1]
2023-11-30T12:07:47.990Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x14272690 org.postgresql.jdbc.PgResultSetMetaData@14272690] 1]
2023-11-30T12:07:47.992Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9"]
2023-11-30T12:07:47.992Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"]
2023-11-30T12:07:47.992Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9"
2023-11-30T12:07:47.992Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"
2023-11-30T12:07:47.993Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Home, Jewelry & Computers #object[org.postgresql.jdbc.PgResultSetMetaData 0x661709d3 org.postgresql.jdbc.PgResultSetMetaData@661709d3] 2]
2023-11-30T12:07:47.993Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Main Category MC1 #object[org.postgresql.jdbc.PgResultSetMetaData 0x14272690 org.postgresql.jdbc.PgResultSetMetaData@14272690] 2]
2023-11-30T12:07:47.993Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Home, Jewelry & Computers]
2023-11-30T12:07:47.993Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Main Category MC1]
2023-11-30T12:07:47.993Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Home, Jewelry & Computers
2023-11-30T12:07:47.993Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Main Category MC1
>>mainCats ({:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1})
2023-11-30T12:07:47.994Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x273ac771 HikariProxyPreparedStatement@658163569 wrapping SELECT procurement_budget_periods.* FROM procurement_budget_periods  WHERE (procurement_budget_periods.id in (?)) ORDER BY end_date DESC] 1]  type:  java.lang.String
2023-11-30T12:07:47.994Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3bd06782 HikariProxyPreparedStatement@1003513730 wrapping SELECT procurement_organizations.* FROM procurement_organizations  WHERE procurement_organizations.parent_id = ? ORDER BY procurement_organizations.name ASC] 1]  type:  java.util.UUID
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9"
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5658e856 org.postgresql.jdbc.PgResultSetMetaData@5658e856] 1]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Budget-Period-Past #object[org.postgresql.jdbc.PgResultSetMetaData 0x5658e856 org.postgresql.jdbc.PgResultSetMetaData@5658e856] 2]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "fb664326-a8ef-4556-af02-07d3127cd9ec" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ba5eb39 org.postgresql.jdbc.PgResultSetMetaData@3ba5eb39] 1]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Budget-Period-Past]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Budget-Period-Past
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec"]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec"
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-08-23T22:00:00.000000000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5658e856 org.postgresql.jdbc.PgResultSetMetaData@5658e856] 3]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Beauty & Kids #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ba5eb39 org.postgresql.jdbc.PgResultSetMetaData@3ba5eb39] 2]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Beauty & Kids]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-08-23T22:00:00.000000000-00:00"]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Beauty & Kids
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ba5eb39 org.postgresql.jdbc.PgResultSetMetaData@3ba5eb39] 4]
2023-11-30T12:07:47.995Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-08-23T22:00:00Z"
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9"]
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-22T23:00:00.000000000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5658e856 org.postgresql.jdbc.PgResultSetMetaData@5658e856] 4]
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9"
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-22T23:00:00.000000000-00:00"]
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-22T23:00:00Z"
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.605131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5658e856 org.postgresql.jdbc.PgResultSetMetaData@5658e856] 5]
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.605131000-00:00"]
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.605131Z"
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.605131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5658e856 org.postgresql.jdbc.PgResultSetMetaData@5658e856] 6]
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.605131000-00:00"]
2023-11-30T12:07:47.996Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.605131Z"
>>resultA0-bps-original ({:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #time/instant "2023-08-23T22:00:00Z", :end_date #time/instant "2023-11-22T23:00:00Z", :created_at #time/instant "2023-11-24T19:25:51.605131Z", :updated_at #time/instant "2023-11-24T19:25:51.605131Z"})

>>>pure-handler {:data #ordered/map ([:budget_periods [#ordered/map ([:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1] [:name Budget-Period-Past] [:inspection_start_date 2023-08-23T22:00:00Z] [:end_date 2023-11-22T23:00:00Z] [:__typename :BudgetPeriod])]] [:main_categories [#ordered/map ([:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb] [:name Main Category MC1] [:categories [#ordered/map ([:id 7d5ba731-edd9-41ba-8773-7337d24c2327] [:name Category C1] [:__typename :Category])]] [:__typename :MainCategory])]] [:organizations [#ordered/map ([:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9] [:name Home, Jewelry & Computers] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id fb664326-a8ef-4556-af02-07d3127cd9ec] [:name Beauty & Kids] [:shortname nil] [:__typename :Organization])]])]])}
>>queryA1 [SELECT procurement_budget_periods.* FROM procurement_budget_periods  WHERE (procurement_budget_periods.id in (?)) ORDER BY end_date DESC 8b8fe440-cae5-4bf9-8048-d0ec2399faa1]
2023-11-30T12:07:47.996Z NX-41294 DEBUG [leihs.procurement.graphql:72] - result => {:data #ordered/map ([:budget_periods [#ordered/map ([:id "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"] [:name "Budget-Period-Past"] [:inspection_start_date "2023-08-23T22:00:00Z"] [:end_date "2023-11-22T23:00:00Z"] [:__typename :BudgetPeriod])]] [:main_categories [#ordered/map ([:id "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"] [:name "Main Category MC1"] [:categories [#ordered/map ([:id "7d5ba731-edd9-41ba-8773-7337d24c2327"] [:name "Category C1"] [:__typename :Category])]] [:__typename :MainCategory])]] [:organizations [#ordered/map ([:id "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9"] [:name "Home, Jewelry & Computers"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "fb664326-a8ef-4556-af02-07d3127cd9ec"] [:name "Beauty & Kids"] [:shortname nil] [:__typename :Organization])]])]])}
2023-11-30T12:07:47.997Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:body {:data #ordered/map ([:budget_periods [#ordered/map ([:id "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"] [:name "Budget-Period-Past"] [:inspection_start_date "2023-08-23T22:00:00Z"] [:end_date "2023-11-22T23:00:00Z"] [:__typename :BudgetPeriod])]] [:main_categories [#ordered/map ([:id "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"] [:name "Main Category MC1"] [:categories [#ordered/map ([:id "7d5ba731-edd9-41ba-8773-7337d24c2327"] [:name "Category C1"] [:__typename :Category])]] [:__typename :MainCategory])]] [:organizations [#ordered/map ([:id "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9"] [:name "Home, Jewelry & Computers"] [:shortname nil] [:__typename :Organization] [:organizations [#ordered/map ([:id "fb664326-a8ef-4556-af02-07d3127cd9ec"] [:name "Beauty & Kids"] [:shortname nil] [:__typename :Organization])]])]])}}
2023-11-30T12:07:47.997Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x41db55e9 HikariProxyPreparedStatement@1104893417 wrapping SELECT procurement_budget_periods.* FROM procurement_budget_periods  WHERE (procurement_budget_periods.id in (?)) ORDER BY end_date DESC] 1]  type:  java.lang.String
2023-11-30T12:07:47.997Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"
2023-11-30T12:07:47.998Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" #object[org.postgresql.jdbc.PgResultSetMetaData 0x173076b org.postgresql.jdbc.PgResultSetMetaData@173076b] 1]
2023-11-30T12:07:47.998Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]
2023-11-30T12:07:47.998Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"
2023-11-30T12:07:47.998Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Budget-Period-Past #object[org.postgresql.jdbc.PgResultSetMetaData 0x173076b org.postgresql.jdbc.PgResultSetMetaData@173076b] 2]
2023-11-30T12:07:47.998Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Budget-Period-Past]
2023-11-30T12:07:47.998Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Budget-Period-Past
2023-11-30T12:07:47.998Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-08-23T22:00:00.000000000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x173076b org.postgresql.jdbc.PgResultSetMetaData@173076b] 3]
2023-11-30T12:07:47.998Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-08-23T22:00:00.000000000-00:00"]
2023-11-30T12:07:47.998Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-08-23T22:00:00Z"
2023-11-30T12:07:47.999Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-22T23:00:00.000000000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x173076b org.postgresql.jdbc.PgResultSetMetaData@173076b] 4]
2023-11-30T12:07:47.999Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-22T23:00:00.000000000-00:00"]
2023-11-30T12:07:47.999Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-22T23:00:00Z"
2023-11-30T12:07:47.999Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.605131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x173076b org.postgresql.jdbc.PgResultSetMetaData@173076b] 5]
2023-11-30T12:07:48.000Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.605131000-00:00"]
2023-11-30T12:07:48.000Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.605131Z"
2023-11-30T12:07:48.001Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.605131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x173076b org.postgresql.jdbc.PgResultSetMetaData@173076b] 6]
2023-11-30T12:07:48.001Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.605131000-00:00"]
2023-11-30T12:07:48.001Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.605131Z"
>>resultA1 ({:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #time/instant "2023-08-23T22:00:00Z", :end_date #time/instant "2023-11-22T23:00:00Z", :created_at #time/instant "2023-11-24T19:25:51.605131Z", :updated_at #time/instant "2023-11-24T19:25:51.605131Z"})
>>resultA1-2 ({:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #time/instant "2023-08-23T22:00:00Z", :end_date #time/instant "2023-11-22T23:00:00Z", :created_at #time/instant "2023-11-24T19:25:51.605131Z", :updated_at #time/instant "2023-11-24T19:25:51.605131Z"})
>>requestsB2-triggerError {:inspector_priority [:LOW :MEDIUM :HIGH :MANDATORY], :organization_id [fb664326-a8ef-4556-af02-07d3127cd9ec], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search nil, :priority [:NORMAL :HIGH], :budget_period_id [8b8fe440-cae5-4bf9-8048-d0ec2399faa1], :category_id [7d5ba731-edd9-41ba-8773-7337d24c2327]} nil
2023-11-30T12:07:48.002Z NX-41294 DEBUG [leihs.procurement.resources.requests:140] - arguments => {:inspector_priority [:LOW :MEDIUM :HIGH :MANDATORY], :organization_id ["fb664326-a8ef-4556-af02-07d3127cd9ec"], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search nil, :priority [:NORMAL :HIGH], :budget_period_id ["8b8fe440-cae5-4bf9-8048-d0ec2399faa1"], :category_id ["7d5ba731-edd9-41ba-8773-7337d24c2327"]}
2023-11-30T12:07:48.003Z NX-41294 DEBUG [leihs.procurement.resources.requests:141] - value => nil
>get-requests>> ???
>o> 1-After requests-query-map:
2023-11-30T12:07:48.004Z NX-41294 DEBUG [leihs.procurement.permissions.user:52] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_viewers) (sql/merge-where [:= :procurement_category_viewers.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_viewers.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:48.005Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7ee91112 HikariProxyPreparedStatement@2129203474 wrapping SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.005Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.005Z NX-41294 DEBUG [leihs.procurement.permissions.user:31] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_inspectors) (sql/merge-where [:= :procurement_category_inspectors.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_inspectors.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:48.006Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4d17fbc4 HikariProxyPreparedStatement@1293417412 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.006Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.006Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:48.007Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7da3e4fa HikariProxyPreparedStatement@2107892986 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.007Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.008Z NX-41294 DEBUG [leihs.procurement.permissions.user:85] - (->> [viewer? inspector? admin?] (map (fn* [p1__39301#] (p1__39301# tx auth-entity))) (some true?)) => true
2023-11-30T12:07:48.008Z NX-41294 DEBUG [leihs.procurement.resources.requests:64] - (user-perms/advanced? tx (:authenticated-entity rrequest)) => true
>o> state-sql #sql/call [:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED]
>o> class honeysql.types.SqlCall
>o> state-sql _> formatted [CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END NEW APPROVED 0 PARTIALLY_APPROVED 0 DENIED]
2023-11-30T12:07:48.010Z NX-41294 DEBUG [leihs.procurement.resources.request:142] - result => #sql/call [:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED"]
2023-11-30T12:07:48.010Z NX-41294 DEBUG [leihs.procurement.resources.request:166] - (-> requests-base-query (sql/merge-select [(state-sql advanced-user?) :state]) (sql/merge-join :procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id])) => {:select (#sql/raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*" [#sql/call [:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED"] :state]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id]), :order-by (#sql/raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id])}
>o> sqlmap {:select (#sql/raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.* [#sql/call [:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED] :state]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id]), :order-by (#sql/raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id])}
>o> tbl :procurement_budget_periods_2
>o> nest-key :budget_period
2023-11-30T12:07:48.011Z NX-41294 DEBUG [leihs.procurement.utils.sql:77] - (helpers/merge-select sqlmap [(types/call :row_to_json tbl) nest-key]) => {:select (#sql/raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*" [#sql/call [:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED"] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id]), :order-by (#sql/raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id])}
>o> sqlmap {:select (#sql/raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.* [#sql/call [:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id]), :order-by (#sql/raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id])}
>o> tbl :models
>o> nest-key :model
2023-11-30T12:07:48.012Z NX-41294 DEBUG [leihs.procurement.utils.sql:77] - (helpers/merge-select sqlmap [(types/call :row_to_json tbl) nest-key]) => {:select (#sql/raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*" [#sql/call [:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED"] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw "row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category" [#sql/call [:row_to_json :models] :model]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id]), :order-by (#sql/raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id])}
>o> sqlmap {:select (#sql/raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.* [#sql/call [:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category [#sql/call [:row_to_json :models] :model] #sql/raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id]), :order-by (#sql/raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id])}
>o> tbl :procurement_templates
>o> nest-key :template
2023-11-30T12:07:48.012Z NX-41294 DEBUG [leihs.procurement.utils.sql:77] - (helpers/merge-select sqlmap [(types/call :row_to_json tbl) nest-key]) => {:select (#sql/raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*" [#sql/call [:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED"] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw "row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category" [#sql/call [:row_to_json :models] :model] #sql/raw "row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization" [#sql/call [:row_to_json :procurement_templates] :template]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id]), :order-by (#sql/raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id])}
>o> sqlmap {:select (#sql/raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.* [#sql/call [:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category [#sql/call [:row_to_json :models] :model] #sql/raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization [#sql/call [:row_to_json :procurement_templates] :template] #sql/raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id]), :order-by (#sql/raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id])}
>o> tbl :suppliers
>o> nest-key :supplier
2023-11-30T12:07:48.013Z NX-41294 DEBUG [leihs.procurement.utils.sql:77] - (helpers/merge-select sqlmap [(types/call :row_to_json tbl) nest-key]) => {:select (#sql/raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*" [#sql/call [:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED"] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw "row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category" [#sql/call [:row_to_json :models] :model] #sql/raw "row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization" [#sql/call [:row_to_json :procurement_templates] :template] #sql/raw "row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room" [#sql/call [:row_to_json :suppliers] :supplier]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id]), :order-by (#sql/raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id])}
>o> sqlmap {:select (#sql/raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.* [#sql/call [:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category [#sql/call [:row_to_json :models] :model] #sql/raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization [#sql/call [:row_to_json :procurement_templates] :template] #sql/raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room [#sql/call [:row_to_json :suppliers] :supplier]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id]), :order-by (#sql/raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id])}
>o> tbl :users
>o> nest-key :user
2023-11-30T12:07:48.013Z NX-41294 DEBUG [leihs.procurement.utils.sql:77] - (helpers/merge-select sqlmap [(types/call :row_to_json tbl) nest-key]) => {:select (#sql/raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*" [#sql/call [:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED"] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw "row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category" [#sql/call [:row_to_json :models] :model] #sql/raw "row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization" [#sql/call [:row_to_json :procurement_templates] :template] #sql/raw "row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room" [#sql/call [:row_to_json :suppliers] :supplier] [#sql/call [:row_to_json :users] :user]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id]), :order-by (#sql/raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id])}
2023-11-30T12:07:48.013Z NX-41294 DEBUG [leihs.procurement.resources.requests:66] - (-> (request/requests-base-query-with-state advanced-user?) request-helpers/join-and-nest-associated-resources) => {:select (#sql/raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*" [#sql/call [:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED"] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw "row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category" [#sql/call [:row_to_json :models] :model] #sql/raw "row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization" [#sql/call [:row_to_json :procurement_templates] :template] #sql/raw "row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room" [#sql/call [:row_to_json :suppliers] :supplier] [#sql/call [:row_to_json :users] :user]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by (#sql/raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id])}
>o> 2-After apply-scope: {:select (#sql/raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.* [#sql/call [:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category [#sql/call [:row_to_json :models] :model] #sql/raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization [#sql/call [:row_to_json :procurement_templates] :template] #sql/raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room [#sql/call [:row_to_json :suppliers] :supplier] [#sql/call [:row_to_json :users] :user]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by (#sql/raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]), :where [:and [:in :procurement_requests.category_id [7d5ba731-edd9-41ba-8773-7337d24c2327]] [:in :procurement_requests.budget_period_id [8b8fe440-cae5-4bf9-8048-d0ec2399faa1]] [:in :procurement_requests.organization_id [fb664326-a8ef-4556-af02-07d3127cd9ec]] [:in :procurement_requests.priority (normal high)] [:in :procurement_requests.inspector_priority (low medium high mandatory)] [:or [:= :procurement_requests.approved_quantity nil] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] [:= :procurement_requests.approved_quantity 0]] [:in :procurement_requests.order_status (#sql/call [:cast not_processed :order_status_enum] #sql/call [:cast in_progress :order_status_enum] #sql/call [:cast procured :order_status_enum] #sql/call [:cast alternative_procured :order_status_enum] #sql/call [:cast not_procured :order_status_enum])]]}
2023-11-30T12:07:48.014Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:48.015Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x26a82e7 HikariProxyPreparedStatement@40534759 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.015Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>o> 3-After sql-format: {:select (#sql/raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.* [#sql/call [:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED] :state] [#sql/call [:row_to_json :procurement_budget_periods_2] :budget_period] #sql/raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category [#sql/call [:row_to_json :models] :model] #sql/raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization [#sql/call [:row_to_json :procurement_templates] :template] #sql/raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room [#sql/call [:row_to_json :suppliers] :supplier] [#sql/call [:row_to_json :users] :user]), :from (:procurement_requests), :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by (#sql/raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))), :join (:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select (:* [#sql/call [:> :current_date :end_date] :is_past]), :from (:procurement_budget_periods)} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]), :where [:and [:in :procurement_requests.category_id [7d5ba731-edd9-41ba-8773-7337d24c2327]] [:in :procurement_requests.budget_period_id [8b8fe440-cae5-4bf9-8048-d0ec2399faa1]] [:in :procurement_requests.organization_id [fb664326-a8ef-4556-af02-07d3127cd9ec]] [:in :procurement_requests.priority (normal high)] [:in :procurement_requests.inspector_priority (low medium high mandatory)] [:or [:= :procurement_requests.approved_quantity nil] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] [:= :procurement_requests.approved_quantity 0]] [:in :procurement_requests.order_status (#sql/call [:cast not_processed :order_status_enum] #sql/call [:cast in_progress :order_status_enum] #sql/call [:cast procured :order_status_enum] #sql/call [:cast alternative_procured :order_status_enum] #sql/call [:cast not_procured :order_status_enum])]]}
2023-11-30T12:07:48.042Z NX-41294 DEBUG [leihs.procurement.resources.requests:170] - query => ["SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in (?)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))" "NEW" "APPROVED" 0 "PARTIALLY_APPROVED" 0 "DENIED" "7d5ba731-edd9-41ba-8773-7337d24c2327" "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" "fb664326-a8ef-4556-af02-07d3127cd9ec" "normal" "high" "low" "medium" "high" "mandatory" 0 0 "not_processed" "in_progress" "procured" "alternative_procured" "not_procured"]
2023-11-30T12:07:48.043Z NX-41294 DEBUG [leihs.procurement.resources.requests:172] - query => ["SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in (?)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))" "NEW" "APPROVED" 0 "PARTIALLY_APPROVED" 0 "DENIED" "7d5ba731-edd9-41ba-8773-7337d24c2327" "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" "fb664326-a8ef-4556-af02-07d3127cd9ec" "normal" "high" "low" "medium" "high" "mandatory" 0 0 "not_processed" "in_progress" "procured" "alternative_procured" "not_procured"]
>>broken-query [SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in (?)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, ''))) NEW APPROVED 0 PARTIALLY_APPROVED 0 DENIED 7d5ba731-edd9-41ba-8773-7337d24c2327 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 fb664326-a8ef-4556-af02-07d3127cd9ec normal high low medium high mandatory 0 0 not_processed in_progress procured alternative_procured not_procured]
2023-11-30T12:07:48.053Z NX-41294 DEBUG [leihs.procurement.permissions.user:52] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_viewers) (sql/merge-where [:= :procurement_category_viewers.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_viewers.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:48.054Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xc210b80 HikariProxyPreparedStatement@203492224 wrapping SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE procurement_category_viewers.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.054Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.055Z NX-41294 DEBUG [leihs.procurement.permissions.user:31] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_inspectors) (sql/merge-where [:= :procurement_category_inspectors.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_inspectors.category_id c-id]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:48.055Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x60f739a3 HikariProxyPreparedStatement@1626814883 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.055Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.056Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => ["SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result " #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:48.056Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x645e4fdb HikariProxyPreparedStatement@1683902427 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.056Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.056Z NX-41294 DEBUG [leihs.procurement.permissions.user:85] - (->> [viewer? inspector? admin?] (map (fn* [p1__39301#] (p1__39301# tx auth-entity))) (some true?)) => true
2023-11-30T12:07:48.059Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text NEW #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in (?)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 1]  type:  java.lang.String
2023-11-30T12:07:48.059Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  NEW
2023-11-30T12:07:48.060Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text APPROVED #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in (?)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 2]  type:  java.lang.String
2023-11-30T12:07:48.060Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  APPROVED
2023-11-30T12:07:48.060Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in (?)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 3]  type:  java.lang.Long
2023-11-30T12:07:48.060Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:48.062Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text PARTIALLY_APPROVED #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in (?)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 4]  type:  java.lang.String
2023-11-30T12:07:48.062Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  PARTIALLY_APPROVED
2023-11-30T12:07:48.063Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = ? THEN ? END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in (?)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 5]  type:  java.lang.Long
2023-11-30T12:07:48.063Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:48.064Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text DENIED #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN ? END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in (?)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 6]  type:  java.lang.String
2023-11-30T12:07:48.066Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  DENIED
2023-11-30T12:07:48.067Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid 7d5ba731-edd9-41ba-8773-7337d24c2327 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in (?)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 7]  type:  java.lang.String
2023-11-30T12:07:48.067Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"
2023-11-30T12:07:48.068Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in (?)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 8]  type:  java.lang.String
2023-11-30T12:07:48.071Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"
2023-11-30T12:07:48.072Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid fb664326-a8ef-4556-af02-07d3127cd9ec #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in (?)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 9]  type:  java.lang.String
2023-11-30T12:07:48.072Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec"
2023-11-30T12:07:48.073Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:varchar normal #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in (?, ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 10]  type:  java.lang.String
2023-11-30T12:07:48.077Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  normal
2023-11-30T12:07:48.078Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:varchar high #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', ?)) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 11]  type:  java.lang.String
2023-11-30T12:07:48.079Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  high
2023-11-30T12:07:48.079Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:varchar low #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in (?, ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 12]  type:  java.lang.String
2023-11-30T12:07:48.084Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  low
2023-11-30T12:07:48.085Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:varchar medium #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in ('low', ?, ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 13]  type:  java.lang.String
2023-11-30T12:07:48.085Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  medium
2023-11-30T12:07:48.086Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:varchar high #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in ('low', 'medium', ?, ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 14]  type:  java.lang.String
2023-11-30T12:07:48.097Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  high
2023-11-30T12:07:48.099Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:varchar mandatory #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in ('low', 'medium', 'high', ?)) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 15]  type:  java.lang.String
2023-11-30T12:07:48.100Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  mandatory
2023-11-30T12:07:48.101Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in ('low', 'medium', 'high', 'mandatory')) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > ?) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 16]  type:  java.lang.Long
2023-11-30T12:07:48.106Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:48.108Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in ('low', 'medium', 'high', 'mandatory')) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) OR procurement_requests.approved_quantity = ?) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 17]  type:  java.lang.Long
2023-11-30T12:07:48.108Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T12:07:48.109Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:order_status_enum not_processed #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in ('low', 'medium', 'high', 'mandatory')) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) OR procurement_requests.approved_quantity = 0) AND (procurement_requests.order_status in (CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 18]  type:  java.lang.String
2023-11-30T12:07:48.109Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  not_processed
2023-11-30T12:07:48.111Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:order_status_enum in_progress #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in ('low', 'medium', 'high', 'mandatory')) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) OR procurement_requests.approved_quantity = 0) AND (procurement_requests.order_status in (CAST('not_processed' AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 19]  type:  java.lang.String
2023-11-30T12:07:48.117Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  in_progress
2023-11-30T12:07:48.119Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:order_status_enum procured #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in ('low', 'medium', 'high', 'mandatory')) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) OR procurement_requests.approved_quantity = 0) AND (procurement_requests.order_status in (CAST('not_processed' AS order_status_enum), CAST('in_progress' AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 20]  type:  java.lang.String
2023-11-30T12:07:48.119Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  procured
2023-11-30T12:07:48.119Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:order_status_enum alternative_procured #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in ('low', 'medium', 'high', 'mandatory')) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) OR procurement_requests.approved_quantity = 0) AND (procurement_requests.order_status in (CAST('not_processed' AS order_status_enum), CAST('in_progress' AS order_status_enum), CAST('procured' AS order_status_enum), CAST(? AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 21]  type:  java.lang.String
2023-11-30T12:07:48.128Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  alternative_procured
2023-11-30T12:07:48.129Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:order_status_enum not_procured #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x104fb339 HikariProxyPreparedStatement@273658681 wrapping SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, CASE WHEN procurement_requests.approved_quantity IS NULL THEN 'NEW' WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN 'APPROVED' WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) THEN 'PARTIALLY_APPROVED' WHEN procurement_requests.approved_quantity = 0 THEN 'DENIED' END AS state, row_to_json(procurement_budget_periods_2) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, row_to_json(models) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, row_to_json(procurement_templates) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, row_to_json(suppliers) AS supplier, row_to_json(users) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE ((procurement_requests.category_id in ('7d5ba731-edd9-41ba-8773-7337d24c2327'::uuid)) AND (procurement_requests.budget_period_id in ('8b8fe440-cae5-4bf9-8048-d0ec2399faa1'::uuid)) AND (procurement_requests.organization_id in ('fb664326-a8ef-4556-af02-07d3127cd9ec'::uuid)) AND (procurement_requests.priority in ('normal', 'high')) AND (procurement_requests.inspector_priority in ('low', 'medium', 'high', 'mandatory')) AND (procurement_requests.approved_quantity IS NULL OR procurement_requests.approved_quantity >= procurement_requests.requested_quantity OR (procurement_requests.approved_quantity < procurement_requests.requested_quantity AND procurement_requests.approved_quantity > 0) OR procurement_requests.approved_quantity = 0) AND (procurement_requests.order_status in (CAST('not_processed' AS order_status_enum), CAST('in_progress' AS order_status_enum), CAST('procured' AS order_status_enum), CAST('alternative_procured' AS order_status_enum), CAST(? AS order_status_enum)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))] 22]  type:  java.lang.String
2023-11-30T12:07:48.129Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  not_procured
2023-11-30T12:07:48.139Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11" #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 1]
2023-11-30T12:07:48.146Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"]
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 2]
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "7d5ba731-edd9-41ba-8773-7337d24c2327" #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 3]
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"]
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2187a76b-557a-4775-9a1e-778142161819" #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 4]
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2187a76b-557a-4775-9a1e-778142161819"]
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2187a76b-557a-4775-9a1e-778142161819"
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "fb664326-a8ef-4556-af02-07d3127cd9ec" #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 5]
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec"]
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec"
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Mediocre Aluminum Shoes #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 9]
2023-11-30T12:07:48.147Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Mediocre Aluminum Shoes]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Mediocre Aluminum Shoes
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [1 #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 11]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int4 1]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  1
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 14]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [CHF #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 15]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar CHF]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  CHF
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [normal #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 16]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar normal]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  normal
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Corporis commodi provident nam. #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 20]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Corporis commodi provident nam.]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Corporis commodi provident nam.
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.635215000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 22]
2023-11-30T12:07:48.148Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.635215000-00:00"]
2023-11-30T12:07:48.149Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.635215Z"
2023-11-30T12:07:48.149Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [medium #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 23]
2023-11-30T12:07:48.149Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar medium]
2023-11-30T12:07:48.149Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  medium
2023-11-30T12:07:48.149Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "64bfb152-ea6c-42da-98c6-325afeb462bc" #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 24]
2023-11-30T12:07:48.149Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc"]
2023-11-30T12:07:48.149Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc"
2023-11-30T12:07:48.149Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.635215000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 25]
2023-11-30T12:07:48.149Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.635215000-00:00"]
2023-11-30T12:07:48.149Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.635215Z"
2023-11-30T12:07:48.150Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [aquisition #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 26]
2023-11-30T12:07:48.150Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar aquisition]
2023-11-30T12:07:48.150Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  aquisition
2023-11-30T12:07:48.150Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Budget-Period-Past.001 #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 28]
2023-11-30T12:07:48.150Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Budget-Period-Past.001]
2023-11-30T12:07:48.150Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Budget-Period-Past.001
2023-11-30T12:07:48.151Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [not_processed #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 29]
2023-11-30T12:07:48.151Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:order_status_enum not_processed]
2023-11-30T12:07:48.151Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  not_processed
2023-11-30T12:07:48.151Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [NEW #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 31]
2023-11-30T12:07:48.151Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar NEW]
2023-11-30T12:07:48.152Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  NEW
2023-11-30T12:07:48.152Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x4f830567 {"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 32]
2023-11-30T12:07:48.158Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:json #object[org.postgresql.util.PGobject 0x4f830567 {"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true}]]
2023-11-30T12:07:48.159Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}
2023-11-30T12:07:48.159Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0xf4a65c3 {"id": "7d5ba731-edd9-41ba-8773-7337d24c2327", "name": "Category C1", "cost_center": null, "main_category": {"id": "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", "name": "Main Category MC1"}, "main_category_id": "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", "procurement_account": null, "general_ledger_account": null}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 33]
2023-11-30T12:07:48.159Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0xf4a65c3 {"id": "7d5ba731-edd9-41ba-8773-7337d24c2327", "name": "Category C1", "cost_center": null, "main_category": {"id": "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", "name": "Main Category MC1"}, "main_category_id": "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", "procurement_account": null, "general_ledger_account": null}]]
2023-11-30T12:07:48.159Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}
2023-11-30T12:07:48.159Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x72ac7a86 {"id": "fb664326-a8ef-4556-af02-07d3127cd9ec", "name": "Beauty & Kids", "parent_id": "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9", "shortname": null, "department": {"id": "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9", "name": "Home, Jewelry & Computers", "parent_id": null, "shortname": null}}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 35]
2023-11-30T12:07:48.159Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0x72ac7a86 {"id": "fb664326-a8ef-4556-af02-07d3127cd9ec", "name": "Beauty & Kids", "parent_id": "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9", "shortname": null, "department": {"id": "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9", "name": "Home, Jewelry & Computers", "parent_id": null, "shortname": null}}]]
2023-11-30T12:07:48.159Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}
2023-11-30T12:07:48.159Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x6c6ed034 {"id": "64bfb152-ea6c-42da-98c6-325afeb462bc", "name": "reception room", "general": false, "building": {"id": "3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c", "code": null, "name": "9594 Beer Extension"}, "building_id": "3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c", "description": null}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 37]
2023-11-30T12:07:48.160Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0x6c6ed034 {"id": "64bfb152-ea6c-42da-98c6-325afeb462bc", "name": "reception room", "general": false, "building": {"id": "3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c", "code": null, "name": "9594 Beer Extension"}, "building_id": "3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c", "description": null}]]
2023-11-30T12:07:48.160Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}
2023-11-30T12:07:48.160Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x4cf0565 {"id":"2187a76b-557a-4775-9a1e-778142161819","login":null,"firstname":"Lynsey","lastname":"Kertzmann","phone":null,"org_id":null,"email":"chanda@ortiz.net","badge_id":null,"address":null,"city":null,"zip":null,"country":null,"settings":null,"delegator_user_id":null,"created_at":"2023-11-24T20:25:51.614964+01:00","updated_at":"2023-11-24T20:25:51.614964+01:00","account_enabled":true,"password_sign_in_enabled":true,"url":null,"img256_url":null,"img32_url":null,"img_digest":null,"is_admin":false,"extended_info":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","secondary_email":null,"language_locale":null,"admin_protected":false,"is_system_admin":false,"pool_protected":false,"system_admin_protected":false,"organization":"local","account_disabled_at":null,"last_sign_in_at":null}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x618020e8 org.postgresql.jdbc.PgResultSetMetaData@618020e8] 39]
2023-11-30T12:07:48.160Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:json #object[org.postgresql.util.PGobject 0x4cf0565 {"id":"2187a76b-557a-4775-9a1e-778142161819","login":null,"firstname":"Lynsey","lastname":"Kertzmann","phone":null,"org_id":null,"email":"chanda@ortiz.net","badge_id":null,"address":null,"city":null,"zip":null,"country":null,"settings":null,"delegator_user_id":null,"created_at":"2023-11-24T20:25:51.614964+01:00","updated_at":"2023-11-24T20:25:51.614964+01:00","account_enabled":true,"password_sign_in_enabled":true,"url":null,"img256_url":null,"img32_url":null,"img_digest":null,"is_admin":false,"extended_info":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","secondary_email":null,"language_locale":null,"admin_protected":false,"is_system_admin":false,"pool_protected":false,"system_admin_protected":false,"organization":"local","account_disabled_at":null,"last_sign_in_at":null}]]
2023-11-30T12:07:48.160Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}
>>requestsB2 (2023-11-30T12:07:48.163Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x10ad872c HikariProxyPreparedStatement@279807788 wrapping SELECT procurement_budget_periods.* FROM procurement_budget_periods  WHERE procurement_budget_periods.id = ?] 1]  type:  java.lang.String
2023-11-30T12:07:48.171Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"
2023-11-30T12:07:48.172Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ee03480 org.postgresql.jdbc.PgResultSetMetaData@3ee03480] 1]
2023-11-30T12:07:48.172Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]
2023-11-30T12:07:48.172Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"
2023-11-30T12:07:48.172Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Budget-Period-Past #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ee03480 org.postgresql.jdbc.PgResultSetMetaData@3ee03480] 2]
2023-11-30T12:07:48.172Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Budget-Period-Past]
2023-11-30T12:07:48.172Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Budget-Period-Past
2023-11-30T12:07:48.172Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-08-23T22:00:00.000000000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ee03480 org.postgresql.jdbc.PgResultSetMetaData@3ee03480] 3]
2023-11-30T12:07:48.172Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-08-23T22:00:00.000000000-00:00"]
2023-11-30T12:07:48.172Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-08-23T22:00:00Z"
2023-11-30T12:07:48.172Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-22T23:00:00.000000000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ee03480 org.postgresql.jdbc.PgResultSetMetaData@3ee03480] 4]
2023-11-30T12:07:48.173Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-22T23:00:00.000000000-00:00"]
2023-11-30T12:07:48.173Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-22T23:00:00Z"
2023-11-30T12:07:48.173Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.605131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ee03480 org.postgresql.jdbc.PgResultSetMetaData@3ee03480] 5]
2023-11-30T12:07:48.173Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.605131000-00:00"]
2023-11-30T12:07:48.173Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.605131Z"
2023-11-30T12:07:48.173Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-24T19:25:51.605131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3ee03480 org.postgresql.jdbc.PgResultSetMetaData@3ee03480] 6]
2023-11-30T12:07:48.173Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamp #inst "2023-11-24T19:25:51.605131000-00:00"]
2023-11-30T12:07:48.173Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-24T19:25:51.605131Z"
2023-11-30T12:07:48.174Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid 7d5ba731-edd9-41ba-8773-7337d24c2327 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x394704c3 HikariProxyPreparedStatement@960955587 wrapping SELECT procurement_categories.* FROM procurement_categories  WHERE procurement_categories.id = ?] 1]  type:  java.lang.String
2023-11-30T12:07:48.174Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"
2023-11-30T12:07:48.174Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "7d5ba731-edd9-41ba-8773-7337d24c2327" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5dee74f4 org.postgresql.jdbc.PgResultSetMetaData@5dee74f4] 1]
2023-11-30T12:07:48.178Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"]
2023-11-30T12:07:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"
2023-11-30T12:07:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Category C1 #object[org.postgresql.jdbc.PgResultSetMetaData 0x5dee74f4 org.postgresql.jdbc.PgResultSetMetaData@5dee74f4] 2]
2023-11-30T12:07:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Category C1]
2023-11-30T12:07:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Category C1
2023-11-30T12:07:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5dee74f4 org.postgresql.jdbc.PgResultSetMetaData@5dee74f4] 3]
2023-11-30T12:07:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"]
2023-11-30T12:07:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"
2023-11-30T12:07:48.180Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid 2187a76b-557a-4775-9a1e-778142161819 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6d2d3946 HikariProxyPreparedStatement@1831680326 wrapping SELECT users.id, users.firstname, users.lastname FROM users  WHERE users.id = ?] 1]  type:  java.lang.String
2023-11-30T12:07:48.180Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "2187a76b-557a-4775-9a1e-778142161819"
2023-11-30T12:07:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2187a76b-557a-4775-9a1e-778142161819" #object[org.postgresql.jdbc.PgResultSetMetaData 0x21e2779b org.postgresql.jdbc.PgResultSetMetaData@21e2779b] 1]
2023-11-30T12:07:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2187a76b-557a-4775-9a1e-778142161819"]
2023-11-30T12:07:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2187a76b-557a-4775-9a1e-778142161819"
2023-11-30T12:07:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x21e2779b org.postgresql.jdbc.PgResultSetMetaData@21e2779b] 2]
2023-11-30T12:07:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-11-30T12:07:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-11-30T12:07:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x21e2779b org.postgresql.jdbc.PgResultSetMetaData@21e2779b] 3]
2023-11-30T12:07:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-11-30T12:07:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-11-30T12:07:48.181Z NX-41294 DEBUG [leihs.procurement.permissions.user:72] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_requesters_organizations) (sql/where [:= :procurement_requesters_organizations.user_id (:user_id auth-entity)]))) :result]) sql/format) => [SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:48.182Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3dcdda8b HikariProxyPreparedStatement@1036901003 wrapping SELECT exists((SELECT TRUE FROM procurement_requesters_organizations WHERE procurement_requesters_organizations.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.187Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.188Z NX-41294 DEBUG [leihs.procurement.permissions.user:31] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_inspectors) (sql/merge-where [:= :procurement_category_inspectors.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_inspectors.category_id c-id]))) :result]) sql/format) => [SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:48.188Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6843a9f7 HikariProxyPreparedStatement@1749264887 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE procurement_category_inspectors.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.188Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.189Z NX-41294 DEBUG [leihs.procurement.permissions.user:15] - (-> (sql/select [(sql/call :exists (-> (sql/select true) (sql/from :procurement_admins) (sql/where [:= :procurement_admins.user_id (:user_id auth-entity)]))) :result]) sql/format) => [SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T12:07:48.189Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3b4d2ef7 HikariProxyPreparedStatement@994914039 wrapping SELECT exists((SELECT TRUE FROM procurement_admins WHERE procurement_admins.user_id = ?)) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.189Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.191Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:date 2023-11-23 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x246a6dda HikariProxyPreparedStatement@610954714 wrapping SELECT current_date > CAST(? AS date) AS result ] 1]  type:  java.lang.String
2023-11-30T12:07:48.191Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  2023-11-23
2023-11-30T12:07:48.192Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:date 2023-08-24 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7862b86f HikariProxyPreparedStatement@2019735663 wrapping SELECT current_date < CAST(? AS date) AS result ] 1]  type:  java.lang.String
2023-11-30T12:07:48.192Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  2023-08-24
2023-11-30T12:07:48.193Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:date 2023-08-24 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1836d652 HikariProxyPreparedStatement@406246994 wrapping SELECT (current_date >= CAST(? AS date) and current_date < CAST(? AS date)) AS result ] 1]  type:  java.lang.String
2023-11-30T12:07:48.193Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  2023-08-24
2023-11-30T12:07:48.193Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:date 2023-11-23 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1836d652 HikariProxyPreparedStatement@406246994 wrapping SELECT (current_date >= CAST('2023-08-24' AS date) and current_date < CAST(? AS date)) AS result ] 2]  type:  java.lang.String
2023-11-30T12:07:48.194Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  2023-11-23
2023-11-30T12:07:48.194Z NX-41294 DEBUG [leihs.procurement.permissions.user:31] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_inspectors) (sql/merge-where [:= :procurement_category_inspectors.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_inspectors.category_id c-id]))) :result]) sql/format) => [SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE (procurement_category_inspectors.user_id = ? AND procurement_category_inspectors.category_id = ?))) AS result  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" 7d5ba731-edd9-41ba-8773-7337d24c2327]
2023-11-30T12:07:48.194Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x130174c4 HikariProxyPreparedStatement@318862532 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE (procurement_category_inspectors.user_id = ? AND procurement_category_inspectors.category_id = ?))) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.194Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid 7d5ba731-edd9-41ba-8773-7337d24c2327 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x130174c4 HikariProxyPreparedStatement@318862532 wrapping SELECT exists((SELECT TRUE FROM procurement_category_inspectors WHERE (procurement_category_inspectors.user_id = 'e68ca036-dced-4666-b9e9-a6b55119f013'::uuid AND procurement_category_inspectors.category_id = ?))) AS result ] 2]  type:  java.lang.String
2023-11-30T12:07:48.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"
2023-11-30T12:07:48.195Z NX-41294 DEBUG [leihs.procurement.permissions.user:52] - (-> (sql/select [(sql/call :exists (cond-> (-> (sql/select true) (sql/from :procurement_category_viewers) (sql/merge-where [:= :procurement_category_viewers.user_id (:user_id auth-entity)])) c-id (sql/merge-where [:= :procurement_category_viewers.category_id c-id]))) :result]) sql/format) => [SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE (procurement_category_viewers.user_id = ? AND procurement_category_viewers.category_id = ?))) AS result  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" 7d5ba731-edd9-41ba-8773-7337d24c2327]
2023-11-30T12:07:48.196Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x49aa41b9 HikariProxyPreparedStatement@1235894713 wrapping SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE (procurement_category_viewers.user_id = ? AND procurement_category_viewers.category_id = ?))) AS result ] 1]  type:  java.util.UUID
2023-11-30T12:07:48.196Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T12:07:48.196Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid 7d5ba731-edd9-41ba-8773-7337d24c2327 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x49aa41b9 HikariProxyPreparedStatement@1235894713 wrapping SELECT exists((SELECT TRUE FROM procurement_category_viewers WHERE (procurement_category_viewers.user_id = 'e68ca036-dced-4666-b9e9-a6b55119f013'::uuid AND procurement_category_viewers.category_id = ?))) AS result ] 2]  type:  java.lang.String
2023-11-30T12:07:48.196Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"
2023-11-30T12:07:48.198Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid abae04c5-d767-425e-acc2-7ce04df645d1 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xc41d87a HikariProxyPreparedStatement@205641850 wrapping SELECT rooms.* FROM rooms  WHERE (rooms.general = TRUE AND rooms.building_id = ?) ORDER BY general DESC, name ASC] 1]  type:  java.lang.String
2023-11-30T12:07:48.202Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "abae04c5-d767-425e-acc2-7ce04df645d1"
2023-11-30T12:07:48.203Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "b8927fd2-014c-48c2-b095-fa1d5620debe" #object[org.postgresql.jdbc.PgResultSetMetaData 0x18a9dd81 org.postgresql.jdbc.PgResultSetMetaData@18a9dd81] 1]
2023-11-30T12:07:48.208Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe"]
2023-11-30T12:07:48.208Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe"
2023-11-30T12:07:48.208Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [general room #object[org.postgresql.jdbc.PgResultSetMetaData 0x18a9dd81 org.postgresql.jdbc.PgResultSetMetaData@18a9dd81] 2]
2023-11-30T12:07:48.208Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar general room]
2023-11-30T12:07:48.208Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  general room
2023-11-30T12:07:48.208Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "abae04c5-d767-425e-acc2-7ce04df645d1" #object[org.postgresql.jdbc.PgResultSetMetaData 0x18a9dd81 org.postgresql.jdbc.PgResultSetMetaData@18a9dd81] 4]
2023-11-30T12:07:48.208Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "abae04c5-d767-425e-acc2-7ce04df645d1"]
2023-11-30T12:07:48.209Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "abae04c5-d767-425e-acc2-7ce04df645d1"
2023-11-30T12:07:48.210Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid abae04c5-d767-425e-acc2-7ce04df645d1 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x25dbd15c HikariProxyPreparedStatement@635162972 wrapping SELECT buildings.* FROM buildings  WHERE buildings.id = ?] 1]  type:  java.lang.String
2023-11-30T12:07:48.210Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "abae04c5-d767-425e-acc2-7ce04df645d1"
2023-11-30T12:07:48.210Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "abae04c5-d767-425e-acc2-7ce04df645d1" #object[org.postgresql.jdbc.PgResultSetMetaData 0x66620f05 org.postgresql.jdbc.PgResultSetMetaData@66620f05] 1]
2023-11-30T12:07:48.214Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "abae04c5-d767-425e-acc2-7ce04df645d1"]
2023-11-30T12:07:48.214Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "abae04c5-d767-425e-acc2-7ce04df645d1"
2023-11-30T12:07:48.214Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [general building #object[org.postgresql.jdbc.PgResultSetMetaData 0x66620f05 org.postgresql.jdbc.PgResultSetMetaData@66620f05] 2]
2023-11-30T12:07:48.214Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar general building]
2023-11-30T12:07:48.214Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  general building
{:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value :MEDIUM, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #time/instant "2023-08-23T22:00:00Z", :end_date #time/instant "2023-11-22T23:00:00Z", :created_at #time/instant "2023-11-24T19:25:51.605131Z", :updated_at #time/instant "2023-11-24T19:25:51.605131Z"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :attachments {:read true, :write false, :required false, :value :unqueried, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state :NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value :NOT_PROCESSED, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :general_ledger_account {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #time/instant "2023-11-24T19:25:51.635215Z", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value :NORMAL, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :total_price_cents 0, :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :procurement_account {:read true, :write false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :cost_center {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #time/instant "2023-11-24T19:25:51.635215Z", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}})
>>dashboard-cache-keyB2 {:id 1608672852}

>o> final-result (2023-11-30T12:07:48.218Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xd987e9 HikariProxyPreparedStatement@14256105 wrapping SELECT procurement_categories.* FROM procurement_categories  WHERE procurement_categories.main_category_id = ? ORDER BY procurement_categories.name ASC] 1]  type:  java.util.UUID
2023-11-30T12:07:48.218Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"
2023-11-30T12:07:48.219Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "7d5ba731-edd9-41ba-8773-7337d24c2327" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1aa1128 org.postgresql.jdbc.PgResultSetMetaData@1aa1128] 1]
2023-11-30T12:07:48.219Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"]
2023-11-30T12:07:48.219Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327"
2023-11-30T12:07:48.219Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Category C1 #object[org.postgresql.jdbc.PgResultSetMetaData 0x1aa1128 org.postgresql.jdbc.PgResultSetMetaData@1aa1128] 2]
2023-11-30T12:07:48.219Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Category C1]
2023-11-30T12:07:48.219Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Category C1
2023-11-30T12:07:48.219Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1aa1128 org.postgresql.jdbc.PgResultSetMetaData@1aa1128] 3]
2023-11-30T12:07:48.219Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"]
2023-11-30T12:07:48.220Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"
2023-11-30T12:07:48.220Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x609f8185 HikariProxyPreparedStatement@1621066117 wrapping SELECT procurement_images.* FROM procurement_images  WHERE procurement_images.main_category_id = ?] 1]  type:  java.util.UUID
2023-11-30T12:07:48.221Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"
{:main_categories ({:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1, :categories ({:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value :MEDIUM, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #time/instant "2023-08-23T22:00:00Z", :end_date #time/instant "2023-11-22T23:00:00Z", :created_at #time/instant "2023-11-24T19:25:51.605131Z", :updated_at #time/instant "2023-11-24T19:25:51.605131Z"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :attachments {:read true, :write false, :required false, :value :unqueried, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state :NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value :NOT_PROCESSED, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :general_ledger_account {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #time/instant "2023-11-24T19:25:51.635215Z", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value :NORMAL, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :total_price_cents 0, :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :procurement_account {:read true, :write false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :cost_center {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #time/instant "2023-11-24T19:25:51.635215Z", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents 0, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil}), :total_price_cents 0, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb}), :name Budget-Period-Past, :updated_at #time/instant "2023-11-24T19:25:51.605131Z", :inspection_start_date #time/instant "2023-08-23T22:00:00Z", :end_date #time/instant "2023-11-22T23:00:00Z", :id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :total_price_cents 0, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :created_at #time/instant "2023-11-24T19:25:51.605131Z"}) 


>o> final-result (json) [{"main_categories":[{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1","categories":[{"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Category C1","requests":[{"category":{"read":true,"write":false,"default":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","general_ledger_account":null,"cost_center":null,"procurement_account":null},"required":true,"value":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","cost_center":null,"main_category":{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1"},"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","procurement_account":null,"general_ledger_account":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"motivation":{"read":true,"write":false,"required":true,"value":"Corporis commodi provident nam.","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"accounting_type":{"read":true,"write":false,"default":"aquisition","required":true,"value":"aquisition","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"actionPermissions":{"edit":true,"delete":false,"moveBudgetPeriod":false,"moveCategory":false},"article_number":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspector_priority":{"read":true,"write":false,"default":"MEDIUM","required":true,"value":"MEDIUM","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"price_cents":{"read":true,"write":false,"default":0,"required":true,"value":0,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period":{"read":true,"write":false,"default":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-23T22:00:00Z","end_date":"2023-11-22T23:00:00Z","created_at":"2023-11-24T19:25:51.605131Z","updated_at":"2023-11-24T19:25:51.605131Z"},"required":true,"value":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"article_name":{"read":true,"write":false,"default":null,"required":true,"value":"Mediocre Aluminum Shoes","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"replacement":{"read":true,"write":false,"default":null,"required":true,"value":true,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"attachments":{"read":true,"write":false,"required":false,"value":"unqueried","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"DELETE":false,"template":{"read":true,"write":false,"default":null,"required":true,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"state":"NEW","organization":{"value":{"id":"fb664326-a8ef-4556-af02-07d3127cd9ec","name":"Beauty & Kids","parent_id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","shortname":null,"department":{"id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","name":"Home, Jewelry & Computers","parent_id":null,"shortname":null}},"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_name":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_status":{"read":true,"write":true,"default":"NOT_PROCURED","required":true,"value":"NOT_PROCESSED","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"requested_quantity":{"read":true,"write":false,"required":true,"value":1,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"general_ledger_account":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"updated_at":{"value":"2023-11-24T19:25:51.635215Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"priority":{"read":true,"write":false,"default":"NORMAL","required":true,"value":"NORMAL","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"id":"40284a6b-cf5e-41c1-af6c-dc423894ee11","total_price_cents":0,"price_currency":{"read":true,"write":false,"default":"CHF","required":true,"value":"CHF","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"procurement_account":{"read":true,"write":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room":{"read":true,"write":false,"default":{"id":"b8927fd2-014c-48c2-b095-fa1d5620debe","name":"general room","description":null,"building_id":"abae04c5-d767-425e-acc2-7ce04df645d1","general":true,"building":{"id":"abae04c5-d767-425e-acc2-7ce04df645d1","name":"general building","code":null}},"required":true,"value":{"id":"64bfb152-ea6c-42da-98c6-325afeb462bc","name":"reception room","general":false,"building":{"id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","code":null,"name":"9594 Beer Extension"},"building_id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","description":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspection_comment":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"approved_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"cost_center":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user":{"read":true,"write":false,"required":true,"default":{"id":"2187a76b-557a-4775-9a1e-778142161819","firstname":"Lynsey","lastname":"Kertzmann"},"value":{"system_admin_protected":false,"address":null,"email":"chanda@ortiz.net","pool_protected":false,"last_sign_in_at":null,"img32_url":null,"account_enabled":true,"lastname":"Kertzmann","phone":null,"img_digest":null,"org_id":null,"extended_info":null,"secondary_email":null,"city":null,"settings":null,"is_admin":false,"organization":"local","login":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","updated_at":"2023-11-24T20:25:51.614964+01:00","firstname":"Lynsey","zip":null,"id":"2187a76b-557a-4775-9a1e-778142161819","url":null,"password_sign_in_enabled":true,"account_disabled_at":null,"is_system_admin":false,"badge_id":null,"language_locale":null,"img256_url":null,"country":null,"delegator_user_id":null,"created_at":"2023-11-24T20:25:51.614964+01:00","admin_protected":false},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"receiver":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"internal_order_number":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"created_at":{"value":"2023-11-24T19:25:51.635215Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_comment":{"read":true,"write":true,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"short_id":"Budget-Period-Past.001","model":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"}}],"general_ledger_account":null,"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","total_price_cents":0,"procurement_account":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327","cost_center":null}],"total_price_cents":0,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb"}],"name":"Budget-Period-Past","updated_at":"2023-11-24T19:25:51.605131Z","inspection_start_date":"2023-08-23T22:00:00Z","end_date":"2023-11-22T23:00:00Z","id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","total_price_cents":0,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1","created_at":"2023-11-24T19:25:51.605131Z"}] 


>>>pure-handler {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey 1608672852] [:total_count 1] [:budget_periods [#ordered/map ([:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1] [:cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1] [:name Budget-Period-Past] [:inspection_start_date 2023-08-23T22:00:00Z] [:end_date 2023-11-22T23:00:00Z] [:total_price_cents 0] [:main_categories [#ordered/map ([:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb] [:cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb] [:name Main Category MC1] [:image_url nil] [:total_price_cents 0] [:categories [#ordered/map ([:id 7d5ba731-edd9-41ba-8773-7337d24c2327] [:cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327] [:name Category C1] [:total_price_cents 0] [:requests [#ordered/map ([:id 40284a6b-cf5e-41c1-af6c-dc423894ee11] [:short_id Budget-Period-Past.001] [:user #ordered/map ([:value #ordered/map ([:id 2187a76b-557a-4775-9a1e-778142161819] [:firstname Lynsey] [:lastname Kertzmann] [:__typename :User])] [:__typename :RequestFieldUser])] [:category #ordered/map ([:read true] [:write false] [:required true] [:value #ordered/map ([:id 7d5ba731-edd9-41ba-8773-7337d24c2327] [:name Category C1] [:main_category #ordered/map ([:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb] [:name Main Category MC1] [:__typename :MainCategory])] [:__typename :Category])] [:__typename :RequestFieldCategory])] [:budget_period #ordered/map ([:read true] [:write false] [:required true] [:value #ordered/map ([:name Budget-Period-Past] [:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1] [:__typename :BudgetPeriod])] [:__typename :RequestFieldBudgetPeriod])] [:article_name #ordered/map ([:value Mediocre Aluminum Shoes] [:__typename :RequestFieldString])] [:model #ordered/map ([:value nil] [:__typename :RequestFieldModel])] [:receiver #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:organization #ordered/map ([:value #ordered/map ([:id fb664326-a8ef-4556-af02-07d3127cd9ec] [:name Beauty & Kids] [:shortname nil] [:department #ordered/map ([:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9] [:name Home, Jewelry & Computers] [:__typename :Organization])] [:__typename :Organization])] [:__typename :RequestFieldOrganization])] [:price_cents #ordered/map ([:value 0] [:__typename :RequestFieldInt])] [:price_currency #ordered/map ([:value CHF] [:__typename :RequestFieldString])] [:requested_quantity #ordered/map ([:read true] [:value 1] [:__typename :RequestFieldInt])] [:approved_quantity #ordered/map ([:read true] [:value nil] [:__typename :RequestFieldInt])] [:order_quantity #ordered/map ([:read true] [:value nil] [:__typename :RequestFieldInt])] [:replacement #ordered/map ([:value true] [:__typename :RequestFieldBoolean])] [:priority #ordered/map ([:value :NORMAL] [:__typename :RequestFieldPriority])] [:state :NEW] [:article_number #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:supplier #ordered/map ([:value nil] [:__typename :RequestFieldSupplier])] [:supplier_name #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:room #ordered/map ([:value #ordered/map ([:id 64bfb152-ea6c-42da-98c6-325afeb462bc] [:name reception room] [:building #ordered/map ([:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c] [:name 9594 Beer Extension] [:__typename :Building])] [:__typename :Room])] [:__typename :RequestFieldRoom])] [:motivation #ordered/map ([:value Corporis commodi provident nam.] [:__typename :RequestFieldString])] [:inspection_comment #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:inspector_priority #ordered/map ([:value :MEDIUM] [:__typename :RequestFieldInspectorPriority])] [:accounting_type #ordered/map ([:value aquisition] [:__typename :RequestFieldString])] [:cost_center #ordered/map ([:value nil] [:__typename :RequestFieldCostCenter])] [:general_ledger_account #ordered/map ([:value nil] [:__typename :RequestFieldGeneralLedgerAccount])] [:procurement_account #ordered/map ([:value nil] [:__typename :RequestFieldProcurementAccount])] [:internal_order_number #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:order_status #ordered/map ([:value :NOT_PROCESSED] [:__typename :RequestFieldOrderStatus])] [:order_comment #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:__typename :Request] [:total_price_cents 0] [:actionPermissions #ordered/map ([:edit true] [:__typename :RequestActionPermissions])])]] [:__typename :Category])]] [:__typename :MainCategory])]] [:__typename :BudgetPeriod])]] [:__typename :Dashboard])])}
2023-11-30T12:07:48.264Z NX-41294 DEBUG [leihs.procurement.graphql:72] - result => {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey "1608672852"] [:total_count 1] [:budget_periods [#ordered/map ([:id "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"] [:cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1"] [:name "Budget-Period-Past"] [:inspection_start_date "2023-08-23T22:00:00Z"] [:end_date "2023-11-22T23:00:00Z"] [:total_price_cents "0"] [:main_categories [#ordered/map ([:id "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"] [:cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb"] [:name "Main Category MC1"] [:image_url nil] [:total_price_cents "0"] [:categories [#ordered/map ([:id "7d5ba731-edd9-41ba-8773-7337d24c2327"] [:cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327"] [:name "Category C1"] [:total_price_cents "0"] [:requests [#ordered/map ([:id "40284a6b-cf5e-41c1-af6c-dc423894ee11"] [:short_id "Budget-Period-Past.001"] [:user #ordered/map ([:value #ordered/map ([:id "2187a76b-557a-4775-9a1e-778142161819"] [:firstname "Lynsey"] [:lastname "Kertzmann"] [:__typename :User])] [:__typename :RequestFieldUser])] [:category #ordered/map ([:read true] [:write false] [:required true] [:value #ordered/map ([:id "7d5ba731-edd9-41ba-8773-7337d24c2327"] [:name "Category C1"] [:main_category #ordered/map ([:id "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"] [:name "Main Category MC1"] [:__typename :MainCategory])] [:__typename :Category])] [:__typename :RequestFieldCategory])] [:budget_period #ordered/map ([:read true] [:write false] [:required true] [:value #ordered/map ([:name "Budget-Period-Past"] [:id "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"] [:__typename :BudgetPeriod])] [:__typename :RequestFieldBudgetPeriod])] [:article_name #ordered/map ([:value "Mediocre Aluminum Shoes"] [:__typename :RequestFieldString])] [:model #ordered/map ([:value nil] [:__typename :RequestFieldModel])] [:receiver #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:organization #ordered/map ([:value #ordered/map ([:id "fb664326-a8ef-4556-af02-07d3127cd9ec"] [:name "Beauty & Kids"] [:shortname nil] [:department #ordered/map ([:id "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9"] [:name "Home, Jewelry & Computers"] [:__typename :Organization])] [:__typename :Organization])] [:__typename :RequestFieldOrganization])] [:price_cents #ordered/map ([:value 0] [:__typename :RequestFieldInt])] [:price_currency #ordered/map ([:value "CHF"] [:__typename :RequestFieldString])] [:requested_quantity #ordered/map ([:read true] [:value 1] [:__typename :RequestFieldInt])] [:approved_quantity #ordered/map ([:read true] [:value nil] [:__typename :RequestFieldInt])] [:order_quantity #ordered/map ([:read true] [:value nil] [:__typename :RequestFieldInt])] [:replacement #ordered/map ([:value true] [:__typename :RequestFieldBoolean])] [:priority #ordered/map ([:value :NORMAL] [:__typename :RequestFieldPriority])] [:state :NEW] [:article_number #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:supplier #ordered/map ([:value nil] [:__typename :RequestFieldSupplier])] [:supplier_name #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:room #ordered/map ([:value #ordered/map ([:id "64bfb152-ea6c-42da-98c6-325afeb462bc"] [:name "reception room"] [:building #ordered/map ([:id "3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c"] [:name "9594 Beer Extension"] [:__typename :Building])] [:__typename :Room])] [:__typename :RequestFieldRoom])] [:motivation #ordered/map ([:value "Corporis commodi provident nam."] [:__typename :RequestFieldString])] [:inspection_comment #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:inspector_priority #ordered/map ([:value :MEDIUM] [:__typename :RequestFieldInspectorPriority])] [:accounting_type #ordered/map ([:value "aquisition"] [:__typename :RequestFieldString])] [:cost_center #ordered/map ([:value nil] [:__typename :RequestFieldCostCenter])] [:general_ledger_account #ordered/map ([:value nil] [:__typename :RequestFieldGeneralLedgerAccount])] [:procurement_account #ordered/map ([:value nil] [:__typename :RequestFieldProcurementAccount])] [:internal_order_number #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:order_status #ordered/map ([:value :NOT_PROCESSED] [:__typename :RequestFieldOrderStatus])] [:order_comment #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:__typename :Request] [:total_price_cents "0"] [:actionPermissions #ordered/map ([:edit true] [:__typename :RequestActionPermissions])])]] [:__typename :Category])]] [:__typename :MainCategory])]] [:__typename :BudgetPeriod])]] [:__typename :Dashboard])])}
2023-11-30T12:07:48.265Z NX-41294 DEBUG [leihs.procurement.authorization:150] - (authorize handler request) => {:body {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey "1608672852"] [:total_count 1] [:budget_periods [#ordered/map ([:id "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"] [:cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1"] [:name "Budget-Period-Past"] [:inspection_start_date "2023-08-23T22:00:00Z"] [:end_date "2023-11-22T23:00:00Z"] [:total_price_cents "0"] [:main_categories [#ordered/map ([:id "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"] [:cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb"] [:name "Main Category MC1"] [:image_url nil] [:total_price_cents "0"] [:categories [#ordered/map ([:id "7d5ba731-edd9-41ba-8773-7337d24c2327"] [:cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327"] [:name "Category C1"] [:total_price_cents "0"] [:requests [#ordered/map ([:id "40284a6b-cf5e-41c1-af6c-dc423894ee11"] [:short_id "Budget-Period-Past.001"] [:user #ordered/map ([:value #ordered/map ([:id "2187a76b-557a-4775-9a1e-778142161819"] [:firstname "Lynsey"] [:lastname "Kertzmann"] [:__typename :User])] [:__typename :RequestFieldUser])] [:category #ordered/map ([:read true] [:write false] [:required true] [:value #ordered/map ([:id "7d5ba731-edd9-41ba-8773-7337d24c2327"] [:name "Category C1"] [:main_category #ordered/map ([:id "d2907cbd-98d0-48b7-ab9a-f06803e5cabb"] [:name "Main Category MC1"] [:__typename :MainCategory])] [:__typename :Category])] [:__typename :RequestFieldCategory])] [:budget_period #ordered/map ([:read true] [:write false] [:required true] [:value #ordered/map ([:name "Budget-Period-Past"] [:id "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"] [:__typename :BudgetPeriod])] [:__typename :RequestFieldBudgetPeriod])] [:article_name #ordered/map ([:value "Mediocre Aluminum Shoes"] [:__typename :RequestFieldString])] [:model #ordered/map ([:value nil] [:__typename :RequestFieldModel])] [:receiver #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:organization #ordered/map ([:value #ordered/map ([:id "fb664326-a8ef-4556-af02-07d3127cd9ec"] [:name "Beauty & Kids"] [:shortname nil] [:department #ordered/map ([:id "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9"] [:name "Home, Jewelry & Computers"] [:__typename :Organization])] [:__typename :Organization])] [:__typename :RequestFieldOrganization])] [:price_cents #ordered/map ([:value 0] [:__typename :RequestFieldInt])] [:price_currency #ordered/map ([:value "CHF"] [:__typename :RequestFieldString])] [:requested_quantity #ordered/map ([:read true] [:value 1] [:__typename :RequestFieldInt])] [:approved_quantity #ordered/map ([:read true] [:value nil] [:__typename :RequestFieldInt])] [:order_quantity #ordered/map ([:read true] [:value nil] [:__typename :RequestFieldInt])] [:replacement #ordered/map ([:value true] [:__typename :RequestFieldBoolean])] [:priority #ordered/map ([:value :NORMAL] [:__typename :RequestFieldPriority])] [:state :NEW] [:article_number #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:supplier #ordered/map ([:value nil] [:__typename :RequestFieldSupplier])] [:supplier_name #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:room #ordered/map ([:value #ordered/map ([:id "64bfb152-ea6c-42da-98c6-325afeb462bc"] [:name "reception room"] [:building #ordered/map ([:id "3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c"] [:name "9594 Beer Extension"] [:__typename :Building])] [:__typename :Room])] [:__typename :RequestFieldRoom])] [:motivation #ordered/map ([:value "Corporis commodi provident nam."] [:__typename :RequestFieldString])] [:inspection_comment #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:inspector_priority #ordered/map ([:value :MEDIUM] [:__typename :RequestFieldInspectorPriority])] [:accounting_type #ordered/map ([:value "aquisition"] [:__typename :RequestFieldString])] [:cost_center #ordered/map ([:value nil] [:__typename :RequestFieldCostCenter])] [:general_ledger_account #ordered/map ([:value nil] [:__typename :RequestFieldGeneralLedgerAccount])] [:procurement_account #ordered/map ([:value nil] [:__typename :RequestFieldProcurementAccount])] [:internal_order_number #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:order_status #ordered/map ([:value :NOT_PROCESSED] [:__typename :RequestFieldOrderStatus])] [:order_comment #ordered/map ([:value nil] [:__typename :RequestFieldString])] [:__typename :Request] [:total_price_cents "0"] [:actionPermissions #ordered/map ([:edit true] [:__typename :RequestActionPermissions])])]] [:__typename :Category])]] [:__typename :MainCategory])]] [:__typename :BudgetPeriod])]] [:__typename :Dashboard])])}}
2023-11-30T12:08:03.152Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=4, active=0, idle=4, waiting=0)
2023-11-30T12:08:03.153Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=4, active=0, idle=4, waiting=0)
2023-11-30T12:08:03.154Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T12:08:03.181Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T12:08:03.181Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T12:08:03.181Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
