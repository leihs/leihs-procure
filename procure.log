# java_leihs-procure-server env check via asdf v0.13.1
# java_leihs-procure-server env skipped update; touch .tool-versions or remove /var/folders/jl/49spzkdd2v3cdz37fgmp0ddr6cj76v/T/asdf_cache_java_leihs-procure-server to force update
# clojure_leihs-procure-server env check via asdf v0.13.1
# clojure_leihs-procure-server env skipped update; touch .tool-versions or remove /var/folders/jl/49spzkdd2v3cdz37fgmp0ddr6cj76v/T/asdf_cache_clojure_leihs-procure-server to force update
Warning: environ value /Users/mradl/.asdf/installs/java/zulu-11.60.19 for key :java-home has been overwritten with /Users/mradl/.asdf/installs/java/zulu-11.60.19/zulu-11.jdk/Contents/Home
>o> conc concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))
2023-12-01T23:38:04.764Z NX-41294 WARN [leihs.core.release:13] - Failed to read releases.yml, returning bogus value 
2023-12-01T23:38:05.428Z NX-41294 INFO [leihs.core.logging:37] - initializing logging  {:min-level [[#{"leihs.procurement" "leihs.procurement.resources.*" "leihs.procurement.permissions.*" "leihs.procurement.authorization" "leihs.procurement.*"} :debug] [#{"com.zaxxer.hikari.*" "leihs.*"} :info] [#{"*"} :warn]], :log-level nil}
2023-12-01T23:38:05.436Z NX-41294 INFO [leihs.core.logging:39] - initialized logging  {:min-level [[#{"leihs.procurement" "leihs.procurement.resources.*" "leihs.procurement.permissions.*" "leihs.procurement.authorization" "leihs.procurement.*"} :debug] [#{"com.zaxxer.hikari.*" "leihs.*"} :info] [#{"*"} :warn]], :ns-filter #{"*"}, :middleware [], :timestamp-opts {:pattern :iso8601, :locale :jvm-default, :timezone :utc}, :output-fn #object[taoensso.timbre$default_output_fn 0x1365e37c "taoensso.timbre$default_output_fn@1365e37c"], :appenders {:println {:enabled? true, :fn #object[taoensso.timbre.appenders.core$println_appender$fn__3459 0x59cb90aa "taoensso.timbre.appenders.core$println_appender$fn__3459@59cb90aa"]}}, :_init-config {:loaded-from-source :default, :compile-time-config {:min-level nil, :ns-pattern "*"}}, :log-level nil}
2023-12-01T23:38:05.438Z NX-41294 INFO [leihs.procurement.main:50] - main ("--dev-mode" "true" "--repl" "true" "run" "--db-port" "5415" "--db-name" "leihs_test")
2023-12-01T23:38:05.450Z NX-41294 INFO [leihs.core.repl:62] - init {:dev-mode true, :repl true, :repl-bind "localhost", :repl-port 11053, :repl-port-file ".nrepl-port"}
2023-12-01T23:38:05.453Z NX-41294 INFO [leihs.core.repl:70] - starting nREPL server  11053 localhost
2023-12-01T23:38:05.478Z NX-41294 INFO [leihs.core.repl:75] - started nREPL server 
2023-12-01T23:38:05.481Z NX-41294 INFO [leihs.procurement.run:326] - Invoking run with options:  {:db-host localhost, :db-max-pool-size 16, :db-min-pool-size 2, :db-name leihs_test, :db-password leihs, :db-port 5415, :db-user leihs, :dev-mode true, :http-host localhost, :http-max-threads 8, :http-min-threads 1, :http-port 3230, :http-queue-capacity 640, :http-thread-keep-alive-seconds 10, :http-worker-prefix leihs-service-http-worker-, :pid-file nil, :repl true, :repl-bind localhost, :repl-port 11053, :repl-port-file .nrepl-port}
2023-12-01T23:38:05.482Z NX-41294 INFO [leihs.core.shutdown:20] - PID 95291
2023-12-01T23:38:05.506Z NX-41294 INFO [leihs.core.shutdown:29] - Registering SIGTERM handler for shutdown.
2023-12-01T23:38:05.574Z NX-41294 INFO [leihs.core.graphql:17] - Initialized graphQL schema.
2023-12-01T23:38:05.576Z NX-41294 INFO [leihs.core.db:220] - Initializing db  {:db-name "leihs_test", :db-port 5415, :db-host "localhost", :db-user "leihs", :db-password "leihs", :db-min-pool-size 2, :db-max-pool-size 16}
2023-12-01T23:38:05.582Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:80] - db-pool - Starting...
2023-12-01T23:38:05.656Z NX-41294 INFO [com.zaxxer.hikari.pool.HikariPool:565] - db-pool - Added connection org.postgresql.jdbc.PgConnection@6e6a011f
2023-12-01T23:38:05.661Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:82] - db-pool - Start completed.
2023-12-01T23:38:05.662Z NX-41294 INFO [leihs.core.db:222] - Initialized db  {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5e934b58 "HikariDataSource (db-pool)"]}
2023-12-01T23:38:05.663Z NX-41294 INFO [leihs.core.db:223] - Initializing ds-next  {:db-name "leihs_test", :db-port 5415, :db-host "localhost", :db-user "leihs", :db-password "leihs", :db-min-pool-size 2, :db-max-pool-size 16}
2023-12-01T23:38:05.678Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:110] - HikariPool-1 - Starting...
2023-12-01T23:38:05.688Z NX-41294 INFO [com.zaxxer.hikari.pool.HikariPool:565] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@676145af
2023-12-01T23:38:05.689Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:123] - HikariPool-1 - Start completed.
2023-12-01T23:38:05.696Z NX-41294 INFO [leihs.core.db:225] - Initialized ds-next  #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x27f1e05d "HikariDataSource (HikariPool-1)"], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x7e594061 "next.jdbc.result_set$as_unqualified_lower_maps@7e594061"]}}
2023-12-01T23:38:05.702Z NX-41294 INFO [leihs.core.http-server:101] - starting http-server  {:port 3230, :ip "localhost", :pool {:queue #object[java.util.concurrent.ArrayBlockingQueue 0xe808600 "[]"], :pool #object[java.util.concurrent.ThreadPoolExecutor 0x4440bf95 "java.util.concurrent.ThreadPoolExecutor@4440bf95[Running, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]"]}}
2023-12-01T23:38:05.713Z NX-41294 INFO [leihs.core.http-server:104] - started http-server 
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email urs.vanbinsbergen@zhdk.ch, :contracts_count 4, :lastname van Binsbergen, :org_id 244750, :scope_read true, :is_admin true, :authentication-method :session, :login uvanbins, :scope_system_admin_write true, :scope_write true, :firstname Urs, :scope_admin_write true, :user_session_created_at #time/instant "2023-12-01T15:27:00.957215Z", :id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :user_session_id #uuid "19f44e3b-805b-451e-8ed2-1969faedc3e1", :scope_system_admin_read true, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role inventory_manager, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :is_system_admin true, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 8, :scope_admin_read true}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44359 0x2db4ad91 leihs.core.locale$wrap$fn__44359@2db4ad91]

>> authorize::request > {:authenticated-entity {:email urs.vanbinsbergen@zhdk.ch, :contracts_count 4, :lastname van Binsbergen, :org_id 244750, :scope_read true, :is_admin true, :authentication-method :session, :login uvanbins, :scope_system_admin_write true, :scope_write true, :firstname Urs, :scope_admin_write true, :user_session_created_at #time/instant "2023-12-01T15:27:00.957215Z", :id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :user_session_id #uuid "19f44e3b-805b-451e-8ed2-1969faedc3e1", :scope_system_admin_read true, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role inventory_manager, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :is_system_admin true, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 8, :scope_admin_read true}, :cookies {leihs-anti-csrf-token {:value 6e1aae74-85d2-42a1-a803-d998943e2e69}, leihs-user-session {:value 883fc2af-3a55-41ff-b156-b0ce6d5ae1cc}}, :remote-addr 127.0.0.1, :start-time 224576819984541, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x27f1e05d HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x7e594061 next.jdbc.result_set$as_unqualified_lower_maps@7e594061]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie leihs-anti-csrf-token=6e1aae74-85d2-42a1-a803-d998943e2e69; leihs-user-session=883fc2af-3a55-41ff-b156-b0ce6d5ae1cc, content-length 240, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, pragma no-cache, x-csrf-token 6e1aae74-85d2-42a1-a803-d998943e2e69, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors, postman-token 3f651733-ef24-464f-81bd-dfd31d7d7d32, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x15861412 /127.0.0.1:3230<->/127.0.0.1:58048], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5e934b58 HikariDataSource (db-pool)]}, :content-length 240, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:query query RequestFilters  {
    budget_periods  {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
    }
    __typename
  }


, :operationName RequestsIndexFiltered}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x3e67fe71 leihs.procurement.graphql$handler@3e67fe71], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
>myprint>  authEnt? {:email urs.vanbinsbergen@zhdk.ch, :contracts_count 4, :lastname van Binsbergen, :org_id 244750, :scope_read true, :is_admin true, :authentication-method :session, :login uvanbins, :scope_system_admin_write true, :scope_write true, :firstname Urs, :scope_admin_write true, :user_session_created_at #time/instant "2023-12-01T15:27:00.957215Z", :id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :user_session_id #uuid "19f44e3b-805b-451e-8ed2-1969faedc3e1", :scope_system_admin_read true, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role inventory_manager, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :is_system_admin true, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 8, :scope_admin_read true}
>myprint>  txn {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5e934b58 HikariDataSource (db-pool)]}
2023-12-01T23:40:06.958Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - auth-entity => {:email "urs.vanbinsbergen@zhdk.ch", :contracts_count 4, :lastname "van Binsbergen", :org_id "244750", :scope_read true, :is_admin true, :authentication-method :session, :login "uvanbins", :scope_system_admin_write true, :scope_write true, :firstname "Urs", :scope_admin_write true, :user_session_created_at #time/instant "2023-12-01T15:27:00.957215Z", :id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :user_session_id #uuid "19f44e3b-805b-451e-8ed2-1969faedc3e1", :scope_system_admin_read true, :access-rights ({:role "inventory_manager", :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role "customer", :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role "inventory_manager", :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role "customer", :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role "inventory_manager", :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role "customer", :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role "customer", :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role "customer", :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :is_system_admin true, :external_sign_out_url nil, :language_locale "de-CH", :inventory_pool_roles_count 8, :scope_admin_read true}
2023-12-01T23:40:06.970Z NX-41294 DEBUG [leihs.procurement.permissions.user:25] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format (->> (jdbc/execute-one! tx))) => {:has_entry true}
>myprint>  admin true
2023-12-01T23:40:06.974Z NX-41294 DEBUG [leihs.procurement.permissions.user:59] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
>myprint>  inspector false
2023-12-01T23:40:06.982Z NX-41294 DEBUG [leihs.procurement.permissions.user:78] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
>myprint>  viewer false
2023-12-01T23:40:06.990Z NX-41294 DEBUG [leihs.procurement.permissions.user:86] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7"]
>myprint>  requester false
2023-12-01T23:40:06.996Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - auth-entity => {:email "urs.vanbinsbergen@zhdk.ch", :contracts_count 4, :lastname "van Binsbergen", :org_id "244750", :scope_read true, :is_admin true, :authentication-method :session, :login "uvanbins", :scope_system_admin_write true, :scope_write true, :firstname "Urs", :scope_admin_write true, :user_session_created_at #time/instant "2023-12-01T15:27:00.957215Z", :id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :user_session_id #uuid "19f44e3b-805b-451e-8ed2-1969faedc3e1", :scope_system_admin_read true, :access-rights ({:role "inventory_manager", :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role "customer", :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role "inventory_manager", :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role "customer", :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role "inventory_manager", :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role "customer", :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role "customer", :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role "customer", :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :is_system_admin true, :external_sign_out_url nil, :language_locale "de-CH", :inventory_pool_roles_count 8, :scope_admin_read true}
2023-12-01T23:40:06.998Z NX-41294 DEBUG [leihs.procurement.permissions.user:25] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format (->> (jdbc/execute-one! tx))) => {:has_entry true}
2023-12-01T23:40:06.999Z NX-41294 DEBUG [leihs.procurement.permissions.user:59] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T23:40:07.000Z NX-41294 DEBUG [leihs.procurement.permissions.user:78] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T23:40:07.001Z NX-41294 DEBUG [leihs.procurement.permissions.user:86] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7"]

> 1 anti-csrf-token >  6e1aae74-85d2-42a1-a803-d998943e2e69

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
pure-handler >> 2
2023-12-01T23:40:07.015Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query RequestFilters  {
    budget_periods  {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
    }
    __typename
  }


 with variables nil
>oo> vars from graphQL-Requst nil nil nil nil

>oo>1pure-handler _> request {:leihs-user-language {:name Deutsch, :locale de-CH, :default true, :active true}, :authenticated-entity {:email urs.vanbinsbergen@zhdk.ch, :contracts_count 4, :lastname van Binsbergen, :org_id 244750, :scope_read true, :is_admin true, :authentication-method :session, :login uvanbins, :scope_system_admin_write true, :scope_write true, :firstname Urs, :scope_admin_write true, :user_session_created_at #time/instant "2023-12-01T15:27:00.957215Z", :id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :user_session_id #uuid "19f44e3b-805b-451e-8ed2-1969faedc3e1", :scope_system_admin_read true, :access-rights ({:role inventory_manager, :inventory_pool_id #uuid "3977012c-ce0e-501f-889b-8715fdb5d83b"} {:role customer, :inventory_pool_id #uuid "5863967f-9804-4909-a9b7-92254616d6b2"} {:role inventory_manager, :inventory_pool_id #uuid "5dd25b58-fa56-5095-bd97-2696d92c2fb1"} {:role customer, :inventory_pool_id #uuid "77e88ec8-9ff6-5435-818e-dc902fc631a6"} {:role inventory_manager, :inventory_pool_id #uuid "8bd16d45-056d-5590-bc7f-12849f034351"} {:role customer, :inventory_pool_id #uuid "a02b8163-9a16-5066-b48e-9eb74cf8b791"} {:role customer, :inventory_pool_id #uuid "fc5a841e-36c6-5dc3-8207-1306c1fb89bf"} {:role customer, :inventory_pool_id #uuid "ffaa3aea-2a1f-4d6a-bdfc-f3be93699750"}), :user_id #uuid "23a3d006-581e-4dee-a717-4ac7d0fd7ab7", :is_system_admin true, :external_sign_out_url nil, :language_locale de-CH, :inventory_pool_roles_count 8, :scope_admin_read true}, :cookies {leihs-anti-csrf-token {:value 6e1aae74-85d2-42a1-a803-d998943e2e69}, leihs-user-session {:value 883fc2af-3a55-41ff-b156-b0ce6d5ae1cc}}, :remote-addr 127.0.0.1, :start-time 224576819984541, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address noreply@zhdk.ch, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url http://localhost:3200, :sessions_force_uniqueness false, :email_signature Das ZHdK-Ausleihe-Team}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x27f1e05d HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x7e594061 next.jdbc.result_set$as_unqualified_lower_maps@7e594061]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie leihs-anti-csrf-token=6e1aae74-85d2-42a1-a803-d998943e2e69; leihs-user-session=883fc2af-3a55-41ff-b156-b0ce6d5ae1cc, content-length 240, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, pragma no-cache, x-csrf-token 6e1aae74-85d2-42a1-a803-d998943e2e69, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors, postman-token 3f651733-ef24-464f-81bd-dfd31d7d7d32, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x15861412 /127.0.0.1:3230<->/127.0.0.1:58048], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5e934b58 HikariDataSource (db-pool)]}, :content-length 240, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:query query RequestFilters  {
    budget_periods  {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
    }
    __typename
  }


, :operationName RequestsIndexFiltered}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x3e67fe71 leihs.procurement.graphql$handler@3e67fe71], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>o>2pure-handler _> query query RequestFilters  {
    budget_periods  {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
    }
    __typename
  }




>o>3pure-handler, result=> {:data #ordered/map ([:budget_periods [nil nil nil nil nil nil nil nil nil nil nil nil nil]] [:__typename :Query]), :errors ({:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 0 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 1 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 2 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 3 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 4 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 5 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 6 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 7 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 8 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 9 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 10 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 11 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 12 :total_price_cents]})}
2023-12-01T23:40:07.045Z NX-41294 DEBUG [leihs.procurement.graphql:112] - result => {:data #ordered/map ([:budget_periods [nil nil nil nil nil nil nil nil nil nil nil nil nil]] [:__typename :Query]), :errors ({:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 0 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 1 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 2 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 3 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 4 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 5 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 6 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 7 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 8 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 9 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 10 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 11 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 12 :total_price_cents]})}
2023-12-01T23:40:07.046Z NX-41294 DEBUG [leihs.procurement.graphql:113] - {:data #ordered/map ([:budget_periods [nil nil nil nil nil nil nil nil nil nil nil nil nil]] [:__typename :Query]), :errors ({:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 0 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 1 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 2 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 3 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 4 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 5 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 6 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 7 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 8 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 9 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 10 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 11 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 8, :column 7}], :path [:budget_periods 12 :total_price_cents]})}

>o> ERROR 4pure-handler, result=> {:data #ordered/map ([:budget_periods [nil nil nil nil nil nil nil nil nil nil nil nil nil]] [:__typename :Query]), :errors ({:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 0 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 1 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 2 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 3 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 4 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 5 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 6 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 7 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 8 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 9 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 10 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 11 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 8, :column 7}], :path [:budget_periods 12 :total_price_cents]})}
