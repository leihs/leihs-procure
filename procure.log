# java_leihs-procure-server env check via asdf v0.13.1
# java_leihs-procure-server env skipped update; touch .tool-versions or remove /var/folders/jl/49spzkdd2v3cdz37fgmp0ddr6cj76v/T/asdf_cache_java_leihs-procure-server to force update
# clojure_leihs-procure-server env check via asdf v0.13.1
# clojure_leihs-procure-server env skipped update; touch .tool-versions or remove /var/folders/jl/49spzkdd2v3cdz37fgmp0ddr6cj76v/T/asdf_cache_clojure_leihs-procure-server to force update
Warning: environ value /Users/mradl/.asdf/installs/java/zulu-11.60.19 for key :java-home has been overwritten with /Users/mradl/.asdf/installs/java/zulu-11.60.19/zulu-11.jdk/Contents/Home
>o> conc concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))
2023-11-30T11:31:45.822Z NX-41294 WARN [leihs.core.release:13] - Failed to read releases.yml, returning bogus value 
2023-11-30T11:31:46.387Z NX-41294 INFO [leihs.core.logging:37] - initializing logging  {:min-level [[#{"leihs.procurement" "leihs.procurement.resources.*" "leihs.procurement.permissions.*" "leihs.procurement.authorization" "leihs.procurement.*"} :debug] [#{"com.zaxxer.hikari.*" "leihs.*"} :debug] [#{"*"} :debug]], :log-level :debug}
2023-11-30T11:31:46.394Z NX-41294 INFO [leihs.core.logging:39] - initialized logging  {:min-level [[#{"leihs.procurement" "leihs.procurement.resources.*" "leihs.procurement.permissions.*" "leihs.procurement.authorization" "leihs.procurement.*"} :debug] [#{"com.zaxxer.hikari.*" "leihs.*"} :debug] [#{"*"} :debug]], :ns-filter #{"*"}, :middleware [], :timestamp-opts {:pattern :iso8601, :locale :jvm-default, :timezone :utc}, :output-fn #object[taoensso.timbre$default_output_fn 0x69060729 "taoensso.timbre$default_output_fn@69060729"], :appenders {:println {:enabled? true, :fn #object[taoensso.timbre.appenders.core$println_appender$fn__3459 0x13c8ca75 "taoensso.timbre.appenders.core$println_appender$fn__3459@13c8ca75"]}}, :_init-config {:loaded-from-source :default, :compile-time-config {:min-level nil, :ns-pattern "*"}}, :log-level :debug}
2023-11-30T11:31:46.397Z NX-41294 INFO [leihs.procurement.main:50] - main ("--dev-mode" "true" "--repl" "true" "run" "--db-port" "5415" "--db-name" "leihs_test")
2023-11-30T11:31:46.409Z NX-41294 INFO [leihs.core.repl:62] - init {:dev-mode true, :repl true, :repl-bind "localhost", :repl-port 40006, :repl-port-file ".nrepl-port"}
2023-11-30T11:31:46.411Z NX-41294 INFO [leihs.core.repl:70] - starting nREPL server  40006 localhost
2023-11-30T11:31:46.431Z NX-41294 INFO [leihs.core.repl:75] - started nREPL server 
2023-11-30T11:31:46.434Z NX-41294 INFO [leihs.procurement.run:326] - Invoking run with options:  {:db-host localhost, :db-max-pool-size 16, :db-min-pool-size 2, :db-name leihs_test, :db-password leihs, :db-port 5415, :db-user leihs, :dev-mode true, :http-host localhost, :http-max-threads 8, :http-min-threads 1, :http-port 3230, :http-queue-capacity 640, :http-thread-keep-alive-seconds 10, :http-worker-prefix leihs-service-http-worker-, :pid-file nil, :repl true, :repl-bind localhost, :repl-port 40006, :repl-port-file .nrepl-port}
2023-11-30T11:31:46.435Z NX-41294 INFO [leihs.core.shutdown:20] - PID 19678
2023-11-30T11:31:46.448Z NX-41294 INFO [leihs.core.shutdown:29] - Registering SIGTERM handler for shutdown.
2023-11-30T11:31:46.508Z NX-41294 INFO [leihs.core.graphql:17] - Initialized graphQL schema.
2023-11-30T11:31:46.511Z NX-41294 INFO [leihs.core.db:220] - Initializing db  {:db-name "leihs_test", :db-port 5415, :db-host "localhost", :db-user "leihs", :db-password "leihs", :db-min-pool-size 2, :db-max-pool-size 16}
2023-11-30T11:31:46.515Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1100] - db-pool - configuration:
2023-11-30T11:31:46.522Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - allowPoolSuspension.............false
2023-11-30T11:31:46.523Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - autoCommit......................true
2023-11-30T11:31:46.523Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - catalog.........................none
2023-11-30T11:31:46.523Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionInitSql...............none
2023-11-30T11:31:46.523Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTestQuery.............none
2023-11-30T11:31:46.524Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTimeout...............30000
2023-11-30T11:31:46.524Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSource......................none
2023-11-30T11:31:46.526Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceClassName............."org.postgresql.ds.PGSimpleDataSource"
2023-11-30T11:31:46.526Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceJNDI..................none
2023-11-30T11:31:46.527Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceProperties............{password=<masked>, databaseName=leihs_test, serverName=localhost, portNumber=5415}
2023-11-30T11:31:46.527Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - driverClassName.................none
2023-11-30T11:31:46.527Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - exceptionOverrideClassName......none
2023-11-30T11:31:46.527Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckProperties...........{}
2023-11-30T11:31:46.528Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckRegistry.............com.codahale.metrics.health.HealthCheckRegistry@726149e4
2023-11-30T11:31:46.528Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - idleTimeout.....................60000
2023-11-30T11:31:46.528Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - initializationFailTimeout.......1
2023-11-30T11:31:46.533Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - isolateInternalQueries..........false
2023-11-30T11:31:46.533Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - jdbcUrl.........................none
2023-11-30T11:31:46.533Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - keepaliveTime...................0
2023-11-30T11:31:46.534Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - leakDetectionThreshold..........0
2023-11-30T11:31:46.534Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maxLifetime.....................3600000
2023-11-30T11:31:46.534Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maximumPoolSize.................16
2023-11-30T11:31:46.534Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricRegistry..................com.codahale.metrics.MetricRegistry@16994c32
2023-11-30T11:31:46.534Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricsTrackerFactory...........none
2023-11-30T11:31:46.535Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - minimumIdle.....................2
2023-11-30T11:31:46.535Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - password........................<masked>
2023-11-30T11:31:46.535Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - poolName........................"db-pool"
2023-11-30T11:31:46.535Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - readOnly........................false
2023-11-30T11:31:46.535Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - registerMbeans..................false
2023-11-30T11:31:46.535Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - scheduledExecutor...............none
2023-11-30T11:31:46.536Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - schema..........................none
2023-11-30T11:31:46.536Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - threadFactory...................internal
2023-11-30T11:31:46.536Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - transactionIsolation............default
2023-11-30T11:31:46.536Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - username........................"leihs"
2023-11-30T11:31:46.537Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - validationTimeout...............5000
2023-11-30T11:31:46.538Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:80] - db-pool - Starting...
2023-11-30T11:31:46.602Z NX-41294 INFO [com.zaxxer.hikari.pool.HikariPool:565] - db-pool - Added connection org.postgresql.jdbc.PgConnection@18138fe1
2023-11-30T11:31:46.608Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:82] - db-pool - Start completed.
2023-11-30T11:31:46.608Z NX-41294 INFO [leihs.core.db:222] - Initialized db  {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b "HikariDataSource (db-pool)"]}
2023-11-30T11:31:46.609Z NX-41294 INFO [leihs.core.db:223] - Initializing ds-next  {:db-name "leihs_test", :db-port 5415, :db-host "localhost", :db-user "leihs", :db-password "leihs", :db-min-pool-size 2, :db-max-pool-size 16}
2023-11-30T11:31:46.623Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1100] - HikariPool-1 - configuration:
2023-11-30T11:31:46.624Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - allowPoolSuspension.............false
2023-11-30T11:31:46.624Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - autoCommit......................true
2023-11-30T11:31:46.624Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - catalog.........................none
2023-11-30T11:31:46.624Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionInitSql...............none
2023-11-30T11:31:46.625Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTestQuery.............none
2023-11-30T11:31:46.625Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTimeout...............30000
2023-11-30T11:31:46.625Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSource......................none
2023-11-30T11:31:46.625Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceClassName.............none
2023-11-30T11:31:46.626Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceJNDI..................none
2023-11-30T11:31:46.626Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceProperties............{password=<masked>}
2023-11-30T11:31:46.626Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - driverClassName.................none
2023-11-30T11:31:46.626Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - exceptionOverrideClassName......none
2023-11-30T11:31:46.626Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckProperties...........{}
2023-11-30T11:31:46.627Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckRegistry.............none
2023-11-30T11:31:46.627Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - idleTimeout.....................60000
2023-11-30T11:31:46.627Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - initializationFailTimeout.......1
2023-11-30T11:31:46.627Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - isolateInternalQueries..........false
2023-11-30T11:31:46.627Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - jdbcUrl.........................jdbc:postgresql://localhost:5415/leihs_test
2023-11-30T11:31:46.627Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - keepaliveTime...................0
2023-11-30T11:31:46.628Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - leakDetectionThreshold..........0
2023-11-30T11:31:46.628Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maxLifetime.....................3600000
2023-11-30T11:31:46.628Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maximumPoolSize.................16
2023-11-30T11:31:46.628Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricRegistry..................none
2023-11-30T11:31:46.628Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricsTrackerFactory...........none
2023-11-30T11:31:46.628Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - minimumIdle.....................2
2023-11-30T11:31:46.628Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - password........................<masked>
2023-11-30T11:31:46.629Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - poolName........................"HikariPool-1"
2023-11-30T11:31:46.629Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - readOnly........................false
2023-11-30T11:31:46.630Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - registerMbeans..................false
2023-11-30T11:31:46.630Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - scheduledExecutor...............none
2023-11-30T11:31:46.630Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - schema..........................none
2023-11-30T11:31:46.631Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - threadFactory...................internal
2023-11-30T11:31:46.631Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - transactionIsolation............default
2023-11-30T11:31:46.631Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - username........................"leihs"
2023-11-30T11:31:46.631Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - validationTimeout...............5000
2023-11-30T11:31:46.632Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:110] - HikariPool-1 - Starting...
2023-11-30T11:31:46.633Z NX-41294 DEBUG [com.zaxxer.hikari.util.DriverDataSource:107] - Loaded driver with class name org.postgresql.Driver for jdbcUrl=jdbc:postgresql://localhost:5415/leihs_test
2023-11-30T11:31:46.641Z NX-41294 INFO [com.zaxxer.hikari.pool.HikariPool:565] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6148b81b
2023-11-30T11:31:46.641Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:123] - HikariPool-1 - Start completed.
2023-11-30T11:31:46.647Z NX-41294 INFO [leihs.core.db:225] - Initialized ds-next  #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 "HikariDataSource (HikariPool-1)"], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd "next.jdbc.result_set$as_unqualified_lower_maps@759ecefd"]}}
2023-11-30T11:31:46.654Z NX-41294 INFO [leihs.core.http-server:101] - starting http-server  {:port 3230, :ip "localhost", :pool {:queue #object[java.util.concurrent.ArrayBlockingQueue 0x287136ed "[]"], :pool #object[java.util.concurrent.ThreadPoolExecutor 0x206d0f69 "java.util.concurrent.ThreadPoolExecutor@206d0f69[Running, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]"]}}
2023-11-30T11:31:46.664Z NX-41294 INFO [leihs.core.http-server:104] - started http-server 
2023-11-30T11:31:46.713Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2023-11-30T11:31:46.714Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2023-11-30T11:31:46.721Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - db-pool - Added connection org.postgresql.jdbc.PgConnection@79064d32
2023-11-30T11:31:46.733Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After adding stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:31:46.746Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2023-11-30T11:31:46.746Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2023-11-30T11:31:46.752Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4dcd0d8d
2023-11-30T11:31:46.765Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After adding stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:32:16.718Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:32:16.720Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:32:16.720Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:32:16.752Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:32:16.753Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:32:16.754Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:32:36.593Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x583c3836 HikariProxyPreparedStatement@1480341558 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:32:36.593Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:32:36.595Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x583c3836 HikariProxyPreparedStatement@1480341558 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:32:36.596Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:32:36.597Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x583c3836 HikariProxyPreparedStatement@1480341558 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:32:36.597Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T11:32:36.598Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x583c3836 HikariProxyPreparedStatement@1480341558 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:32:36.598Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:32:36.616Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x5fb1b34d org.postgresql.jdbc.PgResultSetMetaData@5fb1b34d] 1]
2023-11-30T11:32:36.625Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:32:36.625Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:32:36.626Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x5fb1b34d org.postgresql.jdbc.PgResultSetMetaData@5fb1b34d] 2]
2023-11-30T11:32:36.626Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:32:36.626Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:32:36.627Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5fb1b34d org.postgresql.jdbc.PgResultSetMetaData@5fb1b34d] 3]
2023-11-30T11:32:36.627Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:36.627Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:36.627Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x5fb1b34d org.postgresql.jdbc.PgResultSetMetaData@5fb1b34d] 6]
2023-11-30T11:32:36.627Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:32:36.628Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:32:36.628Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5fb1b34d org.postgresql.jdbc.PgResultSetMetaData@5fb1b34d] 10]
2023-11-30T11:32:36.628Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:36.628Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:36.629Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x5fb1b34d org.postgresql.jdbc.PgResultSetMetaData@5fb1b34d] 11]
2023-11-30T11:32:36.629Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:36.629Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:36.629Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x5fb1b34d org.postgresql.jdbc.PgResultSetMetaData@5fb1b34d] 12]
2023-11-30T11:32:36.630Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:36.630Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:36.630Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5fb1b34d org.postgresql.jdbc.PgResultSetMetaData@5fb1b34d] 13]
2023-11-30T11:32:36.630Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:32:36.630Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:32:36.631Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5fb1b34d org.postgresql.jdbc.PgResultSetMetaData@5fb1b34d] 14]
2023-11-30T11:32:36.631Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:32:36.632Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:32:36.634Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5f9157d9 HikariProxyPreparedStatement@1603360729 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:32:36.634Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107529290869708, :params {:return-to /procure}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {:return-to /procure}, :route-params nil, :headers {sec-fetch-site none, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, sec-fetch-user ?1, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x216a78f /127.0.0.1:3230<->/127.0.0.1:63344], :server-port 3230, :params-raw {:return-to /procure}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /procure}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Fprocure, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x67714800 compojure.core$routes$fn__27950@67714800], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:32:36.649Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-11-30T11:32:36.652Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-11-30T11:32:36.669Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xa5ba54d HikariProxyPreparedStatement@173778253 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:32:36.670Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:32:36.671Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xa5ba54d HikariProxyPreparedStatement@173778253 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:32:36.671Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:32:36.672Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xa5ba54d HikariProxyPreparedStatement@173778253 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:32:36.672Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T11:32:36.672Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xa5ba54d HikariProxyPreparedStatement@173778253 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:32:36.673Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:32:36.675Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x16615080 org.postgresql.jdbc.PgResultSetMetaData@16615080] 1]
2023-11-30T11:32:36.677Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:32:36.677Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:32:36.677Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x16615080 org.postgresql.jdbc.PgResultSetMetaData@16615080] 2]
2023-11-30T11:32:36.678Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:32:36.678Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:32:36.678Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x16615080 org.postgresql.jdbc.PgResultSetMetaData@16615080] 3]
2023-11-30T11:32:36.678Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:36.678Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:36.678Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x16615080 org.postgresql.jdbc.PgResultSetMetaData@16615080] 6]
2023-11-30T11:32:36.678Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:32:36.678Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:32:36.679Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x16615080 org.postgresql.jdbc.PgResultSetMetaData@16615080] 10]
2023-11-30T11:32:36.679Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:36.679Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:36.679Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x16615080 org.postgresql.jdbc.PgResultSetMetaData@16615080] 11]
2023-11-30T11:32:36.679Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:36.679Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:36.679Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x16615080 org.postgresql.jdbc.PgResultSetMetaData@16615080] 12]
2023-11-30T11:32:36.680Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:36.680Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:36.681Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x16615080 org.postgresql.jdbc.PgResultSetMetaData@16615080] 13]
2023-11-30T11:32:36.681Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:32:36.681Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:32:36.681Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x16615080 org.postgresql.jdbc.PgResultSetMetaData@16615080] 14]
2023-11-30T11:32:36.681Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:32:36.682Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:32:36.683Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x36119837 HikariProxyPreparedStatement@907122743 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:32:36.683Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= nil  handler-key= :procurement
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107529425636416, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site none, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, sec-fetch-user ?1, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x17637fd7 /127.0.0.1:3230<->/127.0.0.1:63344], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure, :server-name localhost, :handler-key :procurement, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x23b7953b leihs.procurement.backend.html$not_found_handler@23b7953b], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :procurement
2023-11-30T11:32:36.687Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:36.690Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:32:36.693Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:32:36.695Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:32:36.697Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-11-30T11:32:36.699Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-11-30T11:32:37.013Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1d064171 HikariProxyPreparedStatement@486949233 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:32:37.014Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:32:37.014Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1d064171 HikariProxyPreparedStatement@486949233 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:32:37.015Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:32:37.015Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1d064171 HikariProxyPreparedStatement@486949233 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:32:37.015Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T11:32:37.016Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1d064171 HikariProxyPreparedStatement@486949233 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:32:37.016Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:32:37.018Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x584ced12 org.postgresql.jdbc.PgResultSetMetaData@584ced12] 1]
2023-11-30T11:32:37.019Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:32:37.019Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:32:37.019Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x584ced12 org.postgresql.jdbc.PgResultSetMetaData@584ced12] 2]
2023-11-30T11:32:37.019Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:32:37.019Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:32:37.020Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x584ced12 org.postgresql.jdbc.PgResultSetMetaData@584ced12] 3]
2023-11-30T11:32:37.020Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.020Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.020Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x584ced12 org.postgresql.jdbc.PgResultSetMetaData@584ced12] 6]
2023-11-30T11:32:37.020Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:32:37.020Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:32:37.020Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x584ced12 org.postgresql.jdbc.PgResultSetMetaData@584ced12] 10]
2023-11-30T11:32:37.021Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.021Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.021Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x584ced12 org.postgresql.jdbc.PgResultSetMetaData@584ced12] 11]
2023-11-30T11:32:37.021Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:37.021Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:37.021Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x584ced12 org.postgresql.jdbc.PgResultSetMetaData@584ced12] 12]
2023-11-30T11:32:37.022Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:37.022Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:37.022Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x584ced12 org.postgresql.jdbc.PgResultSetMetaData@584ced12] 13]
2023-11-30T11:32:37.022Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:32:37.022Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:32:37.023Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x584ced12 org.postgresql.jdbc.PgResultSetMetaData@584ced12] 14]
2023-11-30T11:32:37.023Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:32:37.023Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:32:37.024Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3ba0abc HikariProxyPreparedStatement@62524092 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:32:37.024Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107529725962375, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, content-length 502, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure, connection keep-alive, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x69c44428 /127.0.0.1:3230<->/127.0.0.1:63344], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x54e78f98 leihs.procurement.graphql$handler@54e78f98], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T11:32:37.028Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.029Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:32:37.030Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:32:37.030Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:32:37.032Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
2023-11-30T11:32:37.036Z NX-41294 DEBUG [leihs.procurement.graphql:76] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>>>1 #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.047Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>>2 {:id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :firstname Procurement, :lastname Admin}
>>oida>> #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.050Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
>>>3 nil
2023-11-30T11:32:37.078Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.079Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]

>o>pure-handler {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"65184e75-5146-4915-8494-09445d034d15","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"e68ca036-dced-4666-b9e9-a6b55119f013","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Zrittsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id e68ca036-dced-4666-b9e9-a6b55119f013] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>pure-handler::query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}


>o>pure-handler {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"65184e75-5146-4915-8494-09445d034d15","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"e68ca036-dced-4666-b9e9-a6b55119f013","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Zrittsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id e68ca036-dced-4666-b9e9-a6b55119f013] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-11-30T11:32:37.094Z NX-41294 DEBUG [leihs.procurement.graphql:95] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"65184e75-5146-4915-8494-09445d034d15\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"e68ca036-dced-4666-b9e9-a6b55119f013\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Zrittsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "e68ca036-dced-4666-b9e9-a6b55119f013"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-11-30T11:32:37.095Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-11-30T11:32:37.155Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3836c838 HikariProxyPreparedStatement@943114296 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:32:37.155Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:32:37.156Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3836c838 HikariProxyPreparedStatement@943114296 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:32:37.156Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:32:37.157Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3836c838 HikariProxyPreparedStatement@943114296 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:32:37.157Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T11:32:37.158Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3836c838 HikariProxyPreparedStatement@943114296 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:32:37.159Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:32:37.163Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x318a9de8 org.postgresql.jdbc.PgResultSetMetaData@318a9de8] 1]
2023-11-30T11:32:37.163Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:32:37.163Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4b567f09 HikariProxyPreparedStatement@1263959817 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:32:37.163Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:32:37.163Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x318a9de8 org.postgresql.jdbc.PgResultSetMetaData@318a9de8] 2]
2023-11-30T11:32:37.163Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:32:37.164Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:32:37.164Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:32:37.164Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x318a9de8 org.postgresql.jdbc.PgResultSetMetaData@318a9de8] 3]
2023-11-30T11:32:37.164Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.164Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.164Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x318a9de8 org.postgresql.jdbc.PgResultSetMetaData@318a9de8] 6]
2023-11-30T11:32:37.164Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:32:37.165Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4b567f09 HikariProxyPreparedStatement@1263959817 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:32:37.165Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:32:37.165Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:32:37.165Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x318a9de8 org.postgresql.jdbc.PgResultSetMetaData@318a9de8] 10]
2023-11-30T11:32:37.165Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.165Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.165Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x318a9de8 org.postgresql.jdbc.PgResultSetMetaData@318a9de8] 11]
2023-11-30T11:32:37.165Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:37.165Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:37.165Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x318a9de8 org.postgresql.jdbc.PgResultSetMetaData@318a9de8] 12]
2023-11-30T11:32:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x318a9de8 org.postgresql.jdbc.PgResultSetMetaData@318a9de8] 13]
2023-11-30T11:32:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:32:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:32:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x318a9de8 org.postgresql.jdbc.PgResultSetMetaData@318a9de8] 14]
2023-11-30T11:32:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:32:37.166Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:32:37.167Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4b567f09 HikariProxyPreparedStatement@1263959817 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:32:37.167Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T11:32:37.167Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x77bc132a HikariProxyPreparedStatement@2008814378 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:32:37.167Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.169Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4b567f09 HikariProxyPreparedStatement@1263959817 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:32:37.170Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107529905501958, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, content-length 502, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4892c1fc /127.0.0.1:3230<->/127.0.0.1:63347], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x54e78f98 leihs.procurement.graphql$handler@54e78f98], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T11:32:37.173Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.175Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:32:37.175Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:32:37.178Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.178Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7e8f8978 HikariProxyPreparedStatement@2123336056 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:32:37.179Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:32:37.180Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x278426d5 org.postgresql.jdbc.PgResultSetMetaData@278426d5] 1]
2023-11-30T11:32:37.181Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7e8f8978 HikariProxyPreparedStatement@2123336056 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:32:37.181Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:32:37.182Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-11-30T11:32:37.183Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7e8f8978 HikariProxyPreparedStatement@2123336056 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:32:37.183Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
pure-handler >> 2
2023-11-30T11:32:37.185Z NX-41294 DEBUG [leihs.procurement.graphql:76] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>>>1 #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.186Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.188Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7e8f8978 HikariProxyPreparedStatement@2123336056 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
>>>2 {:id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :firstname Procurement, :lastname Admin}
>>oida>> #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.188Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:32:37.188Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
>>>3 nil
2023-11-30T11:32:37.190Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:32:37.190Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:32:37.190Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x278426d5 org.postgresql.jdbc.PgResultSetMetaData@278426d5] 2]
2023-11-30T11:32:37.190Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:32:37.190Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:32:37.190Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x278426d5 org.postgresql.jdbc.PgResultSetMetaData@278426d5] 3]
2023-11-30T11:32:37.190Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x63cb46d4 org.postgresql.jdbc.PgResultSetMetaData@63cb46d4] 1]
2023-11-30T11:32:37.190Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x278426d5 org.postgresql.jdbc.PgResultSetMetaData@278426d5] 6]
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x63cb46d4 org.postgresql.jdbc.PgResultSetMetaData@63cb46d4] 2]
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x278426d5 org.postgresql.jdbc.PgResultSetMetaData@278426d5] 10]
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x63cb46d4 org.postgresql.jdbc.PgResultSetMetaData@63cb46d4] 3]
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.191Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.192Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.192Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.192Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x63cb46d4 org.postgresql.jdbc.PgResultSetMetaData@63cb46d4] 6]
2023-11-30T11:32:37.192Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x278426d5 org.postgresql.jdbc.PgResultSetMetaData@278426d5] 11]
2023-11-30T11:32:37.192Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:32:37.192Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:32:37.192Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:37.192Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x63cb46d4 org.postgresql.jdbc.PgResultSetMetaData@63cb46d4] 10]
2023-11-30T11:32:37.192Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:37.192Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x278426d5 org.postgresql.jdbc.PgResultSetMetaData@278426d5] 12]
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x63cb46d4 org.postgresql.jdbc.PgResultSetMetaData@63cb46d4] 11]
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x278426d5 org.postgresql.jdbc.PgResultSetMetaData@278426d5] 13]
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x63cb46d4 org.postgresql.jdbc.PgResultSetMetaData@63cb46d4] 12]
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:32:37.193Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x278426d5 org.postgresql.jdbc.PgResultSetMetaData@278426d5] 14]
2023-11-30T11:32:37.194Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x63cb46d4 org.postgresql.jdbc.PgResultSetMetaData@63cb46d4] 13]
2023-11-30T11:32:37.194Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:32:37.194Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:32:37.194Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:32:37.194Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:32:37.194Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x63cb46d4 org.postgresql.jdbc.PgResultSetMetaData@63cb46d4] 14]
2023-11-30T11:32:37.194Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:32:37.194Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:32:37.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2a05ebc5 HikariProxyPreparedStatement@705031109 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:32:37.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7617aaf3 HikariProxyPreparedStatement@1981262579 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:32:37.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107529904963833, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, content-length 4019, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x66cbf246 /127.0.0.1:3230<->/127.0.0.1:63344], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 4019, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestsIndexFiltered, :variables {:inspector_priority [LOW MEDIUM HIGH MANDATORY], :onlyOwnRequests false, :state [NEW APPROVED PARTIALLY_APPROVED DENIED], :order_status [NOT_PROCESSED IN_PROGRESS PROCURED ALTERNATIVE_PROCURED NOT_PROCURED], :search nil, :organizations [fb664326-a8ef-4556-af02-07d3127cd9ec], :categories [7d5ba731-edd9-41ba-8773-7337d24c2327], :priority [NORMAL HIGH], :budgetPeriods [8b8fe440-cae5-4bf9-8048-d0ec2399faa1]}, :query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x54e78f98 leihs.procurement.graphql$handler@54e78f98], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {2023-11-30T11:32:37.198Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107529905349250, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, content-length 534, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x2a76a4de /127.0.0.1:3230<->/127.0.0.1:63345], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x54e78f98 leihs.procurement.graphql$handler@54e78f98], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T11:32:37.199Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.200Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:32:37.200Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:32:37.200Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.200Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:32:37.200Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:32:37.201Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.201Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.201Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.202Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:335] - HikariPool-1 - Add connection elided, waiting=1, adders pending/running=2
2023-11-30T11:32:37.202Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:335] - HikariPool-1 - Add connection elided, waiting=1, adders pending/running=2
2023-11-30T11:32:37.203Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:335] - HikariPool-1 - Add connection elided, waiting=1, adders pending/running=2

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil

> 1 anti-csrf-token >  2023-11-30T11:32:37.203Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:32:37.203Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil

>o>pure-handler {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"65184e75-5146-4915-8494-09445d034d15","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"e68ca036-dced-4666-b9e9-a6b55119f013","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Zrittsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id e68ca036-dced-4666-b9e9-a6b55119f013] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>pure-handler::query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}


>o>pure-handler {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"65184e75-5146-4915-8494-09445d034d15","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"e68ca036-dced-4666-b9e9-a6b55119f013","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Zrittsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id e68ca036-dced-4666-b9e9-a6b55119f013] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-11-30T11:32:37.206Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7719fce6
2023-11-30T11:32:37.206Z NX-41294 DEBUG [leihs.procurement.graphql:95] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"65184e75-5146-4915-8494-09445d034d15\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"e68ca036-dced-4666-b9e9-a6b55119f013\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Zrittsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "e68ca036-dced-4666-b9e9-a6b55119f013"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
pure-handler >> 2
2023-11-30T11:32:37.206Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-11-30T11:32:37.206Z NX-41294 DEBUG [leihs.procurement.graphql:76] - graphql query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
 with variables {}
pure-handler >> 2
2023-11-30T11:32:37.214Z NX-41294 DEBUG [leihs.procurement.graphql:76] - graphql query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
 with variables {:inspector_priority ["LOW" "MEDIUM" "HIGH" "MANDATORY"], :onlyOwnRequests false, :state ["NEW" "APPROVED" "PARTIALLY_APPROVED" "DENIED"], :order_status ["NOT_PROCESSED" "IN_PROGRESS" "PROCURED" "ALTERNATIVE_PROCURED" "NOT_PROCURED"], :search nil, :organizations ["fb664326-a8ef-4556-af02-07d3127cd9ec"], :categories ["7d5ba731-edd9-41ba-8773-7337d24c2327"], :priority ["NORMAL" "HIGH"], :budgetPeriods ["8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]}
>>>get-dashboard
>>args {:inspector_priority [:LOW :MEDIUM :HIGH :MANDATORY], :organization_id [fb664326-a8ef-4556-af02-07d3127cd9ec], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search nil, :priority [:NORMAL :HIGH], :budget_period_id [8b8fe440-cae5-4bf9-8048-d0ec2399faa1], :category_id [7d5ba731-edd9-41ba-8773-7337d24c2327]}
>>value nil
>>mainCatsSql [SELECT procurement_main_categories.* FROM procurement_main_categories ORDER BY procurement_main_categories.name ASC]
>>mainCats [{:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1}]
>>queryA1 [SELECT * FROM procurement_budget_periods WHERE procurement_budget_periods.id IN (?) ORDER BY end_date DESC #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]
>>resultA1 [{:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}]
>>resultA1-2 [{:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}]
>>requestsB2-triggerError {:inspector_priority [:LOW :MEDIUM :HIGH :MANDATORY], :organization_id [fb664326-a8ef-4556-af02-07d3127cd9ec], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search nil, :priority [:NORMAL :HIGH], :budget_period_id [8b8fe440-cae5-4bf9-8048-d0ec2399faa1], :category_id [7d5ba731-edd9-41ba-8773-7337d24c2327]} nil
>>>requests::get-requests ======================
>>>args {:inspector_priority [:LOW :MEDIUM :HIGH :MANDATORY], :organization_id [fb664326-a8ef-4556-af02-07d3127cd9ec], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search nil, :priority [:NORMAL :HIGH], :budget_period_id [8b8fe440-cae5-4bf9-8048-d0ec2399faa1], :category_id [7d5ba731-edd9-41ba-8773-7337d24c2327]}
>>>value nil
>>>auth-entity
>>>get-requests>> before first
>o> 1-After requests-query-map:
>o> helper1
>o> helper2 [7d5ba731-edd9-41ba-8773-7337d24c2327] [8b8fe440-cae5-4bf9-8048-d0ec2399faa1] [fb664326-a8ef-4556-af02-07d3127cd9ec]
>o> helper3
>o> helper4
>o> helper5
>o> order-status (not_processed in_progress procured alternative_procured not_procured)
>o> helper6
2023-11-30T11:32:37.234Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:32:37.234Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:32:37.235Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.236Z NX-41294 DEBUG [leihs.procurement.permissions.user:103] - (->> [viewer? inspector? admin?] (map (fn* [p1__39094#] (p1__39094# tx auth-entity))) (some true?)) => true
>o> helper7 true
>o> requests-base-query-with-state
>o> state-sql true
>o> s-map  {:NEW [:= :procurement_requests.approved_quantity nil], :APPROVED [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity], :PARTIALLY_APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]], :DENIED [:= :procurement_requests.approved_quantity 0]}
>o>map-4 (>o> map NEW
>o> map [:= :procurement_requests.approved_quantity nil]
:case >o> map NEW
[:= :procurement_requests.approved_quantity nil] >o> map APPROVED
>o> map [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]
NEW >o> map APPROVED
[:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] >o> map PARTIALLY_APPROVED
>o> map [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]
APPROVED >o> map PARTIALLY_APPROVED
[:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] >o> map DENIED
>o> map [:= :procurement_requests.approved_quantity 0]
PARTIALLY_APPROVED >o> map DENIED
[:= :procurement_requests.approved_quantity 0] DENIED)
>o>map-5 (:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)
2023-11-30T11:32:37.238Z NX-41294 DEBUG [leihs.procurement.resources.request:163] - result => [[(:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED")]]
>o> join-and-nest-budget-periods
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id]]}
>o> tbl :procurement_budget_periods_2
>o> nest-key :budget_period
>o> join-and-nest-categories
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id]]}
>o> tbl :models
>o> nest-key :model
>o> join-and-nest-templates
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id]]}
>o> tbl :procurement_templates
>o> nest-key :template
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :suppliers
>o> nest-key :supplier
>o> join-and-nest-users
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]] [[[:row_to_json :suppliers]] :supplier]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :users
>o> nest-key :user
>o> helper8
>o> 2-After apply-scope: {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]] [[[:row_to_json :suppliers]] :supplier] [[[:row_to_json :users]] :user]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]], :where [:and [:in :procurement_requests.category_id ([:cast 7d5ba731-edd9-41ba-8773-7337d24c2327 :uuid])] [:in :procurement_requests.budget_period_id ([:cast 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 :uuid])] [:in :procurement_requests.organization_id ([:cast fb664326-a8ef-4556-af02-07d3127cd9ec :uuid])] [:in :procurement_requests.priority (normal high)] [:in :procurement_requests.inspector_priority (low medium high mandatory)] [:or [:= :procurement_requests.approved_quantity nil] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] [:= :procurement_requests.approved_quantity 0]] [:in :procurement_requests.order_status ([[:cast not_processed :order_status_enum]] [[:cast in_progress :order_status_enum]] [[:cast procured :order_status_enum]] [[:cast alternative_procured :order_status_enum]] [[:cast not_procured :order_status_enum]])]]}
>o> apply-scope #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:32:37.243Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]

>o>pure-handler {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message Non-nullable field was null., :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message Non-nullable field was null., :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message Non-nullable field was null., :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message Non-nullable field was null., :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message Non-nullable field was null., :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message Non-nullable field was null., :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}

>o>pure-handler::query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}


>o>pure-handler {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message Non-nullable field was null., :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message Non-nullable field was null., :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message Non-nullable field was null., :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message Non-nullable field was null., :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message Non-nullable field was null., :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message Non-nullable field was null., :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}
2023-11-30T11:32:37.244Z NX-41294 DEBUG [leihs.procurement.graphql:95] - result => {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message "Non-nullable field was null.", :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message "Non-nullable field was null.", :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}
2023-11-30T11:32:37.245Z NX-41294 DEBUG [leihs.procurement.graphql:96] - {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message "Non-nullable field was null.", :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message "Non-nullable field was null.", :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}
2023-11-30T11:32:37.245Z NX-41294 DEBUG [leihs.procurement.permissions.requests:25] - sqlmap => {:select [[[:raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*"]] [[[(:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED")]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw "row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category"]] [[[:row_to_json :models]] :model] [[:raw "row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization"]] [[[:row_to_json :procurement_templates]] :template] [[:raw "row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room"]] [[[:row_to_json :suppliers]] :supplier] [[[:row_to_json :users]] :user]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by [[[:raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]], :where [:and [:in :procurement_requests.category_id ([:cast "7d5ba731-edd9-41ba-8773-7337d24c2327" :uuid])] [:in :procurement_requests.budget_period_id ([:cast "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" :uuid])] [:in :procurement_requests.organization_id ([:cast "fb664326-a8ef-4556-af02-07d3127cd9ec" :uuid])] [:in :procurement_requests.priority ("normal" "high")] [:in :procurement_requests.inspector_priority ("low" "medium" "high" "mandatory")] [:or [:= :procurement_requests.approved_quantity nil] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] [:= :procurement_requests.approved_quantity 0]] [:in :procurement_requests.order_status ([[:cast "not_processed" :order_status_enum]] [[:cast "in_progress" :order_status_enum]] [[:cast "procured" :order_status_enum]] [[:cast "alternative_procured" :order_status_enum]] [[:cast "not_procured" :order_status_enum]])]]}
2023-11-30T11:32:37.245Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>o> 3-After sql-format: {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]] [[[:row_to_json :suppliers]] :supplier] [[[:row_to_json :users]] :user]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]], :where [:and [:in :procurement_requests.category_id ([:cast 7d5ba731-edd9-41ba-8773-7337d24c2327 :uuid])] [:in :procurement_requests.budget_period_id ([:cast 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 :uuid])] [:in :procurement_requests.organization_id ([:cast fb664326-a8ef-4556-af02-07d3127cd9ec :uuid])] [:in :procurement_requests.priority (normal high)] [:in :procurement_requests.inspector_priority (low medium high mandatory)] [:or [:= :procurement_requests.approved_quantity nil] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] [:= :procurement_requests.approved_quantity 0]] [:in :procurement_requests.order_status ([[:cast not_processed :order_status_enum]] [[:cast in_progress :order_status_enum]] [[:cast procured :order_status_enum]] [[:cast alternative_procured :order_status_enum]] [[:cast not_procured :order_status_enum]])]]}
2023-11-30T11:32:37.249Z NX-41294 DEBUG [leihs.procurement.resources.requests:247] - (sql-format <>) => ["SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, ((CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END)) AS state, (ROW_TO_JSON(procurement_budget_periods_2)) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, (ROW_TO_JSON(models)) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, (ROW_TO_JSON(procurement_templates)) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, (ROW_TO_JSON(suppliers)) AS supplier, (ROW_TO_JSON(users)) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) AS procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations AS procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE (procurement_requests.category_id IN (CAST(? AS UUID))) AND (procurement_requests.budget_period_id IN (CAST(? AS UUID))) AND (procurement_requests.organization_id IN (CAST(? AS UUID))) AND (procurement_requests.priority IN (?, ?)) AND (procurement_requests.inspector_priority IN (?, ?, ?, ?)) AND ((procurement_requests.approved_quantity IS NULL) OR (procurement_requests.approved_quantity >= procurement_requests.requested_quantity) OR ((procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?)) OR (procurement_requests.approved_quantity = ?)) AND (procurement_requests.order_status IN ((CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, ''))) ASC" "NEW" "APPROVED" 0 "PARTIALLY_APPROVED" 0 "DENIED" "7d5ba731-edd9-41ba-8773-7337d24c2327" "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" "fb664326-a8ef-4556-af02-07d3127cd9ec" "normal" "high" "low" "medium" "high" "mandatory" 0 0 "not_processed" "in_progress" "procured" "alternative_procured" "not_procured"]
2023-11-30T11:32:37.251Z NX-41294 DEBUG [leihs.procurement.resources.requests:252] - query => ["SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, ((CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END)) AS state, (ROW_TO_JSON(procurement_budget_periods_2)) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, (ROW_TO_JSON(models)) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, (ROW_TO_JSON(procurement_templates)) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, (ROW_TO_JSON(suppliers)) AS supplier, (ROW_TO_JSON(users)) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) AS procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations AS procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE (procurement_requests.category_id IN (CAST(? AS UUID))) AND (procurement_requests.budget_period_id IN (CAST(? AS UUID))) AND (procurement_requests.organization_id IN (CAST(? AS UUID))) AND (procurement_requests.priority IN (?, ?)) AND (procurement_requests.inspector_priority IN (?, ?, ?, ?)) AND ((procurement_requests.approved_quantity IS NULL) OR (procurement_requests.approved_quantity >= procurement_requests.requested_quantity) OR ((procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?)) OR (procurement_requests.approved_quantity = ?)) AND (procurement_requests.order_status IN ((CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, ''))) ASC" "NEW" "APPROVED" 0 "PARTIALLY_APPROVED" 0 "DENIED" "7d5ba731-edd9-41ba-8773-7337d24c2327" "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" "fb664326-a8ef-4556-af02-07d3127cd9ec" "normal" "high" "low" "medium" "high" "mandatory" 0 0 "not_processed" "in_progress" "procured" "alternative_procured" "not_procured"]
>o>ring-request-3 [SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, ((CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END)) AS state, (ROW_TO_JSON(procurement_budget_periods_2)) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, (ROW_TO_JSON(models)) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, (ROW_TO_JSON(procurement_templates)) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, (ROW_TO_JSON(suppliers)) AS supplier, (ROW_TO_JSON(users)) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) AS procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations AS procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE (procurement_requests.category_id IN (CAST(? AS UUID))) AND (procurement_requests.budget_period_id IN (CAST(? AS UUID))) AND (procurement_requests.organization_id IN (CAST(? AS UUID))) AND (procurement_requests.priority IN (?, ?)) AND (procurement_requests.inspector_priority IN (?, ?, ?, ?)) AND ((procurement_requests.approved_quantity IS NULL) OR (procurement_requests.approved_quantity >= procurement_requests.requested_quantity) OR ((procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?)) OR (procurement_requests.approved_quantity = ?)) AND (procurement_requests.order_status IN ((CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, ''))) ASC NEW APPROVED 0 PARTIALLY_APPROVED 0 DENIED 7d5ba731-edd9-41ba-8773-7337d24c2327 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 fb664326-a8ef-4556-af02-07d3127cd9ec normal high low medium high mandatory 0 0 not_processed in_progress procured alternative_procured not_procured]
2023-11-30T11:32:37.253Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:32:37.254Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:32:37.254Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.255Z NX-41294 DEBUG [leihs.procurement.permissions.user:103] - (->> [viewer? inspector? admin?] (map (fn* [p1__39094#] (p1__39094# tx auth-entity))) (some true?)) => true
>>>ring-request-procRequests [{:category {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :supplier nil, :motivation Corporis commodi provident nam., :accounting_type aquisition, :template_id nil, :article_number nil, :inspector_priority medium, :price_cents 0, :budget_period {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :article_name Mediocre Aluminum Shoes, :organization_id #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :replacement true, :template nil, :state NEW, :organization {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :supplier_name nil, :order_status not_processed, :requested_quantity 1, :updated_at #inst "2023-11-24T19:25:51.635215000-00:00", :model_id nil, :priority normal, :supplier_id nil, :budget_period_id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency CHF, :user_id #uuid "2187a76b-557a-4775-9a1e-778142161819", :room {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :inspection_comment nil, :approved_quantity nil, :order_quantity nil, :room_id #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :user {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :receiver nil, :internal_order_number nil, :category_id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :created_at #inst "2023-11-24T19:25:51.635215000-00:00", :order_comment nil, :short_id Budget-Period-Past.001, :model nil}]
>o>requestsB2 (2023-11-30T11:32:37.272Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => 2187a76b-557a-4775-9a1e-778142161819
2023-11-30T11:32:37.274Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => [SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID) #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.274Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => [SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL]
2023-11-30T11:32:37.275Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => [SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID) #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:32:37.279Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => [SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE (user_id IS NULL) AND (category_id = CAST(? AS UUID)) 7d5ba731-edd9-41ba-8773-7337d24c2327]
2023-11-30T11:32:37.279Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => [SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE (user_id IS NULL) AND (category_id = CAST(? AS UUID)) 7d5ba731-edd9-41ba-8773-7337d24c2327]
{:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}})
>o>dashboard-cache-keyB2 {:id 1608672852}
2023-11-30T11:32:37.283Z NX-41294 DEBUG [leihs.procurement.dashboard:200] - (count requests) => 1
2023-11-30T11:32:37.284Z NX-41294 DEBUG [leihs.procurement.dashboard:201] - (cache-key dashboard-cache-key) => 1608672852

>o> final-result (>o> bp {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}
>o> mc {:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1}
>o> 1requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}})

>o> result 2a (>o> c {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}
>o> c {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}
>o> 2 requests* ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}})

>o> result 1a {:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil} 


>o> filter-and-assoc-cats (json) {"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Category C1","requests":[{"category":{"read":true,"write":false,"default":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","general_ledger_account":null,"cost_center":null,"procurement_account":null},"required":true,"value":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","cost_center":null,"main_category":{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1"},"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","procurement_account":null,"general_ledger_account":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"motivation":{"read":true,"write":false,"required":true,"value":"Corporis commodi provident nam.","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"accounting_type":{"read":true,"write":false,"default":"aquisition","required":true,"value":"aquisition","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"template_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"actionPermissions":{"edit":true,"delete":false,"moveBudgetPeriod":false,"moveCategory":false},"article_number":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspector_priority":{"read":true,"write":false,"default":"MEDIUM","required":true,"value":"medium","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"price_cents":{"read":true,"write":false,"default":0,"required":true,"value":0,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period":{"read":true,"write":false,"default":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","created_at":"2023-11-24T19:25:51.605Z","updated_at":"2023-11-24T19:25:51.605Z"},"required":true,"value":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"article_name":{"read":true,"write":false,"default":null,"required":true,"value":"Mediocre Aluminum Shoes","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"organization_id":{"value":"fb664326-a8ef-4556-af02-07d3127cd9ec","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"replacement":{"read":true,"write":false,"default":null,"required":true,"value":true,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"DELETE":false,"template":{"read":true,"write":false,"default":null,"required":true,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"state":"NEW","organization":{"value":{"id":"fb664326-a8ef-4556-af02-07d3127cd9ec","name":"Beauty & Kids","parent_id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","shortname":null,"department":{"id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","name":"Home, Jewelry & Computers","parent_id":null,"shortname":null}},"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_name":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_status":{"read":true,"write":true,"default":"NOT_PROCURED","required":true,"value":"not_processed","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"requested_quantity":{"read":true,"write":false,"required":true,"value":1,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"updated_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"model_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"priority":{"read":true,"write":false,"default":"NORMAL","required":true,"value":"normal","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period_id":{"value":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"id":"40284a6b-cf5e-41c1-af6c-dc423894ee11","price_currency":{"read":true,"write":false,"default":"CHF","required":true,"value":"CHF","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user_id":{"value":"2187a76b-557a-4775-9a1e-778142161819","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room":{"read":true,"write":false,"default":{"id":"b8927fd2-014c-48c2-b095-fa1d5620debe","name":"general room","description":null,"building_id":"abae04c5-d767-425e-acc2-7ce04df645d1","general":true,"building":{"id":"abae04c5-d767-425e-acc2-7ce04df645d1","name":"general building","code":null}},"required":true,"value":{"id":"64bfb152-ea6c-42da-98c6-325afeb462bc","name":"reception room","general":false,"building":{"id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","code":null,"name":"9594 Beer Extension"},"building_id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","description":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspection_comment":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"approved_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room_id":{"value":"64bfb152-ea6c-42da-98c6-325afeb462bc","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user":{"read":true,"write":false,"required":true,"default":{"id":"2187a76b-557a-4775-9a1e-778142161819","firstname":"Lynsey","lastname":"Kertzmann"},"value":{"system_admin_protected":false,"address":null,"email":"chanda@ortiz.net","pool_protected":false,"last_sign_in_at":null,"img32_url":null,"account_enabled":true,"lastname":"Kertzmann","phone":null,"img_digest":null,"org_id":null,"extended_info":null,"secondary_email":null,"city":null,"settings":null,"is_admin":false,"organization":"local","login":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","updated_at":"2023-11-24T20:25:51.614964+01:00","firstname":"Lynsey","zip":null,"id":"2187a76b-557a-4775-9a1e-778142161819","url":null,"password_sign_in_enabled":true,"account_disabled_at":null,"is_system_admin":false,"badge_id":null,"language_locale":null,"img256_url":null,"country":null,"delegator_user_id":null,"created_at":"2023-11-24T20:25:51.614964+01:00","admin_protected":false},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"receiver":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"internal_order_number":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"category_id":{"value":"7d5ba731-edd9-41ba-8773-7337d24c2327","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"created_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_comment":{"read":true,"write":true,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"short_id":"Budget-Period-Past.001","model":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"}}],"general_ledger_account":null,"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","total_price_cents":null,"procurement_account":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327","cost_center":null} 


>o> filter-and-assoc-cats -> :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"} 


>o> filter-and-assoc-cats -> :budget_period (json) {"read":true,"write":false,"default":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","created_at":"2023-11-24T19:25:51.605Z","updated_at":"2023-11-24T19:25:51.605Z"},"required":true,"value":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"} 

{:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil}) 


>o> result 3a {:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1, :categories ({:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil}), :total_price_cents nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb} 


>o> :assoc-data {:main_categories ({:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1, :categories ({:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil}), :total_price_cents nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb}), :name Budget-Period-Past, :updated_at #inst "2023-11-24T19:25:51.605131000-00:00", :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :total_price_cents nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :created_at #inst "2023-11-24T19:25:51.605131000-00:00"} 


>o> :assoc-data (json) {"main_categories":[{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1","categories":[{"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Category C1","requests":[{"category":{"read":true,"write":false,"default":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","general_ledger_account":null,"cost_center":null,"procurement_account":null},"required":true,"value":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","cost_center":null,"main_category":{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1"},"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","procurement_account":null,"general_ledger_account":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"motivation":{"read":true,"write":false,"required":true,"value":"Corporis commodi provident nam.","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"accounting_type":{"read":true,"write":false,"default":"aquisition","required":true,"value":"aquisition","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"template_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"actionPermissions":{"edit":true,"delete":false,"moveBudgetPeriod":false,"moveCategory":false},"article_number":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspector_priority":{"read":true,"write":false,"default":"MEDIUM","required":true,"value":"medium","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"price_cents":{"read":true,"write":false,"default":0,"required":true,"value":0,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period":{"read":true,"write":false,"default":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","created_at":"2023-11-24T19:25:51.605Z","updated_at":"2023-11-24T19:25:51.605Z"},"required":true,"value":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"article_name":{"read":true,"write":false,"default":null,"required":true,"value":"Mediocre Aluminum Shoes","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"organization_id":{"value":"fb664326-a8ef-4556-af02-07d3127cd9ec","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"replacement":{"read":true,"write":false,"default":null,"required":true,"value":true,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"DELETE":false,"template":{"read":true,"write":false,"default":null,"required":true,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"state":"NEW","organization":{"value":{"id":"fb664326-a8ef-4556-af02-07d3127cd9ec","name":"Beauty & Kids","parent_id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","shortname":null,"department":{"id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","name":"Home, Jewelry & Computers","parent_id":null,"shortname":null}},"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_name":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_status":{"read":true,"write":true,"default":"NOT_PROCURED","required":true,"value":"not_processed","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"requested_quantity":{"read":true,"write":false,"required":true,"value":1,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"updated_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"model_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"priority":{"read":true,"write":false,"default":"NORMAL","required":true,"value":"normal","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period_id":{"value":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"id":"40284a6b-cf5e-41c1-af6c-dc423894ee11","price_currency":{"read":true,"write":false,"default":"CHF","required":true,"value":"CHF","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user_id":{"value":"2187a76b-557a-4775-9a1e-778142161819","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room":{"read":true,"write":false,"default":{"id":"b8927fd2-014c-48c2-b095-fa1d5620debe","name":"general room","description":null,"building_id":"abae04c5-d767-425e-acc2-7ce04df645d1","general":true,"building":{"id":"abae04c5-d767-425e-acc2-7ce04df645d1","name":"general building","code":null}},"required":true,"value":{"id":"64bfb152-ea6c-42da-98c6-325afeb462bc","name":"reception room","general":false,"building":{"id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","code":null,"name":"9594 Beer Extension"},"building_id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","description":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspection_comment":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"approved_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room_id":{"value":"64bfb152-ea6c-42da-98c6-325afeb462bc","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user":{"read":true,"write":false,"required":true,"default":{"id":"2187a76b-557a-4775-9a1e-778142161819","firstname":"Lynsey","lastname":"Kertzmann"},"value":{"system_admin_protected":false,"address":null,"email":"chanda@ortiz.net","pool_protected":false,"last_sign_in_at":null,"img32_url":null,"account_enabled":true,"lastname":"Kertzmann","phone":null,"img_digest":null,"org_id":null,"extended_info":null,"secondary_email":null,"city":null,"settings":null,"is_admin":false,"organization":"local","login":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","updated_at":"2023-11-24T20:25:51.614964+01:00","firstname":"Lynsey","zip":null,"id":"2187a76b-557a-4775-9a1e-778142161819","url":null,"password_sign_in_enabled":true,"account_disabled_at":null,"is_system_admin":false,"badge_id":null,"language_locale":null,"img256_url":null,"country":null,"delegator_user_id":null,"created_at":"2023-11-24T20:25:51.614964+01:00","admin_protected":false},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"receiver":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"internal_order_number":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"category_id":{"value":"7d5ba731-edd9-41ba-8773-7337d24c2327","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"created_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_comment":{"read":true,"write":true,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"short_id":"Budget-Period-Past.001","model":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"}}],"general_ledger_account":null,"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","total_price_cents":null,"procurement_account":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327","cost_center":null}],"total_price_cents":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb"}],"name":"Budget-Period-Past","updated_at":"2023-11-24T19:25:51.605Z","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","total_price_cents":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1","created_at":"2023-11-24T19:25:51.605Z"} 

{:main_categories ({:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1, :categories ({:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil}), :total_price_cents nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb}), :name Budget-Period-Past, :updated_at #inst "2023-11-24T19:25:51.605131000-00:00", :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :total_price_cents nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :created_at #inst "2023-11-24T19:25:51.605131000-00:00"}) 


>o> final-result (json) [{"main_categories":[{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1","categories":[{"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Category C1","requests":[{"category":{"read":true,"write":false,"default":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","general_ledger_account":null,"cost_center":null,"procurement_account":null},"required":true,"value":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","cost_center":null,"main_category":{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1"},"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","procurement_account":null,"general_ledger_account":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"motivation":{"read":true,"write":false,"required":true,"value":"Corporis commodi provident nam.","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"accounting_type":{"read":true,"write":false,"default":"aquisition","required":true,"value":"aquisition","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"template_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"actionPermissions":{"edit":true,"delete":false,"moveBudgetPeriod":false,"moveCategory":false},"article_number":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspector_priority":{"read":true,"write":false,"default":"MEDIUM","required":true,"value":"medium","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"price_cents":{"read":true,"write":false,"default":0,"required":true,"value":0,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period":{"read":true,"write":false,"default":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","created_at":"2023-11-24T19:25:51.605Z","updated_at":"2023-11-24T19:25:51.605Z"},"required":true,"value":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"article_name":{"read":true,"write":false,"default":null,"required":true,"value":"Mediocre Aluminum Shoes","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"organization_id":{"value":"fb664326-a8ef-4556-af02-07d3127cd9ec","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"replacement":{"read":true,"write":false,"default":null,"required":true,"value":true,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"DELETE":false,"template":{"read":true,"write":false,"default":null,"required":true,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"state":"NEW","organization":{"value":{"id":"fb664326-a8ef-4556-af02-07d3127cd9ec","name":"Beauty & Kids","parent_id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","shortname":null,"department":{"id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","name":"Home, Jewelry & Computers","parent_id":null,"shortname":null}},"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_name":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_status":{"read":true,"write":true,"default":"NOT_PROCURED","required":true,"value":"not_processed","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"requested_quantity":{"read":true,"write":false,"required":true,"value":1,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"updated_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"model_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"priority":{"read":true,"write":false,"default":"NORMAL","required":true,"value":"normal","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period_id":{"value":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"id":"40284a6b-cf5e-41c1-af6c-dc423894ee11","price_currency":{"read":true,"write":false,"default":"CHF","required":true,"value":"CHF","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user_id":{"value":"2187a76b-557a-4775-9a1e-778142161819","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room":{"read":true,"write":false,"default":{"id":"b8927fd2-014c-48c2-b095-fa1d5620debe","name":"general room","description":null,"building_id":"abae04c5-d767-425e-acc2-7ce04df645d1","general":true,"building":{"id":"abae04c5-d767-425e-acc2-7ce04df645d1","name":"general building","code":null}},"required":true,"value":{"id":"64bfb152-ea6c-42da-98c6-325afeb462bc","name":"reception room","general":false,"building":{"id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","code":null,"name":"9594 Beer Extension"},"building_id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","description":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspection_comment":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"approved_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room_id":{"value":"64bfb152-ea6c-42da-98c6-325afeb462bc","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user":{"read":true,"write":false,"required":true,"default":{"id":"2187a76b-557a-4775-9a1e-778142161819","firstname":"Lynsey","lastname":"Kertzmann"},"value":{"system_admin_protected":false,"address":null,"email":"chanda@ortiz.net","pool_protected":false,"last_sign_in_at":null,"img32_url":null,"account_enabled":true,"lastname":"Kertzmann","phone":null,"img_digest":null,"org_id":null,"extended_info":null,"secondary_email":null,"city":null,"settings":null,"is_admin":false,"organization":"local","login":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","updated_at":"2023-11-24T20:25:51.614964+01:00","firstname":"Lynsey","zip":null,"id":"2187a76b-557a-4775-9a1e-778142161819","url":null,"password_sign_in_enabled":true,"account_disabled_at":null,"is_system_admin":false,"badge_id":null,"language_locale":null,"img256_url":null,"country":null,"delegator_user_id":null,"created_at":"2023-11-24T20:25:51.614964+01:00","admin_protected":false},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"receiver":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"internal_order_number":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"category_id":{"value":"7d5ba731-edd9-41ba-8773-7337d24c2327","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"created_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_comment":{"read":true,"write":true,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"short_id":"Budget-Period-Past.001","model":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"}}],"general_ledger_account":null,"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","total_price_cents":null,"procurement_account":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327","cost_center":null}],"total_price_cents":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb"}],"name":"Budget-Period-Past","updated_at":"2023-11-24T19:25:51.605Z","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","total_price_cents":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1","created_at":"2023-11-24T19:25:51.605Z"}] 

2023-11-30T11:32:37.323Z NX-41294 DEBUG [leihs.procurement.dashboard:202] - (determine-budget-periods requests tx dashboard-cache-key main-cats bps) => ({:main_categories ({:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name "Main Category MC1", :categories ({:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name "Category C1", :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name "Category C1", :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id "7d5ba731-edd9-41ba-8773-7337d24c2327", :name "Category C1", :cost_center nil, :main_category {:id "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name "Main Category MC1"}, :main_category_id "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value "Corporis commodi provident nam.", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default "aquisition", :required true, :value "aquisition", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default "MEDIUM", :required true, :value "medium", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name "Budget-Period-Past", :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name "Budget-Period-Past", :inspection_start_date "2023-08-24T00:00:00+02:00", :end_date "2023-11-23T00:00:00+01:00", :created_at "2023-11-24T20:25:51.605131", :updated_at "2023-11-24T20:25:51.605131", :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value "Mediocre Aluminum Shoes", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state "NEW", :organization {:value {:id "fb664326-a8ef-4556-af02-07d3127cd9ec", :name "Beauty & Kids", :parent_id "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9", :shortname nil, :department {:id "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9", :name "Home, Jewelry & Computers", :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default "NOT_PROCURED", :required true, :value "not_processed", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default "NORMAL", :required true, :value "normal", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default "CHF", :required true, :value "CHF", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name "general room", :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name "general building", :code nil}}, :required true, :value {:id "64bfb152-ea6c-42da-98c6-325afeb462bc", :name "reception room", :general false, :building {:id "3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c", :code nil, :name "9594 Beer Extension"}, :building_id "3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c", :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname "Lynsey", :lastname "Kertzmann"}, :value {:system_admin_protected false, :address nil, :email "chanda@ortiz.net", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kertzmann", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization "local", :login nil, :searchable "Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey", :updated_at "2023-11-24T20:25:51.614964+01:00", :firstname "Lynsey", :zip nil, :id "2187a76b-557a-4775-9a1e-778142161819", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at "2023-11-24T20:25:51.614964+01:00", :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id "Budget-Period-Past.001", :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327", :cost_center nil}), :total_price_cents nil, :cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb"}), :name "Budget-Period-Past", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00", :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :total_price_cents nil, :cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :created_at #inst "2023-11-24T19:25:51.605131000-00:00"})

>o>pure-handler {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey 1608672852] [:total_count 1] [:budget_periods [nil]] [:__typename :Dashboard])]), :errors ({:message Non-nullable field was null., :locations [{:line 11, :column 7}], :path [:dashboard :budget_periods 0 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 17, :column 9}], :path [:dashboard :budget_periods 0 :main_categories 0 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 22, :column 11}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :total_price_cents]} {:message Field resolver returned an undefined enum value., :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value normal, :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message Field resolver returned an undefined enum value., :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value medium, :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message Field resolver returned an undefined enum value., :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value not_processed, :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message Non-nullable field was null., :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}

>o>pure-handler::query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}


>o>pure-handler {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey 1608672852] [:total_count 1] [:budget_periods [nil]] [:__typename :Dashboard])]), :errors ({:message Non-nullable field was null., :locations [{:line 11, :column 7}], :path [:dashboard :budget_periods 0 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 17, :column 9}], :path [:dashboard :budget_periods 0 :main_categories 0 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 22, :column 11}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :total_price_cents]} {:message Field resolver returned an undefined enum value., :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value normal, :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message Field resolver returned an undefined enum value., :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value medium, :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message Field resolver returned an undefined enum value., :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value not_processed, :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message Non-nullable field was null., :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}
2023-11-30T11:32:37.354Z NX-41294 DEBUG [leihs.procurement.graphql:95] - result => {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey "1608672852"] [:total_count 1] [:budget_periods [nil]] [:__typename :Dashboard])]), :errors ({:message "Non-nullable field was null.", :locations [{:line 11, :column 7}], :path [:dashboard :budget_periods 0 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 17, :column 9}], :path [:dashboard :budget_periods 0 :main_categories 0 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 22, :column 11}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :total_price_cents]} {:message "Field resolver returned an undefined enum value.", :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value "normal", :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value "medium", :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value "not_processed", :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message "Non-nullable field was null.", :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}
2023-11-30T11:32:37.355Z NX-41294 DEBUG [leihs.procurement.graphql:96] - {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey "1608672852"] [:total_count 1] [:budget_periods [nil]] [:__typename :Dashboard])]), :errors ({:message "Non-nullable field was null.", :locations [{:line 11, :column 7}], :path [:dashboard :budget_periods 0 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 17, :column 9}], :path [:dashboard :budget_periods 0 :main_categories 0 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 22, :column 11}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :total_price_cents]} {:message "Field resolver returned an undefined enum value.", :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value "normal", :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value "medium", :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value "not_processed", :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message "Non-nullable field was null.", :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}
2023-11-30T11:32:37.355Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-11-30T11:32:46.726Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:32:46.735Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:32:46.735Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:32:46.760Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-11-30T11:32:46.761Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2023-11-30T11:32:46.762Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:33:16.741Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:33:16.743Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:33:16.743Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:33:16.768Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-11-30T11:33:16.768Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2023-11-30T11:33:16.769Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:33:35.167Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7d5ee8ef HikariProxyPreparedStatement@2103372015 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:33:35.167Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:33:35.168Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7d5ee8ef HikariProxyPreparedStatement@2103372015 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:33:35.169Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:33:35.170Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7d5ee8ef HikariProxyPreparedStatement@2103372015 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:33:35.170Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T11:33:35.174Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7d5ee8ef HikariProxyPreparedStatement@2103372015 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:33:35.174Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:33:35.177Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x234aea80 org.postgresql.jdbc.PgResultSetMetaData@234aea80] 1]
2023-11-30T11:33:35.178Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:33:35.178Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:33:35.178Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x234aea80 org.postgresql.jdbc.PgResultSetMetaData@234aea80] 2]
2023-11-30T11:33:35.178Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:33:35.178Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:33:35.178Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x234aea80 org.postgresql.jdbc.PgResultSetMetaData@234aea80] 3]
2023-11-30T11:33:35.179Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.179Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.179Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x234aea80 org.postgresql.jdbc.PgResultSetMetaData@234aea80] 6]
2023-11-30T11:33:35.179Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:33:35.179Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:33:35.180Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x234aea80 org.postgresql.jdbc.PgResultSetMetaData@234aea80] 10]
2023-11-30T11:33:35.180Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.180Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.180Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x234aea80 org.postgresql.jdbc.PgResultSetMetaData@234aea80] 11]
2023-11-30T11:33:35.180Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.180Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.180Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x234aea80 org.postgresql.jdbc.PgResultSetMetaData@234aea80] 12]
2023-11-30T11:33:35.180Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.181Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.181Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x234aea80 org.postgresql.jdbc.PgResultSetMetaData@234aea80] 13]
2023-11-30T11:33:35.181Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:33:35.181Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:33:35.181Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x234aea80 org.postgresql.jdbc.PgResultSetMetaData@234aea80] 14]
2023-11-30T11:33:35.181Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:33:35.181Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:33:35.183Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1e1cc763 HikariProxyPreparedStatement@505202531 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:33:35.183Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107587916304041, :params {:return-to /procure}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {:return-to /procure}, :route-params nil, :headers {sec-fetch-site none, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, sec-fetch-user ?1, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", connection keep-alive, upgrade-insecure-requests 1, pragma no-cache, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5eeaa745 /127.0.0.1:3230<->/127.0.0.1:63344], :server-port 3230, :params-raw {:return-to /procure}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /procure}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Fprocure, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x67714800 compojure.core$routes$fn__27950@67714800], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:33:35.186Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-11-30T11:33:35.186Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-11-30T11:33:35.196Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x17bf77f6 HikariProxyPreparedStatement@398424054 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:33:35.196Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:33:35.198Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x17bf77f6 HikariProxyPreparedStatement@398424054 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:33:35.198Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:33:35.199Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x17bf77f6 HikariProxyPreparedStatement@398424054 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:33:35.200Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T11:33:35.201Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x17bf77f6 HikariProxyPreparedStatement@398424054 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:33:35.202Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:33:35.204Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x4359a8c0 org.postgresql.jdbc.PgResultSetMetaData@4359a8c0] 1]
2023-11-30T11:33:35.204Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:33:35.205Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:33:35.205Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x4359a8c0 org.postgresql.jdbc.PgResultSetMetaData@4359a8c0] 2]
2023-11-30T11:33:35.205Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:33:35.206Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:33:35.206Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4359a8c0 org.postgresql.jdbc.PgResultSetMetaData@4359a8c0] 3]
2023-11-30T11:33:35.206Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.206Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.206Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x4359a8c0 org.postgresql.jdbc.PgResultSetMetaData@4359a8c0] 6]
2023-11-30T11:33:35.207Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:33:35.207Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:33:35.207Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4359a8c0 org.postgresql.jdbc.PgResultSetMetaData@4359a8c0] 10]
2023-11-30T11:33:35.207Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.208Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.208Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4359a8c0 org.postgresql.jdbc.PgResultSetMetaData@4359a8c0] 11]
2023-11-30T11:33:35.208Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.208Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.208Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4359a8c0 org.postgresql.jdbc.PgResultSetMetaData@4359a8c0] 12]
2023-11-30T11:33:35.208Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.208Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.208Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4359a8c0 org.postgresql.jdbc.PgResultSetMetaData@4359a8c0] 13]
2023-11-30T11:33:35.208Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:33:35.208Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:33:35.209Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4359a8c0 org.postgresql.jdbc.PgResultSetMetaData@4359a8c0] 14]
2023-11-30T11:33:35.209Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:33:35.209Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:33:35.210Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5704dd74 HikariProxyPreparedStatement@1459936628 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:33:35.211Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= nil  handler-key= :procurement
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107587951779958, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site none, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, sec-fetch-user ?1, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", connection keep-alive, upgrade-insecure-requests 1, pragma no-cache, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x2866e018 /127.0.0.1:3230<->/127.0.0.1:63344], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure, :server-name localhost, :handler-key :procurement, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x23b7953b leihs.procurement.backend.html$not_found_handler@23b7953b], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :procurement
2023-11-30T11:33:35.213Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.214Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:33:35.215Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:33:35.216Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:33:35.219Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-11-30T11:33:35.220Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-11-30T11:33:35.442Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x256edfff HikariProxyPreparedStatement@628023295 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:33:35.442Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:33:35.443Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x256edfff HikariProxyPreparedStatement@628023295 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:33:35.444Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:33:35.445Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x256edfff HikariProxyPreparedStatement@628023295 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:33:35.445Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T11:33:35.446Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x256edfff HikariProxyPreparedStatement@628023295 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:33:35.446Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:33:35.452Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0xb6f9451 org.postgresql.jdbc.PgResultSetMetaData@b6f9451] 1]
2023-11-30T11:33:35.453Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:33:35.453Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:33:35.454Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0xb6f9451 org.postgresql.jdbc.PgResultSetMetaData@b6f9451] 2]
2023-11-30T11:33:35.454Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:33:35.454Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:33:35.454Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0xb6f9451 org.postgresql.jdbc.PgResultSetMetaData@b6f9451] 3]
2023-11-30T11:33:35.454Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.454Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0xb6f9451 org.postgresql.jdbc.PgResultSetMetaData@b6f9451] 6]
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0xb6f9451 org.postgresql.jdbc.PgResultSetMetaData@b6f9451] 10]
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0xb6f9451 org.postgresql.jdbc.PgResultSetMetaData@b6f9451] 11]
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0xb6f9451 org.postgresql.jdbc.PgResultSetMetaData@b6f9451] 12]
2023-11-30T11:33:35.455Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.456Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.456Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0xb6f9451 org.postgresql.jdbc.PgResultSetMetaData@b6f9451] 13]
2023-11-30T11:33:35.456Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:33:35.456Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:33:35.457Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xb6f9451 org.postgresql.jdbc.PgResultSetMetaData@b6f9451] 14]
2023-11-30T11:33:35.457Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:33:35.457Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:33:35.460Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x78adaaf3 HikariProxyPreparedStatement@2024647411 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:33:35.460Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107588194795416, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, content-length 502, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure, connection keep-alive, pragma no-cache, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x7ec5f99b /127.0.0.1:3230<->/127.0.0.1:63344], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x54e78f98 leihs.procurement.graphql$handler@54e78f98], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T11:33:35.465Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.467Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:33:35.468Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:33:35.468Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:33:35.469Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
2023-11-30T11:33:35.471Z NX-41294 DEBUG [leihs.procurement.graphql:76] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>>>1 #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.476Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
>>>2 {:id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :firstname Procurement, :lastname Admin}
>>oida>> #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.479Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
>>>3 nil
2023-11-30T11:33:35.490Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.492Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]

>o>pure-handler {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"65184e75-5146-4915-8494-09445d034d15","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"e68ca036-dced-4666-b9e9-a6b55119f013","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Zrittsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id e68ca036-dced-4666-b9e9-a6b55119f013] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>pure-handler::query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}


>o>pure-handler {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"65184e75-5146-4915-8494-09445d034d15","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"e68ca036-dced-4666-b9e9-a6b55119f013","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Zrittsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id e68ca036-dced-4666-b9e9-a6b55119f013] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-11-30T11:33:35.495Z NX-41294 DEBUG [leihs.procurement.graphql:95] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"65184e75-5146-4915-8494-09445d034d15\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"e68ca036-dced-4666-b9e9-a6b55119f013\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Zrittsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "e68ca036-dced-4666-b9e9-a6b55119f013"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-11-30T11:33:35.495Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-11-30T11:33:35.534Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x694b4500 HikariProxyPreparedStatement@1766540544 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:33:35.535Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:33:35.535Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xcc9c8a5 HikariProxyPreparedStatement@214550693 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:33:35.535Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:33:35.536Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x694b4500 HikariProxyPreparedStatement@1766540544 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:33:35.536Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:33:35.536Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xcc9c8a5 HikariProxyPreparedStatement@214550693 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:33:35.536Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:33:35.537Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x694b4500 HikariProxyPreparedStatement@1766540544 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:33:35.537Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xcc9c8a5 HikariProxyPreparedStatement@214550693 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:33:35.537Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T11:33:35.537Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-11-30T11:33:35.538Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x694b4500 HikariProxyPreparedStatement@1766540544 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:33:35.538Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:33:35.538Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xcc9c8a5 HikariProxyPreparedStatement@214550693 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:33:35.539Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:33:35.542Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0xa4c972b org.postgresql.jdbc.PgResultSetMetaData@a4c972b] 1]
2023-11-30T11:33:35.543Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:33:35.543Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:33:35.543Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0xa4c972b org.postgresql.jdbc.PgResultSetMetaData@a4c972b] 2]
2023-11-30T11:33:35.543Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:33:35.543Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0xe872b6d org.postgresql.jdbc.PgResultSetMetaData@e872b6d] 1]
2023-11-30T11:33:35.543Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:33:35.543Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0xa4c972b org.postgresql.jdbc.PgResultSetMetaData@a4c972b] 3]
2023-11-30T11:33:35.543Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:33:35.543Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.544Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:33:35.544Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.544Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0xa4c972b org.postgresql.jdbc.PgResultSetMetaData@a4c972b] 6]
2023-11-30T11:33:35.544Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:33:35.544Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:33:35.544Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0xe872b6d org.postgresql.jdbc.PgResultSetMetaData@e872b6d] 2]
2023-11-30T11:33:35.544Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0xa4c972b org.postgresql.jdbc.PgResultSetMetaData@a4c972b] 10]
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0xa4c972b org.postgresql.jdbc.PgResultSetMetaData@a4c972b] 11]
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe872b6d org.postgresql.jdbc.PgResultSetMetaData@e872b6d] 3]
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0xa4c972b org.postgresql.jdbc.PgResultSetMetaData@a4c972b] 12]
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.546Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0xa4c972b org.postgresql.jdbc.PgResultSetMetaData@a4c972b] 13]
2023-11-30T11:33:35.545Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.546Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:33:35.546Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:33:35.546Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0xe872b6d org.postgresql.jdbc.PgResultSetMetaData@e872b6d] 6]
2023-11-30T11:33:35.546Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:33:35.547Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:33:35.547Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xa4c972b org.postgresql.jdbc.PgResultSetMetaData@a4c972b] 14]
2023-11-30T11:33:35.547Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe872b6d org.postgresql.jdbc.PgResultSetMetaData@e872b6d] 10]
2023-11-30T11:33:35.547Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.547Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:33:35.547Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.547Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0xe872b6d org.postgresql.jdbc.PgResultSetMetaData@e872b6d] 11]
2023-11-30T11:33:35.547Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:33:35.548Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.548Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.548Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0xe872b6d org.postgresql.jdbc.PgResultSetMetaData@e872b6d] 12]
2023-11-30T11:33:35.548Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.548Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.548Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe872b6d org.postgresql.jdbc.PgResultSetMetaData@e872b6d] 13]
2023-11-30T11:33:35.548Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:33:35.548Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
2023-11-30T11:33:35.549Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe872b6d org.postgresql.jdbc.PgResultSetMetaData@e872b6d] 14]
2023-11-30T11:33:35.549Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5d87de35 HikariProxyPreparedStatement@1569185333 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-11-30T11:33:35.549Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-11-30T11:33:35.549Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:33:35.549Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:33:35.549Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:335] - db-pool - Add connection elided, waiting=1, adders pending/running=2
2023-11-30T11:33:35.550Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 02368990-f4a1-4ff9-817e-c317db4c124b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5d87de35 HikariProxyPreparedStatement@1569185333 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-11-30T11:33:35.550Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  02368990-f4a1-4ff9-817e-c317db4c124b
2023-11-30T11:33:35.550Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x50e3461 HikariProxyPreparedStatement@84816993 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:33:35.551Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.551Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - db-pool - Added connection org.postgresql.jdbc.PgConnection@398dda14
2023-11-30T11:33:35.551Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5d87de35 HikariProxyPreparedStatement@1569185333 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-11-30T11:33:35.552Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107588289076541, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], 2023-11-30T11:33:35.553Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3ec4af5c HikariProxyPreparedStatement@1053077340 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
:options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, content-length 534, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, pragma no-cache, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4a9e8cdd /127.0.0.1:3230<->/127.0.0.1:63345], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x54e78f98 leihs.procurement.graphql$handler@54e78f98], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T11:33:35.553Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5d87de35 HikariProxyPreparedStatement@1569185333 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('02368990-f4a1-4ff9-817e-c317db4c124b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-11-30T11:33:35.553Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.553Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.553Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-11-30T11:33:35.554Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:33:35.556Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x5a747341 org.postgresql.jdbc.PgResultSetMetaData@5a747341] 1]
2023-11-30T11:33:35.556Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:33:35.556Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-11-30T11:33:35.556Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-11-30T11:33:35.556Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.556Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x5a747341 org.postgresql.jdbc.PgResultSetMetaData@5a747341] 2]
2023-11-30T11:33:35.556Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-11-30T11:33:35.557Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-11-30T11:33:35.557Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5a747341 org.postgresql.jdbc.PgResultSetMetaData@5a747341] 3]
2023-11-30T11:33:35.557Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.557Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.557Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x5a747341 org.postgresql.jdbc.PgResultSetMetaData@5a747341] 6]
2023-11-30T11:33:35.557Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-11-30T11:33:35.558Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-11-30T11:33:35.558Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5a747341 org.postgresql.jdbc.PgResultSetMetaData@5a747341] 10]
2023-11-30T11:33:35.558Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.558Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.558Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x5a747341 org.postgresql.jdbc.PgResultSetMetaData@5a747341] 11]
2023-11-30T11:33:35.558Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.558Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.558Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x5a747341 org.postgresql.jdbc.PgResultSetMetaData@5a747341] 12]
2023-11-30T11:33:35.559Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-11-30T11:33:35.559Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-11-30T11:33:35.559Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "572264c6-6da9-4e28-b081-52d34f180fc8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5a747341 org.postgresql.jdbc.PgResultSetMetaData@5a747341] 13]

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:33:35.559Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-11-30T11:33:35.559Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"]
2023-11-30T11:33:35.559Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "572264c6-6da9-4e28-b081-52d34f180fc8"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107588289030166, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, content-length 502, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, pragma no-cache, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x2cd6d30a /127.0.0.1:3230<->/127.0.0.1:63347], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x54e78f98 leihs.procurement.graphql$handler@54e78f98], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T11:33:35.560Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-11-30T09:54:12.806855000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5a747341 org.postgresql.jdbc.PgResultSetMetaData@5a747341] 14]
2023-11-30T11:33:35.560Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.561Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-11-30T09:54:12.806855000-00:00"]
2023-11-30T11:33:35.561Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-11-30T09:54:12.806855Z"
2023-11-30T11:33:35.561Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:33:35.563Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e68ca036-dced-4666-b9e9-a6b55119f013" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3768609 HikariProxyPreparedStatement@58099209 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-11-30T11:33:35.563Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:33:35.564Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
pure-handler >> 2
2023-11-30T11:33:35.565Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.565Z NX-41294 DEBUG [leihs.procurement.graphql:76] - graphql query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
 with variables {}
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44346 0x1d58c57f leihs.core.locale$wrap$fn__44346@1d58c57f]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-11-30T09:54:12.806855Z", :id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :user_session_id #uuid "572264c6-6da9-4e28-b081-52d34f180fc8", :scope_system_admin_read false, :access-rights (), :user_id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {Idea-d8c89f6f {:value 5d06a449-7aaa-4285-b65a-53c2ae3cb299}, leihs-anti-csrf-token {:value 65184e75-5146-4915-8494-09445d034d15}, leihs-user-session {:value 02368990-f4a1-4ff9-817e-c317db4c124b}}, :remote-addr 127.0.0.1, :start-time 107588288868708, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x783e5621 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x759ecefd next.jdbc.result_set$as_unqualified_lower_maps@759ecefd]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, sec-ch-ua-mobile ?0, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36, content-type application/json, cookie Idea-d8c89f6f=5d06a449-7aaa-4285-b65a-53c2ae3cb299; leihs-anti-csrf-token=65184e75-5146-4915-8494-09445d034d15; leihs-user-session=02368990-f4a1-4ff9-817e-c317db4c124b, content-length 4019, sec-ch-ua "Google Chrome";v="119", "Chromium";v="119", "Not?A_Brand";v="24", sec-ch-ua-platform "macOS", referer http://localhost:3230/procure/requests, connection keep-alive, pragma no-cache, x-csrf-token 65184e75-5146-4915-8494-09445d034d15, accept application/json, accept-language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors, cache-control no-cache}, :async-channel #object[org.httpkit.server.AsyncChannel 0x74388786 /127.0.0.1:3230<->/127.0.0.1:63344], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x5a50f56b HikariDataSource (db-pool)]}, :content-length 4019, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestsIndexFiltered, :variables {:inspector_priority [LOW MEDIUM HIGH MANDATORY], :onlyOwnRequests false, :state [NEW APPROVED PARTIALLY_APPROVED DENIED], :order_status [NOT_PROCESSED IN_PROGRESS PROCURED ALTERNATIVE_PROCURED NOT_PROCURED], :search nil, :organizations [fb664326-a8ef-4556-af02-07d3127cd9ec], :categories [7d5ba731-edd9-41ba-8773-7337d24c2327], :priority [NORMAL HIGH], :budgetPeriods [8b8fe440-cae5-4bf9-8048-d0ec2399faa1]}, :query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x54e78f98 leihs.procurement.graphql$handler@54e78f98], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-11-30T11:33:35.566Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:33:35.566Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-11-30T11:33:35.566Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:33:35.567Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
pure-handler >> 2
2023-11-30T11:33:35.567Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.567Z NX-41294 DEBUG [leihs.procurement.graphql:76] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>>>1 #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.568Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"

> 1 anti-csrf-token >  65184e75-5146-4915-8494-09445d034d15

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-11-30T11:33:35.568Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
>>>2 {:id #uuid "e68ca036-dced-4666-b9e9-a6b55119f013", :firstname Procurement, :lastname Admin}
>>oida>> #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.569Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
>>>3 nil

>o>pure-handler {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message Non-nullable field was null., :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message Non-nullable field was null., :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message Non-nullable field was null., :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message Non-nullable field was null., :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message Non-nullable field was null., :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message Non-nullable field was null., :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}

>o>pure-handler::query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}


>o>pure-handler {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message Non-nullable field was null., :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message Non-nullable field was null., :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message Non-nullable field was null., :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message Non-nullable field was null., :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message Non-nullable field was null., :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message Non-nullable field was null., :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}
2023-11-30T11:33:35.569Z NX-41294 DEBUG [leihs.procurement.graphql:95] - result => {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message "Non-nullable field was null.", :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message "Non-nullable field was null.", :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}
2023-11-30T11:33:35.570Z NX-41294 DEBUG [leihs.procurement.graphql:96] - {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message "Non-nullable field was null.", :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message "Non-nullable field was null.", :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}
2023-11-30T11:33:35.570Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
pure-handler >> 2
2023-11-30T11:33:35.575Z NX-41294 DEBUG [leihs.procurement.graphql:76] - graphql query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
 with variables {:inspector_priority ["LOW" "MEDIUM" "HIGH" "MANDATORY"], :onlyOwnRequests false, :state ["NEW" "APPROVED" "PARTIALLY_APPROVED" "DENIED"], :order_status ["NOT_PROCESSED" "IN_PROGRESS" "PROCURED" "ALTERNATIVE_PROCURED" "NOT_PROCURED"], :search nil, :organizations ["fb664326-a8ef-4556-af02-07d3127cd9ec"], :categories ["7d5ba731-edd9-41ba-8773-7337d24c2327"], :priority ["NORMAL" "HIGH"], :budgetPeriods ["8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]}
2023-11-30T11:33:35.577Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.578Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]

>o>pure-handler {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"65184e75-5146-4915-8494-09445d034d15","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"e68ca036-dced-4666-b9e9-a6b55119f013","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Zrittsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id e68ca036-dced-4666-b9e9-a6b55119f013] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>pure-handler::query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}


>o>pure-handler {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"65184e75-5146-4915-8494-09445d034d15","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"e68ca036-dced-4666-b9e9-a6b55119f013","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Zrittsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id e68ca036-dced-4666-b9e9-a6b55119f013] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-11-30T11:33:35.581Z NX-41294 DEBUG [leihs.procurement.graphql:95] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"65184e75-5146-4915-8494-09445d034d15\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"e68ca036-dced-4666-b9e9-a6b55119f013\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Zrittsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "e68ca036-dced-4666-b9e9-a6b55119f013"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-11-30T11:33:35.582Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>>get-dashboard
>>args {:inspector_priority [:LOW :MEDIUM :HIGH :MANDATORY], :organization_id [fb664326-a8ef-4556-af02-07d3127cd9ec], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search nil, :priority [:NORMAL :HIGH], :budget_period_id [8b8fe440-cae5-4bf9-8048-d0ec2399faa1], :category_id [7d5ba731-edd9-41ba-8773-7337d24c2327]}
>>value nil
>>mainCatsSql [SELECT procurement_main_categories.* FROM procurement_main_categories ORDER BY procurement_main_categories.name ASC]
>>mainCats [{:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1}]
>>queryA1 [SELECT * FROM procurement_budget_periods WHERE procurement_budget_periods.id IN (?) ORDER BY end_date DESC #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1"]
>>resultA1 [{:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}]
>>resultA1-2 [{:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}]
>>requestsB2-triggerError {:inspector_priority [:LOW :MEDIUM :HIGH :MANDATORY], :organization_id [fb664326-a8ef-4556-af02-07d3127cd9ec], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search nil, :priority [:NORMAL :HIGH], :budget_period_id [8b8fe440-cae5-4bf9-8048-d0ec2399faa1], :category_id [7d5ba731-edd9-41ba-8773-7337d24c2327]} nil
>>>requests::get-requests ======================
>>>args {:inspector_priority [:LOW :MEDIUM :HIGH :MANDATORY], :organization_id [fb664326-a8ef-4556-af02-07d3127cd9ec], :requested_by_auth_user false, :state [:NEW :APPROVED :PARTIALLY_APPROVED :DENIED], :order_status [:NOT_PROCESSED :IN_PROGRESS :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCURED], :search nil, :priority [:NORMAL :HIGH], :budget_period_id [8b8fe440-cae5-4bf9-8048-d0ec2399faa1], :category_id [7d5ba731-edd9-41ba-8773-7337d24c2327]}
>>>value nil
>>>auth-entity
>>>get-requests>> before first
>o> 1-After requests-query-map:
>o> helper1
>o> helper2 [7d5ba731-edd9-41ba-8773-7337d24c2327] [8b8fe440-cae5-4bf9-8048-d0ec2399faa1] [fb664326-a8ef-4556-af02-07d3127cd9ec]
>o> helper3
>o> helper4
>o> helper5
>o> order-status (not_processed in_progress procured alternative_procured not_procured)
>o> helper6
2023-11-30T11:33:35.586Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:33:35.586Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:33:35.586Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.587Z NX-41294 DEBUG [leihs.procurement.permissions.user:103] - (->> [viewer? inspector? admin?] (map (fn* [p1__39094#] (p1__39094# tx auth-entity))) (some true?)) => true
>o> helper7 true
>o> requests-base-query-with-state
>o> state-sql true
>o> s-map  {:NEW [:= :procurement_requests.approved_quantity nil], :APPROVED [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity], :PARTIALLY_APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]], :DENIED [:= :procurement_requests.approved_quantity 0]}
>o>map-4 (>o> map NEW
>o> map [:= :procurement_requests.approved_quantity nil]
:case >o> map NEW
[:= :procurement_requests.approved_quantity nil] >o> map APPROVED
>o> map [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]
NEW >o> map APPROVED
[:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] >o> map PARTIALLY_APPROVED
>o> map [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]
APPROVED >o> map PARTIALLY_APPROVED
[:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] >o> map DENIED
>o> map [:= :procurement_requests.approved_quantity 0]
PARTIALLY_APPROVED >o> map DENIED
[:= :procurement_requests.approved_quantity 0] DENIED)
>o>map-5 (:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)
2023-11-30T11:33:35.587Z NX-41294 DEBUG [leihs.procurement.resources.request:163] - result => [[(:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED")]]
>o> join-and-nest-budget-periods
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id]]}
>o> tbl :procurement_budget_periods_2
>o> nest-key :budget_period
>o> join-and-nest-categories
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id]]}
>o> tbl :models
>o> nest-key :model
>o> join-and-nest-templates
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id]]}
>o> tbl :procurement_templates
>o> nest-key :template
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :suppliers
>o> nest-key :supplier
>o> join-and-nest-users
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]] [[[:row_to_json :suppliers]] :supplier]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :users
>o> nest-key :user
>o> helper8
>o> 2-After apply-scope: {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]] [[[:row_to_json :suppliers]] :supplier] [[[:row_to_json :users]] :user]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]], :where [:and [:in :procurement_requests.category_id ([:cast 7d5ba731-edd9-41ba-8773-7337d24c2327 :uuid])] [:in :procurement_requests.budget_period_id ([:cast 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 :uuid])] [:in :procurement_requests.organization_id ([:cast fb664326-a8ef-4556-af02-07d3127cd9ec :uuid])] [:in :procurement_requests.priority (normal high)] [:in :procurement_requests.inspector_priority (low medium high mandatory)] [:or [:= :procurement_requests.approved_quantity nil] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] [:= :procurement_requests.approved_quantity 0]] [:in :procurement_requests.order_status ([[:cast not_processed :order_status_enum]] [[:cast in_progress :order_status_enum]] [[:cast procured :order_status_enum]] [[:cast alternative_procured :order_status_enum]] [[:cast not_procured :order_status_enum]])]]}
>o> apply-scope #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"
2023-11-30T11:33:35.588Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.588Z NX-41294 DEBUG [leihs.procurement.permissions.requests:25] - sqlmap => {:select [[[:raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*"]] [[[(:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED")]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw "row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category"]] [[[:row_to_json :models]] :model] [[:raw "row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization"]] [[[:row_to_json :procurement_templates]] :template] [[:raw "row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room"]] [[[:row_to_json :suppliers]] :supplier] [[[:row_to_json :users]] :user]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by [[[:raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]], :where [:and [:in :procurement_requests.category_id ([:cast "7d5ba731-edd9-41ba-8773-7337d24c2327" :uuid])] [:in :procurement_requests.budget_period_id ([:cast "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" :uuid])] [:in :procurement_requests.organization_id ([:cast "fb664326-a8ef-4556-af02-07d3127cd9ec" :uuid])] [:in :procurement_requests.priority ("normal" "high")] [:in :procurement_requests.inspector_priority ("low" "medium" "high" "mandatory")] [:or [:= :procurement_requests.approved_quantity nil] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] [:= :procurement_requests.approved_quantity 0]] [:in :procurement_requests.order_status ([[:cast "not_processed" :order_status_enum]] [[:cast "in_progress" :order_status_enum]] [[:cast "procured" :order_status_enum]] [[:cast "alternative_procured" :order_status_enum]] [[:cast "not_procured" :order_status_enum]])]]}
>o> 3-After sql-format: {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]] [[[:row_to_json :suppliers]] :supplier] [[[:row_to_json :users]] :user]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]], :where [:and [:in :procurement_requests.category_id ([:cast 7d5ba731-edd9-41ba-8773-7337d24c2327 :uuid])] [:in :procurement_requests.budget_period_id ([:cast 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 :uuid])] [:in :procurement_requests.organization_id ([:cast fb664326-a8ef-4556-af02-07d3127cd9ec :uuid])] [:in :procurement_requests.priority (normal high)] [:in :procurement_requests.inspector_priority (low medium high mandatory)] [:or [:= :procurement_requests.approved_quantity nil] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] [:= :procurement_requests.approved_quantity 0]] [:in :procurement_requests.order_status ([[:cast not_processed :order_status_enum]] [[:cast in_progress :order_status_enum]] [[:cast procured :order_status_enum]] [[:cast alternative_procured :order_status_enum]] [[:cast not_procured :order_status_enum]])]]}
2023-11-30T11:33:35.589Z NX-41294 DEBUG [leihs.procurement.resources.requests:247] - (sql-format <>) => ["SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, ((CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END)) AS state, (ROW_TO_JSON(procurement_budget_periods_2)) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, (ROW_TO_JSON(models)) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, (ROW_TO_JSON(procurement_templates)) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, (ROW_TO_JSON(suppliers)) AS supplier, (ROW_TO_JSON(users)) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) AS procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations AS procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE (procurement_requests.category_id IN (CAST(? AS UUID))) AND (procurement_requests.budget_period_id IN (CAST(? AS UUID))) AND (procurement_requests.organization_id IN (CAST(? AS UUID))) AND (procurement_requests.priority IN (?, ?)) AND (procurement_requests.inspector_priority IN (?, ?, ?, ?)) AND ((procurement_requests.approved_quantity IS NULL) OR (procurement_requests.approved_quantity >= procurement_requests.requested_quantity) OR ((procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?)) OR (procurement_requests.approved_quantity = ?)) AND (procurement_requests.order_status IN ((CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, ''))) ASC" "NEW" "APPROVED" 0 "PARTIALLY_APPROVED" 0 "DENIED" "7d5ba731-edd9-41ba-8773-7337d24c2327" "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" "fb664326-a8ef-4556-af02-07d3127cd9ec" "normal" "high" "low" "medium" "high" "mandatory" 0 0 "not_processed" "in_progress" "procured" "alternative_procured" "not_procured"]
2023-11-30T11:33:35.589Z NX-41294 DEBUG [leihs.procurement.resources.requests:252] - query => ["SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, ((CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END)) AS state, (ROW_TO_JSON(procurement_budget_periods_2)) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, (ROW_TO_JSON(models)) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, (ROW_TO_JSON(procurement_templates)) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, (ROW_TO_JSON(suppliers)) AS supplier, (ROW_TO_JSON(users)) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) AS procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations AS procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE (procurement_requests.category_id IN (CAST(? AS UUID))) AND (procurement_requests.budget_period_id IN (CAST(? AS UUID))) AND (procurement_requests.organization_id IN (CAST(? AS UUID))) AND (procurement_requests.priority IN (?, ?)) AND (procurement_requests.inspector_priority IN (?, ?, ?, ?)) AND ((procurement_requests.approved_quantity IS NULL) OR (procurement_requests.approved_quantity >= procurement_requests.requested_quantity) OR ((procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?)) OR (procurement_requests.approved_quantity = ?)) AND (procurement_requests.order_status IN ((CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, ''))) ASC" "NEW" "APPROVED" 0 "PARTIALLY_APPROVED" 0 "DENIED" "7d5ba731-edd9-41ba-8773-7337d24c2327" "8b8fe440-cae5-4bf9-8048-d0ec2399faa1" "fb664326-a8ef-4556-af02-07d3127cd9ec" "normal" "high" "low" "medium" "high" "mandatory" 0 0 "not_processed" "in_progress" "procured" "alternative_procured" "not_procured"]
>o>ring-request-3 [SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, ((CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END)) AS state, (ROW_TO_JSON(procurement_budget_periods_2)) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, (ROW_TO_JSON(models)) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, (ROW_TO_JSON(procurement_templates)) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, (ROW_TO_JSON(suppliers)) AS supplier, (ROW_TO_JSON(users)) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) AS procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations AS procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id WHERE (procurement_requests.category_id IN (CAST(? AS UUID))) AND (procurement_requests.budget_period_id IN (CAST(? AS UUID))) AND (procurement_requests.organization_id IN (CAST(? AS UUID))) AND (procurement_requests.priority IN (?, ?)) AND (procurement_requests.inspector_priority IN (?, ?, ?, ?)) AND ((procurement_requests.approved_quantity IS NULL) OR (procurement_requests.approved_quantity >= procurement_requests.requested_quantity) OR ((procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?)) OR (procurement_requests.approved_quantity = ?)) AND (procurement_requests.order_status IN ((CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)), (CAST(? AS ORDER_STATUS_ENUM)))) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, ''))) ASC NEW APPROVED 0 PARTIALLY_APPROVED 0 DENIED 7d5ba731-edd9-41ba-8773-7337d24c2327 8b8fe440-cae5-4bf9-8048-d0ec2399faa1 fb664326-a8ef-4556-af02-07d3127cd9ec normal high low medium high mandatory 0 0 not_processed in_progress procured alternative_procured not_procured]
2023-11-30T11:33:35.589Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-11-30T11:33:35.590Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-11-30T11:33:35.590Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.590Z NX-41294 DEBUG [leihs.procurement.permissions.user:103] - (->> [viewer? inspector? admin?] (map (fn* [p1__39094#] (p1__39094# tx auth-entity))) (some true?)) => true
>>>ring-request-procRequests [{:category {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :supplier nil, :motivation Corporis commodi provident nam., :accounting_type aquisition, :template_id nil, :article_number nil, :inspector_priority medium, :price_cents 0, :budget_period {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :article_name Mediocre Aluminum Shoes, :organization_id #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :replacement true, :template nil, :state NEW, :organization {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :supplier_name nil, :order_status not_processed, :requested_quantity 1, :updated_at #inst "2023-11-24T19:25:51.635215000-00:00", :model_id nil, :priority normal, :supplier_id nil, :budget_period_id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency CHF, :user_id #uuid "2187a76b-557a-4775-9a1e-778142161819", :room {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :inspection_comment nil, :approved_quantity nil, :order_quantity nil, :room_id #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :user {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :receiver nil, :internal_order_number nil, :category_id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :created_at #inst "2023-11-24T19:25:51.635215000-00:00", :order_comment nil, :short_id Budget-Period-Past.001, :model nil}]
>o>requestsB2 (2023-11-30T11:33:35.597Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => 2187a76b-557a-4775-9a1e-778142161819
2023-11-30T11:33:35.598Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => [SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID) #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.598Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => [SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL]
2023-11-30T11:33:35.599Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => [SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID) #uuid "e68ca036-dced-4666-b9e9-a6b55119f013"]
2023-11-30T11:33:35.600Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => [SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE (user_id IS NULL) AND (category_id = CAST(? AS UUID)) 7d5ba731-edd9-41ba-8773-7337d24c2327]
2023-11-30T11:33:35.600Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => [SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE (user_id IS NULL) AND (category_id = CAST(? AS UUID)) 7d5ba731-edd9-41ba-8773-7337d24c2327]
{:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}})
>o>dashboard-cache-keyB2 {:id 1608672852}
2023-11-30T11:33:35.602Z NX-41294 DEBUG [leihs.procurement.dashboard:200] - (count requests) => 1
2023-11-30T11:33:35.602Z NX-41294 DEBUG [leihs.procurement.dashboard:201] - (cache-key dashboard-cache-key) => 1608672852

>o> final-result (>o> bp {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}
>o> mc {:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1}
>o> 1requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}})

>o> result 2a (>o> c {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}
>o> c {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}
>o> 2 requests* ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}})

>o> result 1a {:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil} 


>o> filter-and-assoc-cats (json) {"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Category C1","requests":[{"category":{"read":true,"write":false,"default":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","general_ledger_account":null,"cost_center":null,"procurement_account":null},"required":true,"value":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","cost_center":null,"main_category":{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1"},"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","procurement_account":null,"general_ledger_account":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"motivation":{"read":true,"write":false,"required":true,"value":"Corporis commodi provident nam.","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"accounting_type":{"read":true,"write":false,"default":"aquisition","required":true,"value":"aquisition","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"template_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"actionPermissions":{"edit":true,"delete":false,"moveBudgetPeriod":false,"moveCategory":false},"article_number":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspector_priority":{"read":true,"write":false,"default":"MEDIUM","required":true,"value":"medium","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"price_cents":{"read":true,"write":false,"default":0,"required":true,"value":0,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period":{"read":true,"write":false,"default":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","created_at":"2023-11-24T19:25:51.605Z","updated_at":"2023-11-24T19:25:51.605Z"},"required":true,"value":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"article_name":{"read":true,"write":false,"default":null,"required":true,"value":"Mediocre Aluminum Shoes","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"organization_id":{"value":"fb664326-a8ef-4556-af02-07d3127cd9ec","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"replacement":{"read":true,"write":false,"default":null,"required":true,"value":true,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"DELETE":false,"template":{"read":true,"write":false,"default":null,"required":true,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"state":"NEW","organization":{"value":{"id":"fb664326-a8ef-4556-af02-07d3127cd9ec","name":"Beauty & Kids","parent_id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","shortname":null,"department":{"id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","name":"Home, Jewelry & Computers","parent_id":null,"shortname":null}},"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_name":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_status":{"read":true,"write":true,"default":"NOT_PROCURED","required":true,"value":"not_processed","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"requested_quantity":{"read":true,"write":false,"required":true,"value":1,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"updated_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"model_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"priority":{"read":true,"write":false,"default":"NORMAL","required":true,"value":"normal","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period_id":{"value":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"id":"40284a6b-cf5e-41c1-af6c-dc423894ee11","price_currency":{"read":true,"write":false,"default":"CHF","required":true,"value":"CHF","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user_id":{"value":"2187a76b-557a-4775-9a1e-778142161819","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room":{"read":true,"write":false,"default":{"id":"b8927fd2-014c-48c2-b095-fa1d5620debe","name":"general room","description":null,"building_id":"abae04c5-d767-425e-acc2-7ce04df645d1","general":true,"building":{"id":"abae04c5-d767-425e-acc2-7ce04df645d1","name":"general building","code":null}},"required":true,"value":{"id":"64bfb152-ea6c-42da-98c6-325afeb462bc","name":"reception room","general":false,"building":{"id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","code":null,"name":"9594 Beer Extension"},"building_id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","description":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspection_comment":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"approved_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room_id":{"value":"64bfb152-ea6c-42da-98c6-325afeb462bc","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user":{"read":true,"write":false,"required":true,"default":{"id":"2187a76b-557a-4775-9a1e-778142161819","firstname":"Lynsey","lastname":"Kertzmann"},"value":{"system_admin_protected":false,"address":null,"email":"chanda@ortiz.net","pool_protected":false,"last_sign_in_at":null,"img32_url":null,"account_enabled":true,"lastname":"Kertzmann","phone":null,"img_digest":null,"org_id":null,"extended_info":null,"secondary_email":null,"city":null,"settings":null,"is_admin":false,"organization":"local","login":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","updated_at":"2023-11-24T20:25:51.614964+01:00","firstname":"Lynsey","zip":null,"id":"2187a76b-557a-4775-9a1e-778142161819","url":null,"password_sign_in_enabled":true,"account_disabled_at":null,"is_system_admin":false,"badge_id":null,"language_locale":null,"img256_url":null,"country":null,"delegator_user_id":null,"created_at":"2023-11-24T20:25:51.614964+01:00","admin_protected":false},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"receiver":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"internal_order_number":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"category_id":{"value":"7d5ba731-edd9-41ba-8773-7337d24c2327","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"created_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_comment":{"read":true,"write":true,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"short_id":"Budget-Period-Past.001","model":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"}}],"general_ledger_account":null,"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","total_price_cents":null,"procurement_account":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327","cost_center":null} 


>o> filter-and-assoc-cats -> :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"} 


>o> filter-and-assoc-cats -> :budget_period (json) {"read":true,"write":false,"default":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","created_at":"2023-11-24T19:25:51.605Z","updated_at":"2023-11-24T19:25:51.605Z"},"required":true,"value":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"} 

{:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil}) 


>o> result 3a {:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1, :categories ({:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil}), :total_price_cents nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb} 


>o> :assoc-data {:main_categories ({:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1, :categories ({:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil}), :total_price_cents nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb}), :name Budget-Period-Past, :updated_at #inst "2023-11-24T19:25:51.605131000-00:00", :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :total_price_cents nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :created_at #inst "2023-11-24T19:25:51.605131000-00:00"} 


>o> :assoc-data (json) {"main_categories":[{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1","categories":[{"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Category C1","requests":[{"category":{"read":true,"write":false,"default":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","general_ledger_account":null,"cost_center":null,"procurement_account":null},"required":true,"value":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","cost_center":null,"main_category":{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1"},"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","procurement_account":null,"general_ledger_account":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"motivation":{"read":true,"write":false,"required":true,"value":"Corporis commodi provident nam.","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"accounting_type":{"read":true,"write":false,"default":"aquisition","required":true,"value":"aquisition","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"template_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"actionPermissions":{"edit":true,"delete":false,"moveBudgetPeriod":false,"moveCategory":false},"article_number":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspector_priority":{"read":true,"write":false,"default":"MEDIUM","required":true,"value":"medium","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"price_cents":{"read":true,"write":false,"default":0,"required":true,"value":0,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period":{"read":true,"write":false,"default":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","created_at":"2023-11-24T19:25:51.605Z","updated_at":"2023-11-24T19:25:51.605Z"},"required":true,"value":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"article_name":{"read":true,"write":false,"default":null,"required":true,"value":"Mediocre Aluminum Shoes","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"organization_id":{"value":"fb664326-a8ef-4556-af02-07d3127cd9ec","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"replacement":{"read":true,"write":false,"default":null,"required":true,"value":true,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"DELETE":false,"template":{"read":true,"write":false,"default":null,"required":true,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"state":"NEW","organization":{"value":{"id":"fb664326-a8ef-4556-af02-07d3127cd9ec","name":"Beauty & Kids","parent_id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","shortname":null,"department":{"id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","name":"Home, Jewelry & Computers","parent_id":null,"shortname":null}},"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_name":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_status":{"read":true,"write":true,"default":"NOT_PROCURED","required":true,"value":"not_processed","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"requested_quantity":{"read":true,"write":false,"required":true,"value":1,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"updated_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"model_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"priority":{"read":true,"write":false,"default":"NORMAL","required":true,"value":"normal","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period_id":{"value":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"id":"40284a6b-cf5e-41c1-af6c-dc423894ee11","price_currency":{"read":true,"write":false,"default":"CHF","required":true,"value":"CHF","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user_id":{"value":"2187a76b-557a-4775-9a1e-778142161819","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room":{"read":true,"write":false,"default":{"id":"b8927fd2-014c-48c2-b095-fa1d5620debe","name":"general room","description":null,"building_id":"abae04c5-d767-425e-acc2-7ce04df645d1","general":true,"building":{"id":"abae04c5-d767-425e-acc2-7ce04df645d1","name":"general building","code":null}},"required":true,"value":{"id":"64bfb152-ea6c-42da-98c6-325afeb462bc","name":"reception room","general":false,"building":{"id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","code":null,"name":"9594 Beer Extension"},"building_id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","description":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspection_comment":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"approved_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room_id":{"value":"64bfb152-ea6c-42da-98c6-325afeb462bc","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user":{"read":true,"write":false,"required":true,"default":{"id":"2187a76b-557a-4775-9a1e-778142161819","firstname":"Lynsey","lastname":"Kertzmann"},"value":{"system_admin_protected":false,"address":null,"email":"chanda@ortiz.net","pool_protected":false,"last_sign_in_at":null,"img32_url":null,"account_enabled":true,"lastname":"Kertzmann","phone":null,"img_digest":null,"org_id":null,"extended_info":null,"secondary_email":null,"city":null,"settings":null,"is_admin":false,"organization":"local","login":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","updated_at":"2023-11-24T20:25:51.614964+01:00","firstname":"Lynsey","zip":null,"id":"2187a76b-557a-4775-9a1e-778142161819","url":null,"password_sign_in_enabled":true,"account_disabled_at":null,"is_system_admin":false,"badge_id":null,"language_locale":null,"img256_url":null,"country":null,"delegator_user_id":null,"created_at":"2023-11-24T20:25:51.614964+01:00","admin_protected":false},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"receiver":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"internal_order_number":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"category_id":{"value":"7d5ba731-edd9-41ba-8773-7337d24c2327","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"created_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_comment":{"read":true,"write":true,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"short_id":"Budget-Period-Past.001","model":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"}}],"general_ledger_account":null,"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","total_price_cents":null,"procurement_account":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327","cost_center":null}],"total_price_cents":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb"}],"name":"Budget-Period-Past","updated_at":"2023-11-24T19:25:51.605Z","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","total_price_cents":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1","created_at":"2023-11-24T19:25:51.605Z"} 

{:main_categories ({:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Main Category MC1, :categories ({:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name Category C1, :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 7d5ba731-edd9-41ba-8773-7337d24c2327, :name Category C1, :cost_center nil, :main_category {:id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :name Main Category MC1}, :main_category_id d2907cbd-98d0-48b7-ab9a-f06803e5cabb, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id 8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :name Budget-Period-Past, :inspection_start_date 2023-08-24T00:00:00+02:00, :end_date 2023-11-23T00:00:00+01:00, :created_at 2023-11-24T20:25:51.605131, :updated_at 2023-11-24T20:25:51.605131, :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state NEW, :organization {:value {:id fb664326-a8ef-4556-af02-07d3127cd9ec, :name Beauty & Kids, :parent_id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :shortname nil, :department {:id d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id 64bfb152-ea6c-42da-98c6-325afeb462bc, :name reception room, :general false, :building {:id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :code nil, :name 9594 Beer Extension}, :building_id 3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c, :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-11-24T20:25:51.614964+01:00, :firstname Lynsey, :zip nil, :id 2187a76b-557a-4775-9a1e-778142161819, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-11-24T20:25:51.614964+01:00, :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327, :cost_center nil}), :total_price_cents nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb}), :name Budget-Period-Past, :updated_at #inst "2023-11-24T19:25:51.605131000-00:00", :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :total_price_cents nil, :cacheKey 1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1, :created_at #inst "2023-11-24T19:25:51.605131000-00:00"}) 


>o> final-result (json) [{"main_categories":[{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1","categories":[{"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Category C1","requests":[{"category":{"read":true,"write":false,"default":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","general_ledger_account":null,"cost_center":null,"procurement_account":null},"required":true,"value":{"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","name":"Category C1","cost_center":null,"main_category":{"id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","name":"Main Category MC1"},"main_category_id":"d2907cbd-98d0-48b7-ab9a-f06803e5cabb","procurement_account":null,"general_ledger_account":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"motivation":{"read":true,"write":false,"required":true,"value":"Corporis commodi provident nam.","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"accounting_type":{"read":true,"write":false,"default":"aquisition","required":true,"value":"aquisition","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"template_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"actionPermissions":{"edit":true,"delete":false,"moveBudgetPeriod":false,"moveCategory":false},"article_number":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspector_priority":{"read":true,"write":false,"default":"MEDIUM","required":true,"value":"medium","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"price_cents":{"read":true,"write":false,"default":0,"required":true,"value":0,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period":{"read":true,"write":false,"default":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","created_at":"2023-11-24T19:25:51.605Z","updated_at":"2023-11-24T19:25:51.605Z"},"required":true,"value":{"id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","name":"Budget-Period-Past","inspection_start_date":"2023-08-24T00:00:00+02:00","end_date":"2023-11-23T00:00:00+01:00","created_at":"2023-11-24T20:25:51.605131","updated_at":"2023-11-24T20:25:51.605131","is_past":true},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"article_name":{"read":true,"write":false,"default":null,"required":true,"value":"Mediocre Aluminum Shoes","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"organization_id":{"value":"fb664326-a8ef-4556-af02-07d3127cd9ec","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"replacement":{"read":true,"write":false,"default":null,"required":true,"value":true,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"DELETE":false,"template":{"read":true,"write":false,"default":null,"required":true,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"state":"NEW","organization":{"value":{"id":"fb664326-a8ef-4556-af02-07d3127cd9ec","name":"Beauty & Kids","parent_id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","shortname":null,"department":{"id":"d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9","name":"Home, Jewelry & Computers","parent_id":null,"shortname":null}},"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_name":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_status":{"read":true,"write":true,"default":"NOT_PROCURED","required":true,"value":"not_processed","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"requested_quantity":{"read":true,"write":false,"required":true,"value":1,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"updated_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"model_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"priority":{"read":true,"write":false,"default":"NORMAL","required":true,"value":"normal","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"supplier_id":{"value":null,"read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"budget_period_id":{"value":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"id":"40284a6b-cf5e-41c1-af6c-dc423894ee11","price_currency":{"read":true,"write":false,"default":"CHF","required":true,"value":"CHF","request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user_id":{"value":"2187a76b-557a-4775-9a1e-778142161819","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room":{"read":true,"write":false,"default":{"id":"b8927fd2-014c-48c2-b095-fa1d5620debe","name":"general room","description":null,"building_id":"abae04c5-d767-425e-acc2-7ce04df645d1","general":true,"building":{"id":"abae04c5-d767-425e-acc2-7ce04df645d1","name":"general building","code":null}},"required":true,"value":{"id":"64bfb152-ea6c-42da-98c6-325afeb462bc","name":"reception room","general":false,"building":{"id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","code":null,"name":"9594 Beer Extension"},"building_id":"3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c","description":null},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"inspection_comment":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"approved_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"room_id":{"value":"64bfb152-ea6c-42da-98c6-325afeb462bc","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"user":{"read":true,"write":false,"required":true,"default":{"id":"2187a76b-557a-4775-9a1e-778142161819","firstname":"Lynsey","lastname":"Kertzmann"},"value":{"system_admin_protected":false,"address":null,"email":"chanda@ortiz.net","pool_protected":false,"last_sign_in_at":null,"img32_url":null,"account_enabled":true,"lastname":"Kertzmann","phone":null,"img_digest":null,"org_id":null,"extended_info":null,"secondary_email":null,"city":null,"settings":null,"is_admin":false,"organization":"local","login":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","updated_at":"2023-11-24T20:25:51.614964+01:00","firstname":"Lynsey","zip":null,"id":"2187a76b-557a-4775-9a1e-778142161819","url":null,"password_sign_in_enabled":true,"account_disabled_at":null,"is_system_admin":false,"badge_id":null,"language_locale":null,"img256_url":null,"country":null,"delegator_user_id":null,"created_at":"2023-11-24T20:25:51.614964+01:00","admin_protected":false},"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"receiver":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"internal_order_number":{"read":true,"write":false,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"category_id":{"value":"7d5ba731-edd9-41ba-8773-7337d24c2327","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"created_at":{"value":"2023-11-24T19:25:51.635Z","read":false,"write":false,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"order_comment":{"read":true,"write":true,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"},"short_id":"Budget-Period-Past.001","model":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"40284a6b-cf5e-41c1-af6c-dc423894ee11"}}],"general_ledger_account":null,"id":"7d5ba731-edd9-41ba-8773-7337d24c2327","total_price_cents":null,"procurement_account":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327","cost_center":null}],"total_price_cents":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb"}],"name":"Budget-Period-Past","updated_at":"2023-11-24T19:25:51.605Z","inspection_start_date":"2023-08-23T22:00:00.000Z","end_date":"2023-11-22T23:00:00.000Z","id":"8b8fe440-cae5-4bf9-8048-d0ec2399faa1","total_price_cents":null,"cacheKey":"1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1","created_at":"2023-11-24T19:25:51.605Z"}] 

2023-11-30T11:33:35.684Z NX-41294 DEBUG [leihs.procurement.dashboard:202] - (determine-budget-periods requests tx dashboard-cache-key main-cats bps) => ({:main_categories ({:id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name "Main Category MC1", :categories ({:main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name "Category C1", :requests ({:category {:read true, :write false, :default {:id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :name "Category C1", :main_category_id #uuid "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id "7d5ba731-edd9-41ba-8773-7337d24c2327", :name "Category C1", :cost_center nil, :main_category {:id "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :name "Main Category MC1"}, :main_category_id "d2907cbd-98d0-48b7-ab9a-f06803e5cabb", :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :motivation {:read true, :write false, :required true, :value "Corporis commodi provident nam.", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :accounting_type {:read true, :write false, :default "aquisition", :required true, :value "aquisition", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspector_priority {:read true, :write false, :default "MEDIUM", :required true, :value "medium", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period {:read true, :write false, :default {:id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name "Budget-Period-Past", :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :created_at #inst "2023-11-24T19:25:51.605131000-00:00", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00"}, :required true, :value {:id "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :name "Budget-Period-Past", :inspection_start_date "2023-08-24T00:00:00+02:00", :end_date "2023-11-23T00:00:00+01:00", :created_at "2023-11-24T20:25:51.605131", :updated_at "2023-11-24T20:25:51.605131", :is_past true}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :article_name {:read true, :write false, :default nil, :required true, :value "Mediocre Aluminum Shoes", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :organization_id {:value #uuid "fb664326-a8ef-4556-af02-07d3127cd9ec", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :state "NEW", :organization {:value {:id "fb664326-a8ef-4556-af02-07d3127cd9ec", :name "Beauty & Kids", :parent_id "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9", :shortname nil, :department {:id "d6f9842f-4a7f-45ed-8ac5-c708cd6f8ca9", :name "Home, Jewelry & Computers", :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_status {:read true, :write true, :default "NOT_PROCURED", :required true, :value "not_processed", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :updated_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :priority {:read true, :write false, :default "NORMAL", :required true, :value "normal", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :budget_period_id {:value #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11", :price_currency {:read true, :write false, :default "CHF", :required true, :value "CHF", :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user_id {:value #uuid "2187a76b-557a-4775-9a1e-778142161819", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name "general room", :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name "general building", :code nil}}, :required true, :value {:id "64bfb152-ea6c-42da-98c6-325afeb462bc", :name "reception room", :general false, :building {:id "3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c", :code nil, :name "9594 Beer Extension"}, :building_id "3eaa2152-ebd3-4b7c-b370-f107fa7b4d7c", :description nil}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :room_id {:value #uuid "64bfb152-ea6c-42da-98c6-325afeb462bc", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :user {:read true, :write false, :required true, :default {:id #uuid "2187a76b-557a-4775-9a1e-778142161819", :firstname "Lynsey", :lastname "Kertzmann"}, :value {:system_admin_protected false, :address nil, :email "chanda@ortiz.net", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kertzmann", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization "local", :login nil, :searchable "Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey", :updated_at "2023-11-24T20:25:51.614964+01:00", :firstname "Lynsey", :zip nil, :id "2187a76b-557a-4775-9a1e-778142161819", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at "2023-11-24T20:25:51.614964+01:00", :admin_protected false}, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :category_id {:value #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :created_at {:value #inst "2023-11-24T19:25:51.635215000-00:00", :read false, :write false, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}, :short_id "Budget-Period-Past.001", :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "40284a6b-cf5e-41c1-af6c-dc423894ee11"}}), :general_ledger_account nil, :id #uuid "7d5ba731-edd9-41ba-8773-7337d24c2327", :total_price_cents nil, :procurement_account nil, :cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb_7d5ba731-edd9-41ba-8773-7337d24c2327", :cost_center nil}), :total_price_cents nil, :cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1_d2907cbd-98d0-48b7-ab9a-f06803e5cabb"}), :name "Budget-Period-Past", :updated_at #inst "2023-11-24T19:25:51.605131000-00:00", :inspection_start_date #inst "2023-08-23T22:00:00.000000000-00:00", :end_date #inst "2023-11-22T23:00:00.000000000-00:00", :id #uuid "8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :total_price_cents nil, :cacheKey "1608672852_8b8fe440-cae5-4bf9-8048-d0ec2399faa1", :created_at #inst "2023-11-24T19:25:51.605131000-00:00"})

>o>pure-handler {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey 1608672852] [:total_count 1] [:budget_periods [nil]] [:__typename :Dashboard])]), :errors ({:message Non-nullable field was null., :locations [{:line 11, :column 7}], :path [:dashboard :budget_periods 0 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 17, :column 9}], :path [:dashboard :budget_periods 0 :main_categories 0 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 22, :column 11}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :total_price_cents]} {:message Field resolver returned an undefined enum value., :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value normal, :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message Field resolver returned an undefined enum value., :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value medium, :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message Field resolver returned an undefined enum value., :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value not_processed, :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message Non-nullable field was null., :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}

>o>pure-handler::query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}


>o>pure-handler {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey 1608672852] [:total_count 1] [:budget_periods [nil]] [:__typename :Dashboard])]), :errors ({:message Non-nullable field was null., :locations [{:line 11, :column 7}], :path [:dashboard :budget_periods 0 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 17, :column 9}], :path [:dashboard :budget_periods 0 :main_categories 0 :total_price_cents]} {:message Non-nullable field was null., :locations [{:line 22, :column 11}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :total_price_cents]} {:message Field resolver returned an undefined enum value., :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value normal, :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message Field resolver returned an undefined enum value., :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value medium, :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message Field resolver returned an undefined enum value., :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value not_processed, :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message Non-nullable field was null., :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}
2023-11-30T11:33:35.717Z NX-41294 DEBUG [leihs.procurement.graphql:95] - result => {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey "1608672852"] [:total_count 1] [:budget_periods [nil]] [:__typename :Dashboard])]), :errors ({:message "Non-nullable field was null.", :locations [{:line 11, :column 7}], :path [:dashboard :budget_periods 0 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 17, :column 9}], :path [:dashboard :budget_periods 0 :main_categories 0 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 22, :column 11}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :total_price_cents]} {:message "Field resolver returned an undefined enum value.", :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value "normal", :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value "medium", :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value "not_processed", :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message "Non-nullable field was null.", :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}
2023-11-30T11:33:35.717Z NX-41294 DEBUG [leihs.procurement.graphql:96] - {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey "1608672852"] [:total_count 1] [:budget_periods [nil]] [:__typename :Dashboard])]), :errors ({:message "Non-nullable field was null.", :locations [{:line 11, :column 7}], :path [:dashboard :budget_periods 0 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 17, :column 9}], :path [:dashboard :budget_periods 0 :main_categories 0 :total_price_cents]} {:message "Non-nullable field was null.", :locations [{:line 22, :column 11}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :total_price_cents]} {:message "Field resolver returned an undefined enum value.", :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value "normal", :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value "medium", :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value "not_processed", :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message "Non-nullable field was null.", :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}
2023-11-30T11:33:35.717Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-11-30T11:33:46.748Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-11-30T11:33:46.756Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2023-11-30T11:33:46.757Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:33:46.772Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-11-30T11:33:46.778Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:33:46.778Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:33:46.779Z NX-41294 DEBUG [com.zaxxer.hikari.pool.PoolBase:132] - HikariPool-1 - Closing connection org.postgresql.jdbc.PgConnection@7719fce6: (connection has passed idleTimeout)
2023-11-30T11:34:16.763Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-11-30T11:34:16.765Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2023-11-30T11:34:16.765Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:34:16.783Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:34:16.783Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:34:16.784Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:34:46.767Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-11-30T11:34:46.775Z NX-41294 DEBUG [com.zaxxer.hikari.pool.PoolBase:132] - db-pool - Closing connection org.postgresql.jdbc.PgConnection@398dda14: (connection has passed idleTimeout)
2023-11-30T11:34:46.774Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:34:46.776Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:34:46.785Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:34:46.786Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:34:46.786Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:35:16.781Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:35:16.783Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:35:16.783Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:35:16.798Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:35:16.798Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:35:16.799Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:35:46.789Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:35:46.798Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:35:46.799Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:35:46.804Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:35:46.805Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:35:46.805Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:36:16.801Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:36:16.802Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:36:16.802Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:36:16.809Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:36:16.810Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:36:16.810Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:36:46.813Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:36:46.809Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:36:46.818Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:36:46.818Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:36:46.818Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:36:46.818Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:37:16.822Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:37:16.822Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:37:16.823Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:37:16.824Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:37:16.824Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:37:16.824Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:37:46.827Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:37:46.838Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:37:46.839Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:37:46.830Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:37:46.839Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:37:46.839Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:38:16.841Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:38:16.845Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:38:16.847Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:38:16.847Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:38:16.847Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:38:16.847Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:38:46.852Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:38:46.852Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:38:46.863Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:38:46.863Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:38:46.863Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:38:46.866Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:39:16.870Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:39:16.870Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:39:16.872Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:39:16.872Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:39:16.872Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:39:16.872Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:39:46.875Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:39:46.875Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:39:46.907Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:39:46.907Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:39:46.908Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:39:46.908Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:40:16.910Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:40:16.912Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:40:16.912Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:40:16.914Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:40:16.914Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:40:16.914Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:40:46.916Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:40:46.916Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:40:46.922Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:40:46.923Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:40:46.922Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:40:46.923Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:41:16.925Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:41:16.925Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:41:16.927Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:41:16.927Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:41:16.927Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:41:16.927Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:41:46.933Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:41:46.930Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:41:46.937Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:41:46.937Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:41:46.938Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:41:46.938Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:42:16.941Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:42:16.942Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:42:16.942Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:42:16.943Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:42:16.943Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:42:16.943Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:42:46.949Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:42:46.948Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:42:46.956Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:42:46.956Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:42:46.956Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:42:46.956Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:43:16.960Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:43:16.960Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:43:16.961Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:43:16.961Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:43:16.961Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:43:16.961Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:43:46.966Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:43:46.965Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:43:46.972Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:43:46.972Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:43:46.973Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:43:46.973Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:44:16.979Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:44:16.979Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:44:16.981Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:44:16.981Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:44:16.981Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:44:16.981Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:44:46.984Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:44:46.987Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:44:46.991Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:44:46.991Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:44:46.992Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:44:46.992Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:45:16.993Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:45:16.994Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:45:16.994Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:45:16.997Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:45:16.998Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:45:16.998Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:45:46.997Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:45:47.003Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:45:47.003Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:45:47.004Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:45:47.004Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:45:47.004Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:46:17.010Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:46:17.010Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:46:17.011Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:46:17.011Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:46:17.011Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:46:17.011Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:46:47.017Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:46:47.016Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:46:47.020Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:46:47.020Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:46:47.021Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:46:47.021Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:47:17.024Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:47:17.026Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:47:17.026Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:47:17.027Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:47:17.027Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:47:17.027Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:47:47.027Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:47:47.031Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:47:47.031Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:47:47.031Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:47:47.031Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:47:47.032Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:48:17.038Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:48:17.038Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:48:17.039Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:48:17.039Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:48:17.039Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:48:17.039Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:48:47.045Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:48:47.045Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:48:47.051Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:48:47.052Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:48:47.051Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:48:47.052Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:49:17.056Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:49:17.057Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:49:17.058Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:49:17.058Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-11-30T11:49:17.058Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-30T11:49:17.058Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
