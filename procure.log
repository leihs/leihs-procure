# java_leihs-procure-server env check via asdf v0.13.1
# java_leihs-procure-server env skipped update; touch .tool-versions or remove /var/folders/jl/49spzkdd2v3cdz37fgmp0ddr6cj76v/T/asdf_cache_java_leihs-procure-server to force update
# clojure_leihs-procure-server env check via asdf v0.13.1
# clojure_leihs-procure-server env skipped update; touch .tool-versions or remove /var/folders/jl/49spzkdd2v3cdz37fgmp0ddr6cj76v/T/asdf_cache_clojure_leihs-procure-server to force update
Warning: environ value /Users/mradl/.asdf/installs/java/zulu-11.60.19 for key :java-home has been overwritten with /Users/mradl/.asdf/installs/java/zulu-11.60.19/zulu-11.jdk/Contents/Home
>o> conc concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))
2023-12-01T07:35:31.669Z NX-41294 WARN [leihs.core.release:13] - Failed to read releases.yml, returning bogus value 
2023-12-01T07:35:32.308Z NX-41294 INFO [leihs.core.logging:37] - initializing logging  {:min-level [[#{"leihs.procurement" "leihs.procurement.resources.*" "leihs.procurement.permissions.*" "leihs.procurement.authorization" "leihs.procurement.*"} :debug] [#{"com.zaxxer.hikari.*" "leihs.*"} :debug] [#{"*"} :debug]], :log-level :debug}
2023-12-01T07:35:32.315Z NX-41294 INFO [leihs.core.logging:39] - initialized logging  {:min-level [[#{"leihs.procurement" "leihs.procurement.resources.*" "leihs.procurement.permissions.*" "leihs.procurement.authorization" "leihs.procurement.*"} :debug] [#{"com.zaxxer.hikari.*" "leihs.*"} :debug] [#{"*"} :debug]], :ns-filter #{"*"}, :middleware [], :timestamp-opts {:pattern :iso8601, :locale :jvm-default, :timezone :utc}, :output-fn #object[taoensso.timbre$default_output_fn 0x18630be7 "taoensso.timbre$default_output_fn@18630be7"], :appenders {:println {:enabled? true, :fn #object[taoensso.timbre.appenders.core$println_appender$fn__3459 0x37322607 "taoensso.timbre.appenders.core$println_appender$fn__3459@37322607"]}}, :_init-config {:loaded-from-source :default, :compile-time-config {:min-level nil, :ns-pattern "*"}}, :log-level :debug}
2023-12-01T07:35:32.317Z NX-41294 INFO [leihs.procurement.main:50] - main ("--dev-mode" "true" "--repl" "true" "run" "--db-port" "5415" "--db-name" "leihs_test")
2023-12-01T07:35:32.329Z NX-41294 INFO [leihs.core.repl:62] - init {:dev-mode true, :repl true, :repl-bind "localhost", :repl-port 46506, :repl-port-file ".nrepl-port"}
2023-12-01T07:35:32.331Z NX-41294 INFO [leihs.core.repl:70] - starting nREPL server  46506 localhost
2023-12-01T07:35:32.359Z NX-41294 INFO [leihs.core.repl:75] - started nREPL server 
2023-12-01T07:35:32.362Z NX-41294 INFO [leihs.procurement.run:326] - Invoking run with options:  {:db-host localhost, :db-max-pool-size 16, :db-min-pool-size 2, :db-name leihs_test, :db-password leihs, :db-port 5415, :db-user leihs, :dev-mode true, :http-host localhost, :http-max-threads 8, :http-min-threads 1, :http-port 3230, :http-queue-capacity 640, :http-thread-keep-alive-seconds 10, :http-worker-prefix leihs-service-http-worker-, :pid-file nil, :repl true, :repl-bind localhost, :repl-port 46506, :repl-port-file .nrepl-port}
2023-12-01T07:35:32.363Z NX-41294 INFO [leihs.core.shutdown:20] - PID 96220
2023-12-01T07:35:32.386Z NX-41294 INFO [leihs.core.shutdown:29] - Registering SIGTERM handler for shutdown.
2023-12-01T07:35:32.451Z NX-41294 INFO [leihs.core.graphql:17] - Initialized graphQL schema.
2023-12-01T07:35:32.453Z NX-41294 INFO [leihs.core.db:220] - Initializing db  {:db-name "leihs_test", :db-port 5415, :db-host "localhost", :db-user "leihs", :db-password "leihs", :db-min-pool-size 2, :db-max-pool-size 16}
2023-12-01T07:35:32.457Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1100] - db-pool - configuration:
2023-12-01T07:35:32.464Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - allowPoolSuspension.............false
2023-12-01T07:35:32.464Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - autoCommit......................true
2023-12-01T07:35:32.464Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - catalog.........................none
2023-12-01T07:35:32.464Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionInitSql...............none
2023-12-01T07:35:32.465Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTestQuery.............none
2023-12-01T07:35:32.465Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTimeout...............30000
2023-12-01T07:35:32.465Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSource......................none
2023-12-01T07:35:32.467Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceClassName............."org.postgresql.ds.PGSimpleDataSource"
2023-12-01T07:35:32.467Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceJNDI..................none
2023-12-01T07:35:32.468Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceProperties............{password=<masked>, databaseName=leihs_test, serverName=localhost, portNumber=5415}
2023-12-01T07:35:32.468Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - driverClassName.................none
2023-12-01T07:35:32.468Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - exceptionOverrideClassName......none
2023-12-01T07:35:32.468Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckProperties...........{}
2023-12-01T07:35:32.468Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckRegistry.............com.codahale.metrics.health.HealthCheckRegistry@51c53101
2023-12-01T07:35:32.469Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - idleTimeout.....................60000
2023-12-01T07:35:32.469Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - initializationFailTimeout.......1
2023-12-01T07:35:32.469Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - isolateInternalQueries..........false
2023-12-01T07:35:32.469Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - jdbcUrl.........................none
2023-12-01T07:35:32.470Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - keepaliveTime...................0
2023-12-01T07:35:32.470Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - leakDetectionThreshold..........0
2023-12-01T07:35:32.470Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maxLifetime.....................3600000
2023-12-01T07:35:32.470Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maximumPoolSize.................16
2023-12-01T07:35:32.470Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricRegistry..................com.codahale.metrics.MetricRegistry@37b84d63
2023-12-01T07:35:32.470Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricsTrackerFactory...........none
2023-12-01T07:35:32.471Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - minimumIdle.....................2
2023-12-01T07:35:32.471Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - password........................<masked>
2023-12-01T07:35:32.471Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - poolName........................"db-pool"
2023-12-01T07:35:32.471Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - readOnly........................false
2023-12-01T07:35:32.471Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - registerMbeans..................false
2023-12-01T07:35:32.471Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - scheduledExecutor...............none
2023-12-01T07:35:32.472Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - schema..........................none
2023-12-01T07:35:32.472Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - threadFactory...................internal
2023-12-01T07:35:32.472Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - transactionIsolation............default
2023-12-01T07:35:32.472Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - username........................"leihs"
2023-12-01T07:35:32.472Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - validationTimeout...............5000
2023-12-01T07:35:32.474Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:80] - db-pool - Starting...
2023-12-01T07:35:32.542Z NX-41294 INFO [com.zaxxer.hikari.pool.HikariPool:565] - db-pool - Added connection org.postgresql.jdbc.PgConnection@772538f0
2023-12-01T07:35:32.548Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:82] - db-pool - Start completed.
2023-12-01T07:35:32.548Z NX-41294 INFO [leihs.core.db:222] - Initialized db  {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f "HikariDataSource (db-pool)"]}
2023-12-01T07:35:32.549Z NX-41294 INFO [leihs.core.db:223] - Initializing ds-next  {:db-name "leihs_test", :db-port 5415, :db-host "localhost", :db-user "leihs", :db-password "leihs", :db-min-pool-size 2, :db-max-pool-size 16}
2023-12-01T07:35:32.561Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1100] - HikariPool-1 - configuration:
2023-12-01T07:35:32.561Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - allowPoolSuspension.............false
2023-12-01T07:35:32.562Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - autoCommit......................true
2023-12-01T07:35:32.562Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - catalog.........................none
2023-12-01T07:35:32.562Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionInitSql...............none
2023-12-01T07:35:32.562Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTestQuery.............none
2023-12-01T07:35:32.562Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - connectionTimeout...............30000
2023-12-01T07:35:32.562Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSource......................none
2023-12-01T07:35:32.563Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceClassName.............none
2023-12-01T07:35:32.563Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceJNDI..................none
2023-12-01T07:35:32.563Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - dataSourceProperties............{password=<masked>}
2023-12-01T07:35:32.563Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - driverClassName.................none
2023-12-01T07:35:32.563Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - exceptionOverrideClassName......none
2023-12-01T07:35:32.563Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckProperties...........{}
2023-12-01T07:35:32.564Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - healthCheckRegistry.............none
2023-12-01T07:35:32.564Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - idleTimeout.....................60000
2023-12-01T07:35:32.564Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - initializationFailTimeout.......1
2023-12-01T07:35:32.564Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - isolateInternalQueries..........false
2023-12-01T07:35:32.564Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - jdbcUrl.........................jdbc:postgresql://localhost:5415/leihs_test
2023-12-01T07:35:32.564Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - keepaliveTime...................0
2023-12-01T07:35:32.564Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - leakDetectionThreshold..........0
2023-12-01T07:35:32.565Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maxLifetime.....................3600000
2023-12-01T07:35:32.565Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - maximumPoolSize.................16
2023-12-01T07:35:32.565Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricRegistry..................none
2023-12-01T07:35:32.565Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - metricsTrackerFactory...........none
2023-12-01T07:35:32.565Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - minimumIdle.....................2
2023-12-01T07:35:32.565Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - password........................<masked>
2023-12-01T07:35:32.565Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - poolName........................"HikariPool-1"
2023-12-01T07:35:32.566Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - readOnly........................false
2023-12-01T07:35:32.566Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - registerMbeans..................false
2023-12-01T07:35:32.566Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - scheduledExecutor...............none
2023-12-01T07:35:32.566Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - schema..........................none
2023-12-01T07:35:32.566Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - threadFactory...................internal
2023-12-01T07:35:32.566Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - transactionIsolation............default
2023-12-01T07:35:32.566Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - username........................"leihs"
2023-12-01T07:35:32.567Z NX-41294 DEBUG [com.zaxxer.hikari.HikariConfig:1132] - validationTimeout...............5000
2023-12-01T07:35:32.567Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:110] - HikariPool-1 - Starting...
2023-12-01T07:35:32.568Z NX-41294 DEBUG [com.zaxxer.hikari.util.DriverDataSource:107] - Loaded driver with class name org.postgresql.Driver for jdbcUrl=jdbc:postgresql://localhost:5415/leihs_test
2023-12-01T07:35:32.576Z NX-41294 INFO [com.zaxxer.hikari.pool.HikariPool:565] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3078874c
2023-12-01T07:35:32.576Z NX-41294 INFO [com.zaxxer.hikari.HikariDataSource:123] - HikariPool-1 - Start completed.
2023-12-01T07:35:32.582Z NX-41294 INFO [leihs.core.db:225] - Initialized ds-next  #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 "HikariDataSource (HikariPool-1)"], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e "next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e"]}}
2023-12-01T07:35:32.589Z NX-41294 INFO [leihs.core.http-server:101] - starting http-server  {:port 3230, :ip "localhost", :pool {:queue #object[java.util.concurrent.ArrayBlockingQueue 0x116e2aa4 "[]"], :pool #object[java.util.concurrent.ThreadPoolExecutor 0x21e5550e "java.util.concurrent.ThreadPoolExecutor@21e5550e[Running, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]"]}}
2023-12-01T07:35:32.600Z NX-41294 INFO [leihs.core.http-server:104] - started http-server 
2023-12-01T07:35:32.650Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2023-12-01T07:35:32.651Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2023-12-01T07:35:32.659Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - db-pool - Added connection org.postgresql.jdbc.PgConnection@48d9f216
2023-12-01T07:35:32.672Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After adding stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:35:32.680Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2023-12-01T07:35:32.680Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2023-12-01T07:35:32.686Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1b83e15d
2023-12-01T07:35:32.699Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After adding stats (total=2, active=0, idle=2, waiting=0)
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 178659603950041, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site none, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, sec-fetch-user ?1, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x77d7f062 /127.0.0.1:3230<->/127.0.0.1:60637], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  nil

> 1 anti-csrf-token class >  nil

> 2 anti-csrf-token-new >  96062568-3c93-4557-913c-ee2b025cc3a1
2023-12-01T07:35:47.587Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => 96062568-3c93-4557-913c-ee2b025cc3a1
2023-12-01T07:35:47.606Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x12d9e1ae HikariProxyPreparedStatement@316268974 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:35:47.607Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:35:47.614Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 1]
2023-12-01T07:35:47.632Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de"]
2023-12-01T07:35:47.632Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de"
2023-12-01T07:35:47.632Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 3]
2023-12-01T07:35:47.633Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:35:47.633Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:35:47.633Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 4]
2023-12-01T07:35:47.633Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:35:47.633Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:35:47.634Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 7]
2023-12-01T07:35:47.634Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:35:47.634Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:35:47.635Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.153272000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 15]
2023-12-01T07:35:47.635Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.153272000-00:00"]
2023-12-01T07:35:47.636Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.153272Z"
2023-12-01T07:35:47.636Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.153272000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 16]
2023-12-01T07:35:47.636Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.153272000-00:00"]
2023-12-01T07:35:47.637Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.153272Z"
2023-12-01T07:35:47.637Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 25]
2023-12-01T07:35:47.638Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:35:47.638Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:35:47.638Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 32]
2023-12-01T07:35:47.638Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:35:47.639Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:35:47.639Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 1]
2023-12-01T07:35:47.639Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:47.639Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:47.639Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 3]
2023-12-01T07:35:47.640Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:35:47.640Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:35:47.640Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 4]
2023-12-01T07:35:47.640Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:35:47.640Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:35:47.640Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 7]
2023-12-01T07:35:47.641Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:35:47.641Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:35:47.641Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.338707000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 15]
2023-12-01T07:35:47.641Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.338707000-00:00"]
2023-12-01T07:35:47.642Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.338707Z"
2023-12-01T07:35:47.642Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.338707000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 16]
2023-12-01T07:35:47.642Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.338707000-00:00"]
2023-12-01T07:35:47.642Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.338707Z"
2023-12-01T07:35:47.642Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 25]
2023-12-01T07:35:47.643Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-12-01T07:35:47.643Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-12-01T07:35:47.643Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 32]
2023-12-01T07:35:47.643Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:35:47.643Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:35:47.644Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2970e054-582a-459b-a6ff-c8caaecb7546" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 1]
2023-12-01T07:35:47.644Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2970e054-582a-459b-a6ff-c8caaecb7546"]
2023-12-01T07:35:47.644Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2970e054-582a-459b-a6ff-c8caaecb7546"
2023-12-01T07:35:47.644Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 3]
2023-12-01T07:35:47.644Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-12-01T07:35:47.644Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-12-01T07:35:47.645Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 4]
2023-12-01T07:35:47.645Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-12-01T07:35:47.645Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-12-01T07:35:47.645Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 7]
2023-12-01T07:35:47.645Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-12-01T07:35:47.645Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-12-01T07:35:47.645Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.375131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 15]
2023-12-01T07:35:47.646Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.375131000-00:00"]
2023-12-01T07:35:47.646Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.375131Z"
2023-12-01T07:35:47.646Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.375131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 16]
2023-12-01T07:35:47.646Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.375131000-00:00"]
2023-12-01T07:35:47.646Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.375131Z"
2023-12-01T07:35:47.646Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 25]
2023-12-01T07:35:47.647Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-12-01T07:35:47.647Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-12-01T07:35:47.647Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x5317122e org.postgresql.jdbc.PgResultSetMetaData@5317122e] 32]
2023-12-01T07:35:47.647Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:35:47.647Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:35:47.654Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7f643b8e HikariProxyPreparedStatement@2137275278 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:35:47.654Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:35:47.655Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7f643b8e HikariProxyPreparedStatement@2137275278 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:35:47.655Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de"
2023-12-01T07:35:47.693Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x3aa61174 org.postgresql.jdbc.PgResultSetMetaData@3aa61174] 1]
2023-12-01T07:35:47.698Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:35:47.698Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:35:47.698Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x3aa61174 org.postgresql.jdbc.PgResultSetMetaData@3aa61174] 2]
2023-12-01T07:35:47.698Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:35:47.699Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:35:47.699Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x3aa61174 org.postgresql.jdbc.PgResultSetMetaData@3aa61174] 3]
2023-12-01T07:35:47.699Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:35:47.699Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:35:47.701Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:35:47.153272Z", :firstname "Dawna", :zip nil, :id #uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:35:47.153272Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:35:47.706Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "96062568-3c93-4557-913c-ee2b025cc3a1", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "96062568-3c93-4557-913c-ee2b025cc3a1", :name "csrf-token"}}
2023-12-01T07:35:47.707Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => 96062568-3c93-4557-913c-ee2b025cc3a1
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}}, :remote-addr 127.0.0.1, :start-time 178659899803875, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1, referer http://localhost:3230/sign-in, connection keep-alive, accept image/avif,image/webp,*/*, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5f3cd1f7 /127.0.0.1:3230<->/127.0.0.1:60637], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  96062568-3c93-4557-913c-ee2b025cc3a1

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:35:47.790Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:35:47.791Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2363f9df HikariProxyPreparedStatement@593754591 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:35:47.791Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:35:47.792Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 1]
2023-12-01T07:35:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de"]
2023-12-01T07:35:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de"
2023-12-01T07:35:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 3]
2023-12-01T07:35:47.793Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:35:47.794Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:35:47.794Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 4]
2023-12-01T07:35:47.794Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:35:47.794Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:35:47.794Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 7]
2023-12-01T07:35:47.794Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:35:47.794Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:35:47.795Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.153272000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 15]
2023-12-01T07:35:47.795Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.153272000-00:00"]
2023-12-01T07:35:47.795Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.153272Z"
2023-12-01T07:35:47.795Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.153272000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 16]
2023-12-01T07:35:47.795Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.153272000-00:00"]
2023-12-01T07:35:47.795Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.153272Z"
2023-12-01T07:35:47.796Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 25]
2023-12-01T07:35:47.796Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:35:47.796Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:35:47.797Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 32]
2023-12-01T07:35:47.797Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:35:47.797Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:35:47.797Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 1]
2023-12-01T07:35:47.797Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:47.797Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:47.798Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 3]
2023-12-01T07:35:47.798Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:35:47.798Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:35:47.798Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 4]
2023-12-01T07:35:47.799Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:35:47.799Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:35:47.799Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 7]
2023-12-01T07:35:47.799Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:35:47.799Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:35:47.799Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.338707000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 15]
2023-12-01T07:35:47.799Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.338707000-00:00"]
2023-12-01T07:35:47.800Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.338707Z"
2023-12-01T07:35:47.800Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.338707000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 16]
2023-12-01T07:35:47.800Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.338707000-00:00"]
2023-12-01T07:35:47.800Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.338707Z"
2023-12-01T07:35:47.801Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 25]
2023-12-01T07:35:47.801Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-12-01T07:35:47.801Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-12-01T07:35:47.801Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 32]
2023-12-01T07:35:47.801Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:35:47.801Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:35:47.802Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2970e054-582a-459b-a6ff-c8caaecb7546" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 1]
2023-12-01T07:35:47.802Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2970e054-582a-459b-a6ff-c8caaecb7546"]
2023-12-01T07:35:47.802Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2970e054-582a-459b-a6ff-c8caaecb7546"
2023-12-01T07:35:47.802Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 3]
2023-12-01T07:35:47.802Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-12-01T07:35:47.802Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-12-01T07:35:47.802Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 4]
2023-12-01T07:35:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-12-01T07:35:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-12-01T07:35:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 7]
2023-12-01T07:35:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-12-01T07:35:47.803Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-12-01T07:35:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.375131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 15]
2023-12-01T07:35:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.375131000-00:00"]
2023-12-01T07:35:47.804Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.375131Z"
2023-12-01T07:35:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.375131000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 16]
2023-12-01T07:35:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.375131000-00:00"]
2023-12-01T07:35:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.375131Z"
2023-12-01T07:35:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 25]
2023-12-01T07:35:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-12-01T07:35:47.805Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-12-01T07:35:47.806Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x4ae34c7e org.postgresql.jdbc.PgResultSetMetaData@4ae34c7e] 32]
2023-12-01T07:35:47.806Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:35:47.806Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:35:47.807Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3defd48d HikariProxyPreparedStatement@1039127693 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:35:47.807Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:35:47.808Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3defd48d HikariProxyPreparedStatement@1039127693 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:35:47.808Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de"
2023-12-01T07:35:47.810Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x256a67e org.postgresql.jdbc.PgResultSetMetaData@256a67e] 1]
2023-12-01T07:35:47.811Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:35:47.811Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:35:47.811Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x256a67e org.postgresql.jdbc.PgResultSetMetaData@256a67e] 2]
2023-12-01T07:35:47.811Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:35:47.811Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:35:47.811Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x256a67e org.postgresql.jdbc.PgResultSetMetaData@256a67e] 3]
2023-12-01T07:35:47.811Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:35:47.812Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:35:47.812Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:35:47.153272Z", :firstname "Dawna", :zip nil, :id #uuid "e6e5025e-980b-489d-b537-91d2bdc1c1de", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:35:47.153272Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:35:47.815Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "96062568-3c93-4557-913c-ee2b025cc3a1", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "96062568-3c93-4557-913c-ee2b025cc3a1", :name "csrf-token"}}
2023-12-01T07:35:47.815Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}}, :remote-addr 127.0.0.1, :start-time 178660043877500, :params {:user jimmie@goyette.com, :password nil, :csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x67cf5d27 HikariProxyConnection@1741643047 wrapping org.postgresql.jdbc.PgConnection@3078874c], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1, content-length 83, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4fac39a1 /127.0.0.1:3230<->/127.0.0.1:60637], :server-port 3230, :params-raw {:user jimmie@goyette.com, :password , :csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0xa3fd62a HikariProxyConnection@171955754 wrapping org.postgresql.jdbc.PgConnection@772538f0], :level 1, :rollback #object[clojure.lang.Atom 0x58e5c416 {:status :ready, :val false}]}, :content-length 83, :form-params {:user jimmie@goyette.com, :password nil, :csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user jimmie@goyette.com, :password , :csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x190557ff BytesInputStream[len=83]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  96062568-3c93-4557-913c-ee2b025cc3a1

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:35:47.936Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:35:47.938Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text jimmie@goyette.com #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x78f095f3 HikariProxyPreparedStatement@2029032947 wrapping SELECT * FROM users  WHERE (users.org_id = ? OR users.login = ? OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:35:47.938Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  jimmie@goyette.com
2023-12-01T07:35:47.938Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text jimmie@goyette.com #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x78f095f3 HikariProxyPreparedStatement@2029032947 wrapping SELECT * FROM users  WHERE (users.org_id = 'jimmie@goyette.com' OR users.login = ? OR lower(users.email) = ?)] 2]  type:  java.lang.String
2023-12-01T07:35:47.939Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  jimmie@goyette.com
2023-12-01T07:35:47.939Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text jimmie@goyette.com #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x78f095f3 HikariProxyPreparedStatement@2029032947 wrapping SELECT * FROM users  WHERE (users.org_id = 'jimmie@goyette.com' OR users.login = 'jimmie@goyette.com' OR lower(users.email) = ?)] 3]  type:  java.lang.String
2023-12-01T07:35:47.940Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  jimmie@goyette.com
2023-12-01T07:35:47.940Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0xb488094 org.postgresql.jdbc.PgResultSetMetaData@b488094] 1]
2023-12-01T07:35:47.940Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0xb488094 org.postgresql.jdbc.PgResultSetMetaData@b488094] 3]
2023-12-01T07:35:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:35:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:35:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0xb488094 org.postgresql.jdbc.PgResultSetMetaData@b488094] 4]
2023-12-01T07:35:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:35:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:35:47.941Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0xb488094 org.postgresql.jdbc.PgResultSetMetaData@b488094] 7]
2023-12-01T07:35:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:35:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:35:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.338707000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xb488094 org.postgresql.jdbc.PgResultSetMetaData@b488094] 15]
2023-12-01T07:35:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.338707000-00:00"]
2023-12-01T07:35:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.338707Z"
2023-12-01T07:35:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:47.338707000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xb488094 org.postgresql.jdbc.PgResultSetMetaData@b488094] 16]
2023-12-01T07:35:47.942Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:47.338707000-00:00"]
2023-12-01T07:35:47.943Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:47.338707Z"
2023-12-01T07:35:47.943Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0xb488094 org.postgresql.jdbc.PgResultSetMetaData@b488094] 25]
2023-12-01T07:35:47.943Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-12-01T07:35:47.943Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-12-01T07:35:47.943Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0xb488094 org.postgresql.jdbc.PgResultSetMetaData@b488094] 32]
2023-12-01T07:35:47.943Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:35:47.943Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:35:47.945Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4f8a5880 HikariProxyPreparedStatement@1334466688 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:35:47.945Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:35:47.945Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4f8a5880 HikariProxyPreparedStatement@1334466688 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:35:47.946Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:47.947Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1cf6fa11 org.postgresql.jdbc.PgResultSetMetaData@1cf6fa11] 1]
2023-12-01T07:35:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:35:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:35:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1cf6fa11 org.postgresql.jdbc.PgResultSetMetaData@1cf6fa11] 2]
2023-12-01T07:35:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:35:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:35:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1cf6fa11 org.postgresql.jdbc.PgResultSetMetaData@1cf6fa11] 3]
2023-12-01T07:35:47.948Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:35:47.949Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:35:47.949Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text jimmie@goyette.com #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1cf34b3a HikariProxyPreparedStatement@485706554 wrapping SELECT * FROM authentication_systems  WHERE (authentication_systems.sign_up_email_match IS NOT NULL AND ? ~* authentication_systems.sign_up_email_match)] 1]  type:  java.lang.String
2023-12-01T07:35:47.949Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  jimmie@goyette.com
2023-12-01T07:35:47.950Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected false, :address nil, :email "jimmie@goyette.com", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Admin", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization "local", :login nil, :searchable "Procurement Admin jimmie@goyette.com    Admin Procurement", :updated_at #time/instant "2023-12-01T07:35:47.338707Z", :firstname "Procurement", :zip nil, :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:35:47.338707Z", :admin_protected false} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:35:47.952Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1e90a821 HikariProxyPreparedStatement@512796705 wrapping SELECT * FROM authentication_systems  WHERE type = ?] 1]  type:  java.lang.String
2023-12-01T07:35:47.952Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:35:47.953Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ddceed org.postgresql.jdbc.PgResultSetMetaData@54ddceed] 1]
2023-12-01T07:35:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:35:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:35:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ddceed org.postgresql.jdbc.PgResultSetMetaData@54ddceed] 2]
2023-12-01T07:35:47.956Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:35:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:35:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ddceed org.postgresql.jdbc.PgResultSetMetaData@54ddceed] 4]
2023-12-01T07:35:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:35:47.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:35:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ddceed org.postgresql.jdbc.PgResultSetMetaData@54ddceed] 6]
2023-12-01T07:35:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int4 0]
2023-12-01T07:35:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ddceed org.postgresql.jdbc.PgResultSetMetaData@54ddceed] 15]
2023-12-01T07:35:47.958Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:35:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:35:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x54ddceed org.postgresql.jdbc.PgResultSetMetaData@54ddceed] 16]
2023-12-01T07:35:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:35:47.959Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:35:47.962Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "96062568-3c93-4557-913c-ee2b025cc3a1", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user "jimmie@goyette.com", :showPasswordSection true, :passwordButtonText "password_forgot_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "96062568-3c93-4557-913c-ee2b025cc3a1", :name "csrf-token"}, :authSystems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil})}
2023-12-01T07:35:47.963Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}}, :remote-addr 127.0.0.1, :start-time 178660152393916, :params {:user jimmie@goyette.com, :password password, :csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x48dc5271 HikariProxyConnection@1222398577 wrapping org.postgresql.jdbc.PgConnection@3078874c], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1, content-length 91, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x17bbf986 /127.0.0.1:3230<->/127.0.0.1:60637], :server-port 3230, :params-raw {:user jimmie@goyette.com, :password password, :csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x3565a067 HikariProxyConnection@895852647 wrapping org.postgresql.jdbc.PgConnection@772538f0], :level 1, :rollback #object[clojure.lang.Atom 0x528bb3cd {:status :ready, :val false}]}, :content-length 91, :form-params {:user jimmie@goyette.com, :password password, :csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user jimmie@goyette.com, :password password, :csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x786e3c37 BytesInputStream[len=91]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  96062568-3c93-4557-913c-ee2b025cc3a1

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:35:48.040Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:35:48.063Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2bf33f38 HikariProxyPreparedStatement@737361720 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( ?, ?, ?, ? )
RETURNING *] 1]  type:  java.util.UUID
2023-12-01T07:35:48.063Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.065Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text e09e4b9759120fe78b6e15752800cdd2d11288af9e3a557bdc99db4138384864 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2bf33f38 HikariProxyPreparedStatement@737361720 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( 'ddfafcf2-19d7-409a-8e58-a672f205ccfa'::uuid, ?, ?, ? )
RETURNING *] 2]  type:  java.lang.String
2023-12-01T07:35:48.065Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  e09e4b9759120fe78b6e15752800cdd2d11288af9e3a557bdc99db4138384864
2023-12-01T07:35:48.066Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2bf33f38 HikariProxyPreparedStatement@737361720 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( 'ddfafcf2-19d7-409a-8e58-a672f205ccfa'::uuid, 'e09e4b9759120fe78b6e15752800cdd2d11288af9e3a557bdc99db4138384864', ?, ? )
RETURNING *] 3]  type:  java.lang.String
2023-12-01T07:35:48.066Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:35:48.068Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:jsonb {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1} #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2bf33f38 HikariProxyPreparedStatement@737361720 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( 'ddfafcf2-19d7-409a-8e58-a672f205ccfa'::uuid, 'e09e4b9759120fe78b6e15752800cdd2d11288af9e3a557bdc99db4138384864', 'password', ? )
RETURNING *] 4]  type:  clojure.lang.PersistentArrayMap
2023-12-01T07:35:48.069Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #object[org.postgresql.util.PGobject 0x4b56fe8d {"user_agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko\/20100101 Firefox\/115.0","remote_addr":"127.0.0.1"}]
2023-12-01T07:35:48.080Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "73f50257-7157-4eef-977a-cce6eda49fd7" #object[org.postgresql.jdbc.PgResultSetMetaData 0x30535445 org.postgresql.jdbc.PgResultSetMetaData@30535445] 1]
2023-12-01T07:35:48.083Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"]
2023-12-01T07:35:48.084Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"
2023-12-01T07:35:48.084Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [e09e4b9759120fe78b6e15752800cdd2d11288af9e3a557bdc99db4138384864 #object[org.postgresql.jdbc.PgResultSetMetaData 0x30535445 org.postgresql.jdbc.PgResultSetMetaData@30535445] 2]
2023-12-01T07:35:48.084Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text e09e4b9759120fe78b6e15752800cdd2d11288af9e3a557bdc99db4138384864]
2023-12-01T07:35:48.084Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  e09e4b9759120fe78b6e15752800cdd2d11288af9e3a557bdc99db4138384864
2023-12-01T07:35:48.084Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x30535445 org.postgresql.jdbc.PgResultSetMetaData@30535445] 3]
2023-12-01T07:35:48.084Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.084Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.085Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:48.069930000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x30535445 org.postgresql.jdbc.PgResultSetMetaData@30535445] 5]
2023-12-01T07:35:48.085Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:48.069930000-00:00"]
2023-12-01T07:35:48.085Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:48.069930Z"
2023-12-01T07:35:48.087Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0xef88ff {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x30535445 org.postgresql.jdbc.PgResultSetMetaData@30535445] 6]
2023-12-01T07:35:48.087Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0xef88ff {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}]]
2023-12-01T07:35:48.088Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1}
2023-12-01T07:35:48.088Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x30535445 org.postgresql.jdbc.PgResultSetMetaData@30535445] 7]
2023-12-01T07:35:48.088Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text password]
2023-12-01T07:35:48.089Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:35:48.151Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:35:48.165Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xe621717 HikariProxyPreparedStatement@241309463 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:35:48.166Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:35:48.167Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 3bc3c375-d6b0-4d62-ada2-3134e5078f95 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xe621717 HikariProxyPreparedStatement@241309463 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:35:48.167Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  3bc3c375-d6b0-4d62-ada2-3134e5078f95
2023-12-01T07:35:48.168Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xe621717 HikariProxyPreparedStatement@241309463 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:35:48.168Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:35:48.169Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xe621717 HikariProxyPreparedStatement@241309463 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:35:48.169Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:35:48.177Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x3dfe5130 org.postgresql.jdbc.PgResultSetMetaData@3dfe5130] 1]
2023-12-01T07:35:48.178Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:35:48.178Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:35:48.178Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x3dfe5130 org.postgresql.jdbc.PgResultSetMetaData@3dfe5130] 2]
2023-12-01T07:35:48.178Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:35:48.178Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:35:48.178Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3dfe5130 org.postgresql.jdbc.PgResultSetMetaData@3dfe5130] 3]
2023-12-01T07:35:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x3dfe5130 org.postgresql.jdbc.PgResultSetMetaData@3dfe5130] 6]
2023-12-01T07:35:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:35:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:35:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3dfe5130 org.postgresql.jdbc.PgResultSetMetaData@3dfe5130] 10]
2023-12-01T07:35:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.179Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.180Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x3dfe5130 org.postgresql.jdbc.PgResultSetMetaData@3dfe5130] 11]
2023-12-01T07:35:48.180Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.180Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.180Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x3dfe5130 org.postgresql.jdbc.PgResultSetMetaData@3dfe5130] 12]
2023-12-01T07:35:48.180Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.180Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.180Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "73f50257-7157-4eef-977a-cce6eda49fd7" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3dfe5130 org.postgresql.jdbc.PgResultSetMetaData@3dfe5130] 13]
2023-12-01T07:35:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"]
2023-12-01T07:35:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"
2023-12-01T07:35:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:48.069930000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3dfe5130 org.postgresql.jdbc.PgResultSetMetaData@3dfe5130] 14]
2023-12-01T07:35:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:48.069930000-00:00"]
2023-12-01T07:35:48.181Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:48.069930Z"
2023-12-01T07:35:48.182Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2a9198f6 HikariProxyPreparedStatement@714184950 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:35:48.182Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
>>> authenticate::skip= nil  handler-key= :procurement
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}, leihs-user-session {:value 3bc3c375-d6b0-4d62-ada2-3134e5078f95}}, :remote-addr 127.0.0.1, :start-time 178660278589333, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1; leihs-user-session=3bc3c375-d6b0-4d62-ada2-3134e5078f95, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x7ba49aef /127.0.0.1:3230<->/127.0.0.1:60637], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure, :server-name localhost, :handler-key :procurement, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :procurement
2023-12-01T07:35:48.187Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.190Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:35:48.192Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:35:48.194Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]

> 1 anti-csrf-token >  96062568-3c93-4557-913c-ee2b025cc3a1

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:35:48.196Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:35:48.197Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:35:48.567Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1f2817f1 HikariProxyPreparedStatement@522721265 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:35:48.567Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:35:48.568Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 3bc3c375-d6b0-4d62-ada2-3134e5078f95 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1f2817f1 HikariProxyPreparedStatement@522721265 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:35:48.568Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  3bc3c375-d6b0-4d62-ada2-3134e5078f95
2023-12-01T07:35:48.569Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1f2817f1 HikariProxyPreparedStatement@522721265 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:35:48.569Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:35:48.569Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1f2817f1 HikariProxyPreparedStatement@522721265 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:35:48.569Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:35:48.571Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x71f07975 org.postgresql.jdbc.PgResultSetMetaData@71f07975] 1]
2023-12-01T07:35:48.571Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:35:48.571Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:35:48.572Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x71f07975 org.postgresql.jdbc.PgResultSetMetaData@71f07975] 2]
2023-12-01T07:35:48.572Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:35:48.572Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:35:48.572Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x71f07975 org.postgresql.jdbc.PgResultSetMetaData@71f07975] 3]
2023-12-01T07:35:48.572Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.572Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.572Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x71f07975 org.postgresql.jdbc.PgResultSetMetaData@71f07975] 6]
2023-12-01T07:35:48.572Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:35:48.573Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:35:48.573Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x71f07975 org.postgresql.jdbc.PgResultSetMetaData@71f07975] 10]
2023-12-01T07:35:48.573Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.573Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.573Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x71f07975 org.postgresql.jdbc.PgResultSetMetaData@71f07975] 11]
2023-12-01T07:35:48.573Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.573Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.573Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x71f07975 org.postgresql.jdbc.PgResultSetMetaData@71f07975] 12]
2023-12-01T07:35:48.573Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.573Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.574Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "73f50257-7157-4eef-977a-cce6eda49fd7" #object[org.postgresql.jdbc.PgResultSetMetaData 0x71f07975 org.postgresql.jdbc.PgResultSetMetaData@71f07975] 13]
2023-12-01T07:35:48.574Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"]
2023-12-01T07:35:48.574Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"
2023-12-01T07:35:48.574Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:48.069930000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x71f07975 org.postgresql.jdbc.PgResultSetMetaData@71f07975] 14]
2023-12-01T07:35:48.574Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:48.069930000-00:00"]
2023-12-01T07:35:48.574Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:48.069930Z"
2023-12-01T07:35:48.575Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5eddcc75 HikariProxyPreparedStatement@1591594101 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:35:48.575Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}, leihs-user-session {:value 3bc3c375-d6b0-4d62-ada2-3134e5078f95}}, :remote-addr 127.0.0.1, :start-time 178660682264500, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1; leihs-user-session=3bc3c375-d6b0-4d62-ada2-3134e5078f95, referer http://localhost:3230/procure, connection keep-alive, accept image/avif,image/webp,*/*, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x30eb34d6 /127.0.0.1:3230<->/127.0.0.1:60644], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure/favicon.ico, :server-name localhost, :handler-key :not-found, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :not-found
2023-12-01T07:35:48.577Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.578Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:35:48.578Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:35:48.579Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]

> 1 anti-csrf-token >  96062568-3c93-4557-913c-ee2b025cc3a1

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:35:48.585Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:35:48.585Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:35:48.607Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1b795f8 HikariProxyPreparedStatement@28808696 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:35:48.607Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:35:48.608Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 3bc3c375-d6b0-4d62-ada2-3134e5078f95 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1b795f8 HikariProxyPreparedStatement@28808696 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:35:48.608Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  3bc3c375-d6b0-4d62-ada2-3134e5078f95
2023-12-01T07:35:48.608Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1b795f8 HikariProxyPreparedStatement@28808696 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:35:48.609Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:35:48.609Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1b795f8 HikariProxyPreparedStatement@28808696 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:35:48.610Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:35:48.612Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x37102b6d org.postgresql.jdbc.PgResultSetMetaData@37102b6d] 1]
2023-12-01T07:35:48.612Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:35:48.613Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:35:48.613Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x37102b6d org.postgresql.jdbc.PgResultSetMetaData@37102b6d] 2]
2023-12-01T07:35:48.613Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:35:48.613Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:35:48.613Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x37102b6d org.postgresql.jdbc.PgResultSetMetaData@37102b6d] 3]
2023-12-01T07:35:48.613Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.613Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.613Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x37102b6d org.postgresql.jdbc.PgResultSetMetaData@37102b6d] 6]
2023-12-01T07:35:48.613Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:35:48.613Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x37102b6d org.postgresql.jdbc.PgResultSetMetaData@37102b6d] 10]
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x37102b6d org.postgresql.jdbc.PgResultSetMetaData@37102b6d] 11]
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x37102b6d org.postgresql.jdbc.PgResultSetMetaData@37102b6d] 12]
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "73f50257-7157-4eef-977a-cce6eda49fd7" #object[org.postgresql.jdbc.PgResultSetMetaData 0x37102b6d org.postgresql.jdbc.PgResultSetMetaData@37102b6d] 13]
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"]
2023-12-01T07:35:48.614Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"
2023-12-01T07:35:48.615Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:48.069930000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x37102b6d org.postgresql.jdbc.PgResultSetMetaData@37102b6d] 14]
2023-12-01T07:35:48.615Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:48.069930000-00:00"]
2023-12-01T07:35:48.615Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:48.069930Z"
2023-12-01T07:35:48.616Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7f8d6255 HikariProxyPreparedStatement@2139972181 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:35:48.616Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}, leihs-user-session {:value 3bc3c375-d6b0-4d62-ada2-3134e5078f95}}, :remote-addr 127.0.0.1, :start-time 178660689223416, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1; leihs-user-session=3bc3c375-d6b0-4d62-ada2-3134e5078f95, content-length 502, referer http://localhost:3230/procure, connection keep-alive, x-csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x7e0f223f /127.0.0.1:3230<->/127.0.0.1:60637], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:35:48.620Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.621Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:35:48.621Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:35:48.622Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]

> 1 anti-csrf-token >  96062568-3c93-4557-913c-ee2b025cc3a1

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:35:48.625Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
2023-12-01T07:35:48.627Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
>>>1 #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.638Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
>>>2 {:id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :firstname Procurement, :lastname Admin}
>>oida>> #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.641Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
>>>3 nil
2023-12-01T07:35:48.665Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.666Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}, leihs-user-session {:value 3bc3c375-d6b0-4d62-ada2-3134e5078f95}}, :remote-addr 127.0.0.1, :start-time 178660689223416, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1; leihs-user-session=3bc3c375-d6b0-4d62-ada2-3134e5078f95, content-length 502, referer http://localhost:3230/procure, connection keep-alive, x-csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x7e0f223f /127.0.0.1:3230<->/127.0.0.1:60637], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:35:48.714Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"96062568-3c93-4557-913c-ee2b025cc3a1\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"ddfafcf2-19d7-409a-8e58-a672f205ccfa\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "ddfafcf2-19d7-409a-8e58-a672f205ccfa"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>3apure-handler, result=> {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"96062568-3c93-4557-913c-ee2b025cc3a1","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"ddfafcf2-19d7-409a-8e58-a672f205ccfa","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Züritüütsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id ddfafcf2-19d7-409a-8e58-a672f205ccfa] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-12-01T07:35:48.716Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:35:48.831Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x75941aef HikariProxyPreparedStatement@1972640495 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:35:48.831Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:35:48.832Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 3bc3c375-d6b0-4d62-ada2-3134e5078f95 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x75941aef HikariProxyPreparedStatement@1972640495 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:35:48.832Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  3bc3c375-d6b0-4d62-ada2-3134e5078f95
2023-12-01T07:35:48.833Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x75941aef HikariProxyPreparedStatement@1972640495 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:35:48.833Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:35:48.834Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x75941aef HikariProxyPreparedStatement@1972640495 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:35:48.835Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:35:48.837Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x49f24087 org.postgresql.jdbc.PgResultSetMetaData@49f24087] 1]
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x610c5c64 HikariProxyPreparedStatement@1628200036 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x49f24087 org.postgresql.jdbc.PgResultSetMetaData@49f24087] 2]
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49f24087 org.postgresql.jdbc.PgResultSetMetaData@49f24087] 3]
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.838Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x49f24087 org.postgresql.jdbc.PgResultSetMetaData@49f24087] 6]
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 3bc3c375-d6b0-4d62-ada2-3134e5078f95 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x610c5c64 HikariProxyPreparedStatement@1628200036 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49f24087 org.postgresql.jdbc.PgResultSetMetaData@49f24087] 10]
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  3bc3c375-d6b0-4d62-ada2-3134e5078f95
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x49f24087 org.postgresql.jdbc.PgResultSetMetaData@49f24087] 11]
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x49f24087 org.postgresql.jdbc.PgResultSetMetaData@49f24087] 12]
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "73f50257-7157-4eef-977a-cce6eda49fd7" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49f24087 org.postgresql.jdbc.PgResultSetMetaData@49f24087] 13]
2023-12-01T07:35:48.839Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x610c5c64 HikariProxyPreparedStatement@1628200036 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:35:48.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"]
2023-12-01T07:35:48.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"
2023-12-01T07:35:48.840Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:35:48.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:48.069930000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49f24087 org.postgresql.jdbc.PgResultSetMetaData@49f24087] 14]
2023-12-01T07:35:48.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:48.069930000-00:00"]
2023-12-01T07:35:48.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:48.069930Z"
2023-12-01T07:35:48.841Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4468c550 HikariProxyPreparedStatement@1147716944 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:35:48.841Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.841Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x610c5c64 HikariProxyPreparedStatement@1628200036 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:35:48.841Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}, leihs-user-session {:value 3bc3c375-d6b0-4d62-ada2-3134e5078f95}}, :remote-addr 127.0.0.1, :start-time 178660939929458, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1; leihs-user-session=3bc3c375-d6b0-4d62-ada2-3134e5078f95, content-length 502, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x200afcf8 /127.0.0.1:3230<->/127.0.0.1:60645], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:35:48.843Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.844Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:35:48.845Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:35:48.845Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]

> 1 anti-csrf-token >  96062568-3c93-4557-913c-ee2b025cc3a1

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:35:48.848Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
2023-12-01T07:35:48.850Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
2023-12-01T07:35:48.851Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3681cc30 HikariProxyPreparedStatement@914476080 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:35:48.851Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
>>>1 #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.852Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.852Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 3bc3c375-d6b0-4d62-ada2-3134e5078f95 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3681cc30 HikariProxyPreparedStatement@914476080 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:35:48.852Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  3bc3c375-d6b0-4d62-ada2-3134e5078f95
>>>2 {:id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :firstname Procurement, :lastname Admin}
>>oida>> #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.853Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.853Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3681cc30 HikariProxyPreparedStatement@914476080 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:35:48.853Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
>>>3 nil
2023-12-01T07:35:48.854Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3681cc30 HikariProxyPreparedStatement@914476080 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('3bc3c375-d6b0-4d62-ada2-3134e5078f95', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:35:48.854Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:35:48.857Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x3749bdfb org.postgresql.jdbc.PgResultSetMetaData@3749bdfb] 1]
2023-12-01T07:35:48.858Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:35:48.858Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:35:48.858Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x3749bdfb org.postgresql.jdbc.PgResultSetMetaData@3749bdfb] 2]
2023-12-01T07:35:48.858Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:35:48.858Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:35:48.858Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3749bdfb org.postgresql.jdbc.PgResultSetMetaData@3749bdfb] 3]
2023-12-01T07:35:48.858Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.858Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.858Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x3749bdfb org.postgresql.jdbc.PgResultSetMetaData@3749bdfb] 6]
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3749bdfb org.postgresql.jdbc.PgResultSetMetaData@3749bdfb] 10]
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x3749bdfb org.postgresql.jdbc.PgResultSetMetaData@3749bdfb] 11]
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x3749bdfb org.postgresql.jdbc.PgResultSetMetaData@3749bdfb] 12]
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.859Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.860Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "73f50257-7157-4eef-977a-cce6eda49fd7" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3749bdfb org.postgresql.jdbc.PgResultSetMetaData@3749bdfb] 13]
2023-12-01T07:35:48.860Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"]
2023-12-01T07:35:48.860Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"
2023-12-01T07:35:48.860Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:48.069930000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3749bdfb org.postgresql.jdbc.PgResultSetMetaData@3749bdfb] 14]
2023-12-01T07:35:48.860Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:48.069930000-00:00"]
2023-12-01T07:35:48.860Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:48.069930Z"
2023-12-01T07:35:48.861Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7f4bab49 HikariProxyPreparedStatement@2135665481 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:35:48.861Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}, leihs-user-session {:value 3bc3c375-d6b0-4d62-ada2-3134e5078f95}}, :remote-addr 127.0.0.1, :start-time 178660938582958, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1; leihs-user-session=3bc3c375-d6b0-4d62-ada2-3134e5078f95, content-length 3575, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x1d22342c /127.0.0.1:3230<->/127.0.0.1:60644], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 3575, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestsIndexFiltered, :variables {}, :query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:35:48.863Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.864Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.864Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.865Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:35:48.865Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x7240e182 org.postgresql.jdbc.PgResultSetMetaData@7240e182] 1]
2023-12-01T07:35:48.866Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}, leihs-user-session {:value 3bc3c375-d6b0-4d62-ada2-3134e5078f95}}, :remote-addr 127.0.0.1, :start-time 178660939929458, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1; leihs-user-session=3bc3c375-d6b0-4d62-ada2-3134e5078f95, content-length 502, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x200afcf8 /127.0.0.1:3230<->/127.0.0.1:60645], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:35:48.872Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.872Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"96062568-3c93-4557-913c-ee2b025cc3a1\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"ddfafcf2-19d7-409a-8e58-a672f205ccfa\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "ddfafcf2-19d7-409a-8e58-a672f205ccfa"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>3apure-handler, result=> {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"96062568-3c93-4557-913c-ee2b025cc3a1","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"ddfafcf2-19d7-409a-8e58-a672f205ccfa","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Züritüütsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id ddfafcf2-19d7-409a-8e58-a672f205ccfa] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester false] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-12-01T07:35:48.873Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:35:48.876Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:35:48.876Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:35:48.876Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x7240e182 org.postgresql.jdbc.PgResultSetMetaData@7240e182] 2]
2023-12-01T07:35:48.876Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7240e182 org.postgresql.jdbc.PgResultSetMetaData@7240e182] 3]
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x7240e182 org.postgresql.jdbc.PgResultSetMetaData@7240e182] 6]
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7240e182 org.postgresql.jdbc.PgResultSetMetaData@7240e182] 10]
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.877Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x7240e182 org.postgresql.jdbc.PgResultSetMetaData@7240e182] 11]
2023-12-01T07:35:48.878Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.878Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.878Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x7240e182 org.postgresql.jdbc.PgResultSetMetaData@7240e182] 12]
2023-12-01T07:35:48.878Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:35:48.878Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:35:48.878Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "73f50257-7157-4eef-977a-cce6eda49fd7" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7240e182 org.postgresql.jdbc.PgResultSetMetaData@7240e182] 13]

> 1 anti-csrf-token >  96062568-3c93-4557-913c-ee2b025cc3a1

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:35:48.878Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:35:48.878Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"]
2023-12-01T07:35:48.879Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "73f50257-7157-4eef-977a-cce6eda49fd7"
2023-12-01T07:35:48.879Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:35:48.069930000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7240e182 org.postgresql.jdbc.PgResultSetMetaData@7240e182] 14]
2023-12-01T07:35:48.879Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:35:48.069930000-00:00"]
2023-12-01T07:35:48.879Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:35:48.069930Z"
2023-12-01T07:35:48.881Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x52d05308 HikariProxyPreparedStatement@1389384456 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:35:48.881Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}, leihs-user-session {:value 3bc3c375-d6b0-4d62-ada2-3134e5078f95}}, :remote-addr 127.0.0.1, :start-time 178660939348833, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1; leihs-user-session=3bc3c375-d6b0-4d62-ada2-3134e5078f95, content-length 534, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x3a3cf684 /127.0.0.1:3230<->/127.0.0.1:60637], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:35:48.885Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.887Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:35:48.888Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:35:48.889Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]

> 1 anti-csrf-token >  96062568-3c93-4557-913c-ee2b025cc3a1

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:35:48.891Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
2023-12-01T07:35:48.892Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
pure-handler >> 2
2023-12-01T07:35:48.893Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
>>>get-dashboard
>>args {}
>>value nil
>>mainCatsSql [SELECT procurement_main_categories.* FROM procurement_main_categories ORDER BY procurement_main_categories.name ASC]
>>mainCats [{:id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Main Category MC1}]
>>queryA1 [SELECT * FROM procurement_budget_periods ORDER BY end_date DESC]
>>resultA1 [{:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}]
>>resultA1-2 [{:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}]
>>requestsB2-triggerError {} nil
>o> helper1
>o> helper2 nil nil nil
>oo> helper3a priority nil
>oo> helper3b priority nil
>oo> helper4a inspector-priority nil
>oo> helper4b inspector-priority nil
>o> helper5
>oo> helper5a :order_status nil
>oo> helper5b :order_status nil
>oo> order-status nil
>o> helper6
2023-12-01T07:35:48.912Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:35:48.913Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:35:48.914Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.914Z NX-41294 DEBUG [leihs.procurement.permissions.user:103] - (->> [viewer? inspector? admin?] (map (fn* [p1__39297#] (p1__39297# tx auth-entity))) (some true?)) => true
>o> helper7 true
>o> requests-base-query-with-state
>o> state-sql true
>o> s-map  {:NEW [:= :procurement_requests.approved_quantity nil], :APPROVED [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity], :PARTIALLY_APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]], :DENIED [:= :procurement_requests.approved_quantity 0]}
>o>map-4 (>o> map NEW
>o> map [:= :procurement_requests.approved_quantity nil]
:case >o> map NEW
[:= :procurement_requests.approved_quantity nil] >o> map APPROVED
>o> map [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]
NEW >o> map APPROVED
[:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] >o> map PARTIALLY_APPROVED
>o> map [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]
APPROVED >o> map PARTIALLY_APPROVED
[:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] >o> map DENIED
>o> map [:= :procurement_requests.approved_quantity 0]
PARTIALLY_APPROVED >o> map DENIED
[:= :procurement_requests.approved_quantity 0] DENIED)
>o>map-5 (:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)
2023-12-01T07:35:48.915Z NX-41294 DEBUG [leihs.procurement.resources.request:171] - result => [[(:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED")]]
>o> join-and-nest-budget-periods
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id]]}
>o> tbl :procurement_budget_periods_2
>o> nest-key :budget_period
>o> join-and-nest-categories
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id]]}
>o> tbl :models
>o> nest-key :model
>o> join-and-nest-templates
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id]]}
>o> tbl :procurement_templates
>o> nest-key :template
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :suppliers
>o> nest-key :supplier
>o> join-and-nest-users
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]] [[[:row_to_json :suppliers]] :supplier]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :users
>o> nest-key :user
>o> helper8
>oo> helper8 nil nil nil
>o> apply-scope #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"
2023-12-01T07:35:48.918Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.919Z NX-41294 DEBUG [leihs.procurement.permissions.requests:25] - sqlmap => {:select [[[:raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*"]] [[[(:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED")]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw "row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category"]] [[[:row_to_json :models]] :model] [[:raw "row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization"]] [[[:row_to_json :procurement_templates]] :template] [[:raw "row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room"]] [[[:row_to_json :suppliers]] :supplier] [[[:row_to_json :users]] :user]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by [[[:raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> abc [SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, ((CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END)) AS state, (ROW_TO_JSON(procurement_budget_periods_2)) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, (ROW_TO_JSON(models)) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, (ROW_TO_JSON(procurement_templates)) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, (ROW_TO_JSON(suppliers)) AS supplier, (ROW_TO_JSON(users)) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) AS procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations AS procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, ''))) ASC NEW APPROVED 0 PARTIALLY_APPROVED 0 DENIED]
2023-12-01T07:35:48.921Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:35:48.922Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:35:48.922Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.923Z NX-41294 DEBUG [leihs.procurement.permissions.user:103] - (->> [viewer? inspector? admin?] (map (fn* [p1__39297#] (p1__39297# tx auth-entity))) (some true?)) => true

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}, leihs-user-session {:value 3bc3c375-d6b0-4d62-ada2-3134e5078f95}}, :remote-addr 127.0.0.1, :start-time 178660939348833, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1; leihs-user-session=3bc3c375-d6b0-4d62-ada2-3134e5078f95, content-length 534, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x3a3cf684 /127.0.0.1:3230<->/127.0.0.1:60637], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:35:48.938Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message "Non-nullable field was null.", :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message "Non-nullable field was null.", :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}
2023-12-01T07:35:48.938Z NX-41294 DEBUG [leihs.procurement.graphql:109] - {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message "Non-nullable field was null.", :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message "Non-nullable field was null.", :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}

>o> ERROR 4pure-handler, result=> {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message Non-nullable field was null., :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message Non-nullable field was null., :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message Non-nullable field was null., :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message Non-nullable field was null., :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message Non-nullable field was null., :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message Non-nullable field was null., :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}
2023-12-01T07:35:48.939Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>o>requestsB2 (2023-12-01T07:35:48.947Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => 2970e054-582a-459b-a6ff-c8caaecb7546
2023-12-01T07:35:48.948Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => [SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID) #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.948Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => [SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL]
2023-12-01T07:35:48.949Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => [SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID) #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa"]
2023-12-01T07:35:48.951Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => [SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE (user_id IS NULL) AND (category_id = CAST(? AS UUID)) 052af526-d871-4dfe-9f65-b333f9073b67]
2023-12-01T07:35:48.952Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => [SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE (user_id IS NULL) AND (category_id = CAST(? AS UUID)) 052af526-d871-4dfe-9f65-b333f9073b67]
>oo> can-write-any-field?
>oo> can-write-any-field/attr to remove [#{:state :id :total_price_cents :short_id} #{:DELETE} [:budget_period :category :created_at :organization :updated_at]]
{:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}})
>o>dashboard-cache-keyB2 {:id -15128758}
2023-12-01T07:35:48.955Z NX-41294 DEBUG [leihs.procurement.dashboard:265] - (count requests) => 1
>o> cache-key ({:id -15128758})
2023-12-01T07:35:48.956Z NX-41294 DEBUG [leihs.procurement.dashboard:266] - (cache-key dashboard-cache-key) => -15128758

>o> final-result (>o> bp {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}
>o> cache-key ({:id -15128758} {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"})
>oo> 1sum-total-price :total_price_cents (>o> mc {:id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Main Category MC1}
>o> filter-and-assoc-cats ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}})

>o> result 2a (>o> c {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}
>o> c {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}
>o> 2 requests* ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}})
>oo> 1sum-total-price :total_price_cents ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}})
>oo> 2sum-total-price :total_price_cents nil
>o> cache-key ({:id -15128758} {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"} {:id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Main Category MC1} {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil})

>o> result 1a {:main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}}), :general_ledger_account nil, :id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67, :cost_center nil} 


>o> filter-and-assoc-cats (json) {"main_category_id":"c0911587-2485-45c1-a677-81e30658151d","name":"Category C1","requests":[{"category":{"read":true,"write":false,"default":{"id":"052af526-d871-4dfe-9f65-b333f9073b67","name":"Category C1","main_category_id":"c0911587-2485-45c1-a677-81e30658151d","general_ledger_account":null,"cost_center":null,"procurement_account":null},"required":true,"value":{"id":"052af526-d871-4dfe-9f65-b333f9073b67","name":"Category C1","cost_center":null,"main_category":{"id":"c0911587-2485-45c1-a677-81e30658151d","name":"Main Category MC1"},"main_category_id":"c0911587-2485-45c1-a677-81e30658151d","procurement_account":null,"general_ledger_account":null},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"supplier":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"motivation":{"read":true,"write":false,"required":true,"value":"Corporis commodi provident nam.","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"accounting_type":{"read":true,"write":false,"default":"aquisition","required":true,"value":"aquisition","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"template_id":{"value":null,"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"actionPermissions":{"edit":true,"delete":false,"moveBudgetPeriod":false,"moveCategory":false},"article_number":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"inspector_priority":{"read":true,"write":false,"default":"MEDIUM","required":true,"value":"medium","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"price_cents":{"read":true,"write":false,"default":0,"required":true,"value":0,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"budget_period":{"read":true,"write":false,"default":{"id":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","name":"Budget-Period-Past","inspection_start_date":"2023-08-31T22:00:00.000Z","end_date":"2023-11-29T23:00:00.000Z","created_at":"2023-12-01T07:35:47.361Z","updated_at":"2023-12-01T07:35:47.361Z"},"required":true,"value":{"id":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","name":"Budget-Period-Past","inspection_start_date":"2023-09-01T00:00:00+02:00","end_date":"2023-11-30T00:00:00+01:00","created_at":"2023-12-01T08:35:47.361526","updated_at":"2023-12-01T08:35:47.361526","is_past":true},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"article_name":{"read":true,"write":false,"default":null,"required":true,"value":"Mediocre Aluminum Shoes","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"organization_id":{"value":"12e9f49d-0a40-4a8c-bacb-ce36206de55b","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"replacement":{"read":true,"write":false,"default":null,"required":true,"value":true,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"DELETE":false,"template":{"read":true,"write":false,"default":null,"required":true,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"state":"NEW","organization":{"value":{"id":"12e9f49d-0a40-4a8c-bacb-ce36206de55b","name":"Beauty & Kids","parent_id":"4603ea7d-9eb6-4511-ae9a-4baff83288d4","shortname":null,"department":{"id":"4603ea7d-9eb6-4511-ae9a-4baff83288d4","name":"Home, Jewelry & Computers","parent_id":null,"shortname":null}},"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"supplier_name":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"order_status":{"read":true,"write":true,"default":"NOT_PROCURED","required":true,"value":"not_processed","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"requested_quantity":{"read":true,"write":false,"required":true,"value":1,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"updated_at":{"value":"2023-12-01T07:35:47.431Z","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"model_id":{"value":null,"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"priority":{"read":true,"write":false,"default":"NORMAL","required":true,"value":"normal","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"supplier_id":{"value":null,"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"budget_period_id":{"value":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"id":"1439593f-6ddf-482a-a010-b7feffad62ff","price_currency":{"read":true,"write":false,"default":"CHF","required":true,"value":"CHF","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"user_id":{"value":"2970e054-582a-459b-a6ff-c8caaecb7546","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"room":{"read":true,"write":false,"default":{"id":"b8927fd2-014c-48c2-b095-fa1d5620debe","name":"general room","description":null,"building_id":"abae04c5-d767-425e-acc2-7ce04df645d1","general":true,"building":{"id":"abae04c5-d767-425e-acc2-7ce04df645d1","name":"general building","code":null}},"required":true,"value":{"id":"e426fcbe-47ec-410d-9270-ed348ffb2bb5","name":"reception room","general":false,"building":{"id":"676e816f-d047-45d1-81f4-976b8b674e00","code":null,"name":"9594 Beer Extension"},"building_id":"676e816f-d047-45d1-81f4-976b8b674e00","description":null},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"inspection_comment":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"approved_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"order_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"room_id":{"value":"e426fcbe-47ec-410d-9270-ed348ffb2bb5","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"user":{"read":true,"write":false,"required":true,"default":{"id":"2970e054-582a-459b-a6ff-c8caaecb7546","firstname":"Lynsey","lastname":"Kertzmann"},"value":{"system_admin_protected":false,"address":null,"email":"chanda@ortiz.net","pool_protected":false,"last_sign_in_at":null,"img32_url":null,"account_enabled":true,"lastname":"Kertzmann","phone":null,"img_digest":null,"org_id":null,"extended_info":null,"secondary_email":null,"city":null,"settings":null,"is_admin":false,"organization":"local","login":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","updated_at":"2023-12-01T08:35:47.375131+01:00","firstname":"Lynsey","zip":null,"id":"2970e054-582a-459b-a6ff-c8caaecb7546","url":null,"password_sign_in_enabled":true,"account_disabled_at":null,"is_system_admin":false,"badge_id":null,"language_locale":null,"img256_url":null,"country":null,"delegator_user_id":null,"created_at":"2023-12-01T08:35:47.375131+01:00","admin_protected":false},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"receiver":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"internal_order_number":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"category_id":{"value":"052af526-d871-4dfe-9f65-b333f9073b67","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"created_at":{"value":"2023-12-01T07:35:47.431Z","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"order_comment":{"read":true,"write":true,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"short_id":"Budget-Period-Past.001","model":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"}}],"general_ledger_account":null,"id":"052af526-d871-4dfe-9f65-b333f9073b67","total_price_cents":0,"procurement_account":null,"cacheKey":"-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67","cost_center":null} 


>o> filter-and-assoc-cats -> :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"} 


>o> filter-and-assoc-cats -> :budget_period (json) {"read":true,"write":false,"default":{"id":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","name":"Budget-Period-Past","inspection_start_date":"2023-08-31T22:00:00.000Z","end_date":"2023-11-29T23:00:00.000Z","created_at":"2023-12-01T07:35:47.361Z","updated_at":"2023-12-01T07:35:47.361Z"},"required":true,"value":{"id":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","name":"Budget-Period-Past","inspection_start_date":"2023-09-01T00:00:00+02:00","end_date":"2023-11-30T00:00:00+01:00","created_at":"2023-12-01T08:35:47.361526","updated_at":"2023-12-01T08:35:47.361526","is_past":true},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"} 

{:main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}}), :general_ledger_account nil, :id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67, :cost_center nil}) 

>oo> 1sum-total-price :total_price_cents ({:main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}}), :general_ledger_account nil, :id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67, :cost_center nil})
>oo> 2sum-total-price :total_price_cents nil
>o> cache-key ({:id -15128758} {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"} {:id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Main Category MC1})

>o> result 3a {:id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Main Category MC1, :categories ({:main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}}), :general_ledger_account nil, :id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d} 

{:id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Main Category MC1, :categories ({:main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}}), :general_ledger_account nil, :id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d})
>oo> 2sum-total-price :total_price_cents nil

>o> :assoc-data {:main_categories ({:id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Main Category MC1, :categories ({:main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}}), :general_ledger_account nil, :id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d}), :name Budget-Period-Past, :updated_at #inst "2023-12-01T07:35:47.361526000-00:00", :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :total_price_cents 0, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :created_at #inst "2023-12-01T07:35:47.361526000-00:00"} 


>o> :assoc-data (json) {"main_categories":[{"id":"c0911587-2485-45c1-a677-81e30658151d","name":"Main Category MC1","categories":[{"main_category_id":"c0911587-2485-45c1-a677-81e30658151d","name":"Category C1","requests":[{"category":{"read":true,"write":false,"default":{"id":"052af526-d871-4dfe-9f65-b333f9073b67","name":"Category C1","main_category_id":"c0911587-2485-45c1-a677-81e30658151d","general_ledger_account":null,"cost_center":null,"procurement_account":null},"required":true,"value":{"id":"052af526-d871-4dfe-9f65-b333f9073b67","name":"Category C1","cost_center":null,"main_category":{"id":"c0911587-2485-45c1-a677-81e30658151d","name":"Main Category MC1"},"main_category_id":"c0911587-2485-45c1-a677-81e30658151d","procurement_account":null,"general_ledger_account":null},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"supplier":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"motivation":{"read":true,"write":false,"required":true,"value":"Corporis commodi provident nam.","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"accounting_type":{"read":true,"write":false,"default":"aquisition","required":true,"value":"aquisition","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"template_id":{"value":null,"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"actionPermissions":{"edit":true,"delete":false,"moveBudgetPeriod":false,"moveCategory":false},"article_number":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"inspector_priority":{"read":true,"write":false,"default":"MEDIUM","required":true,"value":"medium","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"price_cents":{"read":true,"write":false,"default":0,"required":true,"value":0,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"budget_period":{"read":true,"write":false,"default":{"id":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","name":"Budget-Period-Past","inspection_start_date":"2023-08-31T22:00:00.000Z","end_date":"2023-11-29T23:00:00.000Z","created_at":"2023-12-01T07:35:47.361Z","updated_at":"2023-12-01T07:35:47.361Z"},"required":true,"value":{"id":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","name":"Budget-Period-Past","inspection_start_date":"2023-09-01T00:00:00+02:00","end_date":"2023-11-30T00:00:00+01:00","created_at":"2023-12-01T08:35:47.361526","updated_at":"2023-12-01T08:35:47.361526","is_past":true},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"article_name":{"read":true,"write":false,"default":null,"required":true,"value":"Mediocre Aluminum Shoes","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"organization_id":{"value":"12e9f49d-0a40-4a8c-bacb-ce36206de55b","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"replacement":{"read":true,"write":false,"default":null,"required":true,"value":true,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"DELETE":false,"template":{"read":true,"write":false,"default":null,"required":true,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"state":"NEW","organization":{"value":{"id":"12e9f49d-0a40-4a8c-bacb-ce36206de55b","name":"Beauty & Kids","parent_id":"4603ea7d-9eb6-4511-ae9a-4baff83288d4","shortname":null,"department":{"id":"4603ea7d-9eb6-4511-ae9a-4baff83288d4","name":"Home, Jewelry & Computers","parent_id":null,"shortname":null}},"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"supplier_name":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"order_status":{"read":true,"write":true,"default":"NOT_PROCURED","required":true,"value":"not_processed","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"requested_quantity":{"read":true,"write":false,"required":true,"value":1,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"updated_at":{"value":"2023-12-01T07:35:47.431Z","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"model_id":{"value":null,"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"priority":{"read":true,"write":false,"default":"NORMAL","required":true,"value":"normal","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"supplier_id":{"value":null,"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"budget_period_id":{"value":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"id":"1439593f-6ddf-482a-a010-b7feffad62ff","price_currency":{"read":true,"write":false,"default":"CHF","required":true,"value":"CHF","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"user_id":{"value":"2970e054-582a-459b-a6ff-c8caaecb7546","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"room":{"read":true,"write":false,"default":{"id":"b8927fd2-014c-48c2-b095-fa1d5620debe","name":"general room","description":null,"building_id":"abae04c5-d767-425e-acc2-7ce04df645d1","general":true,"building":{"id":"abae04c5-d767-425e-acc2-7ce04df645d1","name":"general building","code":null}},"required":true,"value":{"id":"e426fcbe-47ec-410d-9270-ed348ffb2bb5","name":"reception room","general":false,"building":{"id":"676e816f-d047-45d1-81f4-976b8b674e00","code":null,"name":"9594 Beer Extension"},"building_id":"676e816f-d047-45d1-81f4-976b8b674e00","description":null},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"inspection_comment":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"approved_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"order_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"room_id":{"value":"e426fcbe-47ec-410d-9270-ed348ffb2bb5","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"user":{"read":true,"write":false,"required":true,"default":{"id":"2970e054-582a-459b-a6ff-c8caaecb7546","firstname":"Lynsey","lastname":"Kertzmann"},"value":{"system_admin_protected":false,"address":null,"email":"chanda@ortiz.net","pool_protected":false,"last_sign_in_at":null,"img32_url":null,"account_enabled":true,"lastname":"Kertzmann","phone":null,"img_digest":null,"org_id":null,"extended_info":null,"secondary_email":null,"city":null,"settings":null,"is_admin":false,"organization":"local","login":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","updated_at":"2023-12-01T08:35:47.375131+01:00","firstname":"Lynsey","zip":null,"id":"2970e054-582a-459b-a6ff-c8caaecb7546","url":null,"password_sign_in_enabled":true,"account_disabled_at":null,"is_system_admin":false,"badge_id":null,"language_locale":null,"img256_url":null,"country":null,"delegator_user_id":null,"created_at":"2023-12-01T08:35:47.375131+01:00","admin_protected":false},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"receiver":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"internal_order_number":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"category_id":{"value":"052af526-d871-4dfe-9f65-b333f9073b67","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"created_at":{"value":"2023-12-01T07:35:47.431Z","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"order_comment":{"read":true,"write":true,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"short_id":"Budget-Period-Past.001","model":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"}}],"general_ledger_account":null,"id":"052af526-d871-4dfe-9f65-b333f9073b67","total_price_cents":0,"procurement_account":null,"cacheKey":"-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67","cost_center":null}],"total_price_cents":0,"cacheKey":"-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d"}],"name":"Budget-Period-Past","updated_at":"2023-12-01T07:35:47.361Z","inspection_start_date":"2023-08-31T22:00:00.000Z","end_date":"2023-11-29T23:00:00.000Z","id":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","total_price_cents":0,"cacheKey":"-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8","created_at":"2023-12-01T07:35:47.361Z"} 

{:main_categories ({:id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Main Category MC1, :categories ({:main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name Category C1, :requests ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name Category C1, :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id 052af526-d871-4dfe-9f65-b333f9073b67, :name Category C1, :cost_center nil, :main_category {:id c0911587-2485-45c1-a677-81e30658151d, :name Main Category MC1}, :main_category_id c0911587-2485-45c1-a677-81e30658151d, :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value Corporis commodi provident nam., :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default aquisition, :required true, :value aquisition, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default MEDIUM, :required true, :value medium, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name Budget-Period-Past, :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :name Budget-Period-Past, :inspection_start_date 2023-09-01T00:00:00+02:00, :end_date 2023-11-30T00:00:00+01:00, :created_at 2023-12-01T08:35:47.361526, :updated_at 2023-12-01T08:35:47.361526, :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value Mediocre Aluminum Shoes, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state NEW, :organization {:value {:id 12e9f49d-0a40-4a8c-bacb-ce36206de55b, :name Beauty & Kids, :parent_id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :shortname nil, :department {:id 4603ea7d-9eb6-4511-ae9a-4baff83288d4, :name Home, Jewelry & Computers, :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default NOT_PROCURED, :required true, :value not_processed, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default NORMAL, :required true, :value normal, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default CHF, :required true, :value CHF, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name general room, :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name general building, :code nil}}, :required true, :value {:id e426fcbe-47ec-410d-9270-ed348ffb2bb5, :name reception room, :general false, :building {:id 676e816f-d047-45d1-81f4-976b8b674e00, :code nil, :name 9594 Beer Extension}, :building_id 676e816f-d047-45d1-81f4-976b8b674e00, :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname Lynsey, :lastname Kertzmann}, :value {:system_admin_protected false, :address nil, :email chanda@ortiz.net, :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname Kertzmann, :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization local, :login nil, :searchable Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey, :updated_at 2023-12-01T08:35:47.375131+01:00, :firstname Lynsey, :zip nil, :id 2970e054-582a-459b-a6ff-c8caaecb7546, :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at 2023-12-01T08:35:47.375131+01:00, :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id Budget-Period-Past.001, :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}}), :general_ledger_account nil, :id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d}), :name Budget-Period-Past, :updated_at #inst "2023-12-01T07:35:47.361526000-00:00", :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :total_price_cents 0, :cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8, :created_at #inst "2023-12-01T07:35:47.361526000-00:00"}) 


>o> final-result (json) [{"main_categories":[{"id":"c0911587-2485-45c1-a677-81e30658151d","name":"Main Category MC1","categories":[{"main_category_id":"c0911587-2485-45c1-a677-81e30658151d","name":"Category C1","requests":[{"category":{"read":true,"write":false,"default":{"id":"052af526-d871-4dfe-9f65-b333f9073b67","name":"Category C1","main_category_id":"c0911587-2485-45c1-a677-81e30658151d","general_ledger_account":null,"cost_center":null,"procurement_account":null},"required":true,"value":{"id":"052af526-d871-4dfe-9f65-b333f9073b67","name":"Category C1","cost_center":null,"main_category":{"id":"c0911587-2485-45c1-a677-81e30658151d","name":"Main Category MC1"},"main_category_id":"c0911587-2485-45c1-a677-81e30658151d","procurement_account":null,"general_ledger_account":null},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"supplier":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"motivation":{"read":true,"write":false,"required":true,"value":"Corporis commodi provident nam.","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"accounting_type":{"read":true,"write":false,"default":"aquisition","required":true,"value":"aquisition","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"template_id":{"value":null,"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"actionPermissions":{"edit":true,"delete":false,"moveBudgetPeriod":false,"moveCategory":false},"article_number":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"inspector_priority":{"read":true,"write":false,"default":"MEDIUM","required":true,"value":"medium","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"price_cents":{"read":true,"write":false,"default":0,"required":true,"value":0,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"budget_period":{"read":true,"write":false,"default":{"id":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","name":"Budget-Period-Past","inspection_start_date":"2023-08-31T22:00:00.000Z","end_date":"2023-11-29T23:00:00.000Z","created_at":"2023-12-01T07:35:47.361Z","updated_at":"2023-12-01T07:35:47.361Z"},"required":true,"value":{"id":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","name":"Budget-Period-Past","inspection_start_date":"2023-09-01T00:00:00+02:00","end_date":"2023-11-30T00:00:00+01:00","created_at":"2023-12-01T08:35:47.361526","updated_at":"2023-12-01T08:35:47.361526","is_past":true},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"article_name":{"read":true,"write":false,"default":null,"required":true,"value":"Mediocre Aluminum Shoes","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"organization_id":{"value":"12e9f49d-0a40-4a8c-bacb-ce36206de55b","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"replacement":{"read":true,"write":false,"default":null,"required":true,"value":true,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"DELETE":false,"template":{"read":true,"write":false,"default":null,"required":true,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"state":"NEW","organization":{"value":{"id":"12e9f49d-0a40-4a8c-bacb-ce36206de55b","name":"Beauty & Kids","parent_id":"4603ea7d-9eb6-4511-ae9a-4baff83288d4","shortname":null,"department":{"id":"4603ea7d-9eb6-4511-ae9a-4baff83288d4","name":"Home, Jewelry & Computers","parent_id":null,"shortname":null}},"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"supplier_name":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"order_status":{"read":true,"write":true,"default":"NOT_PROCURED","required":true,"value":"not_processed","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"requested_quantity":{"read":true,"write":false,"required":true,"value":1,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"updated_at":{"value":"2023-12-01T07:35:47.431Z","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"model_id":{"value":null,"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"priority":{"read":true,"write":false,"default":"NORMAL","required":true,"value":"normal","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"supplier_id":{"value":null,"read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"budget_period_id":{"value":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"id":"1439593f-6ddf-482a-a010-b7feffad62ff","price_currency":{"read":true,"write":false,"default":"CHF","required":true,"value":"CHF","request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"user_id":{"value":"2970e054-582a-459b-a6ff-c8caaecb7546","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"room":{"read":true,"write":false,"default":{"id":"b8927fd2-014c-48c2-b095-fa1d5620debe","name":"general room","description":null,"building_id":"abae04c5-d767-425e-acc2-7ce04df645d1","general":true,"building":{"id":"abae04c5-d767-425e-acc2-7ce04df645d1","name":"general building","code":null}},"required":true,"value":{"id":"e426fcbe-47ec-410d-9270-ed348ffb2bb5","name":"reception room","general":false,"building":{"id":"676e816f-d047-45d1-81f4-976b8b674e00","code":null,"name":"9594 Beer Extension"},"building_id":"676e816f-d047-45d1-81f4-976b8b674e00","description":null},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"inspection_comment":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"approved_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"order_quantity":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"room_id":{"value":"e426fcbe-47ec-410d-9270-ed348ffb2bb5","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"user":{"read":true,"write":false,"required":true,"default":{"id":"2970e054-582a-459b-a6ff-c8caaecb7546","firstname":"Lynsey","lastname":"Kertzmann"},"value":{"system_admin_protected":false,"address":null,"email":"chanda@ortiz.net","pool_protected":false,"last_sign_in_at":null,"img32_url":null,"account_enabled":true,"lastname":"Kertzmann","phone":null,"img_digest":null,"org_id":null,"extended_info":null,"secondary_email":null,"city":null,"settings":null,"is_admin":false,"organization":"local","login":null,"searchable":"Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey","updated_at":"2023-12-01T08:35:47.375131+01:00","firstname":"Lynsey","zip":null,"id":"2970e054-582a-459b-a6ff-c8caaecb7546","url":null,"password_sign_in_enabled":true,"account_disabled_at":null,"is_system_admin":false,"badge_id":null,"language_locale":null,"img256_url":null,"country":null,"delegator_user_id":null,"created_at":"2023-12-01T08:35:47.375131+01:00","admin_protected":false},"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"receiver":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"internal_order_number":{"read":true,"write":false,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"category_id":{"value":"052af526-d871-4dfe-9f65-b333f9073b67","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"created_at":{"value":"2023-12-01T07:35:47.431Z","read":false,"write":false,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"order_comment":{"read":true,"write":true,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"},"short_id":"Budget-Period-Past.001","model":{"read":true,"write":false,"default":null,"required":false,"value":null,"request-id":"1439593f-6ddf-482a-a010-b7feffad62ff"}}],"general_ledger_account":null,"id":"052af526-d871-4dfe-9f65-b333f9073b67","total_price_cents":0,"procurement_account":null,"cacheKey":"-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67","cost_center":null}],"total_price_cents":0,"cacheKey":"-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d"}],"name":"Budget-Period-Past","updated_at":"2023-12-01T07:35:47.361Z","inspection_start_date":"2023-08-31T22:00:00.000Z","end_date":"2023-11-29T23:00:00.000Z","id":"11f5aaa3-93dc-45c7-a110-c677bb91b5e8","total_price_cents":0,"cacheKey":"-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8","created_at":"2023-12-01T07:35:47.361Z"}] 

2023-12-01T07:35:49.050Z NX-41294 DEBUG [leihs.procurement.dashboard:267] - (determine-budget-periods requests tx dashboard-cache-key main-cats bps) => ({:main_categories ({:id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name "Main Category MC1", :categories ({:main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :name "Category C1", :requests ({:category {:read true, :write false, :default {:id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :name "Category C1", :main_category_id #uuid "c0911587-2485-45c1-a677-81e30658151d", :general_ledger_account nil, :cost_center nil, :procurement_account nil}, :required true, :value {:id "052af526-d871-4dfe-9f65-b333f9073b67", :name "Category C1", :cost_center nil, :main_category {:id "c0911587-2485-45c1-a677-81e30658151d", :name "Main Category MC1"}, :main_category_id "c0911587-2485-45c1-a677-81e30658151d", :procurement_account nil, :general_ledger_account nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :motivation {:read true, :write false, :required true, :value "Corporis commodi provident nam.", :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :accounting_type {:read true, :write false, :default "aquisition", :required true, :value "aquisition", :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :template_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :actionPermissions {:edit true, :delete false, :moveBudgetPeriod false, :moveCategory false}, :article_number {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspector_priority {:read true, :write false, :default "MEDIUM", :required true, :value "medium", :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :price_cents {:read true, :write false, :default 0, :required true, :value 0, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period {:read true, :write false, :default {:id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name "Budget-Period-Past", :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:35:47.361526000-00:00", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00"}, :required true, :value {:id "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :name "Budget-Period-Past", :inspection_start_date "2023-09-01T00:00:00+02:00", :end_date "2023-11-30T00:00:00+01:00", :created_at "2023-12-01T08:35:47.361526", :updated_at "2023-12-01T08:35:47.361526", :is_past true}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :article_name {:read true, :write false, :default nil, :required true, :value "Mediocre Aluminum Shoes", :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :organization_id {:value #uuid "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :replacement {:read true, :write false, :default nil, :required true, :value true, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :DELETE false, :template {:read true, :write false, :default nil, :required true, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :state "NEW", :organization {:value {:id "12e9f49d-0a40-4a8c-bacb-ce36206de55b", :name "Beauty & Kids", :parent_id "4603ea7d-9eb6-4511-ae9a-4baff83288d4", :shortname nil, :department {:id "4603ea7d-9eb6-4511-ae9a-4baff83288d4", :name "Home, Jewelry & Computers", :parent_id nil, :shortname nil}}, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_name {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_status {:read true, :write true, :default "NOT_PROCURED", :required true, :value "not_processed", :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :requested_quantity {:read true, :write false, :required true, :value 1, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :updated_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :model_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :priority {:read true, :write false, :default "NORMAL", :required true, :value "normal", :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :supplier_id {:value nil, :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :budget_period_id {:value #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff", :price_currency {:read true, :write false, :default "CHF", :required true, :value "CHF", :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user_id {:value #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room {:read true, :write false, :default {:id #uuid "b8927fd2-014c-48c2-b095-fa1d5620debe", :name "general room", :description nil, :building_id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :general true, :building {:id #uuid "abae04c5-d767-425e-acc2-7ce04df645d1", :name "general building", :code nil}}, :required true, :value {:id "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :name "reception room", :general false, :building {:id "676e816f-d047-45d1-81f4-976b8b674e00", :code nil, :name "9594 Beer Extension"}, :building_id "676e816f-d047-45d1-81f4-976b8b674e00", :description nil}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :inspection_comment {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :approved_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_quantity {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :room_id {:value #uuid "e426fcbe-47ec-410d-9270-ed348ffb2bb5", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :user {:read true, :write false, :required true, :default {:id #uuid "2970e054-582a-459b-a6ff-c8caaecb7546", :firstname "Lynsey", :lastname "Kertzmann"}, :value {:system_admin_protected false, :address nil, :email "chanda@ortiz.net", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kertzmann", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization "local", :login nil, :searchable "Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey", :updated_at "2023-12-01T08:35:47.375131+01:00", :firstname "Lynsey", :zip nil, :id "2970e054-582a-459b-a6ff-c8caaecb7546", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at "2023-12-01T08:35:47.375131+01:00", :admin_protected false}, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :receiver {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :internal_order_number {:read true, :write false, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :category_id {:value #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :created_at {:value #inst "2023-12-01T07:35:47.431538000-00:00", :read false, :write false, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :order_comment {:read true, :write true, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}, :short_id "Budget-Period-Past.001", :model {:read true, :write false, :default nil, :required false, :value nil, :request-id #uuid "1439593f-6ddf-482a-a010-b7feffad62ff"}}), :general_ledger_account nil, :id #uuid "052af526-d871-4dfe-9f65-b333f9073b67", :total_price_cents 0, :procurement_account nil, :cacheKey "-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67", :cost_center nil}), :total_price_cents 0, :cacheKey "-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d"}), :name "Budget-Period-Past", :updated_at #inst "2023-12-01T07:35:47.361526000-00:00", :inspection_start_date #inst "2023-08-31T22:00:00.000000000-00:00", :end_date #inst "2023-11-29T23:00:00.000000000-00:00", :id #uuid "11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :total_price_cents 0, :cacheKey "-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8", :created_at #inst "2023-12-01T07:35:47.361526000-00:00"})

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:35:48.069930Z", :id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :user_session_id #uuid "73f50257-7157-4eef-977a-cce6eda49fd7", :scope_system_admin_read false, :access-rights (), :user_id #uuid "ddfafcf2-19d7-409a-8e58-a672f205ccfa", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 96062568-3c93-4557-913c-ee2b025cc3a1}, leihs-user-session {:value 3bc3c375-d6b0-4d62-ada2-3134e5078f95}}, :remote-addr 127.0.0.1, :start-time 178660938582958, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=96062568-3c93-4557-913c-ee2b025cc3a1; leihs-user-session=3bc3c375-d6b0-4d62-ada2-3134e5078f95, content-length 3575, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token 96062568-3c93-4557-913c-ee2b025cc3a1, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x1d22342c /127.0.0.1:3230<->/127.0.0.1:60644], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 3575, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestsIndexFiltered, :variables {}, :query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:35:49.084Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey "-15128758"] [:total_count 1] [:budget_periods [#ordered/map ([:id "11f5aaa3-93dc-45c7-a110-c677bb91b5e8"] [:cacheKey "-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8"] [:name "Budget-Period-Past"] [:inspection_start_date "2023-09-01 00:00:00.0"] [:end_date "2023-11-30 00:00:00.0"] [:total_price_cents "0"] [:main_categories [#ordered/map ([:id "c0911587-2485-45c1-a677-81e30658151d"] [:cacheKey "-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d"] [:name "Main Category MC1"] [:image_url nil] [:total_price_cents "0"] [:categories [#ordered/map ([:id "052af526-d871-4dfe-9f65-b333f9073b67"] [:cacheKey "-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67"] [:name "Category C1"] [:total_price_cents "0"] [:requests [nil]] [:__typename :Category])]] [:__typename :MainCategory])]] [:__typename :BudgetPeriod])]] [:__typename :Dashboard])]), :errors ({:message "Field resolver returned an undefined enum value.", :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value "normal", :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value "medium", :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value "not_processed", :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message "Non-nullable field was null.", :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}
2023-12-01T07:35:49.085Z NX-41294 DEBUG [leihs.procurement.graphql:109] - {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey "-15128758"] [:total_count 1] [:budget_periods [#ordered/map ([:id "11f5aaa3-93dc-45c7-a110-c677bb91b5e8"] [:cacheKey "-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8"] [:name "Budget-Period-Past"] [:inspection_start_date "2023-09-01 00:00:00.0"] [:end_date "2023-11-30 00:00:00.0"] [:total_price_cents "0"] [:main_categories [#ordered/map ([:id "c0911587-2485-45c1-a677-81e30658151d"] [:cacheKey "-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d"] [:name "Main Category MC1"] [:image_url nil] [:total_price_cents "0"] [:categories [#ordered/map ([:id "052af526-d871-4dfe-9f65-b333f9073b67"] [:cacheKey "-15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67"] [:name "Category C1"] [:total_price_cents "0"] [:requests [nil]] [:__typename :Category])]] [:__typename :MainCategory])]] [:__typename :BudgetPeriod])]] [:__typename :Dashboard])]), :errors ({:message "Field resolver returned an undefined enum value.", :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value "normal", :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value "medium", :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message "Field resolver returned an undefined enum value.", :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value "not_processed", :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message "Non-nullable field was null.", :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}

>o> ERROR 4pure-handler, result=> {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey -15128758] [:total_count 1] [:budget_periods [#ordered/map ([:id 11f5aaa3-93dc-45c7-a110-c677bb91b5e8] [:cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8] [:name Budget-Period-Past] [:inspection_start_date 2023-09-01 00:00:00.0] [:end_date 2023-11-30 00:00:00.0] [:total_price_cents 0] [:main_categories [#ordered/map ([:id c0911587-2485-45c1-a677-81e30658151d] [:cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d] [:name Main Category MC1] [:image_url nil] [:total_price_cents 0] [:categories [#ordered/map ([:id 052af526-d871-4dfe-9f65-b333f9073b67] [:cacheKey -15128758_11f5aaa3-93dc-45c7-a110-c677bb91b5e8_c0911587-2485-45c1-a677-81e30658151d_052af526-d871-4dfe-9f65-b333f9073b67] [:name Category C1] [:total_price_cents 0] [:requests [nil]] [:__typename :Category])]] [:__typename :MainCategory])]] [:__typename :BudgetPeriod])]] [:__typename :Dashboard])]), :errors ({:message Field resolver returned an undefined enum value., :locations [{:line 140, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :priority :value], :extensions {:resolved-value normal, :serialized-value :normal, :enum-values #{:HIGH :NORMAL}}} {:message Field resolver returned an undefined enum value., :locations [{:line 185, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :inspector_priority :value], :extensions {:resolved-value medium, :serialized-value :medium, :enum-values #{:MEDIUM :MANDATORY :HIGH :LOW}}} {:message Field resolver returned an undefined enum value., :locations [{:line 209, :column 5}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :order_status :value], :extensions {:resolved-value not_processed, :serialized-value :not_processed, :enum-values #{:NOT_PROCURED :PROCURED :ALTERNATIVE_PROCURED :NOT_PROCESSED :IN_PROGRESS}}} {:message Non-nullable field was null., :locations [{:line 25, :column 13}], :path [:dashboard :budget_periods 0 :main_categories 0 :categories 0 :requests 0 :total_price_cents]})}
2023-12-01T07:35:49.103Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:36:02.657Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:36:02.657Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:36:02.657Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:36:02.685Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:36:02.685Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:36:02.685Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 178679946495458, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site none, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, sec-fetch-user ?1, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x7af4b923 /127.0.0.1:3230<->/127.0.0.1:60745], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  nil

> 1 anti-csrf-token class >  nil

> 2 anti-csrf-token-new >  acb2b67f-8a56-4e14-bdec-418d7ce7c086
2023-12-01T07:36:07.862Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => acb2b67f-8a56-4e14-bdec-418d7ce7c086
2023-12-01T07:36:07.867Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3705806a HikariProxyPreparedStatement@923107434 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:36:07.867Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:36:07.868Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "dfca464c-d55f-4798-93fa-9d06b08990d3" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 1]
2023-12-01T07:36:07.869Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "dfca464c-d55f-4798-93fa-9d06b08990d3"]
2023-12-01T07:36:07.869Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "dfca464c-d55f-4798-93fa-9d06b08990d3"
2023-12-01T07:36:07.869Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 3]
2023-12-01T07:36:07.869Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:36:07.869Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:36:07.869Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 4]
2023-12-01T07:36:07.869Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:36:07.869Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:36:07.869Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 7]
2023-12-01T07:36:07.870Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:36:07.870Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:36:07.870Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:07.508568000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 15]
2023-12-01T07:36:07.870Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:07.508568000-00:00"]
2023-12-01T07:36:07.870Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:07.508568Z"
2023-12-01T07:36:07.870Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:07.508568000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 16]
2023-12-01T07:36:07.871Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:07.508568000-00:00"]
2023-12-01T07:36:07.871Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:07.508568Z"
2023-12-01T07:36:07.871Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 25]
2023-12-01T07:36:07.871Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:36:07.871Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:36:07.871Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 32]
2023-12-01T07:36:07.871Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:36:07.872Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:36:07.872Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 1]
2023-12-01T07:36:07.872Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:07.872Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:07.872Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 3]
2023-12-01T07:36:07.872Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 4]
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 7]
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:07.783437000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 15]
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:07.783437000-00:00"]
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:07.783437Z"
2023-12-01T07:36:07.873Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:07.783437000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 16]
2023-12-01T07:36:07.874Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:07.783437000-00:00"]
2023-12-01T07:36:07.874Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:07.783437Z"
2023-12-01T07:36:07.874Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 25]
2023-12-01T07:36:07.874Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-12-01T07:36:07.874Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-12-01T07:36:07.874Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x3309d8ea org.postgresql.jdbc.PgResultSetMetaData@3309d8ea] 32]
2023-12-01T07:36:07.874Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:36:07.874Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:36:07.876Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x312c07fe HikariProxyPreparedStatement@824969214 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:36:07.876Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:36:07.877Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "dfca464c-d55f-4798-93fa-9d06b08990d3" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x312c07fe HikariProxyPreparedStatement@824969214 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:36:07.878Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "dfca464c-d55f-4798-93fa-9d06b08990d3"
2023-12-01T07:36:07.901Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x6b1bee63 org.postgresql.jdbc.PgResultSetMetaData@6b1bee63] 1]
2023-12-01T07:36:07.901Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:36:07.901Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:36:07.902Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x6b1bee63 org.postgresql.jdbc.PgResultSetMetaData@6b1bee63] 2]
2023-12-01T07:36:07.902Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:36:07.902Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:36:07.902Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x6b1bee63 org.postgresql.jdbc.PgResultSetMetaData@6b1bee63] 3]
2023-12-01T07:36:07.902Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:36:07.902Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:36:07.903Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:36:07.508568Z", :firstname "Dawna", :zip nil, :id #uuid "dfca464c-d55f-4798-93fa-9d06b08990d3", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:36:07.508568Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:36:07.905Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "acb2b67f-8a56-4e14-bdec-418d7ce7c086", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "acb2b67f-8a56-4e14-bdec-418d7ce7c086", :name "csrf-token"}}
2023-12-01T07:36:07.905Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => acb2b67f-8a56-4e14-bdec-418d7ce7c086
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}}, :remote-addr 127.0.0.1, :start-time 178680089715208, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086, referer http://localhost:3230/sign-in, connection keep-alive, accept image/avif,image/webp,*/*, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x1b9797f8 /127.0.0.1:3230<->/127.0.0.1:60745], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:07.975Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:36:07.978Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x58306632 HikariProxyPreparedStatement@1479566898 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:36:07.978Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:36:07.980Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "dfca464c-d55f-4798-93fa-9d06b08990d3" #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 1]
2023-12-01T07:36:08.003Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "dfca464c-d55f-4798-93fa-9d06b08990d3"]
2023-12-01T07:36:08.003Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "dfca464c-d55f-4798-93fa-9d06b08990d3"
2023-12-01T07:36:08.003Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 3]
2023-12-01T07:36:08.004Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:36:08.004Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:36:08.004Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 4]
2023-12-01T07:36:08.004Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:36:08.004Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:36:08.004Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 7]
2023-12-01T07:36:08.004Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:36:08.004Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:36:08.004Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:07.508568000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 15]
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:07.508568000-00:00"]
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:07.508568Z"
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:07.508568000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 16]
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:07.508568000-00:00"]
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:07.508568Z"
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 25]
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 32]
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:36:08.005Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:36:08.006Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 1]
2023-12-01T07:36:08.006Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.006Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.006Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 3]
2023-12-01T07:36:08.006Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:08.006Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:08.006Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 4]
2023-12-01T07:36:08.007Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:08.007Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:08.007Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 7]
2023-12-01T07:36:08.007Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:08.007Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:08.007Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:07.783437000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 15]
2023-12-01T07:36:08.008Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:07.783437000-00:00"]
2023-12-01T07:36:08.008Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:07.783437Z"
2023-12-01T07:36:08.008Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:07.783437000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 16]
2023-12-01T07:36:08.008Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:07.783437000-00:00"]
2023-12-01T07:36:08.008Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:07.783437Z"
2023-12-01T07:36:08.008Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 25]
2023-12-01T07:36:08.008Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-12-01T07:36:08.008Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-12-01T07:36:08.008Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x39910803 org.postgresql.jdbc.PgResultSetMetaData@39910803] 32]
2023-12-01T07:36:08.009Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:36:08.009Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:36:08.010Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x33834366 HikariProxyPreparedStatement@864240486 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:36:08.011Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:36:08.011Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "dfca464c-d55f-4798-93fa-9d06b08990d3" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x33834366 HikariProxyPreparedStatement@864240486 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:36:08.012Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "dfca464c-d55f-4798-93fa-9d06b08990d3"
2023-12-01T07:36:08.022Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x72ecee0e org.postgresql.jdbc.PgResultSetMetaData@72ecee0e] 1]
2023-12-01T07:36:08.026Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:36:08.026Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:36:08.027Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x72ecee0e org.postgresql.jdbc.PgResultSetMetaData@72ecee0e] 2]
2023-12-01T07:36:08.027Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:36:08.027Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:36:08.027Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x72ecee0e org.postgresql.jdbc.PgResultSetMetaData@72ecee0e] 3]
2023-12-01T07:36:08.027Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:36:08.028Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:36:08.029Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:36:07.508568Z", :firstname "Dawna", :zip nil, :id #uuid "dfca464c-d55f-4798-93fa-9d06b08990d3", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:36:07.508568Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:36:08.031Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "acb2b67f-8a56-4e14-bdec-418d7ce7c086", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "acb2b67f-8a56-4e14-bdec-418d7ce7c086", :name "csrf-token"}}
2023-12-01T07:36:08.031Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}}, :remote-addr 127.0.0.1, :start-time 178680211902125, :params {:user jimmie@goyette.com, :password nil, :csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x258c5fdf HikariProxyConnection@629956575 wrapping org.postgresql.jdbc.PgConnection@1b83e15d], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086, content-length 83, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x1efd1a70 /127.0.0.1:3230<->/127.0.0.1:60745], :server-port 3230, :params-raw {:user jimmie@goyette.com, :password , :csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0xfe31d48 HikariProxyConnection@266542408 wrapping org.postgresql.jdbc.PgConnection@772538f0], :level 1, :rollback #object[clojure.lang.Atom 0x2d189dc6 {:status :ready, :val false}]}, :content-length 83, :form-params {:user jimmie@goyette.com, :password nil, :csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user jimmie@goyette.com, :password , :csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x6a2d4d1d BytesInputStream[len=83]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:08.101Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:36:08.102Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text jimmie@goyette.com #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x51d22d49 HikariProxyPreparedStatement@1372728649 wrapping SELECT * FROM users  WHERE (users.org_id = ? OR users.login = ? OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:36:08.102Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  jimmie@goyette.com
2023-12-01T07:36:08.103Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text jimmie@goyette.com #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x51d22d49 HikariProxyPreparedStatement@1372728649 wrapping SELECT * FROM users  WHERE (users.org_id = 'jimmie@goyette.com' OR users.login = ? OR lower(users.email) = ?)] 2]  type:  java.lang.String
2023-12-01T07:36:08.103Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  jimmie@goyette.com
2023-12-01T07:36:08.104Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text jimmie@goyette.com #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x51d22d49 HikariProxyPreparedStatement@1372728649 wrapping SELECT * FROM users  WHERE (users.org_id = 'jimmie@goyette.com' OR users.login = 'jimmie@goyette.com' OR lower(users.email) = ?)] 3]  type:  java.lang.String
2023-12-01T07:36:08.104Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  jimmie@goyette.com
2023-12-01T07:36:08.105Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6c7e5b19 org.postgresql.jdbc.PgResultSetMetaData@6c7e5b19] 1]
2023-12-01T07:36:08.105Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.105Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.105Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x6c7e5b19 org.postgresql.jdbc.PgResultSetMetaData@6c7e5b19] 3]
2023-12-01T07:36:08.105Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:08.105Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:08.105Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x6c7e5b19 org.postgresql.jdbc.PgResultSetMetaData@6c7e5b19] 4]
2023-12-01T07:36:08.105Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:08.105Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:08.105Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x6c7e5b19 org.postgresql.jdbc.PgResultSetMetaData@6c7e5b19] 7]
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:07.783437000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6c7e5b19 org.postgresql.jdbc.PgResultSetMetaData@6c7e5b19] 15]
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:07.783437000-00:00"]
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:07.783437Z"
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:07.783437000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6c7e5b19 org.postgresql.jdbc.PgResultSetMetaData@6c7e5b19] 16]
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:07.783437000-00:00"]
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:07.783437Z"
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement Admin jimmie@goyette.com    Admin Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x6c7e5b19 org.postgresql.jdbc.PgResultSetMetaData@6c7e5b19] 25]
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement Admin jimmie@goyette.com    Admin Procurement]
2023-12-01T07:36:08.106Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement Admin jimmie@goyette.com    Admin Procurement
2023-12-01T07:36:08.107Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x6c7e5b19 org.postgresql.jdbc.PgResultSetMetaData@6c7e5b19] 32]
2023-12-01T07:36:08.107Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:36:08.107Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:36:08.108Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5e73daa3 HikariProxyPreparedStatement@1584650915 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:36:08.108Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:36:08.109Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5e73daa3 HikariProxyPreparedStatement@1584650915 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:36:08.109Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.110Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x22a5b2f9 org.postgresql.jdbc.PgResultSetMetaData@22a5b2f9] 1]
2023-12-01T07:36:08.110Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:36:08.110Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:36:08.111Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x22a5b2f9 org.postgresql.jdbc.PgResultSetMetaData@22a5b2f9] 2]
2023-12-01T07:36:08.111Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:36:08.111Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:36:08.111Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x22a5b2f9 org.postgresql.jdbc.PgResultSetMetaData@22a5b2f9] 3]
2023-12-01T07:36:08.111Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:36:08.111Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:36:08.112Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text jimmie@goyette.com #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4529b6a8 HikariProxyPreparedStatement@1160361640 wrapping SELECT * FROM authentication_systems  WHERE (authentication_systems.sign_up_email_match IS NOT NULL AND ? ~* authentication_systems.sign_up_email_match)] 1]  type:  java.lang.String
2023-12-01T07:36:08.112Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  jimmie@goyette.com
2023-12-01T07:36:08.113Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected false, :address nil, :email "jimmie@goyette.com", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Admin", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization "local", :login nil, :searchable "Procurement Admin jimmie@goyette.com    Admin Procurement", :updated_at #time/instant "2023-12-01T07:36:07.783437Z", :firstname "Procurement", :zip nil, :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:36:07.783437Z", :admin_protected false} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:36:08.114Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2a280141 HikariProxyPreparedStatement@707264833 wrapping SELECT * FROM authentication_systems  WHERE type = ?] 1]  type:  java.lang.String
2023-12-01T07:36:08.114Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:36:08.115Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x5bbbb914 org.postgresql.jdbc.PgResultSetMetaData@5bbbb914] 1]
2023-12-01T07:36:08.115Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:36:08.115Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:36:08.115Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x5bbbb914 org.postgresql.jdbc.PgResultSetMetaData@5bbbb914] 2]
2023-12-01T07:36:08.115Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:36:08.115Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:36:08.115Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x5bbbb914 org.postgresql.jdbc.PgResultSetMetaData@5bbbb914] 4]
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x5bbbb914 org.postgresql.jdbc.PgResultSetMetaData@5bbbb914] 6]
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int4 0]
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5bbbb914 org.postgresql.jdbc.PgResultSetMetaData@5bbbb914] 15]
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5bbbb914 org.postgresql.jdbc.PgResultSetMetaData@5bbbb914] 16]
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:36:08.116Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:36:08.118Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "acb2b67f-8a56-4e14-bdec-418d7ce7c086", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user "jimmie@goyette.com", :showPasswordSection true, :passwordButtonText "password_forgot_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "acb2b67f-8a56-4e14-bdec-418d7ce7c086", :name "csrf-token"}, :authSystems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil})}
2023-12-01T07:36:08.118Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}}, :remote-addr 127.0.0.1, :start-time 178680304408750, :params {:user jimmie@goyette.com, :password password, :csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x5363756e HikariProxyConnection@1399027054 wrapping org.postgresql.jdbc.PgConnection@3078874c], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086, content-length 91, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x46a43d43 /127.0.0.1:3230<->/127.0.0.1:60745], :server-port 3230, :params-raw {:user jimmie@goyette.com, :password password, :csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x2b8be95e HikariProxyConnection@730589534 wrapping org.postgresql.jdbc.PgConnection@772538f0], :level 1, :rollback #object[clojure.lang.Atom 0x6c1ae947 {:status :ready, :val false}]}, :content-length 91, :form-params {:user jimmie@goyette.com, :password password, :csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user jimmie@goyette.com, :password password, :csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x249a29af BytesInputStream[len=91]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:08.189Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:36:08.200Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x20178e9b HikariProxyPreparedStatement@538414747 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( ?, ?, ?, ? )
RETURNING *] 1]  type:  java.util.UUID
2023-12-01T07:36:08.201Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.201Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0d33e866068e761dae571f0843bd7bb0a382b09f0498a480af49781c641f80e1 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x20178e9b HikariProxyPreparedStatement@538414747 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( 'a37d6ff0-733f-48bb-8843-e8eaf42074bb'::uuid, ?, ?, ? )
RETURNING *] 2]  type:  java.lang.String
2023-12-01T07:36:08.201Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0d33e866068e761dae571f0843bd7bb0a382b09f0498a480af49781c641f80e1
2023-12-01T07:36:08.202Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x20178e9b HikariProxyPreparedStatement@538414747 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( 'a37d6ff0-733f-48bb-8843-e8eaf42074bb'::uuid, '0d33e866068e761dae571f0843bd7bb0a382b09f0498a480af49781c641f80e1', ?, ? )
RETURNING *] 3]  type:  java.lang.String
2023-12-01T07:36:08.202Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:36:08.202Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:jsonb {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1} #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x20178e9b HikariProxyPreparedStatement@538414747 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( 'a37d6ff0-733f-48bb-8843-e8eaf42074bb'::uuid, '0d33e866068e761dae571f0843bd7bb0a382b09f0498a480af49781c641f80e1', 'password', ? )
RETURNING *] 4]  type:  clojure.lang.PersistentArrayMap
2023-12-01T07:36:08.203Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #object[org.postgresql.util.PGobject 0x3e4fa94b {"user_agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko\/20100101 Firefox\/115.0","remote_addr":"127.0.0.1"}]
2023-12-01T07:36:08.207Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x73d0b077 org.postgresql.jdbc.PgResultSetMetaData@73d0b077] 1]
2023-12-01T07:36:08.208Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:36:08.208Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:36:08.208Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0d33e866068e761dae571f0843bd7bb0a382b09f0498a480af49781c641f80e1 #object[org.postgresql.jdbc.PgResultSetMetaData 0x73d0b077 org.postgresql.jdbc.PgResultSetMetaData@73d0b077] 2]
2023-12-01T07:36:08.208Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text 0d33e866068e761dae571f0843bd7bb0a382b09f0498a480af49781c641f80e1]
2023-12-01T07:36:08.208Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0d33e866068e761dae571f0843bd7bb0a382b09f0498a480af49781c641f80e1
2023-12-01T07:36:08.208Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x73d0b077 org.postgresql.jdbc.PgResultSetMetaData@73d0b077] 3]
2023-12-01T07:36:08.208Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.208Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.208Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x73d0b077 org.postgresql.jdbc.PgResultSetMetaData@73d0b077] 5]
2023-12-01T07:36:08.208Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]
2023-12-01T07:36:08.209Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:36:08.209Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x6c818682 {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x73d0b077 org.postgresql.jdbc.PgResultSetMetaData@73d0b077] 6]
2023-12-01T07:36:08.209Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0x6c818682 {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}]]
2023-12-01T07:36:08.209Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1}
2023-12-01T07:36:08.209Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x73d0b077 org.postgresql.jdbc.PgResultSetMetaData@73d0b077] 7]
2023-12-01T07:36:08.209Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text password]
2023-12-01T07:36:08.209Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:36:08.249Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:36:08.257Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x55700687 HikariProxyPreparedStatement@1433405063 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:36:08.257Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:36:08.258Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0b91b76a-029d-40f2-978a-f6fc849fb5f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x55700687 HikariProxyPreparedStatement@1433405063 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:36:08.258Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0b91b76a-029d-40f2-978a-f6fc849fb5f0
2023-12-01T07:36:08.258Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x55700687 HikariProxyPreparedStatement@1433405063 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:36:08.258Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:36:08.259Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x55700687 HikariProxyPreparedStatement@1433405063 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:36:08.259Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:36:08.264Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x11b9db8f org.postgresql.jdbc.PgResultSetMetaData@11b9db8f] 1]
2023-12-01T07:36:08.264Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:08.264Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:08.264Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x11b9db8f org.postgresql.jdbc.PgResultSetMetaData@11b9db8f] 2]
2023-12-01T07:36:08.264Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:08.264Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:08.264Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x11b9db8f org.postgresql.jdbc.PgResultSetMetaData@11b9db8f] 3]
2023-12-01T07:36:08.264Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.264Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x11b9db8f org.postgresql.jdbc.PgResultSetMetaData@11b9db8f] 6]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x11b9db8f org.postgresql.jdbc.PgResultSetMetaData@11b9db8f] 10]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x11b9db8f org.postgresql.jdbc.PgResultSetMetaData@11b9db8f] 11]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x11b9db8f org.postgresql.jdbc.PgResultSetMetaData@11b9db8f] 12]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x11b9db8f org.postgresql.jdbc.PgResultSetMetaData@11b9db8f] 13]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x11b9db8f org.postgresql.jdbc.PgResultSetMetaData@11b9db8f] 14]
2023-12-01T07:36:08.265Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]
2023-12-01T07:36:08.266Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:36:08.266Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3bd1875d HikariProxyPreparedStatement@1003587421 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:36:08.266Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
>>> authenticate::skip= nil  handler-key= :procurement
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178680373044333, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x7d7244df /127.0.0.1:3230<->/127.0.0.1:60745], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure, :server-name localhost, :handler-key :procurement, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :procurement
2023-12-01T07:36:08.268Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.269Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:08.270Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:36:08.270Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:08.272Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:36:08.272Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:36:08.469Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2e83fec7 HikariProxyPreparedStatement@780402375 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:36:08.469Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:36:08.470Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0b91b76a-029d-40f2-978a-f6fc849fb5f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2e83fec7 HikariProxyPreparedStatement@780402375 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:36:08.470Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0b91b76a-029d-40f2-978a-f6fc849fb5f0
2023-12-01T07:36:08.471Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2e83fec7 HikariProxyPreparedStatement@780402375 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:36:08.471Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:36:08.472Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2e83fec7 HikariProxyPreparedStatement@780402375 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:36:08.472Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x3acb8473 org.postgresql.jdbc.PgResultSetMetaData@3acb8473] 1]
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x3acb8473 org.postgresql.jdbc.PgResultSetMetaData@3acb8473] 2]
2023-12-01T07:36:08.473Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x24a3df28 HikariProxyPreparedStatement@614719272 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3acb8473 org.postgresql.jdbc.PgResultSetMetaData@3acb8473] 3]
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x3acb8473 org.postgresql.jdbc.PgResultSetMetaData@3acb8473] 6]
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:08.474Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3acb8473 org.postgresql.jdbc.PgResultSetMetaData@3acb8473] 10]
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x3acb8473 org.postgresql.jdbc.PgResultSetMetaData@3acb8473] 11]
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0b91b76a-029d-40f2-978a-f6fc849fb5f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x24a3df28 HikariProxyPreparedStatement@614719272 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x3acb8473 org.postgresql.jdbc.PgResultSetMetaData@3acb8473] 12]
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0b91b76a-029d-40f2-978a-f6fc849fb5f0
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3acb8473 org.postgresql.jdbc.PgResultSetMetaData@3acb8473] 13]
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x3acb8473 org.postgresql.jdbc.PgResultSetMetaData@3acb8473] 14]
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]
2023-12-01T07:36:08.475Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:36:08.476Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x24a3df28 HikariProxyPreparedStatement@614719272 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:36:08.476Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:36:08.476Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xcaed4a3 HikariProxyPreparedStatement@212784291 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:36:08.476Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.477Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x24a3df28 HikariProxyPreparedStatement@614719272 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:36:08.477Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178680584540125, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, referer http://localhost:3230/procure, connection keep-alive, accept image/avif,image/webp,*/*, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x24262810 /127.0.0.1:3230<->/127.0.0.1:60754], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure/favicon.ico, :server-name localhost, :handler-key :not-found, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :not-found
2023-12-01T07:36:08.478Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.479Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:08.479Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:36:08.480Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:08.481Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:36:08.481Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:36:08.501Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b1f053d org.postgresql.jdbc.PgResultSetMetaData@2b1f053d] 1]
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b1f053d org.postgresql.jdbc.PgResultSetMetaData@2b1f053d] 2]
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b1f053d org.postgresql.jdbc.PgResultSetMetaData@2b1f053d] 3]
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b1f053d org.postgresql.jdbc.PgResultSetMetaData@2b1f053d] 6]
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b1f053d org.postgresql.jdbc.PgResultSetMetaData@2b1f053d] 10]
2023-12-01T07:36:08.502Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b1f053d org.postgresql.jdbc.PgResultSetMetaData@2b1f053d] 11]
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b1f053d org.postgresql.jdbc.PgResultSetMetaData@2b1f053d] 12]
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b1f053d org.postgresql.jdbc.PgResultSetMetaData@2b1f053d] 13]
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b1f053d org.postgresql.jdbc.PgResultSetMetaData@2b1f053d] 14]
2023-12-01T07:36:08.503Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]
2023-12-01T07:36:08.504Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:36:08.505Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x550fe363 HikariProxyPreparedStatement@1427104611 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:36:08.505Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178680587571500, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 502, referer http://localhost:3230/procure, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4f9c218 /127.0.0.1:3230<->/127.0.0.1:60745], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:36:08.506Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.508Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:08.508Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:36:08.509Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:08.510Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
2023-12-01T07:36:08.511Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
>>>1 #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.512Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
>>>2 {:id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :firstname Procurement, :lastname Admin}
>>oida>> #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.514Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
>>>3 nil
2023-12-01T07:36:08.527Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.528Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178680587571500, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 502, referer http://localhost:3230/procure, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4f9c218 /127.0.0.1:3230<->/127.0.0.1:60745], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:36:08.568Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"acb2b67f-8a56-4e14-bdec-418d7ce7c086\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"a37d6ff0-733f-48bb-8843-e8eaf42074bb\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "a37d6ff0-733f-48bb-8843-e8eaf42074bb"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester true] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>3apure-handler, result=> {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"acb2b67f-8a56-4e14-bdec-418d7ce7c086","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"a37d6ff0-733f-48bb-8843-e8eaf42074bb","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Züritüütsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id a37d6ff0-733f-48bb-8843-e8eaf42074bb] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester true] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-12-01T07:36:08.569Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:36:08.675Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x351696f2 HikariProxyPreparedStatement@890672882 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:36:08.675Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x77653466 HikariProxyPreparedStatement@2003121254 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:36:08.676Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:36:08.676Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:36:08.677Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0b91b76a-029d-40f2-978a-f6fc849fb5f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x77653466 HikariProxyPreparedStatement@2003121254 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:36:08.677Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0b91b76a-029d-40f2-978a-f6fc849fb5f0
2023-12-01T07:36:08.678Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0b91b76a-029d-40f2-978a-f6fc849fb5f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x351696f2 HikariProxyPreparedStatement@890672882 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:36:08.679Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0b91b76a-029d-40f2-978a-f6fc849fb5f0
2023-12-01T07:36:08.681Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x77653466 HikariProxyPreparedStatement@2003121254 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:36:08.682Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x351696f2 HikariProxyPreparedStatement@890672882 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:36:08.682Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:36:08.682Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:36:08.684Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x77653466 HikariProxyPreparedStatement@2003121254 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:36:08.684Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:36:08.684Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x351696f2 HikariProxyPreparedStatement@890672882 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:36:08.684Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:36:08.687Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x71b77a43 org.postgresql.jdbc.PgResultSetMetaData@71b77a43] 1]
2023-12-01T07:36:08.687Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:08.687Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:08.687Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x511828c9 org.postgresql.jdbc.PgResultSetMetaData@511828c9] 1]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x71b77a43 org.postgresql.jdbc.PgResultSetMetaData@71b77a43] 2]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x71b77a43 org.postgresql.jdbc.PgResultSetMetaData@71b77a43] 3]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x511828c9 org.postgresql.jdbc.PgResultSetMetaData@511828c9] 2]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x71b77a43 org.postgresql.jdbc.PgResultSetMetaData@71b77a43] 6]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x511828c9 org.postgresql.jdbc.PgResultSetMetaData@511828c9] 3]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.688Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x71b77a43 org.postgresql.jdbc.PgResultSetMetaData@71b77a43] 10]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x511828c9 org.postgresql.jdbc.PgResultSetMetaData@511828c9] 6]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x71b77a43 org.postgresql.jdbc.PgResultSetMetaData@71b77a43] 11]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x511828c9 org.postgresql.jdbc.PgResultSetMetaData@511828c9] 10]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x71b77a43 org.postgresql.jdbc.PgResultSetMetaData@71b77a43] 12]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x511828c9 org.postgresql.jdbc.PgResultSetMetaData@511828c9] 11]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x71b77a43 org.postgresql.jdbc.PgResultSetMetaData@71b77a43] 13]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:36:08.689Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x511828c9 org.postgresql.jdbc.PgResultSetMetaData@511828c9] 12]
2023-12-01T07:36:08.690Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x71b77a43 org.postgresql.jdbc.PgResultSetMetaData@71b77a43] 14]
2023-12-01T07:36:08.690Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]
2023-12-01T07:36:08.690Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.690Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.690Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:36:08.690Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x511828c9 org.postgresql.jdbc.PgResultSetMetaData@511828c9] 13]
2023-12-01T07:36:08.691Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x63303a40 HikariProxyPreparedStatement@1664105024 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:36:08.691Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:36:08.691Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:36:08.692Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:36:08.692Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x511828c9 org.postgresql.jdbc.PgResultSetMetaData@511828c9] 14]
2023-12-01T07:36:08.692Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]
2023-12-01T07:36:08.692Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0b91b76a-029d-40f2-978a-f6fc849fb5f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x63303a40 HikariProxyPreparedStatement@1664105024 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:36:08.692Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:36:08.692Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0b91b76a-029d-40f2-978a-f6fc849fb5f0
2023-12-01T07:36:08.693Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:335] - db-pool - Add connection elided, waiting=1, adders pending/running=2
2023-12-01T07:36:08.693Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x78664c67 HikariProxyPreparedStatement@2019970151 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:36:08.693Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.694Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x63303a40 HikariProxyPreparedStatement@1664105024 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:36:08.694Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:36:08.694Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x63303a40 HikariProxyPreparedStatement@1664105024 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:36:08.694Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178680786134166, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 502, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x362fb531 /127.0.0.1:3230<->/127.0.0.1:60759], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:36:08.695Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x43b0b6a7 HikariProxyPreparedStatement@1135654567 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:36:08.695Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.695Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.696Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:08.696Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x7d4f5ec3 org.postgresql.jdbc.PgResultSetMetaData@7d4f5ec3] 1]
2023-12-01T07:36:08.696Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:08.697Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:08.696Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:36:08.697Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x7d4f5ec3 org.postgresql.jdbc.PgResultSetMetaData@7d4f5ec3] 2]
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at 2023-12-01T07:36:08.697Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
#time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at 2023-12-01T07:36:08.697Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
#time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178680785592916, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 534, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4a0ca789 /127.0.0.1:3230<->/127.0.0.1:60745], :server-port 3230, :params-raw 2023-12-01T07:36:08.697Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7d4f5ec3 org.postgresql.jdbc.PgResultSetMetaData@7d4f5ec3] 3]
{}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:36:08.697Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.697Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.697Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x7d4f5ec3 org.postgresql.jdbc.PgResultSetMetaData@7d4f5ec3] 6]
2023-12-01T07:36:08.697Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:08.697Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.697Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:08.698Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7d4f5ec3 org.postgresql.jdbc.PgResultSetMetaData@7d4f5ec3] 10]
2023-12-01T07:36:08.697Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.698Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.698Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.698Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x7d4f5ec3 org.postgresql.jdbc.PgResultSetMetaData@7d4f5ec3] 11]
2023-12-01T07:36:08.698Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.699Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.699Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x7d4f5ec3 org.postgresql.jdbc.PgResultSetMetaData@7d4f5ec3] 12]
2023-12-01T07:36:08.699Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:08.699Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:08.699Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:08.699Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7d4f5ec3 org.postgresql.jdbc.PgResultSetMetaData@7d4f5ec3] 13]
2023-12-01T07:36:08.699Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:36:08.699Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:36:08.699Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7d4f5ec3 org.postgresql.jdbc.PgResultSetMetaData@7d4f5ec3] 14]
2023-12-01T07:36:08.700Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:36:08.700Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:08.700Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:36:08.700Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:36:08.700Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.701Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1406d53d HikariProxyPreparedStatement@335992125 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:36:08.701Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:08.702Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178680785265041, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 3575, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x44d7e05d /127.0.0.1:3230<->/127.0.0.1:60754], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 3575, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestsIndexFiltered, :variables {}, :query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:36:08.703Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.703Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:08.704Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
pure-handler >> 2
2023-12-01T07:36:08.704Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
2023-12-01T07:36:08.704Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
pure-handler >> 2
2023-12-01T07:36:08.705Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
>>>1 #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.705Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
>>>2 {:id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :firstname Procurement, :lastname Admin}
>>oida>> #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:08.706Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.706Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
>>>3 nil
pure-handler >> 2
2023-12-01T07:36:08.713Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
>>>get-dashboard
>>args {}
>>value nil
>>mainCatsSql [SELECT procurement_main_categories.* FROM procurement_main_categories ORDER BY procurement_main_categories.name ASC]
2023-12-01T07:36:08.720Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.721Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178680786134166, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 502, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x362fb531 /127.0.0.1:3230<->/127.0.0.1:60759], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:36:08.730Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"acb2b67f-8a56-4e14-bdec-418d7ce7c086\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"a37d6ff0-733f-48bb-8843-e8eaf42074bb\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "a37d6ff0-733f-48bb-8843-e8eaf42074bb"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester true] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>3apure-handler, result=> {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"acb2b67f-8a56-4e14-bdec-418d7ce7c086","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"a37d6ff0-733f-48bb-8843-e8eaf42074bb","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Züritüütsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id a37d6ff0-733f-48bb-8843-e8eaf42074bb] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester true] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-12-01T07:36:08.731Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>mainCats [{:id #uuid "8adb0094-b299-410f-bd49-6c832a71f948", :name Main Category MC1}]
>>queryA1 [SELECT * FROM procurement_budget_periods ORDER BY end_date DESC]
>>resultA1 []
>>resultA1-2 []
>>requestsB2-triggerError {} nil
>o> helper1
>o> helper2 nil nil nil
>oo> helper3a priority nil
>oo> helper3b priority nil
>oo> helper4a inspector-priority nil
>oo> helper4b inspector-priority nil
>o> helper5
>oo> helper5a :order_status nil
>oo> helper5b :order_status nil
>oo> order-status nil
>o> helper6
2023-12-01T07:36:08.741Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:36:08.743Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:08.743Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.744Z NX-41294 DEBUG [leihs.procurement.permissions.user:103] - (->> [viewer? inspector? admin?] (map (fn* [p1__39297#] (p1__39297# tx auth-entity))) (some true?)) => true
>o> helper7 true
>o> requests-base-query-with-state
>o> state-sql true
>o> s-map  {:NEW [:= :procurement_requests.approved_quantity nil], :APPROVED [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity], :PARTIALLY_APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]], :DENIED [:= :procurement_requests.approved_quantity 0]}
>o>map-4 (>o> map NEW
>o> map [:= :procurement_requests.approved_quantity nil]
:case >o> map NEW
[:= :procurement_requests.approved_quantity nil] >o> map APPROVED
>o> map [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]
NEW >o> map APPROVED
[:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] >o> map PARTIALLY_APPROVED
>o> map [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]
APPROVED >o> map PARTIALLY_APPROVED
[:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] >o> map DENIED
>o> map [:= :procurement_requests.approved_quantity 0]
PARTIALLY_APPROVED >o> map DENIED
[:= :procurement_requests.approved_quantity 0] DENIED)
>o>map-5 (:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)
2023-12-01T07:36:08.744Z NX-41294 DEBUG [leihs.procurement.resources.request:171] - result => [[(:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED")]]
>o> join-and-nest-budget-periods
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id]]}
>o> tbl :procurement_budget_periods_2
>o> nest-key :budget_period
>o> join-and-nest-categories
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id]]}
>o> tbl :models
>o> nest-key :model
>o> join-and-nest-templates
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id]]}
>o> tbl :procurement_templates
>o> nest-key :template
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :suppliers
>o> nest-key :supplier
>o> join-and-nest-users
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:= :procurement_requests.approved_quantity nil] NEW [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] APPROVED [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] PARTIALLY_APPROVED [:= :procurement_requests.approved_quantity 0] DENIED)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]] [[[:row_to_json :suppliers]] :supplier]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :users
>o> nest-key :user
>o> helper8
>oo> helper8 nil nil nil
>o> apply-scope #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:08.745Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.745Z NX-41294 DEBUG [leihs.procurement.permissions.requests:25] - sqlmap => {:select [[[:raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*"]] [[[(:case [:= :procurement_requests.approved_quantity nil] "NEW" [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity] "APPROVED" [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]] "PARTIALLY_APPROVED" [:= :procurement_requests.approved_quantity 0] "DENIED")]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw "row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category"]] [[[:row_to_json :models]] :model] [[:raw "row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization"]] [[[:row_to_json :procurement_templates]] :template] [[:raw "row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room"]] [[[:row_to_json :suppliers]] :supplier] [[[:row_to_json :users]] :user]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id]), :order-by [[[:raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> abc [SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, ((CASE WHEN procurement_requests.approved_quantity IS NULL THEN ? WHEN procurement_requests.approved_quantity >= procurement_requests.requested_quantity THEN ? WHEN (procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?) THEN ? WHEN procurement_requests.approved_quantity = ? THEN ? END)) AS state, (ROW_TO_JSON(procurement_budget_periods_2)) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, (ROW_TO_JSON(models)) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, (ROW_TO_JSON(procurement_templates)) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, (ROW_TO_JSON(suppliers)) AS supplier, (ROW_TO_JSON(users)) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) AS procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations AS procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, ''))) ASC NEW APPROVED 0 PARTIALLY_APPROVED 0 DENIED]
2023-12-01T07:36:08.746Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:36:08.746Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:08.747Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:08.747Z NX-41294 DEBUG [leihs.procurement.permissions.user:103] - (->> [viewer? inspector? admin?] (map (fn* [p1__39297#] (p1__39297# tx auth-entity))) (some true?)) => true
2023-12-01T07:36:08.747Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - db-pool - Added connection org.postgresql.jdbc.PgConnection@1f86c33a

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178680785592916, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 534, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4a0ca789 /127.0.0.1:3230<->/127.0.0.1:60745], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:36:08.753Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:budget_periods []] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}
2023-12-01T07:36:08.753Z NX-41294 DEBUG [leihs.procurement.graphql:109] - {:data #ordered/map ([:budget_periods []] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}

>o> ERROR 4pure-handler, result=> {:data #ordered/map ([:budget_periods []] [:main_categories [nil]] [:organizations [nil]]), :errors ({:message Non-nullable field was null., :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message Non-nullable field was null., :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]})}
2023-12-01T07:36:08.754Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>o>requestsB2 ()
>o>dashboard-cache-keyB2 {:id -15128758}
2023-12-01T07:36:08.772Z NX-41294 DEBUG [leihs.procurement.dashboard:265] - (count requests) => 0
>o> cache-key ({:id -15128758})
2023-12-01T07:36:08.772Z NX-41294 DEBUG [leihs.procurement.dashboard:266] - (cache-key dashboard-cache-key) => -15128758

>o> final-result () 


>o> final-result (json) [] 

2023-12-01T07:36:08.772Z NX-41294 DEBUG [leihs.procurement.dashboard:267] - (determine-budget-periods requests tx dashboard-cache-key main-cats bps) => ()

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178680785265041, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 3575, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x44d7e05d /127.0.0.1:3230<->/127.0.0.1:60754], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 3575, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestsIndexFiltered, :variables {}, :query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:36:08.774Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey "-15128758"] [:total_count 0] [:budget_periods []] [:__typename :Dashboard])])}

>o>3apure-handler, result=> {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey -15128758] [:total_count 0] [:budget_periods []] [:__typename :Dashboard])])}
2023-12-01T07:36:08.774Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:36:09.057Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5343b26b HikariProxyPreparedStatement@1396945515 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:36:09.057Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:36:09.058Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0b91b76a-029d-40f2-978a-f6fc849fb5f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5343b26b HikariProxyPreparedStatement@1396945515 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:36:09.058Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0b91b76a-029d-40f2-978a-f6fc849fb5f0
2023-12-01T07:36:09.058Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5343b26b HikariProxyPreparedStatement@1396945515 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:36:09.058Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:36:09.059Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5343b26b HikariProxyPreparedStatement@1396945515 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:36:09.059Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:36:09.061Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x33798c6a org.postgresql.jdbc.PgResultSetMetaData@33798c6a] 1]
2023-12-01T07:36:09.061Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:09.061Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x33798c6a org.postgresql.jdbc.PgResultSetMetaData@33798c6a] 2]
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x33798c6a org.postgresql.jdbc.PgResultSetMetaData@33798c6a] 3]
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x33798c6a org.postgresql.jdbc.PgResultSetMetaData@33798c6a] 6]
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x33798c6a org.postgresql.jdbc.PgResultSetMetaData@33798c6a] 10]
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x33798c6a org.postgresql.jdbc.PgResultSetMetaData@33798c6a] 11]
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:09.062Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x33798c6a org.postgresql.jdbc.PgResultSetMetaData@33798c6a] 12]
2023-12-01T07:36:09.063Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:09.063Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:09.063Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x33798c6a org.postgresql.jdbc.PgResultSetMetaData@33798c6a] 13]
2023-12-01T07:36:09.063Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:36:09.063Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:36:09.063Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x33798c6a org.postgresql.jdbc.PgResultSetMetaData@33798c6a] 14]
2023-12-01T07:36:09.063Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]
2023-12-01T07:36:09.063Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:36:09.064Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x158428da HikariProxyPreparedStatement@360982746 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:36:09.064Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178681172514541, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, sec-fetch-user ?1, referer http://localhost:3230/procure/requests, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x1706cfc /127.0.0.1:3230<->/127.0.0.1:60745], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure/admin/budget-periods, :server-name localhost, :handler-key :not-found, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :not-found
2023-12-01T07:36:09.065Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:09.066Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:09.066Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:36:09.066Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:09.067Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:36:09.068Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:36:09.277Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4de99b37 HikariProxyPreparedStatement@1307155255 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:36:09.277Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:36:09.278Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0b91b76a-029d-40f2-978a-f6fc849fb5f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4de99b37 HikariProxyPreparedStatement@1307155255 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:36:09.278Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0b91b76a-029d-40f2-978a-f6fc849fb5f0
2023-12-01T07:36:09.281Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4de99b37 HikariProxyPreparedStatement@1307155255 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:36:09.281Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:36:09.281Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4de99b37 HikariProxyPreparedStatement@1307155255 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:36:09.281Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:36:09.283Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x6861a889 org.postgresql.jdbc.PgResultSetMetaData@6861a889] 1]
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x6861a889 org.postgresql.jdbc.PgResultSetMetaData@6861a889] 2]
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6861a889 org.postgresql.jdbc.PgResultSetMetaData@6861a889] 3]
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x6861a889 org.postgresql.jdbc.PgResultSetMetaData@6861a889] 6]
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6861a889 org.postgresql.jdbc.PgResultSetMetaData@6861a889] 10]
2023-12-01T07:36:09.284Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x6861a889 org.postgresql.jdbc.PgResultSetMetaData@6861a889] 11]
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x6861a889 org.postgresql.jdbc.PgResultSetMetaData@6861a889] 12]
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6861a889 org.postgresql.jdbc.PgResultSetMetaData@6861a889] 13]
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6861a889 org.postgresql.jdbc.PgResultSetMetaData@6861a889] 14]
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]
2023-12-01T07:36:09.285Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:36:09.286Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4ac5e05 HikariProxyPreparedStatement@78405125 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:36:09.287Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178681388375541, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 502, referer http://localhost:3230/procure/admin/budget-periods, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x43d00e07 /127.0.0.1:3230<->/127.0.0.1:60754], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:36:09.288Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:09.288Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:09.289Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:36:09.289Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:09.291Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
2023-12-01T07:36:09.293Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
>>>1 #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:09.294Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
>>>2 {:id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :firstname Procurement, :lastname Admin}
>>oida>> #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:09.295Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
>>>3 nil
2023-12-01T07:36:09.301Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:09.302Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178681388375541, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 502, referer http://localhost:3230/procure/admin/budget-periods, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x43d00e07 /127.0.0.1:3230<->/127.0.0.1:60754], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:36:09.304Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"acb2b67f-8a56-4e14-bdec-418d7ce7c086\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"a37d6ff0-733f-48bb-8843-e8eaf42074bb\",\"firstname\":\"Procurement\",\"lastname\":\"Admin\",\"login\":null,\"email\":\"jimmie@goyette.com\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "a37d6ff0-733f-48bb-8843-e8eaf42074bb"] [:firstname "Procurement"] [:lastname "Admin"] [:permissions #ordered/map ([:isAdmin true] [:isRequester true] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>3apure-handler, result=> {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"acb2b67f-8a56-4e14-bdec-418d7ce7c086","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"a37d6ff0-733f-48bb-8843-e8eaf42074bb","firstname":"Procurement","lastname":"Admin","login":null,"email":"jimmie@goyette.com"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Züritüütsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id a37d6ff0-733f-48bb-8843-e8eaf42074bb] [:firstname Procurement] [:lastname Admin] [:permissions #ordered/map ([:isAdmin true] [:isRequester true] [:isInspectorForCategories []] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-12-01T07:36:09.305Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:36:09.343Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x61172abe HikariProxyPreparedStatement@1628908222 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:36:09.344Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:36:09.344Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0b91b76a-029d-40f2-978a-f6fc849fb5f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x61172abe HikariProxyPreparedStatement@1628908222 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:36:09.344Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0b91b76a-029d-40f2-978a-f6fc849fb5f0
2023-12-01T07:36:09.345Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x61172abe HikariProxyPreparedStatement@1628908222 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:36:09.345Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:36:09.345Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x61172abe HikariProxyPreparedStatement@1628908222 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:36:09.345Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:36:09.348Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x4574f6bf org.postgresql.jdbc.PgResultSetMetaData@4574f6bf] 1]
2023-12-01T07:36:09.348Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:36:09.348Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:36:09.348Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x4574f6bf org.postgresql.jdbc.PgResultSetMetaData@4574f6bf] 2]
2023-12-01T07:36:09.348Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:36:09.348Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:36:09.348Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4574f6bf org.postgresql.jdbc.PgResultSetMetaData@4574f6bf] 3]
2023-12-01T07:36:09.348Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x4574f6bf org.postgresql.jdbc.PgResultSetMetaData@4574f6bf] 6]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4574f6bf org.postgresql.jdbc.PgResultSetMetaData@4574f6bf] 10]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4574f6bf org.postgresql.jdbc.PgResultSetMetaData@4574f6bf] 11]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4574f6bf org.postgresql.jdbc.PgResultSetMetaData@4574f6bf] 12]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4574f6bf org.postgresql.jdbc.PgResultSetMetaData@4574f6bf] 13]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:36:09.349Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:36:09.350Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4574f6bf org.postgresql.jdbc.PgResultSetMetaData@4574f6bf] 14]
2023-12-01T07:36:09.350Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]
2023-12-01T07:36:09.350Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:36:09.350Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x35d74c63 HikariProxyPreparedStatement@903302243 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:36:09.350Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178681458416916, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 376, referer http://localhost:3230/procure/admin/budget-periods, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x3ee15a12 /127.0.0.1:3230<->/127.0.0.1:60754], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 376, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName AdminBudgetPeriods, :variables {}, :query query AdminBudgetPeriods {
  budget_periods {
    ...AdminBudgetPeriodProps
    __typename
  }
}

fragment AdminBudgetPeriodProps on BudgetPeriod {
  id
  name
  inspection_start_date
  end_date
  can_delete
  total_price_cents_new_requests
  total_price_cents_inspected_requests
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:36:09.352Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:36:09.353Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:36:09.353Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:36:09.353Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:36:09.355Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
2023-12-01T07:36:09.357Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query AdminBudgetPeriods {
  budget_periods {
    ...AdminBudgetPeriodProps
    __typename
  }
}

fragment AdminBudgetPeriodProps on BudgetPeriod {
  id
  name
  inspection_start_date
  end_date
  can_delete
  total_price_cents_new_requests
  total_price_cents_inspected_requests
  __typename
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178681458416916, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 376, referer http://localhost:3230/procure/admin/budget-periods, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x3ee15a12 /127.0.0.1:3230<->/127.0.0.1:60754], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 376, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName AdminBudgetPeriods, :variables {}, :query query AdminBudgetPeriods {
  budget_periods {
    ...AdminBudgetPeriodProps
    __typename
  }
}

fragment AdminBudgetPeriodProps on BudgetPeriod {
  id
  name
  inspection_start_date
  end_date
  can_delete
  total_price_cents_new_requests
  total_price_cents_inspected_requests
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:36:09.358Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:budget_periods []])}

>o>3apure-handler, result=> {:data #ordered/map ([:budget_periods []])}
2023-12-01T07:36:09.358Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:36:32.660Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-12-01T07:36:32.664Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2023-12-01T07:36:32.664Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:36:32.691Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:36:32.691Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:36:32.691Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:37:02.670Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-12-01T07:37:02.671Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2023-12-01T07:37:02.671Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:37:02.697Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:37:02.697Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:37:02.698Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:37:32.675Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-12-01T07:37:32.685Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:37:32.686Z NX-41294 DEBUG [com.zaxxer.hikari.pool.PoolBase:132] - db-pool - Closing connection org.postgresql.jdbc.PgConnection@1f86c33a: (connection has passed idleTimeout)
2023-12-01T07:37:32.686Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:37:32.698Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:37:32.698Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:37:32.698Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:38:02.689Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:38:02.689Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:38:02.689Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:38:02.700Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:38:02.700Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:38:02.700Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:38:32.691Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:38:32.695Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:38:32.695Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:38:32.702Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:38:32.702Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:38:32.702Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:39:02.699Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:39:02.699Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:39:02.699Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:39:02.707Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:39:02.707Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:39:02.707Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:39:32.703Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:39:32.708Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:39:32.708Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:39:32.711Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:39:32.711Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:39:32.711Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:40:02.712Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:40:02.713Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:40:02.713Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:40:02.713Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:40:02.713Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:40:02.713Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:40:32.718Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:40:32.719Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:40:32.724Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:40:32.724Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:40:32.724Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:40:32.724Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:40:45.576Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2558b15d HikariProxyPreparedStatement@626569565 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:40:45.577Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:40:45.577Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 0b91b76a-029d-40f2-978a-f6fc849fb5f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2558b15d HikariProxyPreparedStatement@626569565 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:40:45.577Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0b91b76a-029d-40f2-978a-f6fc849fb5f0
2023-12-01T07:40:45.578Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2558b15d HikariProxyPreparedStatement@626569565 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:40:45.578Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:40:45.579Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2558b15d HikariProxyPreparedStatement@626569565 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('0b91b76a-029d-40f2-978a-f6fc849fb5f0', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:40:45.579Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x2242a099 org.postgresql.jdbc.PgResultSetMetaData@2242a099] 1]
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Procurement #object[org.postgresql.jdbc.PgResultSetMetaData 0x2242a099 org.postgresql.jdbc.PgResultSetMetaData@2242a099] 2]
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Procurement]
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Procurement
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2242a099 org.postgresql.jdbc.PgResultSetMetaData@2242a099] 3]
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Admin #object[org.postgresql.jdbc.PgResultSetMetaData 0x2242a099 org.postgresql.jdbc.PgResultSetMetaData@2242a099] 6]
2023-12-01T07:40:45.581Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Admin]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Admin
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2242a099 org.postgresql.jdbc.PgResultSetMetaData@2242a099] 10]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x2242a099 org.postgresql.jdbc.PgResultSetMetaData@2242a099] 11]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x2242a099 org.postgresql.jdbc.PgResultSetMetaData@2242a099] 12]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2242a099 org.postgresql.jdbc.PgResultSetMetaData@2242a099] 13]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6"
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:36:08.203587000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2242a099 org.postgresql.jdbc.PgResultSetMetaData@2242a099] 14]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:36:08.203587000-00:00"]
2023-12-01T07:40:45.582Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:36:08.203587Z"
2023-12-01T07:40:45.583Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7c0019c9 HikariProxyPreparedStatement@2080381385 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:40:45.583Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email jimmie@goyette.com, :contracts_count 0, :lastname Admin, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Procurement, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:36:08.203587Z", :id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :user_session_id #uuid "61f9b9e8-06ab-4ec2-b42c-85ae5232bff6", :scope_system_admin_read false, :access-rights (), :user_id #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value acb2b67f-8a56-4e14-bdec-418d7ce7c086}, leihs-user-session {:value 0b91b76a-029d-40f2-978a-f6fc849fb5f0}}, :remote-addr 127.0.0.1, :start-time 178957690040000, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x1d040d13 HikariProxyConnection@486804755 wrapping org.postgresql.jdbc.PgConnection@3078874c], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=acb2b67f-8a56-4e14-bdec-418d7ce7c086; leihs-user-session=0b91b76a-029d-40f2-978a-f6fc849fb5f0, content-length 568, referer http://localhost:3230/procure/admin/budget-periods, connection keep-alive, x-csrf-token acb2b67f-8a56-4e14-bdec-418d7ce7c086, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x37faf0e6 /127.0.0.1:3230<->/127.0.0.1:61921], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x83c4f57 HikariProxyConnection@138170199 wrapping org.postgresql.jdbc.PgConnection@48d9f216], :level 1, :rollback #object[clojure.lang.Atom 0x150eff42 {:status :ready, :val false}]}, :content-length 568, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName updateBudgetPeriods, :variables {:budgetPeriods [{:name 3000, :inspection_start_date 3000-01-01T00:00:00.000Z, :end_date 3000-06-30T00:00:00.000Z}]}, :query mutation updateBudgetPeriods($budgetPeriods: [BudgetPeriodInput]) {
  budget_periods(input_data: $budgetPeriods) {
    ...AdminBudgetPeriodProps
    __typename
  }
}

fragment AdminBudgetPeriodProps on BudgetPeriod {
  id
  name
  inspection_start_date
  end_date
  can_delete
  total_price_cents_new_requests
  total_price_cents_inspected_requests
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:40:45.585Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]
2023-12-01T07:40:45.585Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:45.586Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:40:45.586Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "a37d6ff0-733f-48bb-8843-e8eaf42074bb"]

> 1 anti-csrf-token >  acb2b67f-8a56-4e14-bdec-418d7ce7c086

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:45.587Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:40:45.589Z NX-41294 WARN [leihs.core.db:205] - Rolling back transaction because of  db-spec next.jdbc.default_options.DefaultOptions@e4090963 is missing a required parameter
2023-12-01T07:40:45.592Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: java.lang.IllegalArgumentException: db-spec next.jdbc.default_options.DefaultOptions@e4090963 is missing a required parameter
2023-12-01T07:40:45.593Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause db-spec next.jdbc.default_options.DefaultOptions@e4090963 is missing a required parameter
 :via
 [{:type java.lang.IllegalArgumentException
   :message db-spec next.jdbc.default_options.DefaultOptions@e4090963 is missing a required parameter
   :at [clojure.java.jdbc$get_connection invokeStatic jdbc.clj 437]}]
 :trace
 [[clojure.java.jdbc$get_connection invokeStatic jdbc.clj 437]
  [clojure.java.jdbc$get_connection invoke jdbc.clj 274]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 851]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 789]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [leihs.procurement.graphql$handler invokeStatic graphql.clj 153]
  [leihs.procurement.graphql$handler invoke graphql.clj 145]
  [leihs.procurement.routes$dispatch_to_handler invokeStatic routes.clj 67]
  [leihs.procurement.routes$dispatch_to_handler invoke routes.clj 62]
  [leihs.core.anti_csrf.back$wrap$fn__44292 invoke back.clj 95]
  [leihs.core.locale$wrap$fn__44344 invoke locale.clj 140]
  [leihs.procurement.authorization$authorize invokeStatic authorization.clj 147]
  [leihs.procurement.authorization$authorize invoke authorization.clj 115]
  [leihs.procurement.authorization$wrap_authorize$fn__39361 invoke authorization.clj 157]
  [leihs.procurement.authorization$authenticate invokeStatic authorization.clj 92]
  [leihs.procurement.authorization$authenticate invoke authorization.clj 85]
  [leihs.procurement.authorization$wrap_authenticate$fn__39353 invoke authorization.clj 111]
  [leihs.core.auth.session$wrap_authenticate$fn__38138 invoke session.clj 93]
  [ring.middleware.cookies$wrap_cookies$fn__47568 invoke cookies.clj 214]
  [leihs.core.settings$wrap invokeStatic settings.clj 47]
  [leihs.core.settings$wrap invoke settings.clj 42]
  [leihs.core.settings$wrap$fn__45357 invoke settings.clj 45]
  [leihs.core.status$wrap$fn__28078 invoke status.clj 78]
  [leihs.core.db$wrap_tx$fn__25321$fn__25322$fn__25323 invoke db.clj 191]
  [next.jdbc.transaction$transact_STAR_ invokeStatic transaction.clj 72]
  [next.jdbc.transaction$transact_STAR_ invoke transaction.clj 51]
  [next.jdbc.transaction$eval12027$fn__12028 invoke transaction.clj 141]
  [next.jdbc.protocols$eval10813$fn__10814$G__10804__10823 invoke protocols.clj 58]
  [next.jdbc.default_options$eval11031$fn__11032 invoke default_options.clj 43]
  [next.jdbc.protocols$eval10813$fn__10814$G__10804__10823 invoke protocols.clj 58]
  [next.jdbc$transact invokeStatic jdbc.clj 420]
  [next.jdbc$transact invoke jdbc.clj 412]
  [leihs.core.db$wrap_tx$fn__25321$fn__25322 invoke db.clj 187]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 807]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 852]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 789]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [leihs.core.db$wrap_tx$fn__25321 invoke db.clj 186]
  [ring.middleware.json$wrap_json_response$fn__47734 invoke json.clj 143]
  [ring.middleware.json$wrap_json_body$fn__47683 invoke json.clj 60]
  [leihs.procurement.routes$wrap_empty$fn__48479 invoke routes.clj 99]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause db-spec next.jdbc.default_options.DefaultOptions@e4090963 is missing a required parameter
 :via
 [{:type java.lang.IllegalArgumentException
   :message db-spec next.jdbc.default_options.DefaultOptions@e4090963 is missing a required parameter
   :at [clojure.java.jdbc$get_connection invokeStatic jdbc.clj 437]}]
 :trace
 [[clojure.java.jdbc$get_connection invokeStatic jdbc.clj 437]
  [clojure.java.jdbc$get_connection invoke jdbc.clj 274]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 851]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 789]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [leihs.procurement.graphql$handler invokeStatic graphql.clj 153]
  [leihs.procurement.graphql$handler invoke graphql.clj 145]
  [leihs.procurement.routes$dispatch_to_handler invokeStatic routes.clj 67]
  [leihs.procurement.routes$dispatch_to_handler invoke routes.clj 62]
  [leihs.core.anti_csrf.back$wrap$fn__44292 invoke back.clj 95]
  [leihs.core.locale$wrap$fn__44344 invoke locale.clj 140]
  [leihs.procurement.authorization$authorize invokeStatic authorization.clj 147]
  [leihs.procurement.authorization$authorize invoke authorization.clj 115]
  [leihs.procurement.authorization$wrap_authorize$fn__39361 invoke authorization.clj 157]
  [leihs.procurement.authorization$authenticate invokeStatic authorization.clj 92]
  [leihs.procurement.authorization$authenticate invoke authorization.clj 85]
  [leihs.procurement.authorization$wrap_authenticate$fn__39353 invoke authorization.clj 111]
  [leihs.core.auth.session$wrap_authenticate$fn__38138 invoke session.clj 93]
  [ring.middleware.cookies$wrap_cookies$fn__47568 invoke cookies.clj 214]
  [leihs.core.settings$wrap invokeStatic settings.clj 47]
  [leihs.core.settings$wrap invoke settings.clj 42]
  [leihs.core.settings$wrap$fn__45357 invoke settings.clj 45]
  [leihs.core.status$wrap$fn__28078 invoke status.clj 78]
  [leihs.core.db$wrap_tx$fn__25321$fn__25322$fn__25323 invoke db.clj 191]
  [next.jdbc.transaction$transact_STAR_ invokeStatic transaction.clj 72]
  [next.jdbc.transaction$transact_STAR_ invoke transaction.clj 51]
  [next.jdbc.transaction$eval12027$fn__12028 invoke transaction.clj 141]
  [next.jdbc.protocols$eval10813$fn__10814$G__10804__10823 invoke protocols.clj 58]
  [next.jdbc.default_options$eval11031$fn__11032 invoke default_options.clj 43]
  [next.jdbc.protocols$eval10813$fn__10814$G__10804__10823 invoke protocols.clj 58]
  [next.jdbc$transact invokeStatic jdbc.clj 420]
  [next.jdbc$transact invoke jdbc.clj 412]
  [leihs.core.db$wrap_tx$fn__25321$fn__25322 invoke db.clj 187]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 807]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 852]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 789]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [leihs.core.db$wrap_tx$fn__25321 invoke db.clj 186]
  [ring.middleware.json$wrap_json_response$fn__47734 invoke json.clj 143]
  [ring.middleware.json$wrap_json_body$fn__47683 invoke json.clj 60]
  [leihs.procurement.routes$wrap_empty$fn__48479 invoke routes.clj 99]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause db-spec next.jdbc.default_options.DefaultOptions@e4090963 is missing a required parameter
 :via
 [{:type java.lang.IllegalArgumentException
   :message db-spec next.jdbc.default_options.DefaultOptions@e4090963 is missing a required parameter
   :at [clojure.java.jdbc$get_connection invokeStatic jdbc.clj 437]}]
 :trace
 [[clojure.java.jdbc$get_connection invokeStatic jdbc.clj 437]
  [clojure.java.jdbc$get_connection invoke jdbc.clj 274]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 851]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 789]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [leihs.procurement.graphql$handler invokeStatic graphql.clj 153]
  [leihs.procurement.graphql$handler invoke graphql.clj 145]
  [leihs.procurement.routes$dispatch_to_handler invokeStatic routes.clj 67]
  [leihs.procurement.routes$dispatch_to_handler invoke routes.clj 62]
  [leihs.core.anti_csrf.back$wrap$fn__44292 invoke back.clj 95]
  [leihs.core.locale$wrap$fn__44344 invoke locale.clj 140]
  [leihs.procurement.authorization$authorize invokeStatic authorization.clj 147]
  [leihs.procurement.authorization$authorize invoke authorization.clj 115]
  [leihs.procurement.authorization$wrap_authorize$fn__39361 invoke authorization.clj 157]
  [leihs.procurement.authorization$authenticate invokeStatic authorization.clj 92]
  [leihs.procurement.authorization$authenticate invoke authorization.clj 85]
  [leihs.procurement.authorization$wrap_authenticate$fn__39353 invoke authorization.clj 111]
  [leihs.core.auth.session$wrap_authenticate$fn__38138 invoke session.clj 93]
  [ring.middleware.cookies$wrap_cookies$fn__47568 invoke cookies.clj 214]
  [leihs.core.settings$wrap invokeStatic settings.clj 47]
  [leihs.core.settings$wrap invoke settings.clj 42]
  [leihs.core.settings$wrap$fn__45357 invoke settings.clj 45]
  [leihs.core.status$wrap$fn__28078 invoke status.clj 78]
  [leihs.core.db$wrap_tx$fn__25321$fn__25322$fn__25323 invoke db.clj 191]
  [next.jdbc.transaction$transact_STAR_ invokeStatic transaction.clj 72]
  [next.jdbc.transaction$transact_STAR_ invoke transaction.clj 51]
  [next.jdbc.transaction$eval12027$fn__12028 invoke transaction.clj 141]
  [next.jdbc.protocols$eval10813$fn__10814$G__10804__10823 invoke protocols.clj 58]
  [next.jdbc.default_options$eval11031$fn__11032 invoke default_options.clj 43]
  [next.jdbc.protocols$eval10813$fn__10814$G__10804__10823 invoke protocols.clj 58]
  [next.jdbc$transact invokeStatic jdbc.clj 420]
  [next.jdbc$transact invoke jdbc.clj 412]
  [leihs.core.db$wrap_tx$fn__25321$fn__25322 invoke db.clj 187]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 807]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 852]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [clojure.java.jdbc$db_transaction_STAR_ invokeStatic jdbc.clj 789]
  [clojure.java.jdbc$db_transaction_STAR_ invoke jdbc.clj 776]
  [leihs.core.db$wrap_tx$fn__25321 invoke db.clj 186]
  [ring.middleware.json$wrap_json_response$fn__47734 invoke json.clj 143]
  [ring.middleware.json$wrap_json_body$fn__47683 invoke json.clj 60]
  [leihs.procurement.routes$wrap_empty$fn__48479 invoke routes.clj 99]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 178961713716375, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site none, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, sec-fetch-user ?1, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x2f0637fc /127.0.0.1:3230<->/127.0.0.1:61958], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  nil

> 1 anti-csrf-token class >  nil

> 2 anti-csrf-token-new >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4
2023-12-01T07:40:49.617Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => bcc101d7-1ec7-4164-ab6a-3281b92e90e4
2023-12-01T07:40:49.619Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5db36dab HikariProxyPreparedStatement@1572040107 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:40:49.619Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:40:49.620Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "19651a6f-2305-405f-8c23-691294dc4d3d" #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 1]
2023-12-01T07:40:49.620Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "19651a6f-2305-405f-8c23-691294dc4d3d"]
2023-12-01T07:40:49.620Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "19651a6f-2305-405f-8c23-691294dc4d3d"
2023-12-01T07:40:49.620Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 3]
2023-12-01T07:40:49.620Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:40:49.620Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 4]
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 7]
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.498817000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 15]
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.498817000-00:00"]
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.498817Z"
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.498817000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 16]
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.498817000-00:00"]
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.498817Z"
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 25]
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:40:49.621Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 32]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ee93081a-a346-40cf-abec-e1411a3601fe" #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 1]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ee93081a-a346-40cf-abec-e1411a3601fe"]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ee93081a-a346-40cf-abec-e1411a3601fe"
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [The #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 3]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text The]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  The
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Requester #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 4]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Requester]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Requester
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 7]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.557793000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 15]
2023-12-01T07:40:49.622Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.557793000-00:00"]
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.557793Z"
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.557793000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 16]
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.557793000-00:00"]
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.557793Z"
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [The Requester jimmie@goyette.com    Requester The #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 25]
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text The Requester jimmie@goyette.com    Requester The]
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  The Requester jimmie@goyette.com    Requester The
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 32]
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 1]
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 3]
2023-12-01T07:40:49.623Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 4]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 7]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.567617000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 15]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.567617000-00:00"]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.567617Z"
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.567617000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 16]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.567617000-00:00"]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.567617Z"
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan Wehner hong@wolf.co    Wehner Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 25]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan Wehner hong@wolf.co    Wehner Harlan]
2023-12-01T07:40:49.624Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan Wehner hong@wolf.co    Wehner Harlan
2023-12-01T07:40:49.625Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x118e3f5d org.postgresql.jdbc.PgResultSetMetaData@118e3f5d] 32]
2023-12-01T07:40:49.625Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:40:49.625Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:40:49.626Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3db1fc08 HikariProxyPreparedStatement@1035074568 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:40:49.626Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:40:49.626Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "19651a6f-2305-405f-8c23-691294dc4d3d" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3db1fc08 HikariProxyPreparedStatement@1035074568 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:40:49.626Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "19651a6f-2305-405f-8c23-691294dc4d3d"
2023-12-01T07:40:49.646Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x679857f9 org.postgresql.jdbc.PgResultSetMetaData@679857f9] 1]
2023-12-01T07:40:49.646Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:40:49.646Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:40:49.646Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x679857f9 org.postgresql.jdbc.PgResultSetMetaData@679857f9] 2]
2023-12-01T07:40:49.646Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:40:49.646Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:40:49.647Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x679857f9 org.postgresql.jdbc.PgResultSetMetaData@679857f9] 3]
2023-12-01T07:40:49.647Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:40:49.647Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:40:49.647Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:40:49.498817Z", :firstname "Dawna", :zip nil, :id #uuid "19651a6f-2305-405f-8c23-691294dc4d3d", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:40:49.498817Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:40:49.649Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "bcc101d7-1ec7-4164-ab6a-3281b92e90e4", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "bcc101d7-1ec7-4164-ab6a-3281b92e90e4", :name "csrf-token"}}
2023-12-01T07:40:49.649Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => bcc101d7-1ec7-4164-ab6a-3281b92e90e4
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}}, :remote-addr 127.0.0.1, :start-time 178961825103041, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4, referer http://localhost:3230/sign-in, connection keep-alive, accept image/avif,image/webp,*/*, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x1cb1462e /127.0.0.1:3230<->/127.0.0.1:61958], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:49.713Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:40:49.717Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1fc1352c HikariProxyPreparedStatement@532755756 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:40:49.717Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "19651a6f-2305-405f-8c23-691294dc4d3d" #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 1]
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "19651a6f-2305-405f-8c23-691294dc4d3d"]
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "19651a6f-2305-405f-8c23-691294dc4d3d"
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 3]
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 4]
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 7]
2023-12-01T07:40:49.719Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.498817000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 15]
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.498817000-00:00"]
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.498817Z"
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.498817000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 16]
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.498817000-00:00"]
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.498817Z"
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 25]
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 32]
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:40:49.720Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "ee93081a-a346-40cf-abec-e1411a3601fe" #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 1]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "ee93081a-a346-40cf-abec-e1411a3601fe"]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "ee93081a-a346-40cf-abec-e1411a3601fe"
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [The #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 3]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text The]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  The
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Requester #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 4]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Requester]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Requester
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [jimmie@goyette.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 7]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar jimmie@goyette.com]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  jimmie@goyette.com
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.557793000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 15]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.557793000-00:00"]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.557793Z"
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.557793000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 16]
2023-12-01T07:40:49.721Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.557793000-00:00"]
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.557793Z"
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [The Requester jimmie@goyette.com    Requester The #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 25]
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text The Requester jimmie@goyette.com    Requester The]
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  The Requester jimmie@goyette.com    Requester The
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 32]
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 1]
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 3]
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 4]
2023-12-01T07:40:49.722Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 7]
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.567617000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 15]
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.567617000-00:00"]
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.567617Z"
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.567617000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 16]
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.567617000-00:00"]
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.567617Z"
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan Wehner hong@wolf.co    Wehner Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 25]
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan Wehner hong@wolf.co    Wehner Harlan]
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan Wehner hong@wolf.co    Wehner Harlan
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x69a54bec org.postgresql.jdbc.PgResultSetMetaData@69a54bec] 32]
2023-12-01T07:40:49.723Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:40:49.724Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:40:49.725Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x17ffdb4 HikariProxyPreparedStatement@25165236 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:40:49.726Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:40:49.726Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "19651a6f-2305-405f-8c23-691294dc4d3d" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x17ffdb4 HikariProxyPreparedStatement@25165236 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:40:49.726Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "19651a6f-2305-405f-8c23-691294dc4d3d"
2023-12-01T07:40:49.729Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x15cc0bf0 org.postgresql.jdbc.PgResultSetMetaData@15cc0bf0] 1]
2023-12-01T07:40:49.729Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:40:49.729Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:40:49.729Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x15cc0bf0 org.postgresql.jdbc.PgResultSetMetaData@15cc0bf0] 2]
2023-12-01T07:40:49.729Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:40:49.729Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:40:49.729Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x15cc0bf0 org.postgresql.jdbc.PgResultSetMetaData@15cc0bf0] 3]
2023-12-01T07:40:49.730Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:40:49.730Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:40:49.731Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:40:49.498817Z", :firstname "Dawna", :zip nil, :id #uuid "19651a6f-2305-405f-8c23-691294dc4d3d", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:40:49.498817Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:40:49.732Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "bcc101d7-1ec7-4164-ab6a-3281b92e90e4", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "bcc101d7-1ec7-4164-ab6a-3281b92e90e4", :name "csrf-token"}}
2023-12-01T07:40:49.733Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}}, :remote-addr 127.0.0.1, :start-time 178961949034208, :params {:user hong@wolf.co, :password nil, :csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x7dbd1860 HikariProxyConnection@2109544544 wrapping org.postgresql.jdbc.PgConnection@3078874c], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4, content-length 77, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x855e2e3 /127.0.0.1:3230<->/127.0.0.1:61958], :server-port 3230, :params-raw {:user hong@wolf.co, :password , :csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x64f2a886 HikariProxyConnection@1693624454 wrapping org.postgresql.jdbc.PgConnection@48d9f216], :level 1, :rollback #object[clojure.lang.Atom 0x3f854991 {:status :ready, :val false}]}, :content-length 77, :form-params {:user hong@wolf.co, :password nil, :csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user hong@wolf.co, :password , :csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x2aee2819 BytesInputStream[len=77]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:49.834Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:40:49.835Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hong@wolf.co #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6315a48c HikariProxyPreparedStatement@1662362764 wrapping SELECT * FROM users  WHERE (users.org_id = ? OR users.login = ? OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:40:49.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hong@wolf.co
2023-12-01T07:40:49.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hong@wolf.co #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6315a48c HikariProxyPreparedStatement@1662362764 wrapping SELECT * FROM users  WHERE (users.org_id = 'hong@wolf.co' OR users.login = ? OR lower(users.email) = ?)] 2]  type:  java.lang.String
2023-12-01T07:40:49.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hong@wolf.co
2023-12-01T07:40:49.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hong@wolf.co #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6315a48c HikariProxyPreparedStatement@1662362764 wrapping SELECT * FROM users  WHERE (users.org_id = 'hong@wolf.co' OR users.login = 'hong@wolf.co' OR lower(users.email) = ?)] 3]  type:  java.lang.String
2023-12-01T07:40:49.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hong@wolf.co
2023-12-01T07:40:49.837Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x39ef1b0d org.postgresql.jdbc.PgResultSetMetaData@39ef1b0d] 1]
2023-12-01T07:40:49.837Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:49.837Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:49.837Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x39ef1b0d org.postgresql.jdbc.PgResultSetMetaData@39ef1b0d] 3]
2023-12-01T07:40:49.837Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:49.837Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:49.837Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0x39ef1b0d org.postgresql.jdbc.PgResultSetMetaData@39ef1b0d] 4]
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0x39ef1b0d org.postgresql.jdbc.PgResultSetMetaData@39ef1b0d] 7]
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.567617000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x39ef1b0d org.postgresql.jdbc.PgResultSetMetaData@39ef1b0d] 15]
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.567617000-00:00"]
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.567617Z"
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.567617000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x39ef1b0d org.postgresql.jdbc.PgResultSetMetaData@39ef1b0d] 16]
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.567617000-00:00"]
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.567617Z"
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan Wehner hong@wolf.co    Wehner Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x39ef1b0d org.postgresql.jdbc.PgResultSetMetaData@39ef1b0d] 25]
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan Wehner hong@wolf.co    Wehner Harlan]
2023-12-01T07:40:49.838Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan Wehner hong@wolf.co    Wehner Harlan
2023-12-01T07:40:49.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x39ef1b0d org.postgresql.jdbc.PgResultSetMetaData@39ef1b0d] 32]
2023-12-01T07:40:49.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:40:49.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:40:49.839Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x75143bb7 HikariProxyPreparedStatement@1964260279 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:40:49.840Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:40:49.840Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x75143bb7 HikariProxyPreparedStatement@1964260279 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:40:49.840Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:49.841Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x4338a24e org.postgresql.jdbc.PgResultSetMetaData@4338a24e] 1]
2023-12-01T07:40:49.841Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:40:49.841Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:40:49.841Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x4338a24e org.postgresql.jdbc.PgResultSetMetaData@4338a24e] 2]
2023-12-01T07:40:49.842Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:40:49.842Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:40:49.842Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x4338a24e org.postgresql.jdbc.PgResultSetMetaData@4338a24e] 3]
2023-12-01T07:40:49.842Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:40:49.842Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:40:49.842Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hong@wolf.co #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3b813e8b HikariProxyPreparedStatement@998325899 wrapping SELECT * FROM authentication_systems  WHERE (authentication_systems.sign_up_email_match IS NOT NULL AND ? ~* authentication_systems.sign_up_email_match)] 1]  type:  java.lang.String
2023-12-01T07:40:49.842Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hong@wolf.co
2023-12-01T07:40:49.843Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected false, :address nil, :email "hong@wolf.co", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Wehner", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization "local", :login nil, :searchable "Harlan Wehner hong@wolf.co    Wehner Harlan", :updated_at #time/instant "2023-12-01T07:40:49.567617Z", :firstname "Harlan", :zip nil, :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:40:49.567617Z", :admin_protected false} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:40:49.844Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4b0ff85 HikariProxyPreparedStatement@78708613 wrapping SELECT * FROM authentication_systems  WHERE type = ?] 1]  type:  java.lang.String
2023-12-01T07:40:49.844Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:40:49.844Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x218b7e79 org.postgresql.jdbc.PgResultSetMetaData@218b7e79] 1]
2023-12-01T07:40:49.847Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:40:49.847Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x218b7e79 org.postgresql.jdbc.PgResultSetMetaData@218b7e79] 2]
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x218b7e79 org.postgresql.jdbc.PgResultSetMetaData@218b7e79] 4]
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x218b7e79 org.postgresql.jdbc.PgResultSetMetaData@218b7e79] 6]
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int4 0]
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x218b7e79 org.postgresql.jdbc.PgResultSetMetaData@218b7e79] 15]
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:40:49.848Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x218b7e79 org.postgresql.jdbc.PgResultSetMetaData@218b7e79] 16]
2023-12-01T07:40:49.849Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:40:49.849Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:40:49.850Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "bcc101d7-1ec7-4164-ab6a-3281b92e90e4", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user "hong@wolf.co", :showPasswordSection true, :passwordButtonText "password_forgot_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "bcc101d7-1ec7-4164-ab6a-3281b92e90e4", :name "csrf-token"}, :authSystems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil})}
2023-12-01T07:40:49.850Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}}, :remote-addr 127.0.0.1, :start-time 178962036921000, :params {:user hong@wolf.co, :password password, :csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x44918a35 HikariProxyConnection@1150388789 wrapping org.postgresql.jdbc.PgConnection@3078874c], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4, content-length 85, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x3132d90b /127.0.0.1:3230<->/127.0.0.1:61958], :server-port 3230, :params-raw {:user hong@wolf.co, :password password, :csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x2f1b2542 HikariProxyConnection@790308162 wrapping org.postgresql.jdbc.PgConnection@48d9f216], :level 1, :rollback #object[clojure.lang.Atom 0x2f0acedd {:status :ready, :val false}]}, :content-length 85, :form-params {:user hong@wolf.co, :password password, :csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user hong@wolf.co, :password password, :csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x6702392b BytesInputStream[len=85]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:49.922Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:40:49.934Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x337418f HikariProxyPreparedStatement@53952911 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( ?, ?, ?, ? )
RETURNING *] 1]  type:  java.util.UUID
2023-12-01T07:40:49.934Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:49.934Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 9e4f1fb73cc5c82b2b3f9fc418fbab44f082715ea75182969cc70f76340496eb #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x337418f HikariProxyPreparedStatement@53952911 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '554a15b8-dec5-423f-9df4-d405bcccfd31'::uuid, ?, ?, ? )
RETURNING *] 2]  type:  java.lang.String
2023-12-01T07:40:49.934Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  9e4f1fb73cc5c82b2b3f9fc418fbab44f082715ea75182969cc70f76340496eb
2023-12-01T07:40:49.935Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x337418f HikariProxyPreparedStatement@53952911 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '554a15b8-dec5-423f-9df4-d405bcccfd31'::uuid, '9e4f1fb73cc5c82b2b3f9fc418fbab44f082715ea75182969cc70f76340496eb', ?, ? )
RETURNING *] 3]  type:  java.lang.String
2023-12-01T07:40:49.935Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:40:49.936Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:jsonb {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1} #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x337418f HikariProxyPreparedStatement@53952911 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '554a15b8-dec5-423f-9df4-d405bcccfd31'::uuid, '9e4f1fb73cc5c82b2b3f9fc418fbab44f082715ea75182969cc70f76340496eb', 'password', ? )
RETURNING *] 4]  type:  clojure.lang.PersistentArrayMap
2023-12-01T07:40:49.936Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #object[org.postgresql.util.PGobject 0x294fae32 {"user_agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko\/20100101 Firefox\/115.0","remote_addr":"127.0.0.1"}]
2023-12-01T07:40:49.953Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a15d6f14-373f-41dc-abd7-da39936166bf" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1296002c org.postgresql.jdbc.PgResultSetMetaData@1296002c] 1]
2023-12-01T07:40:49.956Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"]
2023-12-01T07:40:49.956Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"
2023-12-01T07:40:49.956Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [9e4f1fb73cc5c82b2b3f9fc418fbab44f082715ea75182969cc70f76340496eb #object[org.postgresql.jdbc.PgResultSetMetaData 0x1296002c org.postgresql.jdbc.PgResultSetMetaData@1296002c] 2]
2023-12-01T07:40:49.956Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text 9e4f1fb73cc5c82b2b3f9fc418fbab44f082715ea75182969cc70f76340496eb]
2023-12-01T07:40:49.956Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  9e4f1fb73cc5c82b2b3f9fc418fbab44f082715ea75182969cc70f76340496eb
2023-12-01T07:40:49.956Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1296002c org.postgresql.jdbc.PgResultSetMetaData@1296002c] 3]
2023-12-01T07:40:49.956Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:49.956Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:49.956Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.936361000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1296002c org.postgresql.jdbc.PgResultSetMetaData@1296002c] 5]
2023-12-01T07:40:49.957Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.936361000-00:00"]
2023-12-01T07:40:49.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.936361Z"
2023-12-01T07:40:49.957Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x5e488c78 {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x1296002c org.postgresql.jdbc.PgResultSetMetaData@1296002c] 6]
2023-12-01T07:40:49.957Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0x5e488c78 {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}]]
2023-12-01T07:40:49.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1}
2023-12-01T07:40:49.957Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1296002c org.postgresql.jdbc.PgResultSetMetaData@1296002c] 7]
2023-12-01T07:40:49.957Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text password]
2023-12-01T07:40:49.957Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:40:49.984Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:40:49.993Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x164cba46 HikariProxyPreparedStatement@374127174 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:40:49.993Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:40:49.994Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text ddf97f86-f325-45bd-8892-5f68d35b5ff5 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x164cba46 HikariProxyPreparedStatement@374127174 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:40:49.994Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  ddf97f86-f325-45bd-8892-5f68d35b5ff5
2023-12-01T07:40:49.994Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x164cba46 HikariProxyPreparedStatement@374127174 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:40:49.995Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:40:49.995Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x164cba46 HikariProxyPreparedStatement@374127174 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:40:49.995Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0x4d7b5b5b org.postgresql.jdbc.PgResultSetMetaData@4d7b5b5b] 1]
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x4d7b5b5b org.postgresql.jdbc.PgResultSetMetaData@4d7b5b5b] 2]
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4d7b5b5b org.postgresql.jdbc.PgResultSetMetaData@4d7b5b5b] 3]
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0x4d7b5b5b org.postgresql.jdbc.PgResultSetMetaData@4d7b5b5b] 6]
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]
2023-12-01T07:40:50.006Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4d7b5b5b org.postgresql.jdbc.PgResultSetMetaData@4d7b5b5b] 10]
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4d7b5b5b org.postgresql.jdbc.PgResultSetMetaData@4d7b5b5b] 11]
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4d7b5b5b org.postgresql.jdbc.PgResultSetMetaData@4d7b5b5b] 12]
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a15d6f14-373f-41dc-abd7-da39936166bf" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4d7b5b5b org.postgresql.jdbc.PgResultSetMetaData@4d7b5b5b] 13]
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"]
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.936361000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4d7b5b5b org.postgresql.jdbc.PgResultSetMetaData@4d7b5b5b] 14]
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.936361000-00:00"]
2023-12-01T07:40:50.007Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.936361Z"
2023-12-01T07:40:50.008Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x11837a56 HikariProxyPreparedStatement@293829206 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:40:50.008Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
>>> authenticate::skip= nil  handler-key= :procurement
>>> authenticate::authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962108889541, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x77c572e4 /127.0.0.1:3230<->/127.0.0.1:61958], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure, :server-name localhost, :handler-key :procurement, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :procurement
2023-12-01T07:40:50.010Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.011Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.012Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:40:50.013Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:50.015Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:40:50.015Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:40:50.381Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x318ca4d2 HikariProxyPreparedStatement@831300818 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:40:50.381Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:40:50.381Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text ddf97f86-f325-45bd-8892-5f68d35b5ff5 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x318ca4d2 HikariProxyPreparedStatement@831300818 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:40:50.382Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  ddf97f86-f325-45bd-8892-5f68d35b5ff5
2023-12-01T07:40:50.382Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x318ca4d2 HikariProxyPreparedStatement@831300818 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:40:50.382Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:40:50.383Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x318ca4d2 HikariProxyPreparedStatement@831300818 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:40:50.383Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0x4aaf5b6d org.postgresql.jdbc.PgResultSetMetaData@4aaf5b6d] 1]
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1f45a831 HikariProxyPreparedStatement@524658737 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x4aaf5b6d org.postgresql.jdbc.PgResultSetMetaData@4aaf5b6d] 2]
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4aaf5b6d org.postgresql.jdbc.PgResultSetMetaData@4aaf5b6d] 3]
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.387Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0x4aaf5b6d org.postgresql.jdbc.PgResultSetMetaData@4aaf5b6d] 6]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text ddf97f86-f325-45bd-8892-5f68d35b5ff5 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1f45a831 HikariProxyPreparedStatement@524658737 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  ddf97f86-f325-45bd-8892-5f68d35b5ff5
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4aaf5b6d org.postgresql.jdbc.PgResultSetMetaData@4aaf5b6d] 10]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4aaf5b6d org.postgresql.jdbc.PgResultSetMetaData@4aaf5b6d] 11]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4aaf5b6d org.postgresql.jdbc.PgResultSetMetaData@4aaf5b6d] 12]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a15d6f14-373f-41dc-abd7-da39936166bf" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4aaf5b6d org.postgresql.jdbc.PgResultSetMetaData@4aaf5b6d] 13]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1f45a831 HikariProxyPreparedStatement@524658737 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.936361000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4aaf5b6d org.postgresql.jdbc.PgResultSetMetaData@4aaf5b6d] 14]
2023-12-01T07:40:50.388Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.936361000-00:00"]
2023-12-01T07:40:50.389Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.936361Z"
2023-12-01T07:40:50.389Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x1f45a831 HikariProxyPreparedStatement@524658737 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:40:50.389Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:40:50.389Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6bf8a588 HikariProxyPreparedStatement@1811457416 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:40:50.389Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962495484291, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, referer http://localhost:3230/procure, connection keep-alive, accept image/avif,image/webp,*/*, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x14505865 /127.0.0.1:3230<->/127.0.0.1:61968], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure/favicon.ico, :server-name localhost, :handler-key :not-found, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :not-found
2023-12-01T07:40:50.391Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.391Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0xe3fb26b org.postgresql.jdbc.PgResultSetMetaData@e3fb26b] 1]
2023-12-01T07:40:50.391Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:50.391Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.391Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:50.391Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0xe3fb26b org.postgresql.jdbc.PgResultSetMetaData@e3fb26b] 2]
2023-12-01T07:40:50.391Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:50.391Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe3fb26b org.postgresql.jdbc.PgResultSetMetaData@e3fb26b] 3]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0xe3fb26b org.postgresql.jdbc.PgResultSetMetaData@e3fb26b] 6]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe3fb26b org.postgresql.jdbc.PgResultSetMetaData@e3fb26b] 10]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0xe3fb26b org.postgresql.jdbc.PgResultSetMetaData@e3fb26b] 11]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0xe3fb26b org.postgresql.jdbc.PgResultSetMetaData@e3fb26b] 12]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a15d6f14-373f-41dc-abd7-da39936166bf" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe3fb26b org.postgresql.jdbc.PgResultSetMetaData@e3fb26b] 13]
2023-12-01T07:40:50.392Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"]
2023-12-01T07:40:50.393Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"
2023-12-01T07:40:50.393Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.936361000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0xe3fb26b org.postgresql.jdbc.PgResultSetMetaData@e3fb26b] 14]
2023-12-01T07:40:50.393Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.936361000-00:00"]
2023-12-01T07:40:50.393Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.936361Z"

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:50.393Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:40:50.393Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:40:50.393Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x15ce3d19 HikariProxyPreparedStatement@365837593 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:40:50.393Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962501223458, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 502, referer http://localhost:3230/procure, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x10d5d77e /127.0.0.1:3230<->/127.0.0.1:61958], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:40:50.395Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.396Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.396Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:40:50.396Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:50.398Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
2023-12-01T07:40:50.398Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
>>>1 #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.399Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
>>>2 {:id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :firstname Harlan, :lastname Wehner}
>>oida>> #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.401Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
>>>3 nil
2023-12-01T07:40:50.411Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.412Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962501223458, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 502, referer http://localhost:3230/procure, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x10d5d77e /127.0.0.1:3230<->/127.0.0.1:61958], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:40:50.427Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"bcc101d7-1ec7-4164-ab6a-3281b92e90e4\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"554a15b8-dec5-423f-9df4-d405bcccfd31\",\"firstname\":\"Harlan\",\"lastname\":\"Wehner\",\"login\":null,\"email\":\"hong@wolf.co\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "554a15b8-dec5-423f-9df4-d405bcccfd31"] [:firstname "Harlan"] [:lastname "Wehner"] [:permissions #ordered/map ([:isAdmin false] [:isRequester true] [:isInspectorForCategories [#ordered/map ([:id "3c6e2539-8a43-47e5-a996-51ba5f260253"] [:__typename :Category])]] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>3apure-handler, result=> {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"bcc101d7-1ec7-4164-ab6a-3281b92e90e4","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"554a15b8-dec5-423f-9df4-d405bcccfd31","firstname":"Harlan","lastname":"Wehner","login":null,"email":"hong@wolf.co"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Züritüütsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id 554a15b8-dec5-423f-9df4-d405bcccfd31] [:firstname Harlan] [:lastname Wehner] [:permissions #ordered/map ([:isAdmin false] [:isRequester true] [:isInspectorForCategories [#ordered/map ([:id 3c6e2539-8a43-47e5-a996-51ba5f260253] [:__typename :Category])]] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-12-01T07:40:50.427Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:40:50.525Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x471f59c6 HikariProxyPreparedStatement@1193236934 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:40:50.525Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:40:50.525Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4172bd8f HikariProxyPreparedStatement@1098038671 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:40:50.525Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:40:50.525Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text ddf97f86-f325-45bd-8892-5f68d35b5ff5 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x471f59c6 HikariProxyPreparedStatement@1193236934 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:40:50.525Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  ddf97f86-f325-45bd-8892-5f68d35b5ff5
2023-12-01T07:40:50.526Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text ddf97f86-f325-45bd-8892-5f68d35b5ff5 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4172bd8f HikariProxyPreparedStatement@1098038671 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:40:50.526Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  ddf97f86-f325-45bd-8892-5f68d35b5ff5
2023-12-01T07:40:50.527Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x471f59c6 HikariProxyPreparedStatement@1193236934 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:40:50.527Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:40:50.527Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4172bd8f HikariProxyPreparedStatement@1098038671 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:40:50.527Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:40:50.528Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x471f59c6 HikariProxyPreparedStatement@1193236934 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:40:50.528Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:40:50.528Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4172bd8f HikariProxyPreparedStatement@1098038671 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:40:50.528Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0x35684e51 org.postgresql.jdbc.PgResultSetMetaData@35684e51] 1]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0x52b2806d org.postgresql.jdbc.PgResultSetMetaData@52b2806d] 1]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x35684e51 org.postgresql.jdbc.PgResultSetMetaData@35684e51] 2]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x52b2806d org.postgresql.jdbc.PgResultSetMetaData@52b2806d] 2]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x35684e51 org.postgresql.jdbc.PgResultSetMetaData@35684e51] 3]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x52b2806d org.postgresql.jdbc.PgResultSetMetaData@52b2806d] 3]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.531Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0x35684e51 org.postgresql.jdbc.PgResultSetMetaData@35684e51] 6]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0x52b2806d org.postgresql.jdbc.PgResultSetMetaData@52b2806d] 6]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x35684e51 org.postgresql.jdbc.PgResultSetMetaData@35684e51] 10]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x52b2806d org.postgresql.jdbc.PgResultSetMetaData@52b2806d] 10]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x35684e51 org.postgresql.jdbc.PgResultSetMetaData@35684e51] 11]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x52b2806d org.postgresql.jdbc.PgResultSetMetaData@52b2806d] 11]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x35684e51 org.postgresql.jdbc.PgResultSetMetaData@35684e51] 12]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x52b2806d org.postgresql.jdbc.PgResultSetMetaData@52b2806d] 12]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a15d6f14-373f-41dc-abd7-da39936166bf" #object[org.postgresql.jdbc.PgResultSetMetaData 0x35684e51 org.postgresql.jdbc.PgResultSetMetaData@35684e51] 13]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a15d6f14-373f-41dc-abd7-da39936166bf" #object[org.postgresql.jdbc.PgResultSetMetaData 0x52b2806d org.postgresql.jdbc.PgResultSetMetaData@52b2806d] 13]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"]
2023-12-01T07:40:50.532Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"]
2023-12-01T07:40:50.533Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"
2023-12-01T07:40:50.533Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"
2023-12-01T07:40:50.533Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.936361000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x35684e51 org.postgresql.jdbc.PgResultSetMetaData@35684e51] 14]
2023-12-01T07:40:50.533Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.936361000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x52b2806d org.postgresql.jdbc.PgResultSetMetaData@52b2806d] 14]
2023-12-01T07:40:50.533Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.936361000-00:00"]
2023-12-01T07:40:50.533Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.936361000-00:00"]
2023-12-01T07:40:50.533Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.936361Z"
2023-12-01T07:40:50.533Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.936361Z"
2023-12-01T07:40:50.534Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6f739e4d HikariProxyPreparedStatement@1869848141 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:40:50.534Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:40:50.534Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x45637296 HikariProxyPreparedStatement@1164145302 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:40:50.534Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962639042000, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 534, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4b07ade9 /127.0.0.1:3230<->/127.0.0.1:61958], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:40:50.535Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.535Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text ddf97f86-f325-45bd-8892-5f68d35b5ff5 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6f739e4d HikariProxyPreparedStatement@1869848141 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:40:50.535Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x35f52b69 HikariProxyPreparedStatement@905259881 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:40:50.536Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  ddf97f86-f325-45bd-8892-5f68d35b5ff5
2023-12-01T07:40:50.536Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.536Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.536Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6f739e4d HikariProxyPreparedStatement@1869848141 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:40:50.536Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:40:50.537Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:738] - db-pool - Added connection org.postgresql.jdbc.PgConnection@1f51f258
2023-12-01T07:40:50.537Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962639583166, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 502, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x36af3aca /127.0.0.1:3230<->/127.0.0.1:61973], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:40:50.537Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.537Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6f739e4d HikariProxyPreparedStatement@1869848141 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:40:50.537Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:40:50.537Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.538Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.538Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:40:50.539Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:50.539Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:40:50.539Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0x1285f888 org.postgresql.jdbc.PgResultSetMetaData@1285f888] 1]
2023-12-01T07:40:50.539Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:50.539Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:50.539Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x1285f888 org.postgresql.jdbc.PgResultSetMetaData@1285f888] 2]
2023-12-01T07:40:50.539Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:50.539Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:50.539Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1285f888 org.postgresql.jdbc.PgResultSetMetaData@1285f888] 3]
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0x1285f888 org.postgresql.jdbc.PgResultSetMetaData@1285f888] 6]
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1285f888 org.postgresql.jdbc.PgResultSetMetaData@1285f888] 10]
2023-12-01T07:40:50.540Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x1285f888 org.postgresql.jdbc.PgResultSetMetaData@1285f888] 11]
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x1285f888 org.postgresql.jdbc.PgResultSetMetaData@1285f888] 12]
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a15d6f14-373f-41dc-abd7-da39936166bf" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1285f888 org.postgresql.jdbc.PgResultSetMetaData@1285f888] 13]
pure-handler >> 2
pure-handler >> 2
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"]
2023-12-01T07:40:50.540Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
 with variables {}
2023-12-01T07:40:50.540Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
2023-12-01T07:40:50.540Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"
>oo> vars from graphQL-Requst nil nil nil {}
2023-12-01T07:40:50.541Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.936361000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1285f888 org.postgresql.jdbc.PgResultSetMetaData@1285f888] 14]
2023-12-01T07:40:50.541Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.936361000-00:00"]
2023-12-01T07:40:50.541Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.936361Z"
2023-12-01T07:40:50.542Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x59f08e33 HikariProxyPreparedStatement@1508937267 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:40:50.542Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
>>>1 #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.543Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962638700458, :params {}, :settings >>>2 {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, {:sessions_force_secure false:id , :deliver_received_order_notifications false, #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :external_base_url nil, :firstname Harlan, :sessions_force_uniqueness false, :lastname Wehner:email_signature Cheers,}}, 
:tx-next >>oida>> #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
#next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 3575, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x781401c1 /127.0.0.1:3230<->/127.0.0.1:61968], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 3575, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestsIndexFiltered, :variables {}, :query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :graphql
2023-12-01T07:40:50.544Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.544Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
>>>3 nil
2023-12-01T07:40:50.545Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.545Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:40:50.546Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:50.547Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
2023-12-01T07:40:50.552Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
2023-12-01T07:40:50.556Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
>>>get-dashboard
>>args {}
>>value nil
>>mainCatsSql [SELECT procurement_main_categories.* FROM procurement_main_categories ORDER BY procurement_main_categories.name ASC]
2023-12-01T07:40:50.560Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962639583166, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 502, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x36af3aca /127.0.0.1:3230<->/127.0.0.1:61973], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:40:50.567Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"bcc101d7-1ec7-4164-ab6a-3281b92e90e4\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"554a15b8-dec5-423f-9df4-d405bcccfd31\",\"firstname\":\"Harlan\",\"lastname\":\"Wehner\",\"login\":null,\"email\":\"hong@wolf.co\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "554a15b8-dec5-423f-9df4-d405bcccfd31"] [:firstname "Harlan"] [:lastname "Wehner"] [:permissions #ordered/map ([:isAdmin false] [:isRequester true] [:isInspectorForCategories [#ordered/map ([:id "3c6e2539-8a43-47e5-a996-51ba5f260253"] [:__typename :Category])]] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>3apure-handler, result=> {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"bcc101d7-1ec7-4164-ab6a-3281b92e90e4","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"554a15b8-dec5-423f-9df4-d405bcccfd31","firstname":"Harlan","lastname":"Wehner","login":null,"email":"hong@wolf.co"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Züritüütsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id 554a15b8-dec5-423f-9df4-d405bcccfd31] [:firstname Harlan] [:lastname Wehner] [:permissions #ordered/map ([:isAdmin false] [:isRequester true] [:isInspectorForCategories [#ordered/map ([:id 3c6e2539-8a43-47e5-a996-51ba5f260253] [:__typename :Category])]] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-12-01T07:40:50.567Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>mainCats [{:id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Main Category MC1} {:id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Main Category MC2}]
>>queryA1 [SELECT * FROM procurement_budget_periods ORDER BY end_date DESC]
>>resultA1 [{:id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :name Budget-Period-BP, :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:40:49.549277000-00:00", :updated_at #inst "2023-12-01T07:40:49.549277000-00:00"}]
>>resultA1-2 [{:id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :name Budget-Period-BP, :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:40:49.549277000-00:00", :updated_at #inst "2023-12-01T07:40:49.549277000-00:00"}]
>>requestsB2-triggerError {} nil
>o> helper1
>o> helper2 nil nil nil
>oo> helper3a priority nil
>oo> helper3b priority nil
>oo> helper4a inspector-priority nil
>oo> helper4b inspector-priority nil
>o> helper5
>oo> helper5a :order_status nil
>oo> helper5b :order_status nil
>oo> order-status nil
>o> helper6
2023-12-01T07:40:50.571Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:40:50.572Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.572Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.573Z NX-41294 DEBUG [leihs.procurement.permissions.user:103] - (->> [viewer? inspector? admin?] (map (fn* [p1__39297#] (p1__39297# tx auth-entity))) (some true?)) => nil
>o> helper7 nil
>o> requests-base-query-with-state
>o> state-sql nil
>o> s-map  {:NEW [:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]], :APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]], :PARTIALLY_APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]], :DENIED [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]], :IN_APPROVAL [:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]]}
>o>map-4 (>o> map NEW
>o> map [:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]]
:case >o> map NEW
[:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]] >o> map APPROVED
>o> map [:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]]
NEW >o> map APPROVED
[:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]] >o> map PARTIALLY_APPROVED
>o> map [:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]]
APPROVED >o> map PARTIALLY_APPROVED
[:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]] >o> map DENIED
>o> map [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]]
PARTIALLY_APPROVED >o> map DENIED
[:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]] >o> map IN_APPROVAL
>o> map [:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]]
DENIED >o> map IN_APPROVAL
[:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]] IN_APPROVAL)
>o>map-5 (:case [:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]] NEW [:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]] APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]] PARTIALLY_APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]] DENIED [:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]] IN_APPROVAL)
2023-12-01T07:40:50.573Z NX-41294 DEBUG [leihs.procurement.resources.request:171] - result => [[(:case [:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]] "NEW" [:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]] "APPROVED" [:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]] "PARTIALLY_APPROVED" [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]] "DENIED" [:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]] "IN_APPROVAL")]]
>o> join-and-nest-budget-periods
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]] NEW [:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]] APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]] PARTIALLY_APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]] DENIED [:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]] IN_APPROVAL)]] :state]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id]]}
>o> tbl :procurement_budget_periods_2
>o> nest-key :budget_period
>o> join-and-nest-categories
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]] NEW [:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]] APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]] PARTIALLY_APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]] DENIED [:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]] IN_APPROVAL)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id]]}
>o> tbl :models
>o> nest-key :model
>o> join-and-nest-templates
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]] NEW [:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]] APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]] PARTIALLY_APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]] DENIED [:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]] IN_APPROVAL)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id]], :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id]]}
>o> tbl :procurement_templates
>o> nest-key :template
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]] NEW [:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]] APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]] PARTIALLY_APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]] DENIED [:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]] IN_APPROVAL)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :suppliers
>o> nest-key :supplier
>o> join-and-nest-users
>o> sqlmap {:select [[[:raw DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*]] [[[(:case [:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]] NEW [:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]] APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]] PARTIALLY_APPROVED [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]] DENIED [:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]] IN_APPROVAL)]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category]] [[[:row_to_json :models]] :model] [[:raw row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization]] [[[:row_to_json :procurement_templates]] :template] [[:raw row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room]] [[[:row_to_json :suppliers]] :supplier]], :from [:procurement_requests], :left-join (:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id]), :order-by [[[:raw concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]]}
>o> tbl :users
>o> nest-key :user
>o> helper8
>oo> helper8 nil nil nil
>o> apply-scope #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.573Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.574Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.574Z NX-41294 DEBUG [leihs.procurement.permissions.requests:26] - (-> sqlmap (sql/left-join :procurement_category_viewers [:= :procurement_category_viewers.category_id :procurement_requests.category_id]) (sql/where [:or [:= :procurement_category_viewers.user_id user-id] [:= :procurement_requests.user_id user-id]])) => {:select [[[:raw "DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*"]] [[[(:case [:or [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity nil]] [:< :current_date :procurement_budget_periods.inspection_start_date]] "NEW" [:and [:< :procurement_budget_periods.end_date :current_date] [:>= :procurement_requests.approved_quantity :procurement_requests.requested_quantity]] "APPROVED" [:and [:< :procurement_budget_periods.end_date :current_date] [:and [:< :procurement_requests.approved_quantity :procurement_requests.requested_quantity] [:> :procurement_requests.approved_quantity 0]]] "PARTIALLY_APPROVED" [:and [:< :procurement_budget_periods.end_date :current_date] [:= :procurement_requests.approved_quantity 0]] "DENIED" [:and [:>= :current_date :procurement_budget_periods.inspection_start_date] [:< :current_date :procurement_budget_periods.end_date]] "IN_APPROVAL")]] :state] [[[:row_to_json :procurement_budget_periods_2]] :budget_period] [[:raw "row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category"]] [[[:row_to_json :models]] :model] [[:raw "row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization"]] [[[:row_to_json :procurement_templates]] :template] [[:raw "row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room"]] [[[:row_to_json :suppliers]] :supplier] [[[:row_to_json :users]] :user]], :from [:procurement_requests], :left-join [:models [:= :models.id :procurement_requests.model_id] :procurement_templates [:= :procurement_templates.id :procurement_requests.template_id] :suppliers [:= :suppliers.id :procurement_requests.supplier_id] :users [:= :users.id :procurement_requests.user_id] :procurement_category_viewers [:= :procurement_category_viewers.category_id :procurement_requests.category_id]], :order-by [[[:raw "concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))"]]], :join [:procurement_budget_periods [:= :procurement_budget_periods.id :procurement_requests.budget_period_id] [{:select [:* [[:> :current_date :end_date] :is_past]], :from [:procurement_budget_periods]} :procurement_budget_periods_2] [:= :procurement_budget_periods_2.id :procurement_requests.budget_period_id] :procurement_categories [:= :procurement_categories.id :procurement_requests.category_id] :procurement_main_categories [:= :procurement_main_categories.id :procurement_categories.main_category_id] :procurement_organizations [:= :procurement_organizations.id :procurement_requests.organization_id] [:procurement_organizations :procurement_departments] [:= :procurement_departments.id :procurement_organizations.parent_id] :rooms [:= :rooms.id :procurement_requests.room_id] :buildings [:= :buildings.id :rooms.building_id]], :where [:or [:= :procurement_category_viewers.user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"] [:= :procurement_requests.user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]]}
>o> abc [SELECT DISTINCT ON (procurement_requests.id, concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, '')))) procurement_requests.*, ((CASE WHEN ((procurement_budget_periods.end_date < current_date) AND (procurement_requests.approved_quantity IS NULL)) OR (current_date < procurement_budget_periods.inspection_start_date) THEN ? WHEN (procurement_budget_periods.end_date < current_date) AND (procurement_requests.approved_quantity >= procurement_requests.requested_quantity) THEN ? WHEN (procurement_budget_periods.end_date < current_date) AND ((procurement_requests.approved_quantity < procurement_requests.requested_quantity) AND (procurement_requests.approved_quantity > ?)) THEN ? WHEN (procurement_budget_periods.end_date < current_date) AND (procurement_requests.approved_quantity = ?) THEN ? WHEN (current_date >= procurement_budget_periods.inspection_start_date) AND (current_date < procurement_budget_periods.end_date) THEN ? END)) AS state, (ROW_TO_JSON(procurement_budget_periods_2)) AS budget_period, row_to_json(procurement_categories)::jsonb || jsonb_build_object('main_category', row_to_json(procurement_main_categories)) AS category, (ROW_TO_JSON(models)) AS model, row_to_json(procurement_organizations)::jsonb || jsonb_build_object('department', row_to_json(procurement_departments)) AS organization, (ROW_TO_JSON(procurement_templates)) AS template, row_to_json(rooms)::jsonb || jsonb_build_object('building', row_to_json(buildings)) AS room, (ROW_TO_JSON(suppliers)) AS supplier, (ROW_TO_JSON(users)) AS user FROM procurement_requests INNER JOIN procurement_budget_periods ON procurement_budget_periods.id = procurement_requests.budget_period_id INNER JOIN (SELECT *, current_date > end_date AS is_past FROM procurement_budget_periods) AS procurement_budget_periods_2 ON procurement_budget_periods_2.id = procurement_requests.budget_period_id INNER JOIN procurement_categories ON procurement_categories.id = procurement_requests.category_id INNER JOIN procurement_main_categories ON procurement_main_categories.id = procurement_categories.main_category_id INNER JOIN procurement_organizations ON procurement_organizations.id = procurement_requests.organization_id INNER JOIN procurement_organizations AS procurement_departments ON procurement_departments.id = procurement_organizations.parent_id INNER JOIN rooms ON rooms.id = procurement_requests.room_id INNER JOIN buildings ON buildings.id = rooms.building_id LEFT JOIN models ON models.id = procurement_requests.model_id LEFT JOIN procurement_templates ON procurement_templates.id = procurement_requests.template_id LEFT JOIN suppliers ON suppliers.id = procurement_requests.supplier_id LEFT JOIN users ON users.id = procurement_requests.user_id LEFT JOIN procurement_category_viewers ON procurement_category_viewers.category_id = procurement_requests.category_id WHERE (procurement_category_viewers.user_id = ?) OR (procurement_requests.user_id = ?) ORDER BY concat(lower(coalesce(procurement_requests.article_name, '')), lower(coalesce(models.product, '')), lower(coalesce(models.version, ''))) ASC NEW APPROVED 0 PARTIALLY_APPROVED 0 DENIED IN_APPROVAL #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.575Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:40:50.575Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.576Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.576Z NX-41294 DEBUG [leihs.procurement.permissions.user:103] - (->> [viewer? inspector? admin?] (map (fn* [p1__39297#] (p1__39297# tx auth-entity))) (some true?)) => nil

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962639042000, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 534, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x4b07ade9 /127.0.0.1:3230<->/127.0.0.1:61958], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 534, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestFilters, :variables {}, :query query RequestFilters {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    categories {
      id
      name
      __typename
    }
    __typename
  }
  organizations(root_only: true) {
    ...OrgProps
    organizations {
      ...OrgProps
      __typename
    }
    __typename
  }
}

fragment OrgProps on Organization {
  id
  name
  shortname
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:40:50.590Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil nil]] [:organizations [nil nil]]), :errors ({:message "Non-nullable field was null.", :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message "Non-nullable field was null.", :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 1 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 2 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 2 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 3 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 3 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 1 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 1 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 2 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 2 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 3 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 3 :name]})}
2023-12-01T07:40:50.590Z NX-41294 DEBUG [leihs.procurement.graphql:109] - {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil nil]] [:organizations [nil nil]]), :errors ({:message "Non-nullable field was null.", :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message "Non-nullable field was null.", :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 1 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 2 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 2 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 3 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 3 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 1 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 1 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 2 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 2 :name]} {:message "Non-nullable field was null.", :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 3 :id]} {:message "Non-nullable field was null.", :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 3 :name]})}

>o> ERROR 4pure-handler, result=> {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil nil]] [:organizations [nil nil]]), :errors ({:message Non-nullable field was null., :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message Non-nullable field was null., :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message Non-nullable field was null., :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message Non-nullable field was null., :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message Non-nullable field was null., :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message Non-nullable field was null., :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message Non-nullable field was null., :locations [{:line 10, :column 5}], :path [:main_categories 1 :id]} {:message Non-nullable field was null., :locations [{:line 11, :column 5}], :path [:main_categories 1 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 1 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 1 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 2 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 2 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 0 :organizations 3 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 0 :organizations 3 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 1 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 1 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 0 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 0 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 1 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 1 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 2 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 2 :name]} {:message Non-nullable field was null., :locations [{:line 30, :column 3}], :path [:organizations 1 :organizations 3 :id]} {:message Non-nullable field was null., :locations [{:line 31, :column 3}], :path [:organizations 1 :organizations 3 :name]})}
2023-12-01T07:40:50.591Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>o>requestsB2 ()
>o>dashboard-cache-keyB2 {:id -15128758}
2023-12-01T07:40:50.605Z NX-41294 DEBUG [leihs.procurement.dashboard:265] - (count requests) => 0
>o> cache-key ({:id -15128758})
2023-12-01T07:40:50.605Z NX-41294 DEBUG [leihs.procurement.dashboard:266] - (cache-key dashboard-cache-key) => -15128758

>o> final-result (>o> bp {:id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :name Budget-Period-BP, :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:40:49.549277000-00:00", :updated_at #inst "2023-12-01T07:40:49.549277000-00:00"}
>o> cache-key ({:id -15128758} {:id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :name Budget-Period-BP, :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:40:49.549277000-00:00", :updated_at #inst "2023-12-01T07:40:49.549277000-00:00"})
>oo> 1sum-total-price :total_price_cents (>o> mc {:id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Main Category MC1}
>o> filter-and-assoc-cats ()

>o> result 2a (>o> c {:id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :name Category C1, :main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :general_ledger_account nil, :cost_center nil, :procurement_account nil}
>o> c {:id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :name Category C1, :main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :general_ledger_account nil, :cost_center nil, :procurement_account nil}
>o> 2 requests* ()
>oo> 1sum-total-price :total_price_cents ()
>oo> 2sum-total-price :total_price_cents nil
>o> cache-key ({:id -15128758} {:id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :name Budget-Period-BP, :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:40:49.549277000-00:00", :updated_at #inst "2023-12-01T07:40:49.549277000-00:00"} {:id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Main Category MC1} {:id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :name Category C1, :main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :general_ledger_account nil, :cost_center nil, :procurement_account nil})

>o> result 1a {:main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Category C1, :requests (), :general_ledger_account nil, :id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253, :cost_center nil} 


>o> filter-and-assoc-cats (json) {"main_category_id":"a29cdd52-52a5-4560-818c-06aaf39e9ac1","name":"Category C1","requests":[],"general_ledger_account":null,"id":"3c6e2539-8a43-47e5-a996-51ba5f260253","total_price_cents":0,"procurement_account":null,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253","cost_center":null} 


>o> filter-and-assoc-cats -> :budget_period nil 


>o> filter-and-assoc-cats -> :budget_period (json) null 

{:main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Category C1, :requests (), :general_ledger_account nil, :id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253, :cost_center nil}) 

>oo> 1sum-total-price :total_price_cents ({:main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Category C1, :requests (), :general_ledger_account nil, :id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253, :cost_center nil})
>oo> 2sum-total-price :total_price_cents nil
>o> cache-key ({:id -15128758} {:id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :name Budget-Period-BP, :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:40:49.549277000-00:00", :updated_at #inst "2023-12-01T07:40:49.549277000-00:00"} {:id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Main Category MC1})

>o> result 3a {:id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Main Category MC1, :categories ({:main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Category C1, :requests (), :general_ledger_account nil, :id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1} 

>o> mc {:id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Main Category MC2}
>o> filter-and-assoc-cats ()

>o> result 2a (>o> c {:id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :name Category C2, :main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :general_ledger_account nil, :cost_center nil, :procurement_account nil}
>o> c {:id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :name Category C2, :main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :general_ledger_account nil, :cost_center nil, :procurement_account nil}
>o> 2 requests* ()
>oo> 1sum-total-price :total_price_cents ()
>oo> 2sum-total-price :total_price_cents nil
>o> cache-key ({:id -15128758} {:id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :name Budget-Period-BP, :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:40:49.549277000-00:00", :updated_at #inst "2023-12-01T07:40:49.549277000-00:00"} {:id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Main Category MC2} {:id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :name Category C2, :main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :general_ledger_account nil, :cost_center nil, :procurement_account nil})

>o> result 1a {:main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Category C2, :requests (), :general_ledger_account nil, :id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e, :cost_center nil} 


>o> filter-and-assoc-cats (json) {"main_category_id":"743f106e-2250-4325-9cff-5a4543a2d1ca","name":"Category C2","requests":[],"general_ledger_account":null,"id":"8f62f497-5345-43d5-b010-a32409ddeb9e","total_price_cents":0,"procurement_account":null,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e","cost_center":null} 


>o> filter-and-assoc-cats -> :budget_period nil 


>o> filter-and-assoc-cats -> :budget_period (json) null 

{:main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Category C2, :requests (), :general_ledger_account nil, :id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e, :cost_center nil}) 

>oo> 1sum-total-price :total_price_cents ({:main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Category C2, :requests (), :general_ledger_account nil, :id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e, :cost_center nil})
>oo> 2sum-total-price :total_price_cents nil
>o> cache-key ({:id -15128758} {:id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :name Budget-Period-BP, :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :created_at #inst "2023-12-01T07:40:49.549277000-00:00", :updated_at #inst "2023-12-01T07:40:49.549277000-00:00"} {:id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Main Category MC2})

>o> result 3a {:id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Main Category MC2, :categories ({:main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Category C2, :requests (), :general_ledger_account nil, :id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca} 

{:id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Main Category MC1, :categories ({:main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Category C1, :requests (), :general_ledger_account nil, :id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1} {:id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Main Category MC2, :categories ({:main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Category C2, :requests (), :general_ledger_account nil, :id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca})
>oo> 2sum-total-price :total_price_cents nil

>o> :assoc-data {:main_categories ({:id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Main Category MC1, :categories ({:main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Category C1, :requests (), :general_ledger_account nil, :id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1} {:id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Main Category MC2, :categories ({:main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Category C2, :requests (), :general_ledger_account nil, :id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca}), :name Budget-Period-BP, :updated_at #inst "2023-12-01T07:40:49.549277000-00:00", :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :total_price_cents 0, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11, :created_at #inst "2023-12-01T07:40:49.549277000-00:00"} 


>o> :assoc-data (json) {"main_categories":[{"id":"a29cdd52-52a5-4560-818c-06aaf39e9ac1","name":"Main Category MC1","categories":[{"main_category_id":"a29cdd52-52a5-4560-818c-06aaf39e9ac1","name":"Category C1","requests":[],"general_ledger_account":null,"id":"3c6e2539-8a43-47e5-a996-51ba5f260253","total_price_cents":0,"procurement_account":null,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253","cost_center":null}],"total_price_cents":0,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1"},{"id":"743f106e-2250-4325-9cff-5a4543a2d1ca","name":"Main Category MC2","categories":[{"main_category_id":"743f106e-2250-4325-9cff-5a4543a2d1ca","name":"Category C2","requests":[],"general_ledger_account":null,"id":"8f62f497-5345-43d5-b010-a32409ddeb9e","total_price_cents":0,"procurement_account":null,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e","cost_center":null}],"total_price_cents":0,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca"}],"name":"Budget-Period-BP","updated_at":"2023-12-01T07:40:49.549Z","inspection_start_date":"2024-01-31T23:00:00.000Z","end_date":"2024-02-29T23:00:00.000Z","id":"c4878b40-b21a-46b9-bdec-a78bcb3e9d11","total_price_cents":0,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11","created_at":"2023-12-01T07:40:49.549Z"} 

{:main_categories ({:id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Main Category MC1, :categories ({:main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name Category C1, :requests (), :general_ledger_account nil, :id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1} {:id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Main Category MC2, :categories ({:main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name Category C2, :requests (), :general_ledger_account nil, :id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :total_price_cents 0, :procurement_account nil, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e, :cost_center nil}), :total_price_cents 0, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca}), :name Budget-Period-BP, :updated_at #inst "2023-12-01T07:40:49.549277000-00:00", :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :total_price_cents 0, :cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11, :created_at #inst "2023-12-01T07:40:49.549277000-00:00"}) 


>o> final-result (json) [{"main_categories":[{"id":"a29cdd52-52a5-4560-818c-06aaf39e9ac1","name":"Main Category MC1","categories":[{"main_category_id":"a29cdd52-52a5-4560-818c-06aaf39e9ac1","name":"Category C1","requests":[],"general_ledger_account":null,"id":"3c6e2539-8a43-47e5-a996-51ba5f260253","total_price_cents":0,"procurement_account":null,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253","cost_center":null}],"total_price_cents":0,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1"},{"id":"743f106e-2250-4325-9cff-5a4543a2d1ca","name":"Main Category MC2","categories":[{"main_category_id":"743f106e-2250-4325-9cff-5a4543a2d1ca","name":"Category C2","requests":[],"general_ledger_account":null,"id":"8f62f497-5345-43d5-b010-a32409ddeb9e","total_price_cents":0,"procurement_account":null,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e","cost_center":null}],"total_price_cents":0,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca"}],"name":"Budget-Period-BP","updated_at":"2023-12-01T07:40:49.549Z","inspection_start_date":"2024-01-31T23:00:00.000Z","end_date":"2024-02-29T23:00:00.000Z","id":"c4878b40-b21a-46b9-bdec-a78bcb3e9d11","total_price_cents":0,"cacheKey":"-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11","created_at":"2023-12-01T07:40:49.549Z"}] 

2023-12-01T07:40:50.608Z NX-41294 DEBUG [leihs.procurement.dashboard:267] - (determine-budget-periods requests tx dashboard-cache-key main-cats bps) => ({:main_categories ({:id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name "Main Category MC1", :categories ({:main_category_id #uuid "a29cdd52-52a5-4560-818c-06aaf39e9ac1", :name "Category C1", :requests (), :general_ledger_account nil, :id #uuid "3c6e2539-8a43-47e5-a996-51ba5f260253", :total_price_cents 0, :procurement_account nil, :cacheKey "-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253", :cost_center nil}), :total_price_cents 0, :cacheKey "-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1"} {:id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name "Main Category MC2", :categories ({:main_category_id #uuid "743f106e-2250-4325-9cff-5a4543a2d1ca", :name "Category C2", :requests (), :general_ledger_account nil, :id #uuid "8f62f497-5345-43d5-b010-a32409ddeb9e", :total_price_cents 0, :procurement_account nil, :cacheKey "-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e", :cost_center nil}), :total_price_cents 0, :cacheKey "-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca"}), :name "Budget-Period-BP", :updated_at #inst "2023-12-01T07:40:49.549277000-00:00", :inspection_start_date #inst "2024-01-31T23:00:00.000000000-00:00", :end_date #inst "2024-02-29T23:00:00.000000000-00:00", :id #uuid "c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :total_price_cents 0, :cacheKey "-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11", :created_at #inst "2023-12-01T07:40:49.549277000-00:00"})

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962638700458, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 3575, referer http://localhost:3230/procure/requests, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x781401c1 /127.0.0.1:3230<->/127.0.0.1:61968], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 3575, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName RequestsIndexFiltered, :variables {}, :query query RequestsIndexFiltered($budgetPeriods: [ID!], $categories: [ID!], $search: String, $state: [State!], $order_status: [OrderStatus], $organizations: [ID!], $priority: [Priority!], $inspector_priority: [InspectorPriority!], $onlyOwnRequests: Boolean) {
  dashboard(budget_period_id: $budgetPeriods, category_id: $categories, search: $search, state: $state, order_status: $order_status, organization_id: $organizations, priority: $priority, inspector_priority: $inspector_priority, requested_by_auth_user: $onlyOwnRequests) {
    cacheKey
    total_count
    budget_periods {
      id
      cacheKey
      name
      inspection_start_date
      end_date
      total_price_cents
      main_categories {
        id
        cacheKey
        name
        image_url
        total_price_cents
        categories {
          id
          cacheKey
          name
          total_price_cents
          requests {
            ...RequestFieldsForIndex
            total_price_cents
            actionPermissions {
              edit
              __typename
            }
            __typename
          }
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment RequestFieldsForIndex on Request {
  id
  short_id
  user {
    value {
      id
      firstname
      lastname
      __typename
    }
    __typename
  }
  category {
    read
    write
    required
    value {
      id
      name
      main_category {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  budget_period {
    read
    write
    required
    value {
      name
      id
      __typename
    }
    __typename
  }
  article_name {
    value
    __typename
  }
  model {
    value {
      id
      product
      version
      __typename
    }
    __typename
  }
  receiver {
    value
    __typename
  }
  organization {
    value {
      id
      name
      shortname
      department {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  price_cents {
    value
    __typename
  }
  price_currency {
    value
    __typename
  }
  requested_quantity {
    read
    value
    __typename
  }
  approved_quantity {
    read
    value
    __typename
  }
  order_quantity {
    read
    value
    __typename
  }
  replacement {
    value
    __typename
  }
  priority {
    value
    __typename
  }
  state
  article_number {
    value
    __typename
  }
  supplier {
    value {
      name
      __typename
    }
    __typename
  }
  supplier_name {
    value
    __typename
  }
  receiver {
    value
    __typename
  }
  room {
    value {
      id
      name
      building {
        id
        name
        __typename
      }
      __typename
    }
    __typename
  }
  motivation {
    value
    __typename
  }
  inspection_comment {
    value
    __typename
  }
  inspector_priority {
    value
    __typename
  }
  accounting_type {
    value
    __typename
  }
  cost_center {
    value
    __typename
  }
  general_ledger_account {
    value
    __typename
  }
  procurement_account {
    value
    __typename
  }
  internal_order_number {
    value
    __typename
  }
  order_status {
    value
    __typename
  }
  order_comment {
    value
    __typename
  }
  __typename
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:40:50.610Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey "-15128758"] [:total_count 0] [:budget_periods [#ordered/map ([:id "c4878b40-b21a-46b9-bdec-a78bcb3e9d11"] [:cacheKey "-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11"] [:name "Budget-Period-BP"] [:inspection_start_date "2024-02-01 00:00:00.0"] [:end_date "2024-03-01 00:00:00.0"] [:total_price_cents "0"] [:main_categories [#ordered/map ([:id "a29cdd52-52a5-4560-818c-06aaf39e9ac1"] [:cacheKey "-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1"] [:name "Main Category MC1"] [:image_url nil] [:total_price_cents "0"] [:categories [#ordered/map ([:id "3c6e2539-8a43-47e5-a996-51ba5f260253"] [:cacheKey "-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253"] [:name "Category C1"] [:total_price_cents "0"] [:requests []] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id "743f106e-2250-4325-9cff-5a4543a2d1ca"] [:cacheKey "-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca"] [:name "Main Category MC2"] [:image_url nil] [:total_price_cents "0"] [:categories [#ordered/map ([:id "8f62f497-5345-43d5-b010-a32409ddeb9e"] [:cacheKey "-15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e"] [:name "Category C2"] [:total_price_cents "0"] [:requests []] [:__typename :Category])]] [:__typename :MainCategory])]] [:__typename :BudgetPeriod])]] [:__typename :Dashboard])])}

>o>3apure-handler, result=> {:data #ordered/map ([:dashboard #ordered/map ([:cacheKey -15128758] [:total_count 0] [:budget_periods [#ordered/map ([:id c4878b40-b21a-46b9-bdec-a78bcb3e9d11] [:cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11] [:name Budget-Period-BP] [:inspection_start_date 2024-02-01 00:00:00.0] [:end_date 2024-03-01 00:00:00.0] [:total_price_cents 0] [:main_categories [#ordered/map ([:id a29cdd52-52a5-4560-818c-06aaf39e9ac1] [:cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1] [:name Main Category MC1] [:image_url nil] [:total_price_cents 0] [:categories [#ordered/map ([:id 3c6e2539-8a43-47e5-a996-51ba5f260253] [:cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_a29cdd52-52a5-4560-818c-06aaf39e9ac1_3c6e2539-8a43-47e5-a996-51ba5f260253] [:name Category C1] [:total_price_cents 0] [:requests []] [:__typename :Category])]] [:__typename :MainCategory]) #ordered/map ([:id 743f106e-2250-4325-9cff-5a4543a2d1ca] [:cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca] [:name Main Category MC2] [:image_url nil] [:total_price_cents 0] [:categories [#ordered/map ([:id 8f62f497-5345-43d5-b010-a32409ddeb9e] [:cacheKey -15128758_c4878b40-b21a-46b9-bdec-a78bcb3e9d11_743f106e-2250-4325-9cff-5a4543a2d1ca_8f62f497-5345-43d5-b010-a32409ddeb9e] [:name Category C2] [:total_price_cents 0] [:requests []] [:__typename :Category])]] [:__typename :MainCategory])]] [:__typename :BudgetPeriod])]] [:__typename :Dashboard])])}
2023-12-01T07:40:50.610Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:40:50.834Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x20c9eeb6 HikariProxyPreparedStatement@550104758 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:40:50.834Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x32319b8 HikariProxyPreparedStatement@52631992 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:40:50.834Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:40:50.834Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:40:50.835Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text ddf97f86-f325-45bd-8892-5f68d35b5ff5 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x20c9eeb6 HikariProxyPreparedStatement@550104758 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:40:50.835Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  ddf97f86-f325-45bd-8892-5f68d35b5ff5
2023-12-01T07:40:50.835Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text ddf97f86-f325-45bd-8892-5f68d35b5ff5 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x32319b8 HikariProxyPreparedStatement@52631992 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:40:50.835Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  ddf97f86-f325-45bd-8892-5f68d35b5ff5
2023-12-01T07:40:50.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x20c9eeb6 HikariProxyPreparedStatement@550104758 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:40:50.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x32319b8 HikariProxyPreparedStatement@52631992 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:40:50.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:40:50.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:40:50.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x20c9eeb6 HikariProxyPreparedStatement@550104758 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:40:50.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x32319b8 HikariProxyPreparedStatement@52631992 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('ddf97f86-f325-45bd-8892-5f68d35b5ff5', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:40:50.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:40:50.836Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:40:50.838Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0x6cdeb36d org.postgresql.jdbc.PgResultSetMetaData@6cdeb36d] 1]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [hong@wolf.co #object[org.postgresql.jdbc.PgResultSetMetaData 0x41ffc93a org.postgresql.jdbc.PgResultSetMetaData@41ffc93a] 1]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x6cdeb36d org.postgresql.jdbc.PgResultSetMetaData@6cdeb36d] 2]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar hong@wolf.co]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  hong@wolf.co
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Harlan #object[org.postgresql.jdbc.PgResultSetMetaData 0x41ffc93a org.postgresql.jdbc.PgResultSetMetaData@41ffc93a] 2]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Harlan]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6cdeb36d org.postgresql.jdbc.PgResultSetMetaData@6cdeb36d] 3]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Harlan
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x41ffc93a org.postgresql.jdbc.PgResultSetMetaData@41ffc93a] 3]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0x6cdeb36d org.postgresql.jdbc.PgResultSetMetaData@6cdeb36d] 6]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Wehner #object[org.postgresql.jdbc.PgResultSetMetaData 0x41ffc93a org.postgresql.jdbc.PgResultSetMetaData@41ffc93a] 6]
2023-12-01T07:40:50.839Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Wehner]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6cdeb36d org.postgresql.jdbc.PgResultSetMetaData@6cdeb36d] 10]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Wehner
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[org.postgresql.jdbc.PgResultSetMetaData 0x41ffc93a org.postgresql.jdbc.PgResultSetMetaData@41ffc93a] 10]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x6cdeb36d org.postgresql.jdbc.PgResultSetMetaData@6cdeb36d] 11]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x41ffc93a org.postgresql.jdbc.PgResultSetMetaData@41ffc93a] 11]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x6cdeb36d org.postgresql.jdbc.PgResultSetMetaData@6cdeb36d] 12]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x41ffc93a org.postgresql.jdbc.PgResultSetMetaData@41ffc93a] 12]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a15d6f14-373f-41dc-abd7-da39936166bf" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6cdeb36d org.postgresql.jdbc.PgResultSetMetaData@6cdeb36d] 13]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a15d6f14-373f-41dc-abd7-da39936166bf" #object[org.postgresql.jdbc.PgResultSetMetaData 0x41ffc93a org.postgresql.jdbc.PgResultSetMetaData@41ffc93a] 13]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a15d6f14-373f-41dc-abd7-da39936166bf"
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.936361000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x6cdeb36d org.postgresql.jdbc.PgResultSetMetaData@6cdeb36d] 14]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:40:49.936361000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x41ffc93a org.postgresql.jdbc.PgResultSetMetaData@41ffc93a] 14]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.936361000-00:00"]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:40:49.936361000-00:00"]
2023-12-01T07:40:50.840Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.936361Z"
2023-12-01T07:40:50.841Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:40:49.936361Z"
2023-12-01T07:40:50.841Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3f7a0674 HikariProxyPreparedStatement@1064961652 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:40:50.841Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7ffbb99f HikariProxyPreparedStatement@2147203487 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:40:50.841Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.841Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity {>>> authenticate::skip= nil  handler-key= :graphql
>>> authenticate::authenticated-entity :email hong@wolf.co{:email hong@wolf.co, :contracts_count 0, , :lastname Wehner, :contracts_count :org_id nil, 0, :scope_read :lastname Wehner, :org_id nil, true, :scope_read :is_admin true, false, :is_admin false:authentication-method , :session, :authentication-method:login  nil, :session, :scope_system_admin_write false:login , nil, :scope_write :scope_system_admin_writetrue , false, :firstname :scope_write Harlantrue, , :scope_admin_write :firstname falseHarlan, , :user_session_created_at :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", #time/instant "2023-12-01T07:40:49.936361Z", :id :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31":user_session_id , #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :user_session_id :scope_system_admin_read false, #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :access-rights:scope_system_admin_read  false, :access-rights ((), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email hong@wolf.co), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, , :external_sign_out_url nil, :contracts_count :language_locale nil, 0:inventory_pool_roles_count , :lastname 0Wehner, , :scope_admin_read :org_id falsenil}, :scope_read true, 
:is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at 
>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]
(
>> authorize::request > ), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, {:external_sign_out_url nil, :language_locale nil, :authenticated-entity:inventory_pool_roles_count  0, :scope_admin_read false}{:email hong@wolf.co, :cookies , :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read {true, :is_admin false, :authentication-method :session, :login nilleihs-anti-csrf-token,  :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr #time/instant "2023-12-01T07:40:49.936361Z", 127.0.0.1, :id :start-time #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", 178962948060500, :user_session_id :params #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs (432000, ):smtp_default_from_address , your.lending.desk@example.com:user_id , #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :public_image_caching_enabled :is_system_admin truefalse, , :sessions_force_secure :external_sign_out_url nilfalse, , :language_locale nil, :deliver_received_order_notifications :inventory_pool_roles_count false0, , :external_base_url :scope_admin_read nil, false:sessions_force_uniqueness }false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable , :cookies #object[{com.zaxxer.hikari.HikariDataSource leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}0x48f3df85 , HikariDataSource (HikariPool-1)], leihs-user-session :options {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr {127.0.0.1, :start-time :builder-fn 178962947982083, :params {#object[}, next.jdbc.result_set$as_unqualified_lower_maps :settings 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}{}, :email_sending_enabled false, :query-params-raw :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled{ }true, , :sessions_force_secure :route-paramsfalse,  nil:deliver_received_order_notifications false, , :external_base_url nil, :sessions_force_uniqueness false:headers , :email_signature Cheers,}, :tx-next {#next.jdbc.default_options.DefaultOptionsorigin http://localhost:3230, sec-fetch-site {same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type :connectable application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 502, referer http://localhost:3230/procure/requests/new?budgetPeriod=c4878b40-b21a-46b9-bdec-a78bcb3e9d11, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, #object[accept-encoding gzip, deflate, br, com.zaxxer.hikari.HikariDataSource sec-fetch-mode cors}, :async-channel 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 669, referer http://localhost:3230/procure/requests/new?budgetPeriod=c4878b40-b21a-46b9-bdec-a78bcb3e9d11, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, #object[accept-encoding org.httpkit.server.AsyncChannel gzip, deflate, br, sec-fetch-mode cors}, :async-channel 0x33430f37 /127.0.0.1:3230<->/127.0.0.1:61973], :server-port 3230, :params-raw {}, :tx {:datasource #object[#object[com.zaxxer.hikari.HikariDataSource org.httpkit.server.AsyncChannel 0x6e6a011f HikariDataSource (db-pool)]}, 0x41e6f511 /127.0.0.1:3230<->/127.0.0.1:61968], :content-length :server-port 502, 3230, :form-params :params-raw {}, {}, :websocket? :tx false, :query-params {:datasource {}, :content-type application/json, #object[com.zaxxer.hikari.HikariDataSource :form-params-raw {}0x6e6a011f , HikariDataSource (db-pool)]}, :content-length :character-encoding 669, utf8, :form-params :uri /procure/graphql, :server-name localhost, {:handler-key }:graphql, , :websocket? :query-stringfalse , nil:query-params , :body {}, :content-type application/json, {:form-params-raw :operationName me, {}, :variables :character-encoding utf8, :uri /procure/graphql, :server-name {localhost, }:handler-key , :graphql, :query :query-string query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}nil, , :graphql-schema :body {:operationName newRequestPreselectionQuery, :variables #CompiledSchema<>, {}, :handler :query query newRequestPreselectionQuery {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    image_url
    categories {
      id
      name
      __typename
    }
    __typename
  }
  templates {
    id
    category {
      id
      __typename
    }
    is_archived
    article_name
    article_number
    model {
      id
      product
      version
      __typename
    }
    price_cents
    price_currency
    supplier {
      id
      __typename
    }
    __typename
  }
}
}, :graphql-schema #object[leihs.procurement.graphql$handler #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme {:http, }, :scheme :request-method :http, :post:request-method , :post, :accept :accept {{:mime :mime :json:json, , :charset :charset nil, nil, :encoding nil:encoding nil, , :language nil:language nil}}}}


>> authorize::handler-key >> :graphql

>> authorize::handler-key >> :graphql
2023-12-01T07:40:50.843Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.843Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.844Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.844Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:40:50.844Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:40:50.844Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:40:50.845Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.845Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil

> 1 anti-csrf-token >  bcc101d7-1ec7-4164-ab6a-3281b92e90e4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:40:50.846Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:40:50.846Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
pure-handler >> 2
pure-handler >> 2
2023-12-01T07:40:50.848Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
2023-12-01T07:40:50.848Z NX-41294 DEBUG [leihs.procurement.graphql:71] - graphql query query newRequestPreselectionQuery {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    image_url
    categories {
      id
      name
      __typename
    }
    __typename
  }
  templates {
    id
    category {
      id
      __typename
    }
    is_archived
    article_name
    article_number
    model {
      id
      product
      version
      __typename
    }
    price_cents
    price_currency
    supplier {
      id
      __typename
    }
    __typename
  }
}
 with variables {}
>oo> vars from graphQL-Requst nil nil nil {}
>>>1 #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.848Z NX-41294 DEBUG [leihs.procurement.resources.user:75] - id => #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
>>>2 {:id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :firstname Harlan, :lastname Wehner}
>>oida>> #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"
2023-12-01T07:40:50.849Z NX-41294 DEBUG [leihs.procurement.resources.saved-filters:19] - (-> (sql/select :*) (sql/from :procurement_users_filters) (sql/where [:= :user_id [:cast user-id :uuid]]) sql-format) => ["SELECT * FROM procurement_users_filters WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
>>>3 nil
2023-12-01T07:40:50.856Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
2023-12-01T07:40:50.857Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31"]
>e> #error {
 :cause ERROR: non-integer constant in ORDER BY
  Position: 131
 :via
 [{:type org.postgresql.util.PSQLException
   :message ERROR: non-integer constant in ORDER BY
  Position: 131
   :at [org.postgresql.core.v3.QueryExecutorImpl receiveErrorResponse QueryExecutorImpl.java 2533]}]
 :trace
 [[org.postgresql.core.v3.QueryExecutorImpl receiveErrorResponse QueryExecutorImpl.java 2533]
  [org.postgresql.core.v3.QueryExecutorImpl processResults QueryExecutorImpl.java 2268]
  [org.postgresql.core.v3.QueryExecutorImpl execute QueryExecutorImpl.java 313]
  [org.postgresql.jdbc.PgStatement executeInternal PgStatement.java 448]
  [org.postgresql.jdbc.PgStatement execute PgStatement.java 369]
  [org.postgresql.jdbc.PgPreparedStatement executeWithFlags PgPreparedStatement.java 159]
  [org.postgresql.jdbc.PgPreparedStatement execute PgPreparedStatement.java 148]
  [com.zaxxer.hikari.pool.ProxyPreparedStatement execute ProxyPreparedStatement.java 44]
  [com.zaxxer.hikari.pool.HikariProxyPreparedStatement execute HikariProxyPreparedStatement.java -1]
  [next.jdbc.result_set$stmt__GT_result_set invokeStatic result_set.clj 669]
  [next.jdbc.result_set$stmt__GT_result_set invoke result_set.clj 664]
  [next.jdbc.result_set$eval11841$fn__11849 invoke result_set.clj 944]
  [next.jdbc.protocols$eval10723$fn__10754$G__10714__10763 invoke protocols.clj 34]
  [next.jdbc.result_set$eval11880$fn__11885 invoke result_set.clj 1023]
  [next.jdbc.protocols$eval10723$fn__10754$G__10714__10763 invoke protocols.clj 34]
  [next.jdbc$execute_BANG_ invokeStatic jdbc.clj 251]
  [next.jdbc$execute_BANG_ invoke jdbc.clj 238]
  [leihs.procurement.resources.templates$get_templates invokeStatic templates.clj 38]
  [leihs.procurement.resources.templates$get_templates invoke templates.clj 31]
  [leihs.procurement.graphql.resolver$wrap_resolver_with_error$fn__44464 invoke resolver.clj 16]
  [com.walmartlabs.lacinia.schema$wrap_resolver_to_ensure_resolver_result$fn__14023 invoke schema.clj 986]
  [com.walmartlabs.lacinia.executor$invoke_resolver_for_field invokeStatic executor.clj 86]
  [com.walmartlabs.lacinia.executor$invoke_resolver_for_field invoke executor.clj 68]
  [com.walmartlabs.lacinia.executor$resolve_and_select invokeStatic executor.clj 353]
  [com.walmartlabs.lacinia.executor$resolve_and_select invoke executor.clj 234]
  [com.walmartlabs.lacinia.executor$apply_field_selection invokeStatic executor.clj 140]
  [com.walmartlabs.lacinia.executor$apply_field_selection invoke executor.clj 135]
  [com.walmartlabs.lacinia.executor$apply_selection invokeStatic executor.clj 173]
  [com.walmartlabs.lacinia.executor$apply_selection invoke executor.clj 165]
  [com.walmartlabs.lacinia.executor$execute_nested_selections$fn__17481 invoke executor.clj 197]
  [com.walmartlabs.lacinia.internal_utils$keepv$fn__12187 invoke internal_utils.clj 46]
  [clojure.core.protocols$fn__8181 invokeStatic protocols.clj 168]
  [clojure.core.protocols$fn__8181 invoke protocols.clj 124]
  [clojure.core.protocols$fn__8136$G__8131__8145 invoke protocols.clj 19]
  [clojure.core.protocols$seq_reduce invokeStatic protocols.clj 31]
  [clojure.core.protocols$fn__8168 invokeStatic protocols.clj 75]
  [clojure.core.protocols$fn__8168 invoke protocols.clj 75]
  [clojure.core.protocols$fn__8110$G__8105__8123 invoke protocols.clj 13]
  [clojure.core$reduce invokeStatic core.clj 6830]
  [clojure.core$reduce invoke core.clj 6812]
  [com.walmartlabs.lacinia.internal_utils$keepv invokeStatic internal_utils.clj 45]
  [com.walmartlabs.lacinia.internal_utils$keepv invoke internal_utils.clj 41]
  [com.walmartlabs.lacinia.executor$execute_nested_selections invokeStatic executor.clj 197]
  [com.walmartlabs.lacinia.executor$execute_nested_selections invoke executor.clj 190]
  [com.walmartlabs.lacinia.executor$execute_query$fn__17519 invoke executor.clj 400]
  [clojure.lang.AFn applyToHelper AFn.java 152]
  [clojure.lang.AFn applyTo AFn.java 144]
  [clojure.core$apply invokeStatic core.clj 667]
  [clojure.core$with_bindings_STAR_ invokeStatic core.clj 1977]
  [clojure.core$with_bindings_STAR_ doInvoke core.clj 1977]
  [clojure.lang.RestFn invoke RestFn.java 425]
  [clojure.lang.AFn applyToHelper AFn.java 156]
  [clojure.lang.RestFn applyTo RestFn.java 132]
  [clojure.core$apply invokeStatic core.clj 671]
  [clojure.core$bound_fn_STAR_$fn__5767 doInvoke core.clj 2007]
  [clojure.lang.RestFn invoke RestFn.java 397]
  [com.walmartlabs.lacinia.executor$execute_query$fn__17524 invoke executor.clj 421]
  [clojure.core$binding_conveyor_fn$fn__5772 invoke core.clj 2034]
  [clojure.lang.AFn call AFn.java 18]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:40:50.860Z NX-41294 WARN [leihs.procurement.graphql.resolver:326] - ERROR: non-integer constant in ORDER BY
  Position: 131
2023-12-01T07:40:50.860Z NX-41294 DEBUG [leihs.procurement.graphql.resolver:326] - #error {
 :cause ERROR: non-integer constant in ORDER BY
  Position: 131
 :via
 [{:type org.postgresql.util.PSQLException
   :message ERROR: non-integer constant in ORDER BY
  Position: 131
   :at [org.postgresql.core.v3.QueryExecutorImpl receiveErrorResponse QueryExecutorImpl.java 2533]}]
 :trace
 [[org.postgresql.core.v3.QueryExecutorImpl receiveErrorResponse QueryExecutorImpl.java 2533]
  [org.postgresql.core.v3.QueryExecutorImpl processResults QueryExecutorImpl.java 2268]
  [org.postgresql.core.v3.QueryExecutorImpl execute QueryExecutorImpl.java 313]
  [org.postgresql.jdbc.PgStatement executeInternal PgStatement.java 448]
  [org.postgresql.jdbc.PgStatement execute PgStatement.java 369]
  [org.postgresql.jdbc.PgPreparedStatement executeWithFlags PgPreparedStatement.java 159]
  [org.postgresql.jdbc.PgPreparedStatement execute PgPreparedStatement.java 148]
  [com.zaxxer.hikari.pool.ProxyPreparedStatement execute ProxyPreparedStatement.java 44]
  [com.zaxxer.hikari.pool.HikariProxyPreparedStatement execute HikariProxyPreparedStatement.java -1]
  [next.jdbc.result_set$stmt__GT_result_set invokeStatic result_set.clj 669]
  [next.jdbc.result_set$stmt__GT_result_set invoke result_set.clj 664]
  [next.jdbc.result_set$eval11841$fn__11849 invoke result_set.clj 944]
  [next.jdbc.protocols$eval10723$fn__10754$G__10714__10763 invoke protocols.clj 34]
  [next.jdbc.result_set$eval11880$fn__11885 invoke result_set.clj 1023]
  [next.jdbc.protocols$eval10723$fn__10754$G__10714__10763 invoke protocols.clj 34]
  [next.jdbc$execute_BANG_ invokeStatic jdbc.clj 251]
  [next.jdbc$execute_BANG_ invoke jdbc.clj 238]
  [leihs.procurement.resources.templates$get_templates invokeStatic templates.clj 38]
  [leihs.procurement.resources.templates$get_templates invoke templates.clj 31]
  [leihs.procurement.graphql.resolver$wrap_resolver_with_error$fn__44464 invoke resolver.clj 16]
  [com.walmartlabs.lacinia.schema$wrap_resolver_to_ensure_resolver_result$fn__14023 invoke schema.clj 986]
  [com.walmartlabs.lacinia.executor$invoke_resolver_for_field invokeStatic executor.clj 86]
  [com.walmartlabs.lacinia.executor$invoke_resolver_for_field invoke executor.clj 68]
  [com.walmartlabs.lacinia.executor$resolve_and_select invokeStatic executor.clj 353]
  [com.walmartlabs.lacinia.executor$resolve_and_select invoke executor.clj 234]
  [com.walmartlabs.lacinia.executor$apply_field_selection invokeStatic executor.clj 140]
  [com.walmartlabs.lacinia.executor$apply_field_selection invoke executor.clj 135]
  [com.walmartlabs.lacinia.executor$apply_selection invokeStatic executor.clj 173]
  [com.walmartlabs.lacinia.executor$apply_selection invoke executor.clj 165]
  [com.walmartlabs.lacinia.executor$execute_nested_selections$fn__17481 invoke executor.clj 197]
  [com.walmartlabs.lacinia.internal_utils$keepv$fn__12187 invoke internal_utils.clj 46]
  [clojure.core.protocols$fn__8181 invokeStatic protocols.clj 168]
  [clojure.core.protocols$fn__8181 invoke protocols.clj 124]
  [clojure.core.protocols$fn__8136$G__8131__8145 invoke protocols.clj 19]
  [clojure.core.protocols$seq_reduce invokeStatic protocols.clj 31]
  [clojure.core.protocols$fn__8168 invokeStatic protocols.clj 75]
  [clojure.core.protocols$fn__8168 invoke protocols.clj 75]
  [clojure.core.protocols$fn__8110$G__8105__8123 invoke protocols.clj 13]
  [clojure.core$reduce invokeStatic core.clj 6830]
  [clojure.core$reduce invoke core.clj 6812]
  [com.walmartlabs.lacinia.internal_utils$keepv invokeStatic internal_utils.clj 45]
  [com.walmartlabs.lacinia.internal_utils$keepv invoke internal_utils.clj 41]
  [com.walmartlabs.lacinia.executor$execute_nested_selections invokeStatic executor.clj 197]
  [com.walmartlabs.lacinia.executor$execute_nested_selections invoke executor.clj 190]
  [com.walmartlabs.lacinia.executor$execute_query$fn__17519 invoke executor.clj 400]
  [clojure.lang.AFn applyToHelper AFn.java 152]
  [clojure.lang.AFn applyTo AFn.java 144]
  [clojure.core$apply invokeStatic core.clj 667]
  [clojure.core$with_bindings_STAR_ invokeStatic core.clj 1977]
  [clojure.core$with_bindings_STAR_ doInvoke core.clj 1977]
  [clojure.lang.RestFn invoke RestFn.java 425]
  [clojure.lang.AFn applyToHelper AFn.java 156]
  [clojure.lang.RestFn applyTo RestFn.java 132]
  [clojure.core$apply invokeStatic core.clj 671]
  [clojure.core$bound_fn_STAR_$fn__5767 doInvoke core.clj 2007]
  [clojure.lang.RestFn invoke RestFn.java 397]
  [com.walmartlabs.lacinia.executor$execute_query$fn__17524 invoke executor.clj 421]
  [clojure.core$binding_conveyor_fn$fn__5772 invoke core.clj 2034]
  [clojure.lang.AFn call AFn.java 18]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962948060500, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 502, referer http://localhost:3230/procure/requests/new?budgetPeriod=c4878b40-b21a-46b9-bdec-a78bcb3e9d11, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x33430f37 /127.0.0.1:3230<->/127.0.0.1:61973], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 502, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName me, :variables {}, :query query me {
  current_user {
    navbarProps
    user {
      id
      firstname
      lastname
      permissions {
        isAdmin
        isRequester
        isInspectorForCategories {
          id
          __typename
        }
        isViewerForCategories {
          id
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
  settings {
    contact_url
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:40:50.860Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:current_user #ordered/map ([:navbarProps "{\"csrfToken\":{\"value\":\"bcc101d7-1ec7-4164-ab6a-3281b92e90e4\",\"name\":\"csrf-token\"},\"config\":{\"appTitle\":\"leihs\",\"appColor\":\"gray\",\"me\":{\"user\":{\"id\":\"554a15b8-dec5-423f-9df4-d405bcccfd31\",\"firstname\":\"Harlan\",\"lastname\":\"Wehner\",\"login\":null,\"email\":\"hong@wolf.co\"}},\"subApps\":{\"borrow\":false,\"admin\":false,\"procure\":false,\"manage\":[]},\"locales\":[{\"name\":\"English (UK)\",\"locale\":\"en-GB\",\"active\":true,\"isDefault\":true,\"isSelected\":true},{\"name\":\"English (US)\",\"locale\":\"en-US\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Deutsch\",\"locale\":\"de-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false},{\"name\":\"Züritüütsch\",\"locale\":\"gsw-CH\",\"active\":true,\"isDefault\":false,\"isSelected\":false}]}}"] [:user #ordered/map ([:id "554a15b8-dec5-423f-9df4-d405bcccfd31"] [:firstname "Harlan"] [:lastname "Wehner"] [:permissions #ordered/map ([:isAdmin false] [:isRequester true] [:isInspectorForCategories [#ordered/map ([:id "3c6e2539-8a43-47e5-a996-51ba5f260253"] [:__typename :Category])]] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}

>o>3apure-handler, result=> {:data #ordered/map ([:current_user #ordered/map ([:navbarProps {"csrfToken":{"value":"bcc101d7-1ec7-4164-ab6a-3281b92e90e4","name":"csrf-token"},"config":{"appTitle":"leihs","appColor":"gray","me":{"user":{"id":"554a15b8-dec5-423f-9df4-d405bcccfd31","firstname":"Harlan","lastname":"Wehner","login":null,"email":"hong@wolf.co"}},"subApps":{"borrow":false,"admin":false,"procure":false,"manage":[]},"locales":[{"name":"English (UK)","locale":"en-GB","active":true,"isDefault":true,"isSelected":true},{"name":"English (US)","locale":"en-US","active":true,"isDefault":false,"isSelected":false},{"name":"Deutsch","locale":"de-CH","active":true,"isDefault":false,"isSelected":false},{"name":"Züritüütsch","locale":"gsw-CH","active":true,"isDefault":false,"isSelected":false}]}}] [:user #ordered/map ([:id 554a15b8-dec5-423f-9df4-d405bcccfd31] [:firstname Harlan] [:lastname Wehner] [:permissions #ordered/map ([:isAdmin false] [:isRequester true] [:isInspectorForCategories [#ordered/map ([:id 3c6e2539-8a43-47e5-a996-51ba5f260253] [:__typename :Category])]] [:isViewerForCategories []] [:__typename :UserPermissions])] [:__typename :User])] [:__typename :CurrentUser])] [:settings #ordered/map ([:contact_url nil] [:__typename :ProcurementSettings])])}
2023-12-01T07:40:50.861Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil

>oo>1pure-handler _> request, can contains invalid value in -> priority inspector_priority order_status

>oo>1pure-handler _> request {:leihs-user-language {:name English (UK), :locale en-GB, :default true, :active true}, :authenticated-entity {:email hong@wolf.co, :contracts_count 0, :lastname Wehner, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Harlan, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:40:49.936361Z", :id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :user_session_id #uuid "a15d6f14-373f-41dc-abd7-da39936166bf", :scope_system_admin_read false, :access-rights (), :user_id #uuid "554a15b8-dec5-423f-9df4-d405bcccfd31", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value bcc101d7-1ec7-4164-ab6a-3281b92e90e4}, leihs-user-session {:value ddf97f86-f325-45bd-8892-5f68d35b5ff5}}, :remote-addr 127.0.0.1, :start-time 178962947982083, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/json, cookie leihs-anti-csrf-token=bcc101d7-1ec7-4164-ab6a-3281b92e90e4; leihs-user-session=ddf97f86-f325-45bd-8892-5f68d35b5ff5, content-length 669, referer http://localhost:3230/procure/requests/new?budgetPeriod=c4878b40-b21a-46b9-bdec-a78bcb3e9d11, connection keep-alive, x-csrf-token bcc101d7-1ec7-4164-ab6a-3281b92e90e4, accept application/json, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest empty, accept-encoding gzip, deflate, br, sec-fetch-mode cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x41e6f511 /127.0.0.1:3230<->/127.0.0.1:61968], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 669, :form-params {}, :websocket? false, :query-params {}, :content-type application/json, :form-params-raw {}, :character-encoding utf8, :uri /procure/graphql, :server-name localhost, :handler-key :graphql, :query-string nil, :body {:operationName newRequestPreselectionQuery, :variables {}, :query query newRequestPreselectionQuery {
  budget_periods {
    id
    name
    inspection_start_date
    end_date
    __typename
  }
  main_categories {
    id
    name
    image_url
    categories {
      id
      name
      __typename
    }
    __typename
  }
  templates {
    id
    category {
      id
      __typename
    }
    is_archived
    article_name
    article_number
    model {
      id
      product
      version
      __typename
    }
    price_cents
    price_currency
    supplier {
      id
      __typename
    }
    __typename
  }
}
}, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.graphql$handler 0x459e9411 leihs.procurement.graphql$handler@459e9411], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :json, :charset nil, :encoding nil, :language nil}}
2023-12-01T07:40:50.861Z NX-41294 DEBUG [leihs.procurement.graphql:108] - result => {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil nil]] [:templates nil]), :errors ({:message "Non-nullable field was null.", :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message "Non-nullable field was null.", :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 1 :name]} {:message "ERROR: non-integer constant in ORDER BY\n  Position: 131", :locations [{:line 20, :column 3}], :path [:templates], :extensions {:exception "PSQLException"}})}
2023-12-01T07:40:50.862Z NX-41294 DEBUG [leihs.procurement.graphql:109] - {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil nil]] [:templates nil]), :errors ({:message "Non-nullable field was null.", :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message "Non-nullable field was null.", :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message "Non-nullable field was null.", :locations [{:line 10, :column 5}], :path [:main_categories 1 :id]} {:message "Non-nullable field was null.", :locations [{:line 11, :column 5}], :path [:main_categories 1 :name]} {:message "ERROR: non-integer constant in ORDER BY\n  Position: 131", :locations [{:line 20, :column 3}], :path [:templates], :extensions {:exception "PSQLException"}})}

>o> ERROR 4pure-handler, result=> {:data #ordered/map ([:budget_periods [nil]] [:main_categories [nil nil]] [:templates nil]), :errors ({:message Non-nullable field was null., :locations [{:line 3, :column 5}], :path [:budget_periods 0 :id]} {:message Non-nullable field was null., :locations [{:line 4, :column 5}], :path [:budget_periods 0 :name]} {:message Non-nullable field was null., :locations [{:line 5, :column 5}], :path [:budget_periods 0 :inspection_start_date]} {:message Non-nullable field was null., :locations [{:line 6, :column 5}], :path [:budget_periods 0 :end_date]} {:message Non-nullable field was null., :locations [{:line 10, :column 5}], :path [:main_categories 0 :id]} {:message Non-nullable field was null., :locations [{:line 11, :column 5}], :path [:main_categories 0 :name]} {:message Non-nullable field was null., :locations [{:line 10, :column 5}], :path [:main_categories 1 :id]} {:message Non-nullable field was null., :locations [{:line 11, :column 5}], :path [:main_categories 1 :name]} {:message ERROR: non-integer constant in ORDER BY
  Position: 131, :locations [{:line 20, :column 3}], :path [:templates], :extensions {:exception PSQLException}})}
2023-12-01T07:40:50.862Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:41:02.725Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:41:02.726Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:41:02.726Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:41:02.729Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-12-01T07:41:02.729Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2023-12-01T07:41:02.729Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 178983281464875, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site none, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, sec-fetch-user ?1, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x163f3410 /127.0.0.1:3230<->/127.0.0.1:62105], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  nil

> 1 anti-csrf-token class >  nil

> 2 anti-csrf-token-new >  811b687b-eaed-4949-bb88-6d9df27cf867
2023-12-01T07:41:11.190Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => 811b687b-eaed-4949-bb88-6d9df27cf867
2023-12-01T07:41:11.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6120c67c HikariProxyPreparedStatement@1629537916 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:41:11.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:41:11.197Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 1]
2023-12-01T07:41:11.197Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e"]
2023-12-01T07:41:11.197Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e"
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 3]
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 4]
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 7]
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:10.395226000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 15]
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:10.395226000-00:00"]
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:10.395226Z"
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:10.395226000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 16]
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:10.395226000-00:00"]
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:10.395226Z"
2023-12-01T07:41:11.198Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 25]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 32]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "bc9688c1-0d88-4d22-ac51-09d8ad353b7f" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 1]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "bc9688c1-0d88-4d22-ac51-09d8ad353b7f"]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "bc9688c1-0d88-4d22-ac51-09d8ad353b7f"
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Jimmie #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 3]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Jimmie]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Jimmie
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Koss #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 4]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Koss]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Koss
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [krysta@kihn.io #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 7]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar krysta@kihn.io]
2023-12-01T07:41:11.199Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  krysta@kihn.io
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.061184000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 15]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.061184000-00:00"]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.061184Z"
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.061184000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 16]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.061184000-00:00"]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.061184Z"
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Jimmie Koss krysta@kihn.io    Koss Jimmie #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 25]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Jimmie Koss krysta@kihn.io    Koss Jimmie]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Jimmie Koss krysta@kihn.io    Koss Jimmie
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 32]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "330c11d9-2ec9-4419-bff4-7e0c9fbd4d21" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 1]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "330c11d9-2ec9-4419-bff4-7e0c9fbd4d21"]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "330c11d9-2ec9-4419-bff4-7e0c9fbd4d21"
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [The #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 3]
2023-12-01T07:41:11.200Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text The]
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  The
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Requester #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 4]
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Requester]
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Requester
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [joan@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 7]
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar joan@ortiz.net]
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  joan@ortiz.net
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.079337000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 15]
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.079337000-00:00"]
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.079337Z"
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.079337000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 16]
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.079337000-00:00"]
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.079337Z"
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [The Requester joan@ortiz.net    Requester The #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 25]
2023-12-01T07:41:11.201Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text The Requester joan@ortiz.net    Requester The]
2023-12-01T07:41:11.202Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  The Requester joan@ortiz.net    Requester The
2023-12-01T07:41:11.202Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 32]
2023-12-01T07:41:11.202Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:11.202Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:11.202Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "1351498b-c210-42d3-9fc0-bc052228c834" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 1]
2023-12-01T07:41:11.202Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "1351498b-c210-42d3-9fc0-bc052228c834"]
2023-12-01T07:41:11.202Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "1351498b-c210-42d3-9fc0-bc052228c834"
2023-12-01T07:41:11.202Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kristofer #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 3]
2023-12-01T07:41:11.202Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Kristofer]
2023-12-01T07:41:11.202Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kristofer
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Willms #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 4]
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Willms]
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Willms
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amos@hammes.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 7]
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amos@hammes.net]
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amos@hammes.net
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.092650000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 15]
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.092650000-00:00"]
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.092650Z"
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.092650000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 16]
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.092650000-00:00"]
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.092650Z"
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kristofer Willms amos@hammes.net    Willms Kristofer #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 25]
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Kristofer Willms amos@hammes.net    Willms Kristofer]
2023-12-01T07:41:11.203Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kristofer Willms amos@hammes.net    Willms Kristofer
2023-12-01T07:41:11.204Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2401f38e org.postgresql.jdbc.PgResultSetMetaData@2401f38e] 32]
2023-12-01T07:41:11.204Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:11.204Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:11.205Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7af8c09 HikariProxyPreparedStatement@128945161 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:41:11.206Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:11.206Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7af8c09 HikariProxyPreparedStatement@128945161 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:41:11.206Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e"
2023-12-01T07:41:11.224Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x675d6c08 org.postgresql.jdbc.PgResultSetMetaData@675d6c08] 1]
2023-12-01T07:41:11.225Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:11.225Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:11.225Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x675d6c08 org.postgresql.jdbc.PgResultSetMetaData@675d6c08] 2]
2023-12-01T07:41:11.225Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:11.225Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:11.225Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x675d6c08 org.postgresql.jdbc.PgResultSetMetaData@675d6c08] 3]
2023-12-01T07:41:11.225Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:11.225Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:11.226Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:41:10.395226Z", :firstname "Dawna", :zip nil, :id #uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:41:10.395226Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:41:11.227Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "811b687b-eaed-4949-bb88-6d9df27cf867", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "811b687b-eaed-4949-bb88-6d9df27cf867", :name "csrf-token"}}
2023-12-01T07:41:11.227Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => 811b687b-eaed-4949-bb88-6d9df27cf867
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 811b687b-eaed-4949-bb88-6d9df27cf867}}, :remote-addr 127.0.0.1, :start-time 178983405902708, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=811b687b-eaed-4949-bb88-6d9df27cf867, referer http://localhost:3230/sign-in, connection keep-alive, accept image/avif,image/webp,*/*, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x3c9213d6 /127.0.0.1:3230<->/127.0.0.1:62105], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  811b687b-eaed-4949-bb88-6d9df27cf867

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:41:11.291Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:41:11.296Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xdf1016b HikariProxyPreparedStatement@233898347 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:41:11.296Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:41:11.297Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 1]
2023-12-01T07:41:11.297Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e"]
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e"
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 3]
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 4]
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 7]
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:10.395226000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 15]
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:10.395226000-00:00"]
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:10.395226Z"
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:10.395226000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 16]
2023-12-01T07:41:11.298Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:10.395226000-00:00"]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:10.395226Z"
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 25]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 32]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "bc9688c1-0d88-4d22-ac51-09d8ad353b7f" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 1]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "bc9688c1-0d88-4d22-ac51-09d8ad353b7f"]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "bc9688c1-0d88-4d22-ac51-09d8ad353b7f"
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Jimmie #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 3]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Jimmie]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Jimmie
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Koss #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 4]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Koss]
2023-12-01T07:41:11.299Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Koss
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [krysta@kihn.io #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 7]
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar krysta@kihn.io]
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  krysta@kihn.io
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.061184000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 15]
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.061184000-00:00"]
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.061184Z"
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.061184000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 16]
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.061184000-00:00"]
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.061184Z"
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Jimmie Koss krysta@kihn.io    Koss Jimmie #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 25]
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Jimmie Koss krysta@kihn.io    Koss Jimmie]
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Jimmie Koss krysta@kihn.io    Koss Jimmie
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 32]
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:11.300Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "330c11d9-2ec9-4419-bff4-7e0c9fbd4d21" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 1]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "330c11d9-2ec9-4419-bff4-7e0c9fbd4d21"]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "330c11d9-2ec9-4419-bff4-7e0c9fbd4d21"
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [The #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 3]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text The]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  The
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Requester #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 4]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Requester]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Requester
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [joan@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 7]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar joan@ortiz.net]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  joan@ortiz.net
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.079337000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 15]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.079337000-00:00"]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.079337Z"
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.079337000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 16]
2023-12-01T07:41:11.301Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.079337000-00:00"]
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.079337Z"
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [The Requester joan@ortiz.net    Requester The #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 25]
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text The Requester joan@ortiz.net    Requester The]
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  The Requester joan@ortiz.net    Requester The
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 32]
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "1351498b-c210-42d3-9fc0-bc052228c834" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 1]
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "1351498b-c210-42d3-9fc0-bc052228c834"]
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "1351498b-c210-42d3-9fc0-bc052228c834"
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kristofer #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 3]
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Kristofer]
2023-12-01T07:41:11.302Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kristofer
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Willms #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 4]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Willms]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Willms
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amos@hammes.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 7]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amos@hammes.net]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amos@hammes.net
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.092650000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 15]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.092650000-00:00"]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.092650Z"
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.092650000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 16]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.092650000-00:00"]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.092650Z"
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kristofer Willms amos@hammes.net    Willms Kristofer #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 25]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Kristofer Willms amos@hammes.net    Willms Kristofer]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kristofer Willms amos@hammes.net    Willms Kristofer
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a459ba5 org.postgresql.jdbc.PgResultSetMetaData@4a459ba5] 32]
2023-12-01T07:41:11.303Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:11.304Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:11.305Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x19c66010 HikariProxyPreparedStatement@432431120 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:41:11.305Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:11.305Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x19c66010 HikariProxyPreparedStatement@432431120 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:41:11.305Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e"
2023-12-01T07:41:11.308Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x55b6c643 org.postgresql.jdbc.PgResultSetMetaData@55b6c643] 1]
2023-12-01T07:41:11.308Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:11.308Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:11.308Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x55b6c643 org.postgresql.jdbc.PgResultSetMetaData@55b6c643] 2]
2023-12-01T07:41:11.308Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:11.308Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:11.308Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x55b6c643 org.postgresql.jdbc.PgResultSetMetaData@55b6c643] 3]
2023-12-01T07:41:11.308Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:11.308Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:11.309Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:41:10.395226Z", :firstname "Dawna", :zip nil, :id #uuid "61f25ed8-9410-48b7-ae0a-ca3259b3625e", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:41:10.395226Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:41:11.310Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "811b687b-eaed-4949-bb88-6d9df27cf867", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "811b687b-eaed-4949-bb88-6d9df27cf867", :name "csrf-token"}}
2023-12-01T07:41:11.310Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 811b687b-eaed-4949-bb88-6d9df27cf867}}, :remote-addr 127.0.0.1, :start-time 178983526730666, :params {:user amos@hammes.net, :password nil, :csrf-token 811b687b-eaed-4949-bb88-6d9df27cf867}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x6847fa8e HikariProxyConnection@1749547662 wrapping org.postgresql.jdbc.PgConnection@1b83e15d], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=811b687b-eaed-4949-bb88-6d9df27cf867, content-length 80, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x50784c87 /127.0.0.1:3230<->/127.0.0.1:62105], :server-port 3230, :params-raw {:user amos@hammes.net, :password , :csrf-token 811b687b-eaed-4949-bb88-6d9df27cf867}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x61b306eb HikariProxyConnection@1639122667 wrapping org.postgresql.jdbc.PgConnection@772538f0], :level 1, :rollback #object[clojure.lang.Atom 0x37ca5dd3 {:status :ready, :val false}]}, :content-length 80, :form-params {:user amos@hammes.net, :password nil, :csrf-token 811b687b-eaed-4949-bb88-6d9df27cf867}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user amos@hammes.net, :password , :csrf-token 811b687b-eaed-4949-bb88-6d9df27cf867}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x608e522e BytesInputStream[len=80]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  811b687b-eaed-4949-bb88-6d9df27cf867

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:41:11.412Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:41:11.413Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text amos@hammes.net #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xff45d87 HikariProxyPreparedStatement@267672967 wrapping SELECT * FROM users  WHERE (users.org_id = ? OR users.login = ? OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:41:11.413Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  amos@hammes.net
2023-12-01T07:41:11.413Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text amos@hammes.net #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xff45d87 HikariProxyPreparedStatement@267672967 wrapping SELECT * FROM users  WHERE (users.org_id = 'amos@hammes.net' OR users.login = ? OR lower(users.email) = ?)] 2]  type:  java.lang.String
2023-12-01T07:41:11.413Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  amos@hammes.net
2023-12-01T07:41:11.414Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text amos@hammes.net #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0xff45d87 HikariProxyPreparedStatement@267672967 wrapping SELECT * FROM users  WHERE (users.org_id = 'amos@hammes.net' OR users.login = 'amos@hammes.net' OR lower(users.email) = ?)] 3]  type:  java.lang.String
2023-12-01T07:41:11.414Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  amos@hammes.net
2023-12-01T07:41:11.414Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "1351498b-c210-42d3-9fc0-bc052228c834" #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a87068 org.postgresql.jdbc.PgResultSetMetaData@51a87068] 1]
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "1351498b-c210-42d3-9fc0-bc052228c834"]
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "1351498b-c210-42d3-9fc0-bc052228c834"
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kristofer #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a87068 org.postgresql.jdbc.PgResultSetMetaData@51a87068] 3]
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Kristofer]
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kristofer
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Willms #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a87068 org.postgresql.jdbc.PgResultSetMetaData@51a87068] 4]
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Willms]
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Willms
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amos@hammes.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a87068 org.postgresql.jdbc.PgResultSetMetaData@51a87068] 7]
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amos@hammes.net]
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amos@hammes.net
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.092650000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a87068 org.postgresql.jdbc.PgResultSetMetaData@51a87068] 15]
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.092650000-00:00"]
2023-12-01T07:41:11.415Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.092650Z"
2023-12-01T07:41:11.416Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.092650000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a87068 org.postgresql.jdbc.PgResultSetMetaData@51a87068] 16]
2023-12-01T07:41:11.416Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.092650000-00:00"]
2023-12-01T07:41:11.416Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.092650Z"
2023-12-01T07:41:11.416Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kristofer Willms amos@hammes.net    Willms Kristofer #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a87068 org.postgresql.jdbc.PgResultSetMetaData@51a87068] 25]
2023-12-01T07:41:11.416Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Kristofer Willms amos@hammes.net    Willms Kristofer]
2023-12-01T07:41:11.416Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kristofer Willms amos@hammes.net    Willms Kristofer
2023-12-01T07:41:11.416Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x51a87068 org.postgresql.jdbc.PgResultSetMetaData@51a87068] 32]
2023-12-01T07:41:11.416Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:11.416Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:11.417Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x9744a5 HikariProxyPreparedStatement@9913509 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:41:11.417Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:11.418Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "1351498b-c210-42d3-9fc0-bc052228c834" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x9744a5 HikariProxyPreparedStatement@9913509 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:41:11.418Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "1351498b-c210-42d3-9fc0-bc052228c834"
2023-12-01T07:41:11.419Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e115ac5 org.postgresql.jdbc.PgResultSetMetaData@1e115ac5] 1]
2023-12-01T07:41:11.419Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:11.419Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:11.419Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e115ac5 org.postgresql.jdbc.PgResultSetMetaData@1e115ac5] 2]
2023-12-01T07:41:11.419Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:11.419Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:11.420Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1e115ac5 org.postgresql.jdbc.PgResultSetMetaData@1e115ac5] 3]
2023-12-01T07:41:11.420Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:11.420Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:11.420Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text amos@hammes.net #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5e80cf46 HikariProxyPreparedStatement@1585499974 wrapping SELECT * FROM authentication_systems  WHERE (authentication_systems.sign_up_email_match IS NOT NULL AND ? ~* authentication_systems.sign_up_email_match)] 1]  type:  java.lang.String
2023-12-01T07:41:11.420Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  amos@hammes.net
2023-12-01T07:41:11.420Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected false, :address nil, :email "amos@hammes.net", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Willms", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization "local", :login nil, :searchable "Kristofer Willms amos@hammes.net    Willms Kristofer", :updated_at #time/instant "2023-12-01T07:41:11.092650Z", :firstname "Kristofer", :zip nil, :id #uuid "1351498b-c210-42d3-9fc0-bc052228c834", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:41:11.092650Z", :admin_protected false} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:41:11.421Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2e8e9540 HikariProxyPreparedStatement@781096256 wrapping SELECT * FROM authentication_systems  WHERE type = ?] 1]  type:  java.lang.String
2023-12-01T07:41:11.421Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:11.421Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x10219d9a org.postgresql.jdbc.PgResultSetMetaData@10219d9a] 1]
2023-12-01T07:41:11.422Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:11.422Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:11.422Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x10219d9a org.postgresql.jdbc.PgResultSetMetaData@10219d9a] 2]
2023-12-01T07:41:11.422Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:11.422Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:11.422Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x10219d9a org.postgresql.jdbc.PgResultSetMetaData@10219d9a] 4]
2023-12-01T07:41:11.422Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:11.422Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:11.422Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x10219d9a org.postgresql.jdbc.PgResultSetMetaData@10219d9a] 6]
2023-12-01T07:41:11.422Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int4 0]
2023-12-01T07:41:11.423Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:41:11.423Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x10219d9a org.postgresql.jdbc.PgResultSetMetaData@10219d9a] 15]
2023-12-01T07:41:11.423Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:41:11.423Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:41:11.423Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x10219d9a org.postgresql.jdbc.PgResultSetMetaData@10219d9a] 16]
2023-12-01T07:41:11.423Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:41:11.423Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:41:11.424Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "811b687b-eaed-4949-bb88-6d9df27cf867", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user "amos@hammes.net", :showPasswordSection true, :passwordButtonText "password_forgot_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "811b687b-eaed-4949-bb88-6d9df27cf867", :name "csrf-token"}, :authSystems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil})}
2023-12-01T07:41:11.424Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 811b687b-eaed-4949-bb88-6d9df27cf867}}, :remote-addr 127.0.0.1, :start-time 178983595992708, :params {:user amos@hammes.net, :password password, :csrf-token 811b687b-eaed-4949-bb88-6d9df27cf867}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x6193d3f9 HikariProxyConnection@1637078009 wrapping org.postgresql.jdbc.PgConnection@1b83e15d], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=811b687b-eaed-4949-bb88-6d9df27cf867, content-length 88, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x69055d8e /127.0.0.1:3230<->/127.0.0.1:62105], :server-port 3230, :params-raw {:user amos@hammes.net, :password password, :csrf-token 811b687b-eaed-4949-bb88-6d9df27cf867}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x104a1c49 HikariProxyConnection@273292361 wrapping org.postgresql.jdbc.PgConnection@772538f0], :level 1, :rollback #object[clojure.lang.Atom 0x6a41d878 {:status :ready, :val false}]}, :content-length 88, :form-params {:user amos@hammes.net, :password password, :csrf-token 811b687b-eaed-4949-bb88-6d9df27cf867}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user amos@hammes.net, :password password, :csrf-token 811b687b-eaed-4949-bb88-6d9df27cf867}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x1532d2d2 BytesInputStream[len=88]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  811b687b-eaed-4949-bb88-6d9df27cf867

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:41:11.482Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:41:11.499Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "1351498b-c210-42d3-9fc0-bc052228c834" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x67191e28 HikariProxyPreparedStatement@1729699368 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( ?, ?, ?, ? )
RETURNING *] 1]  type:  java.util.UUID
2023-12-01T07:41:11.499Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "1351498b-c210-42d3-9fc0-bc052228c834"
2023-12-01T07:41:11.500Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 436be3665c346ed68e741200b65aae509267e8d9ad0ad622b454a3f56ae1d861 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x67191e28 HikariProxyPreparedStatement@1729699368 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '1351498b-c210-42d3-9fc0-bc052228c834'::uuid, ?, ?, ? )
RETURNING *] 2]  type:  java.lang.String
2023-12-01T07:41:11.500Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  436be3665c346ed68e741200b65aae509267e8d9ad0ad622b454a3f56ae1d861
2023-12-01T07:41:11.500Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x67191e28 HikariProxyPreparedStatement@1729699368 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '1351498b-c210-42d3-9fc0-bc052228c834'::uuid, '436be3665c346ed68e741200b65aae509267e8d9ad0ad622b454a3f56ae1d861', ?, ? )
RETURNING *] 3]  type:  java.lang.String
2023-12-01T07:41:11.500Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:11.501Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:jsonb {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1} #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x67191e28 HikariProxyPreparedStatement@1729699368 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '1351498b-c210-42d3-9fc0-bc052228c834'::uuid, '436be3665c346ed68e741200b65aae509267e8d9ad0ad622b454a3f56ae1d861', 'password', ? )
RETURNING *] 4]  type:  clojure.lang.PersistentArrayMap
2023-12-01T07:41:11.501Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #object[org.postgresql.util.PGobject 0x5174b0c0 {"user_agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko\/20100101 Firefox\/115.0","remote_addr":"127.0.0.1"}]
2023-12-01T07:41:11.506Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "0a229c97-85f2-4769-bcb0-b384d40f0a8f" #object[org.postgresql.jdbc.PgResultSetMetaData 0x27dd3449 org.postgresql.jdbc.PgResultSetMetaData@27dd3449] 1]
2023-12-01T07:41:11.506Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "0a229c97-85f2-4769-bcb0-b384d40f0a8f"]
2023-12-01T07:41:11.506Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "0a229c97-85f2-4769-bcb0-b384d40f0a8f"
2023-12-01T07:41:11.506Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [436be3665c346ed68e741200b65aae509267e8d9ad0ad622b454a3f56ae1d861 #object[org.postgresql.jdbc.PgResultSetMetaData 0x27dd3449 org.postgresql.jdbc.PgResultSetMetaData@27dd3449] 2]
2023-12-01T07:41:11.506Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text 436be3665c346ed68e741200b65aae509267e8d9ad0ad622b454a3f56ae1d861]
2023-12-01T07:41:11.506Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  436be3665c346ed68e741200b65aae509267e8d9ad0ad622b454a3f56ae1d861
2023-12-01T07:41:11.506Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "1351498b-c210-42d3-9fc0-bc052228c834" #object[org.postgresql.jdbc.PgResultSetMetaData 0x27dd3449 org.postgresql.jdbc.PgResultSetMetaData@27dd3449] 3]
2023-12-01T07:41:11.506Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "1351498b-c210-42d3-9fc0-bc052228c834"]
2023-12-01T07:41:11.507Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "1351498b-c210-42d3-9fc0-bc052228c834"
2023-12-01T07:41:11.507Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.501744000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x27dd3449 org.postgresql.jdbc.PgResultSetMetaData@27dd3449] 5]
2023-12-01T07:41:11.507Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.501744000-00:00"]
2023-12-01T07:41:11.507Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.501744Z"
2023-12-01T07:41:11.507Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x4bb488ca {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x27dd3449 org.postgresql.jdbc.PgResultSetMetaData@27dd3449] 6]
2023-12-01T07:41:11.507Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0x4bb488ca {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}]]
2023-12-01T07:41:11.507Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1}
2023-12-01T07:41:11.507Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x27dd3449 org.postgresql.jdbc.PgResultSetMetaData@27dd3449] 7]
2023-12-01T07:41:11.507Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text password]
2023-12-01T07:41:11.507Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:11.531Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:41:11.538Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4e795368 HikariProxyPreparedStatement@1316574056 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:41:11.539Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:41:11.539Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text bad6660b-0854-4f59-b17e-91345f271334 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4e795368 HikariProxyPreparedStatement@1316574056 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:41:11.539Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  bad6660b-0854-4f59-b17e-91345f271334
2023-12-01T07:41:11.540Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4e795368 HikariProxyPreparedStatement@1316574056 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('bad6660b-0854-4f59-b17e-91345f271334', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:41:11.540Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:41:11.541Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4e795368 HikariProxyPreparedStatement@1316574056 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('bad6660b-0854-4f59-b17e-91345f271334', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:41:11.541Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amos@hammes.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x55a1bd94 org.postgresql.jdbc.PgResultSetMetaData@55a1bd94] 1]
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amos@hammes.net]
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amos@hammes.net
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kristofer #object[org.postgresql.jdbc.PgResultSetMetaData 0x55a1bd94 org.postgresql.jdbc.PgResultSetMetaData@55a1bd94] 2]
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Kristofer]
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kristofer
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "1351498b-c210-42d3-9fc0-bc052228c834" #object[org.postgresql.jdbc.PgResultSetMetaData 0x55a1bd94 org.postgresql.jdbc.PgResultSetMetaData@55a1bd94] 3]
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "1351498b-c210-42d3-9fc0-bc052228c834"]
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "1351498b-c210-42d3-9fc0-bc052228c834"
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Willms #object[org.postgresql.jdbc.PgResultSetMetaData 0x55a1bd94 org.postgresql.jdbc.PgResultSetMetaData@55a1bd94] 6]
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Willms]
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Willms
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "1351498b-c210-42d3-9fc0-bc052228c834" #object[org.postgresql.jdbc.PgResultSetMetaData 0x55a1bd94 org.postgresql.jdbc.PgResultSetMetaData@55a1bd94] 10]
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "1351498b-c210-42d3-9fc0-bc052228c834"]
2023-12-01T07:41:11.549Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "1351498b-c210-42d3-9fc0-bc052228c834"
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x55a1bd94 org.postgresql.jdbc.PgResultSetMetaData@55a1bd94] 11]
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x55a1bd94 org.postgresql.jdbc.PgResultSetMetaData@55a1bd94] 12]
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "0a229c97-85f2-4769-bcb0-b384d40f0a8f" #object[org.postgresql.jdbc.PgResultSetMetaData 0x55a1bd94 org.postgresql.jdbc.PgResultSetMetaData@55a1bd94] 13]
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "0a229c97-85f2-4769-bcb0-b384d40f0a8f"]
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "0a229c97-85f2-4769-bcb0-b384d40f0a8f"
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:11.501744000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x55a1bd94 org.postgresql.jdbc.PgResultSetMetaData@55a1bd94] 14]
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:11.501744000-00:00"]
2023-12-01T07:41:11.550Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:11.501744Z"
2023-12-01T07:41:11.551Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "1351498b-c210-42d3-9fc0-bc052228c834" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x721eab28 HikariProxyPreparedStatement@1914612520 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:41:11.551Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "1351498b-c210-42d3-9fc0-bc052228c834"
>>> authenticate::skip= nil  handler-key= :procurement
>>> authenticate::authenticated-entity {:email amos@hammes.net, :contracts_count 0, :lastname Willms, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Kristofer, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:41:11.501744Z", :id #uuid "1351498b-c210-42d3-9fc0-bc052228c834", :user_session_id #uuid "0a229c97-85f2-4769-bcb0-b384d40f0a8f", :scope_system_admin_read false, :access-rights (), :user_id #uuid "1351498b-c210-42d3-9fc0-bc052228c834", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email amos@hammes.net, :contracts_count 0, :lastname Willms, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Kristofer, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:41:11.501744Z", :id #uuid "1351498b-c210-42d3-9fc0-bc052228c834", :user_session_id #uuid "0a229c97-85f2-4769-bcb0-b384d40f0a8f", :scope_system_admin_read false, :access-rights (), :user_id #uuid "1351498b-c210-42d3-9fc0-bc052228c834", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 811b687b-eaed-4949-bb88-6d9df27cf867}, leihs-user-session {:value bad6660b-0854-4f59-b17e-91345f271334}}, :remote-addr 127.0.0.1, :start-time 178983653917625, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=811b687b-eaed-4949-bb88-6d9df27cf867; leihs-user-session=bad6660b-0854-4f59-b17e-91345f271334, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x423c5eab /127.0.0.1:3230<->/127.0.0.1:62105], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure, :server-name localhost, :handler-key :procurement, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :procurement
2023-12-01T07:41:11.552Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "1351498b-c210-42d3-9fc0-bc052228c834"]
2023-12-01T07:41:11.553Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:41:11.553Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:41:11.554Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "1351498b-c210-42d3-9fc0-bc052228c834"]
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 179003524952541, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site none, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, sec-fetch-user ?1, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5e4e62ca /127.0.0.1:3230<->/127.0.0.1:62215], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  nil

> 1 anti-csrf-token class >  nil

> 2 anti-csrf-token-new >  7470f997-923c-4077-ba9a-30805aead7b2
2023-12-01T07:41:31.430Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => 7470f997-923c-4077-ba9a-30805aead7b2
2023-12-01T07:41:31.434Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4b81cae3 HikariProxyPreparedStatement@1266797283 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:41:31.434Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:41:31.435Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "346279d7-7540-481f-ad24-8643d15f2a83" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 1]
2023-12-01T07:41:31.435Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "346279d7-7540-481f-ad24-8643d15f2a83"]
2023-12-01T07:41:31.435Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "346279d7-7540-481f-ad24-8643d15f2a83"
2023-12-01T07:41:31.435Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 3]
2023-12-01T07:41:31.435Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:41:31.435Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:41:31.435Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 4]
2023-12-01T07:41:31.435Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:41:31.435Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 7]
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:30.618387000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 15]
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:30.618387000-00:00"]
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:30.618387Z"
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:30.618387000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 16]
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:30.618387000-00:00"]
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:30.618387Z"
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 25]
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 32]
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:31.436Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "96ea94a9-1181-4fd5-9686-3d8cbf339cf4" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 1]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "96ea94a9-1181-4fd5-9686-3d8cbf339cf4"]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "96ea94a9-1181-4fd5-9686-3d8cbf339cf4"
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Krysta #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 3]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Krysta]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Krysta
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Pfeffer #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 4]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Pfeffer]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Pfeffer
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [lynsey_kertzmann@klein-wehner.org #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 7]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar lynsey_kertzmann@klein-wehner.org]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  lynsey_kertzmann@klein-wehner.org
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.342121000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 15]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.342121000-00:00"]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.342121Z"
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.342121000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 16]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.342121000-00:00"]
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.342121Z"
2023-12-01T07:41:31.437Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 25]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 32]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 1]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 3]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Nicolas #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 4]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Nicolas]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Nicolas
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [dinorah@boyer.info #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 7]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar dinorah@boyer.info]
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  dinorah@boyer.info
2023-12-01T07:41:31.438Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.381494000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 15]
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.381494000-00:00"]
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.381494Z"
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.381494000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 16]
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.381494000-00:00"]
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.381494Z"
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus Nicolas dinorah@boyer.info    Nicolas Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 25]
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus Nicolas dinorah@boyer.info    Nicolas Markus]
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus Nicolas dinorah@boyer.info    Nicolas Markus
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b32f91e org.postgresql.jdbc.PgResultSetMetaData@7b32f91e] 32]
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:31.439Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:31.440Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x50a6f510 HikariProxyPreparedStatement@1353118992 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:41:31.440Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:31.441Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "346279d7-7540-481f-ad24-8643d15f2a83" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x50a6f510 HikariProxyPreparedStatement@1353118992 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:41:31.441Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "346279d7-7540-481f-ad24-8643d15f2a83"
2023-12-01T07:41:31.459Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x48511477 org.postgresql.jdbc.PgResultSetMetaData@48511477] 1]
2023-12-01T07:41:31.459Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:31.459Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:31.459Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x48511477 org.postgresql.jdbc.PgResultSetMetaData@48511477] 2]
2023-12-01T07:41:31.460Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:31.460Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:31.460Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x48511477 org.postgresql.jdbc.PgResultSetMetaData@48511477] 3]
2023-12-01T07:41:31.460Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:31.460Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:31.460Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:41:30.618387Z", :firstname "Dawna", :zip nil, :id #uuid "346279d7-7540-481f-ad24-8643d15f2a83", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:41:30.618387Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:41:31.461Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "7470f997-923c-4077-ba9a-30805aead7b2", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "7470f997-923c-4077-ba9a-30805aead7b2", :name "csrf-token"}}
2023-12-01T07:41:31.461Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => 7470f997-923c-4077-ba9a-30805aead7b2
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 7470f997-923c-4077-ba9a-30805aead7b2}}, :remote-addr 127.0.0.1, :start-time 179003634253166, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=7470f997-923c-4077-ba9a-30805aead7b2, referer http://localhost:3230/sign-in, connection keep-alive, accept image/avif,image/webp,*/*, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x1b64e2bb /127.0.0.1:3230<->/127.0.0.1:62215], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  7470f997-923c-4077-ba9a-30805aead7b2

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:41:31.519Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:41:31.523Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x529db829 HikariProxyPreparedStatement@1386068009 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:41:31.523Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:41:31.524Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "346279d7-7540-481f-ad24-8643d15f2a83" #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 1]
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "346279d7-7540-481f-ad24-8643d15f2a83"]
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "346279d7-7540-481f-ad24-8643d15f2a83"
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 3]
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 4]
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 7]
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:30.618387000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 15]
2023-12-01T07:41:31.525Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:30.618387000-00:00"]
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:30.618387Z"
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:30.618387000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 16]
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:30.618387000-00:00"]
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:30.618387Z"
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 25]
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 32]
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "96ea94a9-1181-4fd5-9686-3d8cbf339cf4" #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 1]
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "96ea94a9-1181-4fd5-9686-3d8cbf339cf4"]
2023-12-01T07:41:31.526Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "96ea94a9-1181-4fd5-9686-3d8cbf339cf4"
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Krysta #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 3]
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Krysta]
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Krysta
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Pfeffer #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 4]
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Pfeffer]
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Pfeffer
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [lynsey_kertzmann@klein-wehner.org #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 7]
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar lynsey_kertzmann@klein-wehner.org]
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  lynsey_kertzmann@klein-wehner.org
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.342121000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 15]
2023-12-01T07:41:31.527Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.342121000-00:00"]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.342121Z"
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.342121000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 16]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.342121000-00:00"]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.342121Z"
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 25]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 32]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405" #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 1]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 3]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus]
2023-12-01T07:41:31.528Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Nicolas #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 4]
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Nicolas]
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Nicolas
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [dinorah@boyer.info #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 7]
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar dinorah@boyer.info]
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  dinorah@boyer.info
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.381494000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 15]
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.381494000-00:00"]
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.381494Z"
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.381494000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 16]
2023-12-01T07:41:31.529Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.381494000-00:00"]
2023-12-01T07:41:31.530Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.381494Z"
2023-12-01T07:41:31.530Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus Nicolas dinorah@boyer.info    Nicolas Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 25]
2023-12-01T07:41:31.530Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus Nicolas dinorah@boyer.info    Nicolas Markus]
2023-12-01T07:41:31.530Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus Nicolas dinorah@boyer.info    Nicolas Markus
2023-12-01T07:41:31.530Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x311cecee org.postgresql.jdbc.PgResultSetMetaData@311cecee] 32]
2023-12-01T07:41:31.530Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:31.530Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:31.531Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x541c5b07 HikariProxyPreparedStatement@1411144455 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:41:31.531Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:31.532Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "346279d7-7540-481f-ad24-8643d15f2a83" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x541c5b07 HikariProxyPreparedStatement@1411144455 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:41:31.532Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "346279d7-7540-481f-ad24-8643d15f2a83"
2023-12-01T07:41:31.534Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a657bf1 org.postgresql.jdbc.PgResultSetMetaData@4a657bf1] 1]
2023-12-01T07:41:31.534Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:31.534Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:31.534Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a657bf1 org.postgresql.jdbc.PgResultSetMetaData@4a657bf1] 2]
2023-12-01T07:41:31.535Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:31.535Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:31.535Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x4a657bf1 org.postgresql.jdbc.PgResultSetMetaData@4a657bf1] 3]
2023-12-01T07:41:31.535Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:31.535Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:31.536Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:41:30.618387Z", :firstname "Dawna", :zip nil, :id #uuid "346279d7-7540-481f-ad24-8643d15f2a83", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:41:30.618387Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:41:31.537Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "7470f997-923c-4077-ba9a-30805aead7b2", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "7470f997-923c-4077-ba9a-30805aead7b2", :name "csrf-token"}}
2023-12-01T07:41:31.537Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 7470f997-923c-4077-ba9a-30805aead7b2}}, :remote-addr 127.0.0.1, :start-time 179003752189291, :params {:user dinorah@boyer.info, :password nil, :csrf-token 7470f997-923c-4077-ba9a-30805aead7b2}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x5bfa8a9e HikariProxyConnection@1543146142 wrapping org.postgresql.jdbc.PgConnection@3078874c], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=7470f997-923c-4077-ba9a-30805aead7b2, content-length 83, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x256b835e /127.0.0.1:3230<->/127.0.0.1:62215], :server-port 3230, :params-raw {:user dinorah@boyer.info, :password , :csrf-token 7470f997-923c-4077-ba9a-30805aead7b2}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x1194ad90 HikariProxyConnection@294956432 wrapping org.postgresql.jdbc.PgConnection@772538f0], :level 1, :rollback #object[clojure.lang.Atom 0x3512e793 {:status :ready, :val false}]}, :content-length 83, :form-params {:user dinorah@boyer.info, :password nil, :csrf-token 7470f997-923c-4077-ba9a-30805aead7b2}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user dinorah@boyer.info, :password , :csrf-token 7470f997-923c-4077-ba9a-30805aead7b2}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x3ab335d5 BytesInputStream[len=83]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  7470f997-923c-4077-ba9a-30805aead7b2

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:41:31.638Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:41:31.639Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dinorah@boyer.info #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6c6148a7 HikariProxyPreparedStatement@1818314919 wrapping SELECT * FROM users  WHERE (users.org_id = ? OR users.login = ? OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:41:31.639Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dinorah@boyer.info
2023-12-01T07:41:31.640Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dinorah@boyer.info #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6c6148a7 HikariProxyPreparedStatement@1818314919 wrapping SELECT * FROM users  WHERE (users.org_id = 'dinorah@boyer.info' OR users.login = ? OR lower(users.email) = ?)] 2]  type:  java.lang.String
2023-12-01T07:41:31.640Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dinorah@boyer.info
2023-12-01T07:41:31.640Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dinorah@boyer.info #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6c6148a7 HikariProxyPreparedStatement@1818314919 wrapping SELECT * FROM users  WHERE (users.org_id = 'dinorah@boyer.info' OR users.login = 'dinorah@boyer.info' OR lower(users.email) = ?)] 3]  type:  java.lang.String
2023-12-01T07:41:31.640Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dinorah@boyer.info
2023-12-01T07:41:31.641Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77a9e2ce org.postgresql.jdbc.PgResultSetMetaData@77a9e2ce] 1]
2023-12-01T07:41:31.641Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"]
2023-12-01T07:41:31.641Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"
2023-12-01T07:41:31.641Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x77a9e2ce org.postgresql.jdbc.PgResultSetMetaData@77a9e2ce] 3]
2023-12-01T07:41:31.641Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Nicolas #object[org.postgresql.jdbc.PgResultSetMetaData 0x77a9e2ce org.postgresql.jdbc.PgResultSetMetaData@77a9e2ce] 4]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Nicolas]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Nicolas
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [dinorah@boyer.info #object[org.postgresql.jdbc.PgResultSetMetaData 0x77a9e2ce org.postgresql.jdbc.PgResultSetMetaData@77a9e2ce] 7]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar dinorah@boyer.info]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  dinorah@boyer.info
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.381494000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77a9e2ce org.postgresql.jdbc.PgResultSetMetaData@77a9e2ce] 15]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.381494000-00:00"]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.381494Z"
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.381494000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x77a9e2ce org.postgresql.jdbc.PgResultSetMetaData@77a9e2ce] 16]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.381494000-00:00"]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.381494Z"
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus Nicolas dinorah@boyer.info    Nicolas Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x77a9e2ce org.postgresql.jdbc.PgResultSetMetaData@77a9e2ce] 25]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus Nicolas dinorah@boyer.info    Nicolas Markus]
2023-12-01T07:41:31.642Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus Nicolas dinorah@boyer.info    Nicolas Markus
2023-12-01T07:41:31.643Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x77a9e2ce org.postgresql.jdbc.PgResultSetMetaData@77a9e2ce] 32]
2023-12-01T07:41:31.643Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:31.643Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:31.643Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x29b00cf4 HikariProxyPreparedStatement@699403508 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:41:31.644Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:31.644Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x29b00cf4 HikariProxyPreparedStatement@699403508 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:41:31.644Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"
2023-12-01T07:41:31.645Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x24d08dba org.postgresql.jdbc.PgResultSetMetaData@24d08dba] 1]
2023-12-01T07:41:31.645Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:31.645Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:31.645Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x24d08dba org.postgresql.jdbc.PgResultSetMetaData@24d08dba] 2]
2023-12-01T07:41:31.645Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:31.645Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:31.645Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x24d08dba org.postgresql.jdbc.PgResultSetMetaData@24d08dba] 3]
2023-12-01T07:41:31.646Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:31.646Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:31.646Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dinorah@boyer.info #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x75cae7e3 HikariProxyPreparedStatement@1976231907 wrapping SELECT * FROM authentication_systems  WHERE (authentication_systems.sign_up_email_match IS NOT NULL AND ? ~* authentication_systems.sign_up_email_match)] 1]  type:  java.lang.String
2023-12-01T07:41:31.646Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dinorah@boyer.info
2023-12-01T07:41:31.646Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected false, :address nil, :email "dinorah@boyer.info", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Nicolas", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization "local", :login nil, :searchable "Markus Nicolas dinorah@boyer.info    Nicolas Markus", :updated_at #time/instant "2023-12-01T07:41:31.381494Z", :firstname "Markus", :zip nil, :id #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:41:31.381494Z", :admin_protected false} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:41:31.647Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2c514f32 HikariProxyPreparedStatement@743526194 wrapping SELECT * FROM authentication_systems  WHERE type = ?] 1]  type:  java.lang.String
2023-12-01T07:41:31.647Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:31.647Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x5deecc9e org.postgresql.jdbc.PgResultSetMetaData@5deecc9e] 1]
2023-12-01T07:41:31.647Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:31.647Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:31.647Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x5deecc9e org.postgresql.jdbc.PgResultSetMetaData@5deecc9e] 2]
2023-12-01T07:41:31.647Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x5deecc9e org.postgresql.jdbc.PgResultSetMetaData@5deecc9e] 4]
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x5deecc9e org.postgresql.jdbc.PgResultSetMetaData@5deecc9e] 6]
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int4 0]
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5deecc9e org.postgresql.jdbc.PgResultSetMetaData@5deecc9e] 15]
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5deecc9e org.postgresql.jdbc.PgResultSetMetaData@5deecc9e] 16]
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:41:31.648Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:41:31.649Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "7470f997-923c-4077-ba9a-30805aead7b2", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user "dinorah@boyer.info", :showPasswordSection true, :passwordButtonText "password_forgot_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "7470f997-923c-4077-ba9a-30805aead7b2", :name "csrf-token"}, :authSystems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil})}
2023-12-01T07:41:31.649Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 7470f997-923c-4077-ba9a-30805aead7b2}}, :remote-addr 127.0.0.1, :start-time 179003837257583, :params {:user dinorah@boyer.info, :password password, :csrf-token 7470f997-923c-4077-ba9a-30805aead7b2}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x2dbd3074 HikariProxyConnection@767373428 wrapping org.postgresql.jdbc.PgConnection@3078874c], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=7470f997-923c-4077-ba9a-30805aead7b2, content-length 91, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x46ac1465 /127.0.0.1:3230<->/127.0.0.1:62215], :server-port 3230, :params-raw {:user dinorah@boyer.info, :password password, :csrf-token 7470f997-923c-4077-ba9a-30805aead7b2}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x753c38d4 HikariProxyConnection@1966880980 wrapping org.postgresql.jdbc.PgConnection@48d9f216], :level 1, :rollback #object[clojure.lang.Atom 0x291e74ef {:status :ready, :val false}]}, :content-length 91, :form-params {:user dinorah@boyer.info, :password password, :csrf-token 7470f997-923c-4077-ba9a-30805aead7b2}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user dinorah@boyer.info, :password password, :csrf-token 7470f997-923c-4077-ba9a-30805aead7b2}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x6de4cf28 BytesInputStream[len=91]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  7470f997-923c-4077-ba9a-30805aead7b2

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:41:31.724Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:41:31.735Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6a717566 HikariProxyPreparedStatement@1785820518 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( ?, ?, ?, ? )
RETURNING *] 1]  type:  java.util.UUID
2023-12-01T07:41:31.735Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"
2023-12-01T07:41:31.736Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 3a736ce68d52594c66eabc39067db8f417ba16b6896b3128eba9cbc4a4e3a0f0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6a717566 HikariProxyPreparedStatement@1785820518 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '0c9628b0-5d67-4e5c-a4d5-3cff45d88405'::uuid, ?, ?, ? )
RETURNING *] 2]  type:  java.lang.String
2023-12-01T07:41:31.736Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  3a736ce68d52594c66eabc39067db8f417ba16b6896b3128eba9cbc4a4e3a0f0
2023-12-01T07:41:31.736Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6a717566 HikariProxyPreparedStatement@1785820518 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '0c9628b0-5d67-4e5c-a4d5-3cff45d88405'::uuid, '3a736ce68d52594c66eabc39067db8f417ba16b6896b3128eba9cbc4a4e3a0f0', ?, ? )
RETURNING *] 3]  type:  java.lang.String
2023-12-01T07:41:31.736Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:31.737Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:jsonb {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1} #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6a717566 HikariProxyPreparedStatement@1785820518 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '0c9628b0-5d67-4e5c-a4d5-3cff45d88405'::uuid, '3a736ce68d52594c66eabc39067db8f417ba16b6896b3128eba9cbc4a4e3a0f0', 'password', ? )
RETURNING *] 4]  type:  clojure.lang.PersistentArrayMap
2023-12-01T07:41:31.738Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #object[org.postgresql.util.PGobject 0x128cfcdc {"user_agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko\/20100101 Firefox\/115.0","remote_addr":"127.0.0.1"}]
2023-12-01T07:41:31.742Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2f795c9b-0af9-4f40-9563-b1a733d875e0" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4c9b8f00 org.postgresql.jdbc.PgResultSetMetaData@4c9b8f00] 1]
2023-12-01T07:41:31.742Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2f795c9b-0af9-4f40-9563-b1a733d875e0"]
2023-12-01T07:41:31.742Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2f795c9b-0af9-4f40-9563-b1a733d875e0"
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [3a736ce68d52594c66eabc39067db8f417ba16b6896b3128eba9cbc4a4e3a0f0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x4c9b8f00 org.postgresql.jdbc.PgResultSetMetaData@4c9b8f00] 2]
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text 3a736ce68d52594c66eabc39067db8f417ba16b6896b3128eba9cbc4a4e3a0f0]
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  3a736ce68d52594c66eabc39067db8f417ba16b6896b3128eba9cbc4a4e3a0f0
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4c9b8f00 org.postgresql.jdbc.PgResultSetMetaData@4c9b8f00] 3]
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"]
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.738273000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x4c9b8f00 org.postgresql.jdbc.PgResultSetMetaData@4c9b8f00] 5]
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.738273000-00:00"]
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.738273Z"
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0x473cb9c {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x4c9b8f00 org.postgresql.jdbc.PgResultSetMetaData@4c9b8f00] 6]
2023-12-01T07:41:31.743Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0x473cb9c {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}]]
2023-12-01T07:41:31.744Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1}
2023-12-01T07:41:31.744Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x4c9b8f00 org.postgresql.jdbc.PgResultSetMetaData@4c9b8f00] 7]
2023-12-01T07:41:31.744Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text password]
2023-12-01T07:41:31.744Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:31.844Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:41:31.851Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x504cd390 HikariProxyPreparedStatement@1347212176 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:41:31.851Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:41:31.852Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text a20a4248-9736-4c62-b7e4-b42ee485ed6b #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x504cd390 HikariProxyPreparedStatement@1347212176 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:41:31.852Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  a20a4248-9736-4c62-b7e4-b42ee485ed6b
2023-12-01T07:41:31.852Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x504cd390 HikariProxyPreparedStatement@1347212176 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('a20a4248-9736-4c62-b7e4-b42ee485ed6b', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:41:31.852Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:41:31.852Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x504cd390 HikariProxyPreparedStatement@1347212176 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('a20a4248-9736-4c62-b7e4-b42ee485ed6b', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:41:31.853Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [dinorah@boyer.info #object[org.postgresql.jdbc.PgResultSetMetaData 0x7548a6a3 org.postgresql.jdbc.PgResultSetMetaData@7548a6a3] 1]
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar dinorah@boyer.info]
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  dinorah@boyer.info
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x7548a6a3 org.postgresql.jdbc.PgResultSetMetaData@7548a6a3] 2]
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus]
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7548a6a3 org.postgresql.jdbc.PgResultSetMetaData@7548a6a3] 3]
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"]
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Nicolas #object[org.postgresql.jdbc.PgResultSetMetaData 0x7548a6a3 org.postgresql.jdbc.PgResultSetMetaData@7548a6a3] 6]
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Nicolas]
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Nicolas
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7548a6a3 org.postgresql.jdbc.PgResultSetMetaData@7548a6a3] 10]
2023-12-01T07:41:31.864Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"]
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x7548a6a3 org.postgresql.jdbc.PgResultSetMetaData@7548a6a3] 11]
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x7548a6a3 org.postgresql.jdbc.PgResultSetMetaData@7548a6a3] 12]
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "2f795c9b-0af9-4f40-9563-b1a733d875e0" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7548a6a3 org.postgresql.jdbc.PgResultSetMetaData@7548a6a3] 13]
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "2f795c9b-0af9-4f40-9563-b1a733d875e0"]
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "2f795c9b-0af9-4f40-9563-b1a733d875e0"
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:31.738273000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7548a6a3 org.postgresql.jdbc.PgResultSetMetaData@7548a6a3] 14]
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:31.738273000-00:00"]
2023-12-01T07:41:31.865Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:31.738273Z"
2023-12-01T07:41:31.866Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x66410eae HikariProxyPreparedStatement@1715539630 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:41:31.866Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"
>>> authenticate::skip= nil  handler-key= :procurement
>>> authenticate::authenticated-entity {:email dinorah@boyer.info, :contracts_count 0, :lastname Nicolas, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Markus, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:41:31.738273Z", :id #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405", :user_session_id #uuid "2f795c9b-0af9-4f40-9563-b1a733d875e0", :scope_system_admin_read false, :access-rights (), :user_id #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email dinorah@boyer.info, :contracts_count 0, :lastname Nicolas, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Markus, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:41:31.738273Z", :id #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405", :user_session_id #uuid "2f795c9b-0af9-4f40-9563-b1a733d875e0", :scope_system_admin_read false, :access-rights (), :user_id #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 7470f997-923c-4077-ba9a-30805aead7b2}, leihs-user-session {:value a20a4248-9736-4c62-b7e4-b42ee485ed6b}}, :remote-addr 127.0.0.1, :start-time 179003966439083, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=7470f997-923c-4077-ba9a-30805aead7b2; leihs-user-session=a20a4248-9736-4c62-b7e4-b42ee485ed6b, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x330b8a4 /127.0.0.1:3230<->/127.0.0.1:62215], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure, :server-name localhost, :handler-key :procurement, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :procurement
2023-12-01T07:41:31.868Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"]
2023-12-01T07:41:31.869Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:41:31.869Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:41:31.870Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "0c9628b0-5d67-4e5c-a4d5-3cff45d88405"]
2023-12-01T07:41:32.732Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-12-01T07:41:32.731Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:41:32.734Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:41:32.734Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2023-12-01T07:41:32.734Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:41:32.734Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 179023686592208, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site none, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, sec-fetch-user ?1, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5650d083 /127.0.0.1:3230<->/127.0.0.1:62336], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  nil

> 1 anti-csrf-token class >  nil

> 2 anti-csrf-token-new >  fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4
2023-12-01T07:41:51.594Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4
2023-12-01T07:41:51.598Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x40015f00 HikariProxyPreparedStatement@1073831680 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:41:51.598Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "393132c8-4a0f-46bc-8da1-f64318468763" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 1]
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "393132c8-4a0f-46bc-8da1-f64318468763"]
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "393132c8-4a0f-46bc-8da1-f64318468763"
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 3]
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 4]
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 7]
2023-12-01T07:41:51.600Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:41:51.601Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:41:51.601Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:50.887296000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 15]
2023-12-01T07:41:51.601Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:50.887296000-00:00"]
2023-12-01T07:41:51.601Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:50.887296Z"
2023-12-01T07:41:51.601Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:50.887296000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 16]
2023-12-01T07:41:51.601Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:50.887296000-00:00"]
2023-12-01T07:41:51.601Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:50.887296Z"
2023-12-01T07:41:51.601Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 25]
2023-12-01T07:41:51.601Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:41:51.601Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 32]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a05cdb3e-568c-496a-85ff-03b44f8db6a8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 1]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a05cdb3e-568c-496a-85ff-03b44f8db6a8"]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a05cdb3e-568c-496a-85ff-03b44f8db6a8"
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Krysta #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 3]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Krysta]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Krysta
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Pfeffer #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 4]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Pfeffer]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Pfeffer
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [lynsey_kertzmann@klein-wehner.org #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 7]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar lynsey_kertzmann@klein-wehner.org]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  lynsey_kertzmann@klein-wehner.org
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.506646000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 15]
2023-12-01T07:41:51.602Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.506646000-00:00"]
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.506646Z"
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.506646000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 16]
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.506646000-00:00"]
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.506646Z"
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 25]
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta]
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 32]
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "5f083350-5ae4-4fba-863f-b697507d1ea0" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 1]
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"]
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 3]
2023-12-01T07:41:51.603Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Nicolas #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 4]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Nicolas]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Nicolas
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [dinorah@boyer.info #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 7]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar dinorah@boyer.info]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  dinorah@boyer.info
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.543627000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 15]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.543627000-00:00"]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.543627Z"
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.543627000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 16]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.543627000-00:00"]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.543627Z"
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus Nicolas dinorah@boyer.info    Nicolas Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 25]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus Nicolas dinorah@boyer.info    Nicolas Markus]
2023-12-01T07:41:51.604Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus Nicolas dinorah@boyer.info    Nicolas Markus
2023-12-01T07:41:51.605Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x49a8be5c org.postgresql.jdbc.PgResultSetMetaData@49a8be5c] 32]
2023-12-01T07:41:51.605Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:51.605Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:51.606Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5e6d1c74 HikariProxyPreparedStatement@1584209012 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:41:51.606Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:51.607Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "393132c8-4a0f-46bc-8da1-f64318468763" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5e6d1c74 HikariProxyPreparedStatement@1584209012 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:41:51.607Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "393132c8-4a0f-46bc-8da1-f64318468763"
2023-12-01T07:41:51.629Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x70df3254 org.postgresql.jdbc.PgResultSetMetaData@70df3254] 1]
2023-12-01T07:41:51.629Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:51.629Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:51.629Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x70df3254 org.postgresql.jdbc.PgResultSetMetaData@70df3254] 2]
2023-12-01T07:41:51.629Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:51.629Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:51.629Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x70df3254 org.postgresql.jdbc.PgResultSetMetaData@70df3254] 3]
2023-12-01T07:41:51.629Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:51.629Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:51.630Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:41:50.887296Z", :firstname "Dawna", :zip nil, :id #uuid "393132c8-4a0f-46bc-8da1-f64318468763", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:41:50.887296Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:41:51.632Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4", :name "csrf-token"}}
2023-12-01T07:41:51.632Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}}, :remote-addr 127.0.0.1, :start-time 179023810773083, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4, referer http://localhost:3230/sign-in, connection keep-alive, accept image/avif,image/webp,*/*, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x550c85dc /127.0.0.1:3230<->/127.0.0.1:62336], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:41:51.697Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:41:51.701Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x384a27a5 HikariProxyPreparedStatement@944383909 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:41:51.701Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:41:51.702Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "393132c8-4a0f-46bc-8da1-f64318468763" #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 1]
2023-12-01T07:41:51.702Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "393132c8-4a0f-46bc-8da1-f64318468763"]
2023-12-01T07:41:51.702Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "393132c8-4a0f-46bc-8da1-f64318468763"
2023-12-01T07:41:51.702Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 3]
2023-12-01T07:41:51.702Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 4]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 7]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:50.887296000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 15]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:50.887296000-00:00"]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:50.887296Z"
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:50.887296000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 16]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:50.887296000-00:00"]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:50.887296Z"
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 25]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:41:51.703Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 32]
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "a05cdb3e-568c-496a-85ff-03b44f8db6a8" #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 1]
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "a05cdb3e-568c-496a-85ff-03b44f8db6a8"]
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "a05cdb3e-568c-496a-85ff-03b44f8db6a8"
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Krysta #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 3]
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Krysta]
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Krysta
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Pfeffer #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 4]
2023-12-01T07:41:51.704Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Pfeffer]
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Pfeffer
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [lynsey_kertzmann@klein-wehner.org #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 7]
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar lynsey_kertzmann@klein-wehner.org]
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  lynsey_kertzmann@klein-wehner.org
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.506646000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 15]
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.506646000-00:00"]
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.506646Z"
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.506646000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 16]
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.506646000-00:00"]
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.506646Z"
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 25]
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta]
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Krysta Pfeffer lynsey_kertzmann@klein-wehner.org    Pfeffer Krysta
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 32]
2023-12-01T07:41:51.705Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "5f083350-5ae4-4fba-863f-b697507d1ea0" #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 1]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 3]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Nicolas #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 4]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Nicolas]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Nicolas
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [dinorah@boyer.info #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 7]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar dinorah@boyer.info]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  dinorah@boyer.info
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.543627000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 15]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.543627000-00:00"]
2023-12-01T07:41:51.706Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.543627Z"
2023-12-01T07:41:51.707Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.543627000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 16]
2023-12-01T07:41:51.707Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.543627000-00:00"]
2023-12-01T07:41:51.707Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.543627Z"
2023-12-01T07:41:51.707Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus Nicolas dinorah@boyer.info    Nicolas Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 25]
2023-12-01T07:41:51.707Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus Nicolas dinorah@boyer.info    Nicolas Markus]
2023-12-01T07:41:51.707Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus Nicolas dinorah@boyer.info    Nicolas Markus
2023-12-01T07:41:51.707Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x31a60c40 org.postgresql.jdbc.PgResultSetMetaData@31a60c40] 32]
2023-12-01T07:41:51.707Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:51.707Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:51.708Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3e190d90 HikariProxyPreparedStatement@1041829264 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:41:51.708Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:51.709Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "393132c8-4a0f-46bc-8da1-f64318468763" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3e190d90 HikariProxyPreparedStatement@1041829264 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:41:51.709Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "393132c8-4a0f-46bc-8da1-f64318468763"
2023-12-01T07:41:51.712Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7bfb882c org.postgresql.jdbc.PgResultSetMetaData@7bfb882c] 1]
2023-12-01T07:41:51.712Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:51.712Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:51.712Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7bfb882c org.postgresql.jdbc.PgResultSetMetaData@7bfb882c] 2]
2023-12-01T07:41:51.712Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:51.712Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:51.712Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7bfb882c org.postgresql.jdbc.PgResultSetMetaData@7bfb882c] 3]
2023-12-01T07:41:51.712Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:51.712Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:51.713Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:41:50.887296Z", :firstname "Dawna", :zip nil, :id #uuid "393132c8-4a0f-46bc-8da1-f64318468763", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:41:50.887296Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:41:51.714Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4", :name "csrf-token"}}
2023-12-01T07:41:51.714Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}}, :remote-addr 127.0.0.1, :start-time 179023929054208, :params {:user dinorah@boyer.info, :password nil, :csrf-token fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x4259d2d5 HikariProxyConnection@1113182933 wrapping org.postgresql.jdbc.PgConnection@1b83e15d], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4, content-length 83, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x739bd7d0 /127.0.0.1:3230<->/127.0.0.1:62336], :server-port 3230, :params-raw {:user dinorah@boyer.info, :password , :csrf-token fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x4aa9d28 HikariProxyConnection@78290216 wrapping org.postgresql.jdbc.PgConnection@772538f0], :level 1, :rollback #object[clojure.lang.Atom 0x676b13ea {:status :ready, :val false}]}, :content-length 83, :form-params {:user dinorah@boyer.info, :password nil, :csrf-token fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user dinorah@boyer.info, :password , :csrf-token fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x6b28aaa8 BytesInputStream[len=83]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:41:51.814Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:41:51.815Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dinorah@boyer.info #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x47e1fb53 HikariProxyPreparedStatement@1205992275 wrapping SELECT * FROM users  WHERE (users.org_id = ? OR users.login = ? OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:41:51.815Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dinorah@boyer.info
2023-12-01T07:41:51.816Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dinorah@boyer.info #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x47e1fb53 HikariProxyPreparedStatement@1205992275 wrapping SELECT * FROM users  WHERE (users.org_id = 'dinorah@boyer.info' OR users.login = ? OR lower(users.email) = ?)] 2]  type:  java.lang.String
2023-12-01T07:41:51.816Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dinorah@boyer.info
2023-12-01T07:41:51.816Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dinorah@boyer.info #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x47e1fb53 HikariProxyPreparedStatement@1205992275 wrapping SELECT * FROM users  WHERE (users.org_id = 'dinorah@boyer.info' OR users.login = 'dinorah@boyer.info' OR lower(users.email) = ?)] 3]  type:  java.lang.String
2023-12-01T07:41:51.816Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dinorah@boyer.info
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "5f083350-5ae4-4fba-863f-b697507d1ea0" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebe7f12 org.postgresql.jdbc.PgResultSetMetaData@7ebe7f12] 1]
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"]
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebe7f12 org.postgresql.jdbc.PgResultSetMetaData@7ebe7f12] 3]
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus]
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Nicolas #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebe7f12 org.postgresql.jdbc.PgResultSetMetaData@7ebe7f12] 4]
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Nicolas]
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Nicolas
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [dinorah@boyer.info #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebe7f12 org.postgresql.jdbc.PgResultSetMetaData@7ebe7f12] 7]
2023-12-01T07:41:51.817Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar dinorah@boyer.info]
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  dinorah@boyer.info
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.543627000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebe7f12 org.postgresql.jdbc.PgResultSetMetaData@7ebe7f12] 15]
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.543627000-00:00"]
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.543627Z"
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.543627000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebe7f12 org.postgresql.jdbc.PgResultSetMetaData@7ebe7f12] 16]
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.543627000-00:00"]
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.543627Z"
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus Nicolas dinorah@boyer.info    Nicolas Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebe7f12 org.postgresql.jdbc.PgResultSetMetaData@7ebe7f12] 25]
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus Nicolas dinorah@boyer.info    Nicolas Markus]
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus Nicolas dinorah@boyer.info    Nicolas Markus
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebe7f12 org.postgresql.jdbc.PgResultSetMetaData@7ebe7f12] 32]
2023-12-01T07:41:51.818Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:41:51.819Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:41:51.820Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6b034129 HikariProxyPreparedStatement@1795375401 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:41:51.820Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:51.820Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x6b034129 HikariProxyPreparedStatement@1795375401 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:41:51.820Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"
2023-12-01T07:41:51.822Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b7ecf7c org.postgresql.jdbc.PgResultSetMetaData@7b7ecf7c] 1]
2023-12-01T07:41:51.822Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:51.822Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:51.822Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b7ecf7c org.postgresql.jdbc.PgResultSetMetaData@7b7ecf7c] 2]
2023-12-01T07:41:51.822Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:51.822Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:51.822Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7b7ecf7c org.postgresql.jdbc.PgResultSetMetaData@7b7ecf7c] 3]
2023-12-01T07:41:51.822Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:51.822Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:51.823Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text dinorah@boyer.info #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x430eb019 HikariProxyPreparedStatement@1125036057 wrapping SELECT * FROM authentication_systems  WHERE (authentication_systems.sign_up_email_match IS NOT NULL AND ? ~* authentication_systems.sign_up_email_match)] 1]  type:  java.lang.String
2023-12-01T07:41:51.824Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  dinorah@boyer.info
2023-12-01T07:41:51.824Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected false, :address nil, :email "dinorah@boyer.info", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Nicolas", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization "local", :login nil, :searchable "Markus Nicolas dinorah@boyer.info    Nicolas Markus", :updated_at #time/instant "2023-12-01T07:41:51.543627Z", :firstname "Markus", :zip nil, :id #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:41:51.543627Z", :admin_protected false} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:41:51.825Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x2cd97077 HikariProxyPreparedStatement@752447607 wrapping SELECT * FROM authentication_systems  WHERE type = ?] 1]  type:  java.lang.String
2023-12-01T07:41:51.825Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:51.825Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x341d7d74 org.postgresql.jdbc.PgResultSetMetaData@341d7d74] 1]
2023-12-01T07:41:51.825Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:51.825Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:51.825Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x341d7d74 org.postgresql.jdbc.PgResultSetMetaData@341d7d74] 2]
2023-12-01T07:41:51.825Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:41:51.826Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:41:51.826Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x341d7d74 org.postgresql.jdbc.PgResultSetMetaData@341d7d74] 4]
2023-12-01T07:41:51.826Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:41:51.826Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:51.826Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x341d7d74 org.postgresql.jdbc.PgResultSetMetaData@341d7d74] 6]
2023-12-01T07:41:51.826Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int4 0]
2023-12-01T07:41:51.826Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:41:51.826Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x341d7d74 org.postgresql.jdbc.PgResultSetMetaData@341d7d74] 15]
2023-12-01T07:41:51.826Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:41:51.826Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:41:51.827Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x341d7d74 org.postgresql.jdbc.PgResultSetMetaData@341d7d74] 16]
2023-12-01T07:41:51.827Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:41:51.827Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:41:51.828Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user "dinorah@boyer.info", :showPasswordSection true, :passwordButtonText "password_forgot_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4", :name "csrf-token"}, :authSystems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil})}
2023-12-01T07:41:51.828Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}}, :remote-addr 127.0.0.1, :start-time 179024013547500, :params {:user dinorah@boyer.info, :password password, :csrf-token fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x61793a32 HikariProxyConnection@1635334706 wrapping org.postgresql.jdbc.PgConnection@1b83e15d], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4, content-length 91, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x49c2ba10 /127.0.0.1:3230<->/127.0.0.1:62336], :server-port 3230, :params-raw {:user dinorah@boyer.info, :password password, :csrf-token fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x3ef5b67a HikariProxyConnection@1056290426 wrapping org.postgresql.jdbc.PgConnection@772538f0], :level 1, :rollback #object[clojure.lang.Atom 0x5b5d7037 {:status :ready, :val false}]}, :content-length 91, :form-params {:user dinorah@boyer.info, :password password, :csrf-token fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user dinorah@boyer.info, :password password, :csrf-token fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x73dd69c4 BytesInputStream[len=91]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:41:51.899Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:41:51.913Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x217ba8e2 HikariProxyPreparedStatement@561752290 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( ?, ?, ?, ? )
RETURNING *] 1]  type:  java.util.UUID
2023-12-01T07:41:51.913Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"
2023-12-01T07:41:51.913Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text ba5d19b7ccb0545f1ddba14c8ddcbe8896e1d16e4e3be2f958bb9cdbd7bcc690 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x217ba8e2 HikariProxyPreparedStatement@561752290 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '5f083350-5ae4-4fba-863f-b697507d1ea0'::uuid, ?, ?, ? )
RETURNING *] 2]  type:  java.lang.String
2023-12-01T07:41:51.913Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  ba5d19b7ccb0545f1ddba14c8ddcbe8896e1d16e4e3be2f958bb9cdbd7bcc690
2023-12-01T07:41:51.914Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x217ba8e2 HikariProxyPreparedStatement@561752290 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '5f083350-5ae4-4fba-863f-b697507d1ea0'::uuid, 'ba5d19b7ccb0545f1ddba14c8ddcbe8896e1d16e4e3be2f958bb9cdbd7bcc690', ?, ? )
RETURNING *] 3]  type:  java.lang.String
2023-12-01T07:41:51.914Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:41:51.914Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:jsonb {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1} #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x217ba8e2 HikariProxyPreparedStatement@561752290 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '5f083350-5ae4-4fba-863f-b697507d1ea0'::uuid, 'ba5d19b7ccb0545f1ddba14c8ddcbe8896e1d16e4e3be2f958bb9cdbd7bcc690', 'password', ? )
RETURNING *] 4]  type:  clojure.lang.PersistentArrayMap
2023-12-01T07:41:51.914Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #object[org.postgresql.util.PGobject 0x3e5510a7 {"user_agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko\/20100101 Firefox\/115.0","remote_addr":"127.0.0.1"}]
2023-12-01T07:41:51.919Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "8464db58-6ab5-4f2b-b958-d682e560c703" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5811cab5 org.postgresql.jdbc.PgResultSetMetaData@5811cab5] 1]
2023-12-01T07:41:51.919Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "8464db58-6ab5-4f2b-b958-d682e560c703"]
2023-12-01T07:41:51.919Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "8464db58-6ab5-4f2b-b958-d682e560c703"
2023-12-01T07:41:51.919Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [ba5d19b7ccb0545f1ddba14c8ddcbe8896e1d16e4e3be2f958bb9cdbd7bcc690 #object[org.postgresql.jdbc.PgResultSetMetaData 0x5811cab5 org.postgresql.jdbc.PgResultSetMetaData@5811cab5] 2]
2023-12-01T07:41:51.919Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text ba5d19b7ccb0545f1ddba14c8ddcbe8896e1d16e4e3be2f958bb9cdbd7bcc690]
2023-12-01T07:41:51.919Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  ba5d19b7ccb0545f1ddba14c8ddcbe8896e1d16e4e3be2f958bb9cdbd7bcc690
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "5f083350-5ae4-4fba-863f-b697507d1ea0" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5811cab5 org.postgresql.jdbc.PgResultSetMetaData@5811cab5] 3]
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"]
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.914984000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5811cab5 org.postgresql.jdbc.PgResultSetMetaData@5811cab5] 5]
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.914984000-00:00"]
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.914984Z"
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0xbcca775 {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x5811cab5 org.postgresql.jdbc.PgResultSetMetaData@5811cab5] 6]
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0xbcca775 {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}]]
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1}
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x5811cab5 org.postgresql.jdbc.PgResultSetMetaData@5811cab5] 7]
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text password]
2023-12-01T07:41:51.920Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:41:51.947Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:41:51.956Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7151db8f HikariProxyPreparedStatement@1901190031 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:41:51.956Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:41:51.957Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text c867b6ae-074d-4e89-a4b6-1ac39d3b947d #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7151db8f HikariProxyPreparedStatement@1901190031 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:41:51.957Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  c867b6ae-074d-4e89-a4b6-1ac39d3b947d
2023-12-01T07:41:51.957Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7151db8f HikariProxyPreparedStatement@1901190031 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('c867b6ae-074d-4e89-a4b6-1ac39d3b947d', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:41:51.958Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:41:51.958Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7151db8f HikariProxyPreparedStatement@1901190031 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('c867b6ae-074d-4e89-a4b6-1ac39d3b947d', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:41:51.958Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:41:51.964Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [dinorah@boyer.info #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b4da017 org.postgresql.jdbc.PgResultSetMetaData@2b4da017] 1]
2023-12-01T07:41:51.964Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar dinorah@boyer.info]
2023-12-01T07:41:51.964Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  dinorah@boyer.info
2023-12-01T07:41:51.964Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Markus #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b4da017 org.postgresql.jdbc.PgResultSetMetaData@2b4da017] 2]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Markus]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Markus
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "5f083350-5ae4-4fba-863f-b697507d1ea0" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b4da017 org.postgresql.jdbc.PgResultSetMetaData@2b4da017] 3]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Nicolas #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b4da017 org.postgresql.jdbc.PgResultSetMetaData@2b4da017] 6]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Nicolas]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Nicolas
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "5f083350-5ae4-4fba-863f-b697507d1ea0" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b4da017 org.postgresql.jdbc.PgResultSetMetaData@2b4da017] 10]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b4da017 org.postgresql.jdbc.PgResultSetMetaData@2b4da017] 11]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b4da017 org.postgresql.jdbc.PgResultSetMetaData@2b4da017] 12]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:41:51.965Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "8464db58-6ab5-4f2b-b958-d682e560c703" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b4da017 org.postgresql.jdbc.PgResultSetMetaData@2b4da017] 13]
2023-12-01T07:41:51.966Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "8464db58-6ab5-4f2b-b958-d682e560c703"]
2023-12-01T07:41:51.966Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "8464db58-6ab5-4f2b-b958-d682e560c703"
2023-12-01T07:41:51.966Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:41:51.914984000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b4da017 org.postgresql.jdbc.PgResultSetMetaData@2b4da017] 14]
2023-12-01T07:41:51.966Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:41:51.914984000-00:00"]
2023-12-01T07:41:51.966Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:41:51.914984Z"
2023-12-01T07:41:51.967Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x288c69e HikariProxyPreparedStatement@42518174 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:41:51.967Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"
>>> authenticate::skip= nil  handler-key= :procurement
>>> authenticate::authenticated-entity {:email dinorah@boyer.info, :contracts_count 0, :lastname Nicolas, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Markus, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:41:51.914984Z", :id #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0", :user_session_id #uuid "8464db58-6ab5-4f2b-b958-d682e560c703", :scope_system_admin_read false, :access-rights (), :user_id #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email dinorah@boyer.info, :contracts_count 0, :lastname Nicolas, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Markus, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:41:51.914984Z", :id #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0", :user_session_id #uuid "8464db58-6ab5-4f2b-b958-d682e560c703", :scope_system_admin_read false, :access-rights (), :user_id #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4}, leihs-user-session {:value c867b6ae-074d-4e89-a4b6-1ac39d3b947d}}, :remote-addr 127.0.0.1, :start-time 179024071701541, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=fb56b2b6-44a6-44ed-b2e0-edbd3d29b5b4; leihs-user-session=c867b6ae-074d-4e89-a4b6-1ac39d3b947d, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0xab02c26 /127.0.0.1:3230<->/127.0.0.1:62336], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure, :server-name localhost, :handler-key :procurement, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :procurement
2023-12-01T07:41:51.968Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"]
2023-12-01T07:41:51.969Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:41:51.970Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:41:51.970Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "5f083350-5ae4-4fba-863f-b697507d1ea0"]
2023-12-01T07:42:02.734Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:42:02.734Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2023-12-01T07:42:02.735Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:42:02.735Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:42:02.736Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:42:02.736Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:42:02.737Z NX-41294 DEBUG [com.zaxxer.hikari.pool.PoolBase:132] - db-pool - Closing connection org.postgresql.jdbc.PgConnection@1f51f258: (connection has passed idleTimeout)
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {}, :remote-addr 127.0.0.1, :start-time 179049067793958, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site none, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, sec-fetch-user ?1, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x200c2b25 /127.0.0.1:3230<->/127.0.0.1:62507], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  nil

> 1 anti-csrf-token class >  nil

> 2 anti-csrf-token-new >  14efe45b-4c8f-49ba-acd4-22b6ae5dedc9
2023-12-01T07:42:16.975Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9
2023-12-01T07:42:16.979Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x60bf9393 HikariProxyPreparedStatement@1623167891 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:42:16.979Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "6f6ca207-6198-4b67-a854-71c467f5a521" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 1]
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "6f6ca207-6198-4b67-a854-71c467f5a521"]
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "6f6ca207-6198-4b67-a854-71c467f5a521"
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 3]
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 4]
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 7]
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:42:16.981Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.157783000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 15]
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.157783000-00:00"]
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.157783Z"
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.157783000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 16]
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.157783000-00:00"]
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.157783Z"
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 25]
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 32]
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:42:16.982Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "0dd229cd-1d24-4c71-a0ff-f5e0d556a6ef" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 1]
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "0dd229cd-1d24-4c71-a0ff-f5e0d556a6ef"]
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "0dd229cd-1d24-4c71-a0ff-f5e0d556a6ef"
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Jimmie #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 3]
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Jimmie]
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Jimmie
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Koss #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 4]
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Koss]
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Koss
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [krysta@kihn.io #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 7]
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar krysta@kihn.io]
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  krysta@kihn.io
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.877549000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 15]
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.877549000-00:00"]
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.877549Z"
2023-12-01T07:42:16.983Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.877549000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 16]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.877549000-00:00"]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.877549Z"
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Jimmie Koss krysta@kihn.io    Koss Jimmie #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 25]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Jimmie Koss krysta@kihn.io    Koss Jimmie]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Jimmie Koss krysta@kihn.io    Koss Jimmie
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 32]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 1]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 3]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 4]
2023-12-01T07:42:16.984Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 7]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.891887000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 15]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.891887000-00:00"]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.891887Z"
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.891887000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 16]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.891887000-00:00"]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.891887Z"
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 25]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 32]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:42:16.985Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "33baab6e-9a64-4ebc-a145-7200dcccdf6c" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 1]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "33baab6e-9a64-4ebc-a145-7200dcccdf6c"]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "33baab6e-9a64-4ebc-a145-7200dcccdf6c"
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Elvira #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 3]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Elvira]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Elvira
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Ehring #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 4]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Ehring]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Ehring
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [ingrid_ferry@torp.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 7]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar ingrid_ferry@torp.com]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  ingrid_ferry@torp.com
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.907326000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 15]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.907326000-00:00"]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.907326Z"
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.907326000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 16]
2023-12-01T07:42:16.986Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.907326000-00:00"]
2023-12-01T07:42:16.987Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.907326Z"
2023-12-01T07:42:16.987Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Elvira Ehring ingrid_ferry@torp.com    Ehring Elvira #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 25]
2023-12-01T07:42:16.987Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Elvira Ehring ingrid_ferry@torp.com    Ehring Elvira]
2023-12-01T07:42:16.987Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Elvira Ehring ingrid_ferry@torp.com    Ehring Elvira
2023-12-01T07:42:16.987Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2ef09154 org.postgresql.jdbc.PgResultSetMetaData@2ef09154] 32]
2023-12-01T07:42:16.987Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:42:16.987Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:42:16.988Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x45a9dcea HikariProxyPreparedStatement@1168760042 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:42:16.988Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:42:16.989Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "6f6ca207-6198-4b67-a854-71c467f5a521" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x45a9dcea HikariProxyPreparedStatement@1168760042 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:42:16.989Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "6f6ca207-6198-4b67-a854-71c467f5a521"
2023-12-01T07:42:17.008Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x742b49f9 org.postgresql.jdbc.PgResultSetMetaData@742b49f9] 1]
2023-12-01T07:42:17.008Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:42:17.008Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:42:17.008Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x742b49f9 org.postgresql.jdbc.PgResultSetMetaData@742b49f9] 2]
2023-12-01T07:42:17.008Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:42:17.009Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:42:17.009Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x742b49f9 org.postgresql.jdbc.PgResultSetMetaData@742b49f9] 3]
2023-12-01T07:42:17.009Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:42:17.009Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:42:17.009Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:42:16.157783Z", :firstname "Dawna", :zip nil, :id #uuid "6f6ca207-6198-4b67-a854-71c467f5a521", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:42:16.157783Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:42:17.010Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "14efe45b-4c8f-49ba-acd4-22b6ae5dedc9", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "14efe45b-4c8f-49ba-acd4-22b6ae5dedc9", :name "csrf-token"}}
2023-12-01T07:42:17.011Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9
>>> authenticate::skip= nil  handler-key= :not-found
>>> authenticate::authenticated-entity nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}}, :remote-addr 127.0.0.1, :start-time 179049191556416, :params {:return-to /favicon.ico}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {:return-to /favicon.ico}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=14efe45b-4c8f-49ba-acd4-22b6ae5dedc9, referer http://localhost:3230/sign-in, connection keep-alive, accept image/avif,image/webp,*/*, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest image, accept-encoding gzip, deflate, br, sec-fetch-mode no-cors}, :async-channel #object[org.httpkit.server.AsyncChannel 0x8ef0f67 /127.0.0.1:3230<->/127.0.0.1:62507], :server-port 3230, :params-raw {:return-to /favicon.ico}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {:return-to /favicon.ico}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string return-to=%2Ffavicon.ico, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  14efe45b-4c8f-49ba-acd4-22b6ae5dedc9

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:42:17.078Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:42:17.080Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text  #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x7b9e9231 HikariProxyPreparedStatement@2073989681 wrapping SELECT * FROM users  WHERE (users.org_id IS NULL OR users.login IS NULL OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:42:17.080Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "6f6ca207-6198-4b67-a854-71c467f5a521" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 1]
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "6f6ca207-6198-4b67-a854-71c467f5a521"]
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "6f6ca207-6198-4b67-a854-71c467f5a521"
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 3]
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna]
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kemmer #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 4]
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kemmer]
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kemmer
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [amelia@rosenbaum.name #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 7]
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar amelia@rosenbaum.name]
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  amelia@rosenbaum.name
2023-12-01T07:42:17.082Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.157783000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 15]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.157783000-00:00"]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.157783Z"
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.157783000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 16]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.157783000-00:00"]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.157783Z"
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 25]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 32]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "0dd229cd-1d24-4c71-a0ff-f5e0d556a6ef" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 1]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "0dd229cd-1d24-4c71-a0ff-f5e0d556a6ef"]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "0dd229cd-1d24-4c71-a0ff-f5e0d556a6ef"
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Jimmie #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 3]
2023-12-01T07:42:17.083Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Jimmie]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Jimmie
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Koss #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 4]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Koss]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Koss
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [krysta@kihn.io #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 7]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar krysta@kihn.io]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  krysta@kihn.io
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.877549000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 15]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.877549000-00:00"]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.877549Z"
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.877549000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 16]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.877549000-00:00"]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.877549Z"
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Jimmie Koss krysta@kihn.io    Koss Jimmie #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 25]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Jimmie Koss krysta@kihn.io    Koss Jimmie]
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Jimmie Koss krysta@kihn.io    Koss Jimmie
2023-12-01T07:42:17.084Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 32]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 1]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 3]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 4]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 7]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.891887000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 15]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.891887000-00:00"]
2023-12-01T07:42:17.085Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.891887Z"
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.891887000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 16]
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.891887000-00:00"]
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.891887Z"
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 25]
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 32]
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "33baab6e-9a64-4ebc-a145-7200dcccdf6c" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 1]
2023-12-01T07:42:17.086Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "33baab6e-9a64-4ebc-a145-7200dcccdf6c"]
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "33baab6e-9a64-4ebc-a145-7200dcccdf6c"
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Elvira #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 3]
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Elvira]
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Elvira
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Ehring #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 4]
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Ehring]
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Ehring
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [ingrid_ferry@torp.com #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 7]
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar ingrid_ferry@torp.com]
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  ingrid_ferry@torp.com
2023-12-01T07:42:17.087Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.907326000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 15]
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.907326000-00:00"]
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.907326Z"
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.907326000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 16]
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.907326000-00:00"]
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.907326Z"
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Elvira Ehring ingrid_ferry@torp.com    Ehring Elvira #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 25]
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Elvira Ehring ingrid_ferry@torp.com    Ehring Elvira]
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Elvira Ehring ingrid_ferry@torp.com    Ehring Elvira
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x2b473be1 org.postgresql.jdbc.PgResultSetMetaData@2b473be1] 32]
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:42:17.088Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:42:17.089Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3d3e75ea HikariProxyPreparedStatement@1027503594 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:42:17.089Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:42:17.090Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "6f6ca207-6198-4b67-a854-71c467f5a521" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x3d3e75ea HikariProxyPreparedStatement@1027503594 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:42:17.090Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "6f6ca207-6198-4b67-a854-71c467f5a521"
2023-12-01T07:42:17.093Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x5274059b org.postgresql.jdbc.PgResultSetMetaData@5274059b] 1]
2023-12-01T07:42:17.094Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:42:17.094Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:42:17.094Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x5274059b org.postgresql.jdbc.PgResultSetMetaData@5274059b] 2]
2023-12-01T07:42:17.094Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:42:17.094Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:42:17.094Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x5274059b org.postgresql.jdbc.PgResultSetMetaData@5274059b] 3]
2023-12-01T07:42:17.094Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:42:17.094Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:42:17.095Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected true, :address nil, :email "amelia@rosenbaum.name", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kemmer", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin true, :organization "local", :login nil, :searchable "Dawna Kemmer amelia@rosenbaum.name    Kemmer Dawna", :updated_at #time/instant "2023-12-01T07:42:16.157783Z", :firstname "Dawna", :zip nil, :id #uuid "6f6ca207-6198-4b67-a854-71c467f5a521", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin true, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:42:16.157783Z", :admin_protected true} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:42:17.096Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "14efe45b-4c8f-49ba-acd4-22b6ae5dedc9", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user nil, :showPasswordSection false, :passwordButtonText "password_create_button_text", :passwordLink "/forgot-password", :returnTo "/favicon.ico"}, :csrfToken {:value "14efe45b-4c8f-49ba-acd4-22b6ae5dedc9", :name "csrf-token"}}
2023-12-01T07:42:17.096Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}}, :remote-addr 127.0.0.1, :start-time 179049308062166, :params {:user chanda@ortiz.net, :password nil, :csrf-token 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x2e8c76aa HikariProxyConnection@780957354 wrapping org.postgresql.jdbc.PgConnection@3078874c], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=14efe45b-4c8f-49ba-acd4-22b6ae5dedc9, content-length 81, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x5748ab1b /127.0.0.1:3230<->/127.0.0.1:62507], :server-port 3230, :params-raw {:user chanda@ortiz.net, :password , :csrf-token 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x1dab97ed HikariProxyConnection@497784813 wrapping org.postgresql.jdbc.PgConnection@772538f0], :level 1, :rollback #object[clojure.lang.Atom 0x58181c88 {:status :ready, :val false}]}, :content-length 81, :form-params {:user chanda@ortiz.net, :password nil, :csrf-token 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user chanda@ortiz.net, :password , :csrf-token 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x15ec1807 BytesInputStream[len=81]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  14efe45b-4c8f-49ba-acd4-22b6ae5dedc9

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:42:17.193Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:42:17.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text chanda@ortiz.net #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5f52f189 HikariProxyPreparedStatement@1599271305 wrapping SELECT * FROM users  WHERE (users.org_id = ? OR users.login = ? OR lower(users.email) = ?)] 1]  type:  java.lang.String
2023-12-01T07:42:17.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  chanda@ortiz.net
2023-12-01T07:42:17.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text chanda@ortiz.net #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5f52f189 HikariProxyPreparedStatement@1599271305 wrapping SELECT * FROM users  WHERE (users.org_id = 'chanda@ortiz.net' OR users.login = ? OR lower(users.email) = ?)] 2]  type:  java.lang.String
2023-12-01T07:42:17.195Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  chanda@ortiz.net
2023-12-01T07:42:17.196Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text chanda@ortiz.net #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x5f52f189 HikariProxyPreparedStatement@1599271305 wrapping SELECT * FROM users  WHERE (users.org_id = 'chanda@ortiz.net' OR users.login = 'chanda@ortiz.net' OR lower(users.email) = ?)] 3]  type:  java.lang.String
2023-12-01T07:42:17.196Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  chanda@ortiz.net
2023-12-01T07:42:17.196Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x21ce8d32 org.postgresql.jdbc.PgResultSetMetaData@21ce8d32] 1]
2023-12-01T07:42:17.196Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"]
2023-12-01T07:42:17.196Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x21ce8d32 org.postgresql.jdbc.PgResultSetMetaData@21ce8d32] 3]
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x21ce8d32 org.postgresql.jdbc.PgResultSetMetaData@21ce8d32] 4]
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x21ce8d32 org.postgresql.jdbc.PgResultSetMetaData@21ce8d32] 7]
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.891887000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x21ce8d32 org.postgresql.jdbc.PgResultSetMetaData@21ce8d32] 15]
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.891887000-00:00"]
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.891887Z"
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:16.891887000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x21ce8d32 org.postgresql.jdbc.PgResultSetMetaData@21ce8d32] 16]
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:16.891887000-00:00"]
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:16.891887Z"
2023-12-01T07:42:17.197Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x21ce8d32 org.postgresql.jdbc.PgResultSetMetaData@21ce8d32] 25]
2023-12-01T07:42:17.198Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey]
2023-12-01T07:42:17.198Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey
2023-12-01T07:42:17.198Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [local #object[org.postgresql.jdbc.PgResultSetMetaData 0x21ce8d32 org.postgresql.jdbc.PgResultSetMetaData@21ce8d32] 32]
2023-12-01T07:42:17.198Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text local]
2023-12-01T07:42:17.198Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  local
2023-12-01T07:42:17.199Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x67215cbe HikariProxyPreparedStatement@1730239678 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> ? OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 1]  type:  java.lang.String
2023-12-01T07:42:17.199Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:42:17.199Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x67215cbe HikariProxyPreparedStatement@1730239678 wrapping SELECT authentication_systems.id, authentication_systems.type, authentication_systems.name, authentication_systems.description, authentication_systems.external_sign_in_url FROM authentication_systems, users  WHERE ((EXISTS (SELECT TRUE FROM authentication_systems_users WHERE (authentication_systems_users.user_id = users.id AND authentication_systems.id = authentication_systems_users.authentication_system_id AND (authentication_systems.type <> 'password' OR users.password_sign_in_enabled = TRUE) AND users.account_enabled = TRUE)) OR EXISTS (SELECT TRUE FROM authentication_systems asxs INNER JOIN authentication_systems_groups ON (asxs.id = authentication_systems_groups.authentication_system_id) INNER JOIN groups_users ON (authentication_systems_groups.group_id = groups_users.group_id AND authentication_systems_groups.group_id = groups_users.group_id AND groups_users.user_id = users.id) WHERE (asxs.id = authentication_systems.id AND users.account_enabled = TRUE))) AND authentication_systems.enabled = TRUE AND users.id = ?) ORDER BY authentication_systems.priority DESC, authentication_systems.id] 2]  type:  java.util.UUID
2023-12-01T07:42:17.199Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"
2023-12-01T07:42:17.201Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x29c35fdf org.postgresql.jdbc.PgResultSetMetaData@29c35fdf] 1]
2023-12-01T07:42:17.201Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:42:17.201Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:42:17.201Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x29c35fdf org.postgresql.jdbc.PgResultSetMetaData@29c35fdf] 2]
2023-12-01T07:42:17.201Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:42:17.201Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:42:17.202Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x29c35fdf org.postgresql.jdbc.PgResultSetMetaData@29c35fdf] 3]
2023-12-01T07:42:17.202Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:42:17.202Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:42:17.202Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text chanda@ortiz.net #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x426917c9 HikariProxyPreparedStatement@1114183625 wrapping SELECT * FROM authentication_systems  WHERE (authentication_systems.sign_up_email_match IS NOT NULL AND ? ~* authentication_systems.sign_up_email_match)] 1]  type:  java.lang.String
2023-12-01T07:42:17.202Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  chanda@ortiz.net
2023-12-01T07:42:17.203Z NX-41294 DEBUG [leihs.core.sign-in.back:153] - user {:system_admin_protected false, :address nil, :email "chanda@ortiz.net", :pool_protected false, :last_sign_in_at nil, :img32_url nil, :account_enabled true, :lastname "Kertzmann", :phone nil, :img_digest nil, :org_id nil, :extended_info nil, :secondary_email nil, :city nil, :settings nil, :is_admin false, :organization "local", :login nil, :searchable "Lynsey Kertzmann chanda@ortiz.net    Kertzmann Lynsey", :updated_at #time/instant "2023-12-01T07:42:16.891887Z", :firstname "Lynsey", :zip nil, :id #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b", :url nil, :password_sign_in_enabled true, :account_disabled_at nil, :is_system_admin false, :badge_id nil, :language_locale nil, :img256_url nil, :country nil, :delegator_user_id nil, :created_at #time/instant "2023-12-01T07:42:16.891887Z", :admin_protected false} user-auth-systems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil}) sign-up-auth-systems ()
2023-12-01T07:42:17.203Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x76016386 HikariProxyPreparedStatement@1979802502 wrapping SELECT * FROM authentication_systems  WHERE type = ?] 1]  type:  java.lang.String
2023-12-01T07:42:17.203Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebf2bcd org.postgresql.jdbc.PgResultSetMetaData@7ebf2bcd] 1]
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [leihs password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebf2bcd org.postgresql.jdbc.PgResultSetMetaData@7ebf2bcd] 2]
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar leihs password]
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  leihs password
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebf2bcd org.postgresql.jdbc.PgResultSetMetaData@7ebf2bcd] 4]
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar password]
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebf2bcd org.postgresql.jdbc.PgResultSetMetaData@7ebf2bcd] 6]
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int4 0]
2023-12-01T07:42:17.204Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:42:17.205Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebf2bcd org.postgresql.jdbc.PgResultSetMetaData@7ebf2bcd] 15]
2023-12-01T07:42:17.205Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:42:17.205Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:42:17.205Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2020-11-05T12:50:39.546594000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x7ebf2bcd org.postgresql.jdbc.PgResultSetMetaData@7ebf2bcd] 16]
2023-12-01T07:42:17.205Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2020-11-05T12:50:39.546594000-00:00"]
2023-12-01T07:42:17.205Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2020-11-05T12:50:39.546594Z"
2023-12-01T07:42:17.206Z NX-41294 DEBUG [leihs.core.sign-in.back:82] - sign-in-page-params {:navbar {:csrfToken {:value "14efe45b-4c8f-49ba-acd4-22b6ae5dedc9", :name "csrf-token"}, :config {:appTitle "leihs", :appColor "gray", :me nil, :subApps {}, :locales ({:name "English (UK)", :locale "en-GB", :active true, :isDefault true, :isSelected true} {:name "English (US)", :locale "en-US", :active true, :isDefault false, :isSelected false} {:name "Deutsch", :locale "de-CH", :active true, :isDefault false, :isSelected false} {:name "Züritüütsch", :locale "gsw-CH", :active true, :isDefault false, :isSelected false})}}, :authFlow {:user "chanda@ortiz.net", :showPasswordSection true, :passwordButtonText "password_forgot_button_text", :passwordLink "/forgot-password", :returnTo nil}, :csrfToken {:value "14efe45b-4c8f-49ba-acd4-22b6ae5dedc9", :name "csrf-token"}, :authSystems ({:id "password", :type "password", :name "leihs password", :description nil, :external_sign_in_url nil})}
2023-12-01T07:42:17.207Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
>>> authenticate::skip= true  handler-key= :sign-in
>>> authenticate::authenticated-entity nil

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:cookies {leihs-anti-csrf-token {:value 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}}, :remote-addr 127.0.0.1, :start-time 179049382795583, :params {:user chanda@ortiz.net, :password password, :csrf-token 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x240d1e22 HikariProxyConnection@604839458 wrapping org.postgresql.jdbc.PgConnection@3078874c], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {origin http://localhost:3230, sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, content-type application/x-www-form-urlencoded, cookie leihs-anti-csrf-token=14efe45b-4c8f-49ba-acd4-22b6ae5dedc9, content-length 89, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0xd8a7446 /127.0.0.1:3230<->/127.0.0.1:62507], :server-port 3230, :params-raw {:user chanda@ortiz.net, :password password, :csrf-token 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)], :connection #object[com.zaxxer.hikari.pool.HikariProxyConnection 0x2fe8b94 HikariProxyConnection@50236308 wrapping org.postgresql.jdbc.PgConnection@48d9f216], :level 1, :rollback #object[clojure.lang.Atom 0x3fbb463c {:status :ready, :val false}]}, :content-length 89, :form-params {:user chanda@ortiz.net, :password password, :csrf-token 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}, :websocket? false, :query-params {}, :content-type application/x-www-form-urlencoded, :form-params-raw {:user chanda@ortiz.net, :password password, :csrf-token 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}, :character-encoding utf8, :uri /sign-in, :server-name localhost, :handler-key :sign-in, :query-string nil, :body #object[org.httpkit.BytesInputStream 0x738ba3e7 BytesInputStream[len=89]], :graphql-schema #CompiledSchema<>, :handler #object[compojure.core$routes$fn__27950 0x4242ec79 compojure.core$routes$fn__27950@4242ec79], :multipart-params {}, :scheme :http, :request-method :post, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :sign-in

> 1 anti-csrf-token >  14efe45b-4c8f-49ba-acd4-22b6ae5dedc9

> 1 anti-csrf-token class >  java.lang.String

> 2 anti-csrf-token-new >  nil
2023-12-01T07:42:17.269Z NX-41294 DEBUG [leihs.core.anti-csrf.back:92] - anti-csrf-token-new => nil
2023-12-01T07:42:17.283Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4f826d3f HikariProxyPreparedStatement@1333947711 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( ?, ?, ?, ? )
RETURNING *] 1]  type:  java.util.UUID
2023-12-01T07:42:17.283Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"
2023-12-01T07:42:17.283Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text bfa35ef14a78381c1fb195a755eec236525d61464cf0252b339c6ef8f2082c76 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4f826d3f HikariProxyPreparedStatement@1333947711 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '49042cad-d024-47f4-bd8d-01acedbd6c2b'::uuid, ?, ?, ? )
RETURNING *] 2]  type:  java.lang.String
2023-12-01T07:42:17.284Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  bfa35ef14a78381c1fb195a755eec236525d61464cf0252b339c6ef8f2082c76
2023-12-01T07:42:17.284Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text password #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4f826d3f HikariProxyPreparedStatement@1333947711 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '49042cad-d024-47f4-bd8d-01acedbd6c2b'::uuid, 'bfa35ef14a78381c1fb195a755eec236525d61464cf0252b339c6ef8f2082c76', ?, ? )
RETURNING *] 3]  type:  java.lang.String
2023-12-01T07:42:17.284Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  password
2023-12-01T07:42:17.284Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:jsonb {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1} #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x4f826d3f HikariProxyPreparedStatement@1333947711 wrapping INSERT INTO user_sessions ( user_id, token_hash, authentication_system_id, meta_data ) VALUES ( '49042cad-d024-47f4-bd8d-01acedbd6c2b'::uuid, 'bfa35ef14a78381c1fb195a755eec236525d61464cf0252b339c6ef8f2082c76', 'password', ? )
RETURNING *] 4]  type:  clojure.lang.PersistentArrayMap
2023-12-01T07:42:17.285Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #object[org.postgresql.util.PGobject 0x5801106e {"user_agent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko\/20100101 Firefox\/115.0","remote_addr":"127.0.0.1"}]
2023-12-01T07:42:17.291Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "89501ff1-fcc2-4000-836a-e3ee66adeef4" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1255640d org.postgresql.jdbc.PgResultSetMetaData@1255640d] 1]
2023-12-01T07:42:17.291Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "89501ff1-fcc2-4000-836a-e3ee66adeef4"]
2023-12-01T07:42:17.291Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "89501ff1-fcc2-4000-836a-e3ee66adeef4"
2023-12-01T07:42:17.291Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [bfa35ef14a78381c1fb195a755eec236525d61464cf0252b339c6ef8f2082c76 #object[org.postgresql.jdbc.PgResultSetMetaData 0x1255640d org.postgresql.jdbc.PgResultSetMetaData@1255640d] 2]
2023-12-01T07:42:17.291Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text bfa35ef14a78381c1fb195a755eec236525d61464cf0252b339c6ef8f2082c76]
2023-12-01T07:42:17.291Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  bfa35ef14a78381c1fb195a755eec236525d61464cf0252b339c6ef8f2082c76
2023-12-01T07:42:17.291Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1255640d org.postgresql.jdbc.PgResultSetMetaData@1255640d] 3]
2023-12-01T07:42:17.291Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"]
2023-12-01T07:42:17.291Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"
2023-12-01T07:42:17.291Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:17.285142000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x1255640d org.postgresql.jdbc.PgResultSetMetaData@1255640d] 5]
2023-12-01T07:42:17.292Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:17.285142000-00:00"]
2023-12-01T07:42:17.292Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:17.285142Z"
2023-12-01T07:42:17.292Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#object[org.postgresql.util.PGobject 0xc961435 {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}] #object[org.postgresql.jdbc.PgResultSetMetaData 0x1255640d org.postgresql.jdbc.PgResultSetMetaData@1255640d] 6]
2023-12-01T07:42:17.292Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:jsonb #object[org.postgresql.util.PGobject 0xc961435 {"user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0", "remote_addr": "127.0.0.1"}]]
2023-12-01T07:42:17.292Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  {:user_agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, :remote_addr 127.0.0.1}
2023-12-01T07:42:17.292Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [password #object[org.postgresql.jdbc.PgResultSetMetaData 0x1255640d org.postgresql.jdbc.PgResultSetMetaData@1255640d] 7]
2023-12-01T07:42:17.292Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text password]
2023-12-01T07:42:17.292Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  password
2023-12-01T07:42:17.347Z NX-41294 DEBUG [leihs.core.anti-csrf.back:95] - anti-csrf-token-new => nil
2023-12-01T07:42:17.354Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:int4 0 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x44c87252 HikariProxyPreparedStatement@1153987154 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = ? WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 1]  type:  java.lang.Long
2023-12-01T07:42:17.355Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  0
2023-12-01T07:42:17.355Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text 2d2ffb95-6a1b-4582-a233-e0a2dffcaf3d #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x44c87252 HikariProxyPreparedStatement@1153987154 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest(?, ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 2]  type:  java.lang.String
2023-12-01T07:42:17.355Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  2d2ffb95-6a1b-4582-a233-e0a2dffcaf3d
2023-12-01T07:42:17.356Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text sha256 #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x44c87252 HikariProxyPreparedStatement@1153987154 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('2d2ffb95-6a1b-4582-a233-e0a2dffcaf3d', ?), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 3]  type:  java.lang.String
2023-12-01T07:42:17.356Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  sha256
2023-12-01T07:42:17.356Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:text hex #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x44c87252 HikariProxyPreparedStatement@1153987154 wrapping SELECT users.email, users.firstname, users.id, users.is_admin, users.language_locale, users.lastname, users.login, users.org_id, users.is_system_admin, users.id AS user_id, (SELECT count(*) FROM contracts WHERE contracts.user_id = users.id) AS contracts_count, (SELECT count(*) FROM access_rights WHERE access_rights.user_id = users.id) AS inventory_pool_roles_count, user_sessions.id AS user_session_id, user_sessions.created_at AS user_session_created_at, authentication_systems.external_sign_out_url AS external_sign_out_url FROM users INNER JOIN user_sessions ON users.id = user_id INNER JOIN authentication_systems ON authentication_systems.id = user_sessions.authentication_system_id INNER JOIN system_and_security_settings ON system_and_security_settings.id = 0 WHERE (user_sessions.token_hash = encode(digest('2d2ffb95-6a1b-4582-a233-e0a2dffcaf3d', 'sha256'), ?) AND now() < user_sessions.created_at + system_and_security_settings.sessions_max_lifetime_secs * interval '1 second' AND account_enabled = TRUE)] 4]  type:  java.lang.String
2023-12-01T07:42:17.357Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  hex
2023-12-01T07:42:17.404Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [chanda@ortiz.net #object[org.postgresql.jdbc.PgResultSetMetaData 0x5126d523 org.postgresql.jdbc.PgResultSetMetaData@5126d523] 1]
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar chanda@ortiz.net]
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  chanda@ortiz.net
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Lynsey #object[org.postgresql.jdbc.PgResultSetMetaData 0x5126d523 org.postgresql.jdbc.PgResultSetMetaData@5126d523] 2]
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:text Lynsey]
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Lynsey
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5126d523 org.postgresql.jdbc.PgResultSetMetaData@5126d523] 3]
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"]
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [Kertzmann #object[org.postgresql.jdbc.PgResultSetMetaData 0x5126d523 org.postgresql.jdbc.PgResultSetMetaData@5126d523] 6]
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:varchar Kertzmann]
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  Kertzmann
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5126d523 org.postgresql.jdbc.PgResultSetMetaData@5126d523] 10]
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"]
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"
2023-12-01T07:42:17.405Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x5126d523 org.postgresql.jdbc.PgResultSetMetaData@5126d523] 11]
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [0 #object[org.postgresql.jdbc.PgResultSetMetaData 0x5126d523 org.postgresql.jdbc.PgResultSetMetaData@5126d523] 12]
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:int8 0]
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  0
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#uuid "89501ff1-fcc2-4000-836a-e3ee66adeef4" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5126d523 org.postgresql.jdbc.PgResultSetMetaData@5126d523] 13]
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:uuid #uuid "89501ff1-fcc2-4000-836a-e3ee66adeef4"]
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #uuid "89501ff1-fcc2-4000-836a-e3ee66adeef4"
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - dispatch-to-convert-column [#inst "2023-12-01T07:42:17.285142000-00:00" #object[org.postgresql.jdbc.PgResultSetMetaData 0x5126d523 org.postgresql.jdbc.PgResultSetMetaData@5126d523] 14]
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - calling convert-column with:  [:timestamptz #inst "2023-12-01T07:42:17.285142000-00:00"]
2023-12-01T07:42:17.406Z NX-41294 DEBUG [pg-types.read-column:326] - converted-column:  #time/instant "2023-12-01T07:42:17.285142Z"
2023-12-01T07:42:17.407Z NX-41294 DEBUG [pg-types.sql-parameter:326] - calling convert-parameter with:  [:uuid #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b" #object[com.zaxxer.hikari.pool.HikariProxyPreparedStatement 0x19810a46 HikariProxyPreparedStatement@427887174 wrapping SELECT role, inventory_pool_id FROM access_rights  WHERE user_id = ?] 1]  type:  java.util.UUID
2023-12-01T07:42:17.407Z NX-41294 DEBUG [pg-types.sql-parameter:326] - converted-parameter:  #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"
>>> authenticate::skip= nil  handler-key= :procurement
>>> authenticate::authenticated-entity {:email chanda@ortiz.net, :contracts_count 0, :lastname Kertzmann, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Lynsey, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:42:17.285142Z", :id #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b", :user_session_id #uuid "89501ff1-fcc2-4000-836a-e3ee66adeef4", :scope_system_admin_read false, :access-rights (), :user_id #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}

>> authorize >

>> authorize::handler > #object[leihs.core.locale$wrap$fn__44344 0x4b05e2da leihs.core.locale$wrap$fn__44344@4b05e2da]

>> authorize::request > {:authenticated-entity {:email chanda@ortiz.net, :contracts_count 0, :lastname Kertzmann, :org_id nil, :scope_read true, :is_admin false, :authentication-method :session, :login nil, :scope_system_admin_write false, :scope_write true, :firstname Lynsey, :scope_admin_write false, :user_session_created_at #time/instant "2023-12-01T07:42:17.285142Z", :id #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b", :user_session_id #uuid "89501ff1-fcc2-4000-836a-e3ee66adeef4", :scope_system_admin_read false, :access-rights (), :user_id #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b", :is_system_admin false, :external_sign_out_url nil, :language_locale nil, :inventory_pool_roles_count 0, :scope_admin_read false}, :cookies {leihs-anti-csrf-token {:value 14efe45b-4c8f-49ba-acd4-22b6ae5dedc9}, leihs-user-session {:value 2d2ffb95-6a1b-4582-a233-e0a2dffcaf3d}}, :remote-addr 127.0.0.1, :start-time 179049470013833, :params {}, :settings {:email_sending_enabled false, :sessions_max_lifetime_secs 432000, :smtp_default_from_address your.lending.desk@example.com, :public_image_caching_enabled true, :sessions_force_secure false, :deliver_received_order_notifications false, :external_base_url nil, :sessions_force_uniqueness false, :email_signature Cheers,}, :tx-next #next.jdbc.default_options.DefaultOptions{:connectable #object[com.zaxxer.hikari.HikariDataSource 0x48f3df85 HikariDataSource (HikariPool-1)], :options {:builder-fn #object[next.jdbc.result_set$as_unqualified_lower_maps 0x2ecd154e next.jdbc.result_set$as_unqualified_lower_maps@2ecd154e]}}, :query-params-raw {}, :route-params nil, :headers {sec-fetch-site same-origin, host localhost:3230, user-agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0, cookie leihs-anti-csrf-token=14efe45b-4c8f-49ba-acd4-22b6ae5dedc9; leihs-user-session=2d2ffb95-6a1b-4582-a233-e0a2dffcaf3d, sec-fetch-user ?1, referer http://localhost:3230/sign-in, connection keep-alive, upgrade-insecure-requests 1, accept text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8, accept-language de,en-US;q=0.7,en;q=0.3, sec-fetch-dest document, accept-encoding gzip, deflate, br, sec-fetch-mode navigate}, :async-channel #object[org.httpkit.server.AsyncChannel 0x8042dc6 /127.0.0.1:3230<->/127.0.0.1:62507], :server-port 3230, :params-raw {}, :tx {:datasource #object[com.zaxxer.hikari.HikariDataSource 0x6e6a011f HikariDataSource (db-pool)]}, :content-length 0, :form-params {}, :websocket? false, :query-params {}, :content-type nil, :form-params-raw {}, :character-encoding utf8, :uri /procure, :server-name localhost, :handler-key :procurement, :query-string nil, :body nil, :graphql-schema #CompiledSchema<>, :handler #object[leihs.procurement.backend.html$not_found_handler 0x972e984 leihs.procurement.backend.html$not_found_handler@972e984], :multipart-params {}, :scheme :http, :request-method :get, :accept {:mime :html, :charset nil, :encoding nil, :language nil}}

>> authorize::handler-key >> :procurement
2023-12-01T07:42:17.409Z NX-41294 DEBUG [leihs.procurement.permissions.user:24] - (-> (sql/select [true :has_entry]) (sql/from :procurement_admins) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_admins WHERE user_id = CAST(? AS UUID)" #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"]
2023-12-01T07:42:17.409Z NX-41294 DEBUG [leihs.procurement.permissions.user:56] - query => ["SELECT TRUE AS has_entry FROM procurement_category_inspectors WHERE user_id IS NULL"]
2023-12-01T07:42:17.410Z NX-41294 DEBUG [leihs.procurement.permissions.user:75] - query => ["SELECT TRUE AS has_entry FROM procurement_category_viewers WHERE user_id IS NULL"]
2023-12-01T07:42:17.411Z NX-41294 DEBUG [leihs.procurement.permissions.user:83] - (-> (sql/select [true :has_entry]) (sql/from :procurement_requesters_organizations) (sql/where [:= :user_id [:cast (:user_id auth-entity) :uuid]]) sql-format) => ["SELECT TRUE AS has_entry FROM procurement_requesters_organizations WHERE user_id = CAST(? AS UUID)" #uuid "49042cad-d024-47f4-bd8d-01acedbd6c2b"]
2023-12-01T07:42:32.740Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:42:32.738Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:42:32.741Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:42:32.741Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:42:32.741Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:42:32.741Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:42:38.193Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:42:38.194Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:42:38.237Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:42:38.237Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:42:57.164Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:42:57.164Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:42:57.216Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:42:57.216Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:43:02.747Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:43:02.748Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:43:02.748Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:43:02.747Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:43:02.749Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:43:02.749Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:43:17.196Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:43:17.197Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:43:17.249Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:43:17.250Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:43:32.750Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:43:32.752Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:43:32.775Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:43:32.775Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:43:32.776Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:43:32.776Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:43:35.873Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:43:35.873Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:43:35.916Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:43:35.917Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:43:55.693Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:43:55.693Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:43:55.744Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:43:55.744Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:44:02.777Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:44:02.777Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:44:02.778Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:44:02.780Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:44:02.781Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:44:02.781Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:44:15.266Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:44:15.266Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:44:15.325Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:44:15.325Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:44:32.778Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:44:32.782Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:44:32.782Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:44:32.786Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:44:32.786Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:44:32.786Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:44:34.880Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:44:34.880Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:44:34.931Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:44:34.931Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:44:54.330Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:44:54.330Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:44:54.380Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:44:54.381Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:45:02.788Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:45:02.790Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:45:02.791Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:45:02.792Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:45:02.796Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:45:02.797Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:45:14.414Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:45:14.415Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:45:14.494Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:45:14.494Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:45:32.796Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:45:32.799Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:45:32.799Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:45:32.801Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:45:32.802Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:45:32.802Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:45:34.030Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:45:34.030Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:45:34.107Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:45:34.107Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:45:53.704Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:45:53.704Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:45:53.760Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:45:53.760Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:46:02.792Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:46:02.792Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:46:02.793Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:46:02.794Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:46:02.794Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:46:02.795Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:46:13.507Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:46:13.507Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:46:13.565Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:46:13.566Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:46:32.243Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:46:32.243Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:46:32.292Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:46:32.292Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:46:32.780Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:46:32.780Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - db-pool - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:46:32.780Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - db-pool - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:46:32.784Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:46:32.784Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:414] - HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2023-12-01T07:46:32.784Z NX-41294 DEBUG [com.zaxxer.hikari.pool.HikariPool:521] - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-12-01T07:46:52.026Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:46:52.030Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 118]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
2023-12-01T07:46:52.078Z NX-41294 WARN [leihs.procurement.utils.ring-exception:326] -   THROWABLE: clojure.lang.ExceptionInfo: Schema not initialized 
{} {}
2023-12-01T07:46:52.078Z NX-41294 DEBUG [leihs.procurement.utils.ring-exception:326] - #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
error2 #error {
 :cause Schema not initialized 
 :data {}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message Schema not initialized 
   :data {}
   :at [leihs.core.graphql$schema invokeStatic graphql.clj 13]}]
 :trace
 [[leihs.core.graphql$schema invokeStatic graphql.clj 13]
  [leihs.core.graphql$schema invoke graphql.clj 12]
  [leihs.core.graphql$wrap_with_schema$fn__17899 invoke graphql.clj 80]
  [leihs.core.routing.back$wrap_canonicalize_params_maps$fn__46933 invoke back.clj 74]
  [ring.middleware.params$wrap_params$fn__47899 invoke params.clj 75]
  [ring.middleware.multipart_params$handle_request_and_errors$fn__47856$fn__47857 invoke multipart_params.clj 135]
  [ring.middleware.multipart_params$handle_request_and_errors invokeStatic multipart_params.clj 133]
  [ring.middleware.multipart_params$handle_request_and_errors invoke multipart_params.clj 132]
  [ring.middleware.multipart_params$wrap_multipart_params$fn__47862 invoke multipart_params.clj 187]
  [leihs.core.http_cache_buster2$wrap_resource$fn__44655 invoke http_cache_buster2.clj 117]
  [leihs.procurement.routes$wrap_rewrite_uri_for_static_paths$fn__48486 invoke routes.clj 117]
  [leihs.procurement.routes$wrap_resolve_handler invokeStatic routes.clj 92]
  [leihs.procurement.routes$wrap_resolve_handler invoke routes.clj 84]
  [leihs.procurement.routes$wrap_resolve_handler$fn__48474 invoke routes.clj 85]
  [ring.middleware.accept$wrap_accept$fn__47369 invoke accept.clj 125]
  [ring.middleware.content_type$wrap_content_type$fn__46623 invoke content_type.clj 34]
  [leihs.procurement.utils.ring_exception$wrap$fn__44454 invoke ring_exception.clj 22]
  [org.httpkit.server.HttpHandler run RingHandler.java 123]
  [java.util.concurrent.Executors$RunnableAdapter call Executors.java 515]
  [java.util.concurrent.FutureTask run FutureTask.java 264]
  [java.util.concurrent.ThreadPoolExecutor runWorker ThreadPoolExecutor.java 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run ThreadPoolExecutor.java 628]
  [java.lang.Thread run Thread.java 829]]}
